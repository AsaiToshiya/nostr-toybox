<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Wiki Article</title>
    <script type="module" crossorigin>var Li=Object.defineProperty;var Di=(e,l,v)=>l in e?Li(e,l,{enumerable:!0,configurable:!0,writable:!0,value:v}):e[l]=v;var St=(e,l,v)=>Di(e,typeof l!="symbol"?l+"":l,v);(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const L of document.querySelectorAll('link[rel="modulepreload"]'))W(L);new MutationObserver(L=>{for(const ae of L)if(ae.type==="childList")for(const te of ae.addedNodes)te.tagName==="LINK"&&te.rel==="modulepreload"&&W(te)}).observe(document,{childList:!0,subtree:!0});function v(L){const ae={};return L.integrity&&(ae.integrity=L.integrity),L.referrerPolicy&&(ae.referrerPolicy=L.referrerPolicy),L.crossOrigin==="use-credentials"?ae.credentials="include":L.crossOrigin==="anonymous"?ae.credentials="omit":ae.credentials="same-origin",ae}function W(L){if(L.ep)return;L.ep=!0;const ae=v(L);fetch(L.href,ae)}})();function Mi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Pi(e){if(e.__esModule)return e;var l=e.default;if(typeof l=="function"){var v=function W(){return this instanceof W?Reflect.construct(l,arguments,this.constructor):l.apply(this,arguments)};v.prototype=l.prototype}else v={};return Object.defineProperty(v,"__esModule",{value:!0}),Object.keys(e).forEach(function(W){var L=Object.getOwnPropertyDescriptor(e,W);Object.defineProperty(v,W,L.get?L:{enumerable:!0,get:function(){return e[W]}})}),v}const Dn=globalThis||void 0||self;function Ui(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Qn={exports:{}},Lt=Qn.exports={},nr,ir;function dn(){throw new Error("setTimeout has not been defined")}function hn(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?nr=setTimeout:nr=dn}catch{nr=dn}try{typeof clearTimeout=="function"?ir=clearTimeout:ir=hn}catch{ir=hn}})();function On(e){if(nr===setTimeout)return setTimeout(e,0);if((nr===dn||!nr)&&setTimeout)return nr=setTimeout,setTimeout(e,0);try{return nr(e,0)}catch{try{return nr.call(null,e,0)}catch{return nr.call(this,e,0)}}}function Hi(e){if(ir===clearTimeout)return clearTimeout(e);if((ir===hn||!ir)&&clearTimeout)return ir=clearTimeout,clearTimeout(e);try{return ir(e)}catch{try{return ir.call(null,e)}catch{return ir.call(this,e)}}}var ar=[],Ir=!1,wr,Pr=-1;function ji(){!Ir||!wr||(Ir=!1,wr.length?ar=wr.concat(ar):Pr=-1,ar.length&&ei())}function ei(){if(!Ir){var e=On(ji);Ir=!0;for(var l=ar.length;l;){for(wr=ar,ar=[];++Pr<l;)wr&&wr[Pr].run();Pr=-1,l=ar.length}wr=null,Ir=!1,Hi(e)}}Lt.nextTick=function(e){var l=new Array(arguments.length-1);if(arguments.length>1)for(var v=1;v<arguments.length;v++)l[v-1]=arguments[v];ar.push(new ti(e,l)),ar.length===1&&!Ir&&On(ei)};function ti(e,l){this.fun=e,this.array=l}ti.prototype.run=function(){this.fun.apply(null,this.array)};Lt.title="browser";Lt.browser=!0;Lt.env={};Lt.argv=[];Lt.version="";Lt.versions={};function lr(){}Lt.on=lr;Lt.addListener=lr;Lt.once=lr;Lt.off=lr;Lt.removeListener=lr;Lt.removeAllListeners=lr;Lt.emit=lr;Lt.prependListener=lr;Lt.prependOnceListener=lr;Lt.listeners=function(e){return[]};Lt.binding=function(e){throw new Error("process.binding is not supported")};Lt.cwd=function(){return"/"};Lt.chdir=function(e){throw new Error("process.chdir is not supported")};Lt.umask=function(){return 0};var Yi=Qn.exports;const or=Ui(Yi);var ri={},Vr={};Vr.byteLength=Gi;Vr.toByteArray=Xi;Vr.fromByteArray=Qi;var sr=[],Jt=[],Ki=typeof Uint8Array<"u"?Uint8Array:Array,nn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Cr=0,Wi=nn.length;Cr<Wi;++Cr)sr[Cr]=nn[Cr],Jt[nn.charCodeAt(Cr)]=Cr;Jt[45]=62;Jt[95]=63;function ni(e){var l=e.length;if(l%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=e.indexOf("=");v===-1&&(v=l);var W=v===l?0:4-v%4;return[v,W]}function Gi(e){var l=ni(e),v=l[0],W=l[1];return(v+W)*3/4-W}function Vi(e,l,v){return(l+v)*3/4-v}function Xi(e){var l,v=ni(e),W=v[0],L=v[1],ae=new Ki(Vi(e,W,L)),te=0,le=L>0?W-4:W,ne;for(ne=0;ne<le;ne+=4)l=Jt[e.charCodeAt(ne)]<<18|Jt[e.charCodeAt(ne+1)]<<12|Jt[e.charCodeAt(ne+2)]<<6|Jt[e.charCodeAt(ne+3)],ae[te++]=l>>16&255,ae[te++]=l>>8&255,ae[te++]=l&255;return L===2&&(l=Jt[e.charCodeAt(ne)]<<2|Jt[e.charCodeAt(ne+1)]>>4,ae[te++]=l&255),L===1&&(l=Jt[e.charCodeAt(ne)]<<10|Jt[e.charCodeAt(ne+1)]<<4|Jt[e.charCodeAt(ne+2)]>>2,ae[te++]=l>>8&255,ae[te++]=l&255),ae}function Zi(e){return sr[e>>18&63]+sr[e>>12&63]+sr[e>>6&63]+sr[e&63]}function Ji(e,l,v){for(var W,L=[],ae=l;ae<v;ae+=3)W=(e[ae]<<16&16711680)+(e[ae+1]<<8&65280)+(e[ae+2]&255),L.push(Zi(W));return L.join("")}function Qi(e){for(var l,v=e.length,W=v%3,L=[],ae=16383,te=0,le=v-W;te<le;te+=ae)L.push(Ji(e,te,te+ae>le?le:te+ae));return W===1?(l=e[v-1],L.push(sr[l>>2]+sr[l<<4&63]+"==")):W===2&&(l=(e[v-2]<<8)+e[v-1],L.push(sr[l>>10]+sr[l>>4&63]+sr[l<<2&63]+"=")),L.join("")}var An={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */An.read=function(e,l,v,W,L){var ae,te,le=L*8-W-1,ne=(1<<le)-1,P=ne>>1,oe=-7,me=v?L-1:0,Se=v?-1:1,Le=e[l+me];for(me+=Se,ae=Le&(1<<-oe)-1,Le>>=-oe,oe+=le;oe>0;ae=ae*256+e[l+me],me+=Se,oe-=8);for(te=ae&(1<<-oe)-1,ae>>=-oe,oe+=W;oe>0;te=te*256+e[l+me],me+=Se,oe-=8);if(ae===0)ae=1-P;else{if(ae===ne)return te?NaN:(Le?-1:1)*(1/0);te=te+Math.pow(2,W),ae=ae-P}return(Le?-1:1)*te*Math.pow(2,ae-W)};An.write=function(e,l,v,W,L,ae){var te,le,ne,P=ae*8-L-1,oe=(1<<P)-1,me=oe>>1,Se=L===23?Math.pow(2,-24)-Math.pow(2,-77):0,Le=W?0:ae-1,je=W?1:-1,xe=l<0||l===0&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(le=isNaN(l)?1:0,te=oe):(te=Math.floor(Math.log(l)/Math.LN2),l*(ne=Math.pow(2,-te))<1&&(te--,ne*=2),te+me>=1?l+=Se/ne:l+=Se*Math.pow(2,1-me),l*ne>=2&&(te++,ne/=2),te+me>=oe?(le=0,te=oe):te+me>=1?(le=(l*ne-1)*Math.pow(2,L),te=te+me):(le=l*Math.pow(2,me-1)*Math.pow(2,L),te=0));L>=8;e[v+Le]=le&255,Le+=je,le/=256,L-=8);for(te=te<<L|le,P+=L;P>0;e[v+Le]=te&255,Le+=je,te/=256,P-=8);e[v+Le-je]|=xe*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const l=Vr,v=An,W=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=oe,e.SlowBuffer=_e,e.INSPECT_MAX_BYTES=50;const L=2147483647;e.kMaxLength=L;const{Uint8Array:ae,ArrayBuffer:te,SharedArrayBuffer:le}=globalThis;oe.TYPED_ARRAY_SUPPORT=ne(),!oe.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function ne(){try{const g=new ae(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,ae.prototype),Object.setPrototypeOf(g,u),g.foo()===42}catch{return!1}}Object.defineProperty(oe.prototype,"parent",{enumerable:!0,get:function(){if(oe.isBuffer(this))return this.buffer}}),Object.defineProperty(oe.prototype,"offset",{enumerable:!0,get:function(){if(oe.isBuffer(this))return this.byteOffset}});function P(g){if(g>L)throw new RangeError('The value "'+g+'" is invalid for option "size"');const u=new ae(g);return Object.setPrototypeOf(u,oe.prototype),u}function oe(g,u,$){if(typeof g=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return je(g)}return me(g,u,$)}oe.poolSize=8192;function me(g,u,$){if(typeof g=="string")return xe(g,u);if(te.isView(g))return Ie(g);if(g==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(se(g,te)||g&&se(g.buffer,te)||typeof le<"u"&&(se(g,le)||g&&se(g.buffer,le)))return We(g,u,$);if(typeof g=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const E=g.valueOf&&g.valueOf();if(E!=null&&E!==g)return oe.from(E,u,$);const a=Ne(g);if(a)return a;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof g[Symbol.toPrimitive]=="function")return oe.from(g[Symbol.toPrimitive]("string"),u,$);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g)}oe.from=function(g,u,$){return me(g,u,$)},Object.setPrototypeOf(oe.prototype,ae.prototype),Object.setPrototypeOf(oe,ae);function Se(g){if(typeof g!="number")throw new TypeError('"size" argument must be of type number');if(g<0)throw new RangeError('The value "'+g+'" is invalid for option "size"')}function Le(g,u,$){return Se(g),g<=0?P(g):u!==void 0?typeof $=="string"?P(g).fill(u,$):P(g).fill(u):P(g)}oe.alloc=function(g,u,$){return Le(g,u,$)};function je(g){return Se(g),P(g<0?0:Fe(g)|0)}oe.allocUnsafe=function(g){return je(g)},oe.allocUnsafeSlow=function(g){return je(g)};function xe(g,u){if((typeof u!="string"||u==="")&&(u="utf8"),!oe.isEncoding(u))throw new TypeError("Unknown encoding: "+u);const $=ye(g,u)|0;let E=P($);const a=E.write(g,u);return a!==$&&(E=E.slice(0,a)),E}function O(g){const u=g.length<0?0:Fe(g.length)|0,$=P(u);for(let E=0;E<u;E+=1)$[E]=g[E]&255;return $}function Ie(g){if(se(g,ae)){const u=new ae(g);return We(u.buffer,u.byteOffset,u.byteLength)}return O(g)}function We(g,u,$){if(u<0||g.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<u+($||0))throw new RangeError('"length" is outside of buffer bounds');let E;return u===void 0&&$===void 0?E=new ae(g):$===void 0?E=new ae(g,u):E=new ae(g,u,$),Object.setPrototypeOf(E,oe.prototype),E}function Ne(g){if(oe.isBuffer(g)){const u=Fe(g.length)|0,$=P(u);return $.length===0||g.copy($,0,0,u),$}if(g.length!==void 0)return typeof g.length!="number"||Ce(g.length)?P(0):O(g);if(g.type==="Buffer"&&Array.isArray(g.data))return O(g.data)}function Fe(g){if(g>=L)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+L.toString(16)+" bytes");return g|0}function _e(g){return+g!=g&&(g=0),oe.alloc(+g)}oe.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==oe.prototype},oe.compare=function(u,$){if(se(u,ae)&&(u=oe.from(u,u.offset,u.byteLength)),se($,ae)&&($=oe.from($,$.offset,$.byteLength)),!oe.isBuffer(u)||!oe.isBuffer($))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===$)return 0;let E=u.length,a=$.length;for(let k=0,pe=Math.min(E,a);k<pe;++k)if(u[k]!==$[k]){E=u[k],a=$[k];break}return E<a?-1:a<E?1:0},oe.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},oe.concat=function(u,$){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return oe.alloc(0);let E;if($===void 0)for($=0,E=0;E<u.length;++E)$+=u[E].length;const a=oe.allocUnsafe($);let k=0;for(E=0;E<u.length;++E){let pe=u[E];if(se(pe,ae))k+pe.length>a.length?(oe.isBuffer(pe)||(pe=oe.from(pe)),pe.copy(a,k)):ae.prototype.set.call(a,pe,k);else if(oe.isBuffer(pe))pe.copy(a,k);else throw new TypeError('"list" argument must be an Array of Buffers');k+=pe.length}return a};function ye(g,u){if(oe.isBuffer(g))return g.length;if(te.isView(g)||se(g,te))return g.byteLength;if(typeof g!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof g);const $=g.length,E=arguments.length>2&&arguments[2]===!0;if(!E&&$===0)return 0;let a=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return $;case"utf8":case"utf-8":return be(g).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $*2;case"hex":return $>>>1;case"base64":return h(g).length;default:if(a)return E?-1:be(g).length;u=(""+u).toLowerCase(),a=!0}}oe.byteLength=ye;function de(g,u,$){let E=!1;if((u===void 0||u<0)&&(u=0),u>this.length||(($===void 0||$>this.length)&&($=this.length),$<=0)||($>>>=0,u>>>=0,$<=u))return"";for(g||(g="utf8");;)switch(g){case"hex":return n(this,u,$);case"utf8":case"utf-8":return Ee(this,u,$);case"ascii":return m(this,u,$);case"latin1":case"binary":return s(this,u,$);case"base64":return F(this,u,$);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i(this,u,$);default:if(E)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase(),E=!0}}oe.prototype._isBuffer=!0;function ze(g,u,$){const E=g[u];g[u]=g[$],g[$]=E}oe.prototype.swap16=function(){const u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let $=0;$<u;$+=2)ze(this,$,$+1);return this},oe.prototype.swap32=function(){const u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let $=0;$<u;$+=4)ze(this,$,$+3),ze(this,$+1,$+2);return this},oe.prototype.swap64=function(){const u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let $=0;$<u;$+=8)ze(this,$,$+7),ze(this,$+1,$+6),ze(this,$+2,$+5),ze(this,$+3,$+4);return this},oe.prototype.toString=function(){const u=this.length;return u===0?"":arguments.length===0?Ee(this,0,u):de.apply(this,arguments)},oe.prototype.toLocaleString=oe.prototype.toString,oe.prototype.equals=function(u){if(!oe.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:oe.compare(this,u)===0},oe.prototype.inspect=function(){let u="";const $=e.INSPECT_MAX_BYTES;return u=this.toString("hex",0,$).replace(/(.{2})/g,"$1 ").trim(),this.length>$&&(u+=" ... "),"<Buffer "+u+">"},W&&(oe.prototype[W]=oe.prototype.inspect),oe.prototype.compare=function(u,$,E,a,k){if(se(u,ae)&&(u=oe.from(u,u.offset,u.byteLength)),!oe.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if($===void 0&&($=0),E===void 0&&(E=u?u.length:0),a===void 0&&(a=0),k===void 0&&(k=this.length),$<0||E>u.length||a<0||k>this.length)throw new RangeError("out of range index");if(a>=k&&$>=E)return 0;if(a>=k)return-1;if($>=E)return 1;if($>>>=0,E>>>=0,a>>>=0,k>>>=0,this===u)return 0;let pe=k-a,N=E-$;const ve=Math.min(pe,N),w=this.slice(a,k),Ge=u.slice($,E);for(let he=0;he<ve;++he)if(w[he]!==Ge[he]){pe=w[he],N=Ge[he];break}return pe<N?-1:N<pe?1:0};function fe(g,u,$,E,a){if(g.length===0)return-1;if(typeof $=="string"?(E=$,$=0):$>2147483647?$=2147483647:$<-2147483648&&($=-2147483648),$=+$,Ce($)&&($=a?0:g.length-1),$<0&&($=g.length+$),$>=g.length){if(a)return-1;$=g.length-1}else if($<0)if(a)$=0;else return-1;if(typeof u=="string"&&(u=oe.from(u,E)),oe.isBuffer(u))return u.length===0?-1:ke(g,u,$,E,a);if(typeof u=="number")return u=u&255,typeof ae.prototype.indexOf=="function"?a?ae.prototype.indexOf.call(g,u,$):ae.prototype.lastIndexOf.call(g,u,$):ke(g,[u],$,E,a);throw new TypeError("val must be string, number or Buffer")}function ke(g,u,$,E,a){let k=1,pe=g.length,N=u.length;if(E!==void 0&&(E=String(E).toLowerCase(),E==="ucs2"||E==="ucs-2"||E==="utf16le"||E==="utf-16le")){if(g.length<2||u.length<2)return-1;k=2,pe/=2,N/=2,$/=2}function ve(Ge,he){return k===1?Ge[he]:Ge.readUInt16BE(he*k)}let w;if(a){let Ge=-1;for(w=$;w<pe;w++)if(ve(g,w)===ve(u,Ge===-1?0:w-Ge)){if(Ge===-1&&(Ge=w),w-Ge+1===N)return Ge*k}else Ge!==-1&&(w-=w-Ge),Ge=-1}else for($+N>pe&&($=pe-N),w=$;w>=0;w--){let Ge=!0;for(let he=0;he<N;he++)if(ve(g,w+he)!==ve(u,he)){Ge=!1;break}if(Ge)return w}return-1}oe.prototype.includes=function(u,$,E){return this.indexOf(u,$,E)!==-1},oe.prototype.indexOf=function(u,$,E){return fe(this,u,$,E,!0)},oe.prototype.lastIndexOf=function(u,$,E){return fe(this,u,$,E,!1)};function ie(g,u,$,E){$=Number($)||0;const a=g.length-$;E?(E=Number(E),E>a&&(E=a)):E=a;const k=u.length;E>k/2&&(E=k/2);let pe;for(pe=0;pe<E;++pe){const N=parseInt(u.substr(pe*2,2),16);if(Ce(N))return pe;g[$+pe]=N}return pe}function p(g,u,$,E){return I(be(u,g.length-$),g,$,E)}function ee(g,u,$,E){return I(Te(u),g,$,E)}function q(g,u,$,E){return I(h(u),g,$,E)}function j(g,u,$,E){return I(He(u,g.length-$),g,$,E)}oe.prototype.write=function(u,$,E,a){if($===void 0)a="utf8",E=this.length,$=0;else if(E===void 0&&typeof $=="string")a=$,E=this.length,$=0;else if(isFinite($))$=$>>>0,isFinite(E)?(E=E>>>0,a===void 0&&(a="utf8")):(a=E,E=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const k=this.length-$;if((E===void 0||E>k)&&(E=k),u.length>0&&(E<0||$<0)||$>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");let pe=!1;for(;;)switch(a){case"hex":return ie(this,u,$,E);case"utf8":case"utf-8":return p(this,u,$,E);case"ascii":case"latin1":case"binary":return ee(this,u,$,E);case"base64":return q(this,u,$,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,u,$,E);default:if(pe)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),pe=!0}},oe.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function F(g,u,$){return u===0&&$===g.length?l.fromByteArray(g):l.fromByteArray(g.slice(u,$))}function Ee(g,u,$){$=Math.min(g.length,$);const E=[];let a=u;for(;a<$;){const k=g[a];let pe=null,N=k>239?4:k>223?3:k>191?2:1;if(a+N<=$){let ve,w,Ge,he;switch(N){case 1:k<128&&(pe=k);break;case 2:ve=g[a+1],(ve&192)===128&&(he=(k&31)<<6|ve&63,he>127&&(pe=he));break;case 3:ve=g[a+1],w=g[a+2],(ve&192)===128&&(w&192)===128&&(he=(k&15)<<12|(ve&63)<<6|w&63,he>2047&&(he<55296||he>57343)&&(pe=he));break;case 4:ve=g[a+1],w=g[a+2],Ge=g[a+3],(ve&192)===128&&(w&192)===128&&(Ge&192)===128&&(he=(k&15)<<18|(ve&63)<<12|(w&63)<<6|Ge&63,he>65535&&he<1114112&&(pe=he))}}pe===null?(pe=65533,N=1):pe>65535&&(pe-=65536,E.push(pe>>>10&1023|55296),pe=56320|pe&1023),E.push(pe),a+=N}return U(E)}const re=4096;function U(g){const u=g.length;if(u<=re)return String.fromCharCode.apply(String,g);let $="",E=0;for(;E<u;)$+=String.fromCharCode.apply(String,g.slice(E,E+=re));return $}function m(g,u,$){let E="";$=Math.min(g.length,$);for(let a=u;a<$;++a)E+=String.fromCharCode(g[a]&127);return E}function s(g,u,$){let E="";$=Math.min(g.length,$);for(let a=u;a<$;++a)E+=String.fromCharCode(g[a]);return E}function n(g,u,$){const E=g.length;(!u||u<0)&&(u=0),(!$||$<0||$>E)&&($=E);let a="";for(let k=u;k<$;++k)a+=Ke[g[k]];return a}function i(g,u,$){const E=g.slice(u,$);let a="";for(let k=0;k<E.length-1;k+=2)a+=String.fromCharCode(E[k]+E[k+1]*256);return a}oe.prototype.slice=function(u,$){const E=this.length;u=~~u,$=$===void 0?E:~~$,u<0?(u+=E,u<0&&(u=0)):u>E&&(u=E),$<0?($+=E,$<0&&($=0)):$>E&&($=E),$<u&&($=u);const a=this.subarray(u,$);return Object.setPrototypeOf(a,oe.prototype),a};function o(g,u,$){if(g%1!==0||g<0)throw new RangeError("offset is not uint");if(g+u>$)throw new RangeError("Trying to access beyond buffer length")}oe.prototype.readUintLE=oe.prototype.readUIntLE=function(u,$,E){u=u>>>0,$=$>>>0,E||o(u,$,this.length);let a=this[u],k=1,pe=0;for(;++pe<$&&(k*=256);)a+=this[u+pe]*k;return a},oe.prototype.readUintBE=oe.prototype.readUIntBE=function(u,$,E){u=u>>>0,$=$>>>0,E||o(u,$,this.length);let a=this[u+--$],k=1;for(;$>0&&(k*=256);)a+=this[u+--$]*k;return a},oe.prototype.readUint8=oe.prototype.readUInt8=function(u,$){return u=u>>>0,$||o(u,1,this.length),this[u]},oe.prototype.readUint16LE=oe.prototype.readUInt16LE=function(u,$){return u=u>>>0,$||o(u,2,this.length),this[u]|this[u+1]<<8},oe.prototype.readUint16BE=oe.prototype.readUInt16BE=function(u,$){return u=u>>>0,$||o(u,2,this.length),this[u]<<8|this[u+1]},oe.prototype.readUint32LE=oe.prototype.readUInt32LE=function(u,$){return u=u>>>0,$||o(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},oe.prototype.readUint32BE=oe.prototype.readUInt32BE=function(u,$){return u=u>>>0,$||o(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},oe.prototype.readBigUInt64LE=nt(function(u){u=u>>>0,dt(u,"offset");const $=this[u],E=this[u+7];($===void 0||E===void 0)&&mt(u,this.length-8);const a=$+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24,k=this[++u]+this[++u]*2**8+this[++u]*2**16+E*2**24;return BigInt(a)+(BigInt(k)<<BigInt(32))}),oe.prototype.readBigUInt64BE=nt(function(u){u=u>>>0,dt(u,"offset");const $=this[u],E=this[u+7];($===void 0||E===void 0)&&mt(u,this.length-8);const a=$*2**24+this[++u]*2**16+this[++u]*2**8+this[++u],k=this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+E;return(BigInt(a)<<BigInt(32))+BigInt(k)}),oe.prototype.readIntLE=function(u,$,E){u=u>>>0,$=$>>>0,E||o(u,$,this.length);let a=this[u],k=1,pe=0;for(;++pe<$&&(k*=256);)a+=this[u+pe]*k;return k*=128,a>=k&&(a-=Math.pow(2,8*$)),a},oe.prototype.readIntBE=function(u,$,E){u=u>>>0,$=$>>>0,E||o(u,$,this.length);let a=$,k=1,pe=this[u+--a];for(;a>0&&(k*=256);)pe+=this[u+--a]*k;return k*=128,pe>=k&&(pe-=Math.pow(2,8*$)),pe},oe.prototype.readInt8=function(u,$){return u=u>>>0,$||o(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},oe.prototype.readInt16LE=function(u,$){u=u>>>0,$||o(u,2,this.length);const E=this[u]|this[u+1]<<8;return E&32768?E|4294901760:E},oe.prototype.readInt16BE=function(u,$){u=u>>>0,$||o(u,2,this.length);const E=this[u+1]|this[u]<<8;return E&32768?E|4294901760:E},oe.prototype.readInt32LE=function(u,$){return u=u>>>0,$||o(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},oe.prototype.readInt32BE=function(u,$){return u=u>>>0,$||o(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},oe.prototype.readBigInt64LE=nt(function(u){u=u>>>0,dt(u,"offset");const $=this[u],E=this[u+7];($===void 0||E===void 0)&&mt(u,this.length-8);const a=this[u+4]+this[u+5]*2**8+this[u+6]*2**16+(E<<24);return(BigInt(a)<<BigInt(32))+BigInt($+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24)}),oe.prototype.readBigInt64BE=nt(function(u){u=u>>>0,dt(u,"offset");const $=this[u],E=this[u+7];($===void 0||E===void 0)&&mt(u,this.length-8);const a=($<<24)+this[++u]*2**16+this[++u]*2**8+this[++u];return(BigInt(a)<<BigInt(32))+BigInt(this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+E)}),oe.prototype.readFloatLE=function(u,$){return u=u>>>0,$||o(u,4,this.length),v.read(this,u,!0,23,4)},oe.prototype.readFloatBE=function(u,$){return u=u>>>0,$||o(u,4,this.length),v.read(this,u,!1,23,4)},oe.prototype.readDoubleLE=function(u,$){return u=u>>>0,$||o(u,8,this.length),v.read(this,u,!0,52,8)},oe.prototype.readDoubleBE=function(u,$){return u=u>>>0,$||o(u,8,this.length),v.read(this,u,!1,52,8)};function c(g,u,$,E,a,k){if(!oe.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>a||u<k)throw new RangeError('"value" argument is out of bounds');if($+E>g.length)throw new RangeError("Index out of range")}oe.prototype.writeUintLE=oe.prototype.writeUIntLE=function(u,$,E,a){if(u=+u,$=$>>>0,E=E>>>0,!a){const N=Math.pow(2,8*E)-1;c(this,u,$,E,N,0)}let k=1,pe=0;for(this[$]=u&255;++pe<E&&(k*=256);)this[$+pe]=u/k&255;return $+E},oe.prototype.writeUintBE=oe.prototype.writeUIntBE=function(u,$,E,a){if(u=+u,$=$>>>0,E=E>>>0,!a){const N=Math.pow(2,8*E)-1;c(this,u,$,E,N,0)}let k=E-1,pe=1;for(this[$+k]=u&255;--k>=0&&(pe*=256);)this[$+k]=u/pe&255;return $+E},oe.prototype.writeUint8=oe.prototype.writeUInt8=function(u,$,E){return u=+u,$=$>>>0,E||c(this,u,$,1,255,0),this[$]=u&255,$+1},oe.prototype.writeUint16LE=oe.prototype.writeUInt16LE=function(u,$,E){return u=+u,$=$>>>0,E||c(this,u,$,2,65535,0),this[$]=u&255,this[$+1]=u>>>8,$+2},oe.prototype.writeUint16BE=oe.prototype.writeUInt16BE=function(u,$,E){return u=+u,$=$>>>0,E||c(this,u,$,2,65535,0),this[$]=u>>>8,this[$+1]=u&255,$+2},oe.prototype.writeUint32LE=oe.prototype.writeUInt32LE=function(u,$,E){return u=+u,$=$>>>0,E||c(this,u,$,4,4294967295,0),this[$+3]=u>>>24,this[$+2]=u>>>16,this[$+1]=u>>>8,this[$]=u&255,$+4},oe.prototype.writeUint32BE=oe.prototype.writeUInt32BE=function(u,$,E){return u=+u,$=$>>>0,E||c(this,u,$,4,4294967295,0),this[$]=u>>>24,this[$+1]=u>>>16,this[$+2]=u>>>8,this[$+3]=u&255,$+4};function x(g,u,$,E,a){vt(u,E,a,g,$,7);let k=Number(u&BigInt(4294967295));g[$++]=k,k=k>>8,g[$++]=k,k=k>>8,g[$++]=k,k=k>>8,g[$++]=k;let pe=Number(u>>BigInt(32)&BigInt(4294967295));return g[$++]=pe,pe=pe>>8,g[$++]=pe,pe=pe>>8,g[$++]=pe,pe=pe>>8,g[$++]=pe,$}function S(g,u,$,E,a){vt(u,E,a,g,$,7);let k=Number(u&BigInt(4294967295));g[$+7]=k,k=k>>8,g[$+6]=k,k=k>>8,g[$+5]=k,k=k>>8,g[$+4]=k;let pe=Number(u>>BigInt(32)&BigInt(4294967295));return g[$+3]=pe,pe=pe>>8,g[$+2]=pe,pe=pe>>8,g[$+1]=pe,pe=pe>>8,g[$]=pe,$+8}oe.prototype.writeBigUInt64LE=nt(function(u,$=0){return x(this,u,$,BigInt(0),BigInt("0xffffffffffffffff"))}),oe.prototype.writeBigUInt64BE=nt(function(u,$=0){return S(this,u,$,BigInt(0),BigInt("0xffffffffffffffff"))}),oe.prototype.writeIntLE=function(u,$,E,a){if(u=+u,$=$>>>0,!a){const ve=Math.pow(2,8*E-1);c(this,u,$,E,ve-1,-ve)}let k=0,pe=1,N=0;for(this[$]=u&255;++k<E&&(pe*=256);)u<0&&N===0&&this[$+k-1]!==0&&(N=1),this[$+k]=(u/pe>>0)-N&255;return $+E},oe.prototype.writeIntBE=function(u,$,E,a){if(u=+u,$=$>>>0,!a){const ve=Math.pow(2,8*E-1);c(this,u,$,E,ve-1,-ve)}let k=E-1,pe=1,N=0;for(this[$+k]=u&255;--k>=0&&(pe*=256);)u<0&&N===0&&this[$+k+1]!==0&&(N=1),this[$+k]=(u/pe>>0)-N&255;return $+E},oe.prototype.writeInt8=function(u,$,E){return u=+u,$=$>>>0,E||c(this,u,$,1,127,-128),u<0&&(u=255+u+1),this[$]=u&255,$+1},oe.prototype.writeInt16LE=function(u,$,E){return u=+u,$=$>>>0,E||c(this,u,$,2,32767,-32768),this[$]=u&255,this[$+1]=u>>>8,$+2},oe.prototype.writeInt16BE=function(u,$,E){return u=+u,$=$>>>0,E||c(this,u,$,2,32767,-32768),this[$]=u>>>8,this[$+1]=u&255,$+2},oe.prototype.writeInt32LE=function(u,$,E){return u=+u,$=$>>>0,E||c(this,u,$,4,2147483647,-2147483648),this[$]=u&255,this[$+1]=u>>>8,this[$+2]=u>>>16,this[$+3]=u>>>24,$+4},oe.prototype.writeInt32BE=function(u,$,E){return u=+u,$=$>>>0,E||c(this,u,$,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[$]=u>>>24,this[$+1]=u>>>16,this[$+2]=u>>>8,this[$+3]=u&255,$+4},oe.prototype.writeBigInt64LE=nt(function(u,$=0){return x(this,u,$,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),oe.prototype.writeBigInt64BE=nt(function(u,$=0){return S(this,u,$,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function G(g,u,$,E,a,k){if($+E>g.length)throw new RangeError("Index out of range");if($<0)throw new RangeError("Index out of range")}function qe(g,u,$,E,a){return u=+u,$=$>>>0,a||G(g,u,$,4),v.write(g,u,$,E,23,4),$+4}oe.prototype.writeFloatLE=function(u,$,E){return qe(this,u,$,!0,E)},oe.prototype.writeFloatBE=function(u,$,E){return qe(this,u,$,!1,E)};function Je(g,u,$,E,a){return u=+u,$=$>>>0,a||G(g,u,$,8),v.write(g,u,$,E,52,8),$+8}oe.prototype.writeDoubleLE=function(u,$,E){return Je(this,u,$,!0,E)},oe.prototype.writeDoubleBE=function(u,$,E){return Je(this,u,$,!1,E)},oe.prototype.copy=function(u,$,E,a){if(!oe.isBuffer(u))throw new TypeError("argument should be a Buffer");if(E||(E=0),!a&&a!==0&&(a=this.length),$>=u.length&&($=u.length),$||($=0),a>0&&a<E&&(a=E),a===E||u.length===0||this.length===0)return 0;if($<0)throw new RangeError("targetStart out of bounds");if(E<0||E>=this.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),u.length-$<a-E&&(a=u.length-$+E);const k=a-E;return this===u&&typeof ae.prototype.copyWithin=="function"?this.copyWithin($,E,a):ae.prototype.set.call(u,this.subarray(E,a),$),k},oe.prototype.fill=function(u,$,E,a){if(typeof u=="string"){if(typeof $=="string"?(a=$,$=0,E=this.length):typeof E=="string"&&(a=E,E=this.length),a!==void 0&&typeof a!="string")throw new TypeError("encoding must be a string");if(typeof a=="string"&&!oe.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(u.length===1){const pe=u.charCodeAt(0);(a==="utf8"&&pe<128||a==="latin1")&&(u=pe)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if($<0||this.length<$||this.length<E)throw new RangeError("Out of range index");if(E<=$)return this;$=$>>>0,E=E===void 0?this.length:E>>>0,u||(u=0);let k;if(typeof u=="number")for(k=$;k<E;++k)this[k]=u;else{const pe=oe.isBuffer(u)?u:oe.from(u,a),N=pe.length;if(N===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(k=0;k<E-$;++k)this[k+$]=pe[k%N]}return this};const $t={};function lt(g,u,$){$t[g]=class extends ${constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${g}]`,this.stack,delete this.name}get code(){return g}set code(a){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:a,writable:!0})}toString(){return`${this.name} [${g}]: ${this.message}`}}}lt("ERR_BUFFER_OUT_OF_BOUNDS",function(g){return g?`${g} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),lt("ERR_INVALID_ARG_TYPE",function(g,u){return`The "${g}" argument must be of type number. Received type ${typeof u}`},TypeError),lt("ERR_OUT_OF_RANGE",function(g,u,$){let E=`The value of "${g}" is out of range.`,a=$;return Number.isInteger($)&&Math.abs($)>2**32?a=gt(String($)):typeof $=="bigint"&&(a=String($),($>BigInt(2)**BigInt(32)||$<-(BigInt(2)**BigInt(32)))&&(a=gt(a)),a+="n"),E+=` It must be ${u}. Received ${a}`,E},RangeError);function gt(g){let u="",$=g.length;const E=g[0]==="-"?1:0;for(;$>=E+4;$-=3)u=`_${g.slice($-3,$)}${u}`;return`${g.slice(0,$)}${u}`}function _t(g,u,$){dt(u,"offset"),(g[u]===void 0||g[u+$]===void 0)&&mt(u,g.length-($+1))}function vt(g,u,$,E,a,k){if(g>$||g<u){const pe=typeof u=="bigint"?"n":"";let N;throw u===0||u===BigInt(0)?N=`>= 0${pe} and < 2${pe} ** ${(k+1)*8}${pe}`:N=`>= -(2${pe} ** ${(k+1)*8-1}${pe}) and < 2 ** ${(k+1)*8-1}${pe}`,new $t.ERR_OUT_OF_RANGE("value",N,g)}_t(E,a,k)}function dt(g,u){if(typeof g!="number")throw new $t.ERR_INVALID_ARG_TYPE(u,"number",g)}function mt(g,u,$){throw Math.floor(g)!==g?(dt(g,$),new $t.ERR_OUT_OF_RANGE("offset","an integer",g)):u<0?new $t.ERR_BUFFER_OUT_OF_BOUNDS:new $t.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${u}`,g)}const bt=/[^+/0-9A-Za-z-_]/g;function Oe(g){if(g=g.split("=")[0],g=g.trim().replace(bt,""),g.length<2)return"";for(;g.length%4!==0;)g=g+"=";return g}function be(g,u){u=u||1/0;let $;const E=g.length;let a=null;const k=[];for(let pe=0;pe<E;++pe){if($=g.charCodeAt(pe),$>55295&&$<57344){if(!a){if($>56319){(u-=3)>-1&&k.push(239,191,189);continue}else if(pe+1===E){(u-=3)>-1&&k.push(239,191,189);continue}a=$;continue}if($<56320){(u-=3)>-1&&k.push(239,191,189),a=$;continue}$=(a-55296<<10|$-56320)+65536}else a&&(u-=3)>-1&&k.push(239,191,189);if(a=null,$<128){if((u-=1)<0)break;k.push($)}else if($<2048){if((u-=2)<0)break;k.push($>>6|192,$&63|128)}else if($<65536){if((u-=3)<0)break;k.push($>>12|224,$>>6&63|128,$&63|128)}else if($<1114112){if((u-=4)<0)break;k.push($>>18|240,$>>12&63|128,$>>6&63|128,$&63|128)}else throw new Error("Invalid code point")}return k}function Te(g){const u=[];for(let $=0;$<g.length;++$)u.push(g.charCodeAt($)&255);return u}function He(g,u){let $,E,a;const k=[];for(let pe=0;pe<g.length&&!((u-=2)<0);++pe)$=g.charCodeAt(pe),E=$>>8,a=$%256,k.push(a),k.push(E);return k}function h(g){return l.toByteArray(Oe(g))}function I(g,u,$,E){let a;for(a=0;a<E&&!(a+$>=u.length||a>=g.length);++a)u[a+$]=g[a];return a}function se(g,u){return g instanceof u||g!=null&&g.constructor!=null&&g.constructor.name!=null&&g.constructor.name===u.name}function Ce(g){return g!==g}const Ke=function(){const g="0123456789abcdef",u=new Array(256);for(let $=0;$<16;++$){const E=$*16;for(let a=0;a<16;++a)u[E+a]=g[$]+g[a]}return u}();function nt(g){return typeof BigInt>"u"?t:g}function t(){throw new Error("BigInt not supported")}})(ri);const Ur=ri.Buffer;/**
 * @license Asciidoctor.js 3.0.4 | MIT | https://github.com/asciidoctor/asciidoctor.js
 */(function(e){var l;if(typeof globalThis<"u"?e=globalThis:typeof Dn<"u"?e=Dn:typeof window<"u"&&(e=window),e.console==null&&(e.console={}),typeof e.console=="object"?l=e.console:l={},"log"in l||(l.log=function(){}),"warn"in l||(l.warn=l.log),typeof e.Opal<"u")return l.warn("Opal already loaded. Loading twice can cause troubles, please fix your setup."),e.Opal;var v,W,L,ae,te,le,ne,P=e.Opal={};P.global=e,P.config={missing_require_severity:"error",unsupported_features_severity:"warning",experimental_features_severity:"warning",enable_stack_trace:!0};var oe=Function.prototype.call,me=Function.prototype.bind,Se=Object.hasOwn||oe.bind(Object.prototype.hasOwnProperty),Le=Object.setPrototypeOf,je=oe.bind(Array.prototype.slice),xe=oe.bind(Array.prototype.splice),O=4,Ie=O;function We(){return Ie+=2,Ie}P.uid=We,P.id=function(h){return h.$$is_number?h*2+1:(h.$$id==null&&_e(h,"$$id",We()),h.$$id)};var Ne=P.gvars={};P.exit=function(h){Ne.DEBUG&&l.log("Exited with status "+h)},P.exceptions=[],P.pop_exception=function(){var h=P.exceptions.pop();h?(Ne["!"]=h,Ne["@"]=h.$backtrace()):Ne["!"]=Ne["@"]=v};function Fe(h,I){if(h||(h=P.Exception||Error),ne&&ne.$raise)arguments.length>2?ne.$raise(h.$new.apply(h,je(arguments,1))):ne.$raise(h,I);else throw h.$new?h.$new(I):new h(I)}function _e(h,I,se){typeof h=="string"?h[I]=se:Object.defineProperty(h,I,{value:se,enumerable:!1,configurable:!0,writable:!0})}P.prop=_e,P.defineProperty=P.prop,P.slice=je;var ye=P.truthy=function(h){return h!==!1&&v!==h&&h!==void 0&&h!==null&&(!(h instanceof Boolean)||h.valueOf()===!0)};P.falsy=function(h){return!ye(h)},P.type_error=function(h,I,se,Ce){h=h.$$class,Ce&&se?(Ce=Ce.$$class,Fe(P.TypeError,"can't convert "+h+" into "+I+" ("+h+"#"+se+" gives "+Ce+")")):Fe(P.TypeError,"no implicit conversion of "+h+" into "+I)},P.coerce_to=function(h,I,se,Ce){var Ke;return se==="to_int"&&I===P.Integer&&h.$$is_number?h<0?Math.ceil(h):Math.floor(h):se==="to_str"&&I===P.String&&h.$$is_string||P.is_a(h,I)?h:h["$respond_to?"].$$pristine&&h.$method_missing.$$pristine?(Ke=h[_t(se)],(Ke==null||Ke.$$stub)&&P.type_error(h,I),Ke.apply(h,Ce)):(h["$respond_to?"](se)||P.type_error(h,I),Ce==null&&(Ce=[]),P.send(h,se,Ce))},P.respond_to=function(h,I,se){if(h==null||!h.$$class)return!1;se=!!se;var Ce=h[I];if(h["$respond_to?"].$$pristine){if(typeof Ce=="function"&&!Ce.$$stub)return!0;if(!h["$respond_to_missing?"].$$pristine)return P.send(h,h["$respond_to_missing?"],[I.substr(1),se])}else return P.send(h,h["$respond_to?"],[I.substr(1),se])},P.trace_class=!1,P.tracers_for_class=[];function de(h){var I,se,Ce;for(I=0,se=P.tracers_for_class.length;I<se;I++)Ce=P.tracers_for_class[I],Ce.trace_object=h,Ce.block.$call(Ce)}function ze(h,I){if(h.$$autoload[I].loaded){if(h.$$autoload[I].loaded&&!h.$$autoload[I].required&&h.$$autoload[I].exception)throw h.$$autoload[I].exception}else{h.$$autoload[I].loaded=!0;try{P.Kernel.$require(h.$$autoload[I].path)}catch(se){throw h.$$autoload[I].exception=se,se}if(h.$$autoload[I].required=!0,h.$$const[I]!=null)return h.$$autoload[I].success=!0,h.$$const[I]}}function fe(h,I){if(h){if(h.$$const[I]!=null)return h.$$const[I];if(h.$$autoload&&h.$$autoload[I])return ze(h,I)}}function ke(h,I){var se,Ce,Ke;if(h.length!==0)for(se=0,Ce=h.length;se<Ce;se++){if(Ke=h[se].$$const[I],Ke!=null)return Ke;if(h[se].$$autoload&&h[se].$$autoload[I])return ze(h[se],I)}}function ie(h,I){var se,Ce,Ke;if(h!=null)for(Ke=Je(h),se=0,Ce=Ke.length;se<Ce;se++){if(Ke[se].$$const&&Se(Ke[se].$$const,I))return Ke[se].$$const[I];if(Ke[se].$$autoload&&Ke[se].$$autoload[I])return ze(Ke[se],I)}}function p(h,I){if(h==null||h.$$is_module)return ie(L,I)}function ee(h,I){return(h||L).$const_missing(I)}P.const_get_local=function(h,I,se){var Ce;if(h!=null)return h==="::"&&(h=L),!h.$$is_module&&!h.$$is_class&&Fe(P.TypeError,h.toString()+" is not a class/module"),Ce=fe(h,I),Ce!=null||se?Ce:ee(h,I)},P.const_get_qualified=function(h,I,se){var Ce,Ke,nt,t=P.const_cache_version;if(I==null)return Ce=fe(L,h),Ce??P.const_get_qualified(L,h,se);if(h!=null)return h==="::"&&(h=L),!h.$$is_module&&!h.$$is_class&&Fe(P.TypeError,h.toString()+" is not a class/module"),(Ke=h.$$const_cache)==null&&(_e(h,"$$const_cache",Object.create(null)),Ke=h.$$const_cache),nt=Ke[I],nt==null||nt[0]!==t?((Ce=fe(h,I))!=null||(Ce=ie(h,I))!=null,Ke[I]=[t,Ce]):Ce=nt[1],Ce!=null||se?Ce:ee(h,I)},P.const_cache_version=1,P.const_get_relative=function(h,I,se){var Ce=h[0],Ke,nt=P.const_cache_version,t,g;return(t=h.$$const_cache)==null&&(_e(h,"$$const_cache",Object.create(null)),t=h.$$const_cache),g=t[I],g==null||g[0]!==nt?((Ke=fe(Ce,I))!=null||(Ke=ke(h,I))!=null||(Ke=ie(Ce,I))!=null||(Ke=p(Ce,I))!=null,t[I]=[nt,Ke]):Ke=g[1],Ke!=null||se?Ke:ee(Ce,I)};function q(h,I,se){var Ce=!0;return(h==null||h==="::")&&(h=L),se.$$is_a_module&&((se.$$name==null||se.$$name===v)&&(se.$$name=I),se.$$base_module==null&&(se.$$base_module=h)),h.$$const=h.$$const||Object.create(null),(I in h.$$const||"$$autoload"in h&&I in h.$$autoload)&&(Ce=!1),h.$$const[I]=se,h.$$=h.$$const,P.const_cache_version++,h===L&&(P[I]=se),_e(h,I,se),Ce&&h.$const_added&&!h.$const_added.$$pristine&&h.$const_added(I),se}P.const_set=q,P.constants=function(h,I){I==null&&(I=!0);var se,Ce=[h],Ke,nt,t={},g;for(I&&(Ce=Ce.concat(Je(h))),I&&h.$$is_module&&(Ce=Ce.concat([P.Object]).concat(Je(P.Object))),Ke=0,nt=Ce.length;Ke<nt&&(se=Ce[Ke],!(h!==L&&se==L));Ke++){for(g in se.$$const)t[g]=!0;if(se.$$autoload)for(g in se.$$autoload)t[g]=!0}return Object.keys(t)},P.const_remove=function(h,I){if(P.const_cache_version++,h.$$const[I]!=null){var se=h.$$const[I];return delete h.$$const[I],se}if(h.$$autoload&&h.$$autoload[I])return delete h.$$autoload[I],v;Fe(P.NameError,"constant "+h+"::"+h.$name()+" not defined")},P.const_get_relative_factory=function(h){return function(I,se){return P.$$(h,I,se)}},P.$$=P.const_get_relative,P.$$$=P.const_get_qualified,P.$r=P.const_get_relative_factory;function j(h,I,se){var Ce;if(I!=null&&I.$$bridge?Ce=function(){var g=je(arguments),u=new(me.apply(I.$$constructor,[null].concat(g)));return Le(u,Ce.$$prototype),u}:Ce=function(){},h&&h!==v&&_e(Ce,"displayName","::"+h),_e(Ce,"$$name",h),_e(Ce,"$$constructor",Ce),_e(Ce,"$$prototype",Ce.prototype),_e(Ce,"$$const",{}),_e(Ce,"$$is_class",!0),_e(Ce,"$$is_a_module",!0),_e(Ce,"$$super",I),_e(Ce,"$$cvars",{}),_e(Ce,"$$own_included_modules",[]),_e(Ce,"$$own_prepended_modules",[]),_e(Ce,"$$ancestors",[]),_e(Ce,"$$ancestors_cache_version",null),_e(Ce,"$$subclasses",[]),_e(Ce.$$prototype,"$$class",Ce),P.Class&&Le(Ce,P.Class.prototype),I!=null){if(Le(Ce.$$prototype,I.$$prototype),se!==!0)if(typeof WeakRef<"u"){var Ke,nt,t=[];for(Ke=0;Ke<I.$$subclasses.length;Ke++)nt=I.$$subclasses[Ke],nt.deref()!==void 0&&t.push(nt);t.push(new WeakRef(Ce)),I.$$subclasses=t}else I.$$subclasses.push(Ce);I.$$meta&&P.build_class_singleton_class(Ce)}return Ce}P.allocate_class=j;function F(h,I){var se=fe(h,I);if(se)return se.$$is_class||Fe(P.TypeError,I+" is not a class"),se}function Ee(h,I){h.$$super!==I&&Fe(P.TypeError,"superclass mismatch for class "+h.$$name)}P.klass=function(h,I,se){var Ce;h==null||h=="::"?h=L:!h.$$is_class&&!h.$$is_module&&(h=h.$$class),I!=null&&(!I.hasOwnProperty||I.hasOwnProperty&&!I.hasOwnProperty("$$is_class"))&&(I.constructor&&I.constructor.name=="Function"?(Ce=I,I=L):Fe(P.TypeError,"superclass must be a Class ("+(I.constructor&&(I.constructor.name||I.constructor.$$name)||typeof I)+" given)"));var Ke=F(h,se);return Ke!=null?I&&Ee(Ke,I):(I==null&&(I=L),Ke=j(se,I),q(h,se,Ke),I.$inherited&&I.$inherited(Ke),Ce&&P.bridge(Ce,Ke)),P.trace_class&&de(Ke),Ke};function re(h){var I=function(){},se=I;return h&&_e(I,"displayName",h+".constructor"),_e(se,"$$name",h),_e(se,"$$prototype",I.prototype),_e(se,"$$const",{}),_e(se,"$$is_module",!0),_e(se,"$$is_a_module",!0),_e(se,"$$cvars",{}),_e(se,"$$iclasses",[]),_e(se,"$$own_included_modules",[]),_e(se,"$$own_prepended_modules",[]),_e(se,"$$ancestors",[se]),_e(se,"$$ancestors_cache_version",null),Le(se,P.Module.prototype),se}P.allocate_module=re;function U(h,I){var se=fe(h,I);return se==null&&h===L&&(se=ie(L,I)),se&&!se.$$is_module&&se!==L&&Fe(P.TypeError,I+" is not a module"),se}P.module=function(h,I){var se;return h==null||h=="::"?h=L:!h.$$is_class&&!h.$$is_module&&(h=h.$$class),se=U(h,I),se==null&&(se=re(I),q(h,I,se)),P.trace_class&&de(se),se},P.get_singleton_class=function(h){return h.$$is_number&&Fe(P.TypeError,"can't define singleton"),h.$$meta?h.$$meta:h.hasOwnProperty("$$is_class")?P.build_class_singleton_class(h):h.hasOwnProperty("$$is_module")?P.build_module_singleton_class(h):P.build_object_singleton_class(h)};function m(h,I){h.hasOwnProperty("$$meta")?h.$$meta=I:_e(h,"$$meta",I),h.$$frozen?h.$$meta.$freeze():Le(h,I.$$prototype)}P.build_class_singleton_class=function(h){if(h.$$meta)return h.$$meta;var I=h===W?te:P.get_singleton_class(h.$$super),se=j(null,I,!0);return _e(se,"$$is_singleton",!0),_e(se,"$$singleton_of",h),m(h,se),_e(h,"$$class",P.Class),se},P.build_module_singleton_class=function(h){if(h.$$meta)return h.$$meta;var I=j(null,P.Module,!0);return _e(I,"$$is_singleton",!0),_e(I,"$$singleton_of",h),m(h,I),_e(h,"$$class",P.Module),I},P.build_object_singleton_class=function(h){var I=h.$$class,se=j(v,I,!0);return _e(se,"$$is_singleton",!0),_e(se,"$$singleton_of",h),delete se.$$prototype.$$class,m(h,se),se},P.is_method=function(h){return h[0]==="$"&&h[1]!=="$"},P.instance_methods=function(h){for(var I=[],se=[],Ce=Je(h),Ke=0,nt=Ce.length;Ke<nt;Ke++){var t=Ce[Ke],g=t.$$prototype;g.hasOwnProperty("$$dummy")&&(g=g.$$define_methods_on);for(var u=Object.getOwnPropertyNames(g),$=0,E=u.length;$<E;$++){var a=u[$];if(P.is_method(a)){var k=a.slice(1),pe=g[a];pe.$$stub&&I.indexOf(k)===-1&&I.push(k),!pe.$$stub&&se.indexOf(k)===-1&&I.indexOf(k)===-1&&se.push(k)}}}return se},P.own_instance_methods=function(h){var I=[],se=h.$$prototype;se.hasOwnProperty("$$dummy")&&(se=se.$$define_methods_on);for(var Ce=Object.getOwnPropertyNames(se),Ke=0,nt=Ce.length;Ke<nt;Ke++){var t=Ce[Ke];if(P.is_method(t)){var g=se[t];if(!g.$$stub){var u=t.slice(1);I.push(u)}}}return I},P.methods=function(h){return P.instance_methods(h.$$meta||h.$$class)},P.own_methods=function(h){return h.$$meta?P.own_instance_methods(h.$$meta):[]},P.receiver_methods=function(h){var I=P.get_singleton_class(h),se=P.own_instance_methods(I),Ce=P.own_instance_methods(I.$$super);return se.concat(Ce)},P.class_variables=function(h){var I=Je(h),se,Ce=I.length,Ke={};for(se=Ce-1;se>=0;se--){var nt=I[se];for(var t in nt.$$cvars)Ke[t]=nt.$$cvars[t]}return Ke},P.class_variable_set=function(h,I,se){var Ce=Je(h),Ke,nt=Ce.length;for(Ke=nt-2;Ke>=0;Ke--){var t=Ce[Ke];if(Se(t.$$cvars,I))return t.$$cvars[I]=se,se}return h.$$cvars[I]=se,se},P.class_variable_get=function(h,I,se){if(Se(h.$$cvars,I))return h.$$cvars[I];var Ce=Je(h),Ke,nt=Ce.length;for(Ke=0;Ke<nt;Ke++){var t=Ce[Ke];if(Se(t.$$cvars,I))return t.$$cvars[I]}return se||Fe(P.NameError,"uninitialized class variable "+I+" in "+h.$name()),v};function s(h){return h.hasOwnProperty("$$iclass")&&h.hasOwnProperty("$$root")}function n(h){for(var I=[],se,Ce=Object.getPrototypeOf(h.$$prototype);Ce&&!Ce.hasOwnProperty("$$class");)se=G(Ce),se&&I.push(se),Ce=Object.getPrototypeOf(Ce);return I}function i(h){var I=[],se,Ce=Object.getPrototypeOf(h.$$prototype);if(h.$$prototype.hasOwnProperty("$$dummy"))for(;Ce&&Ce!==h.$$prototype.$$define_methods_on;)se=G(Ce),se&&I.push(se),Ce=Object.getPrototypeOf(Ce);return I}P.append_features=function(h,I){var se=Je(h),Ce=[];se.indexOf(I)!==-1&&Fe(P.ArgumentError,"cyclic include detected");for(var Ke=0,nt=se.length;Ke<nt;Ke++){var t=se[Ke],g=c(t);_e(g,"$$included",!0),Ce.push(g)}var u=Je(I),$=S(Ce),E,a;if(u.indexOf(h)===-1)E=I.$$prototype,a=Object.getPrototypeOf(I.$$prototype);else{for(var k=I.$$prototype,pe=Object.getPrototypeOf(k);pe!=null&&!(pe.$$module===h&&s(pe));)k=pe,pe=Object.getPrototypeOf(pe);if(pe){for(var N=Object.getPrototypeOf(pe);N.hasOwnProperty("$$iclass")&&!s(N);)N=Object.getPrototypeOf(N);E=k,a=N}else E=I.$$prototype,a=Object.getPrototypeOf(I.$$prototype)}Le(E,$.first),Le($.last,a),I.$$own_included_modules=n(I),P.const_cache_version++},P.prepend_features=function(h,I){var se=Je(h),Ce=[];se.indexOf(I)!==-1&&Fe(P.ArgumentError,"cyclic prepend detected");for(var Ke=0,nt=se.length;Ke<nt;Ke++){var t=se[Ke],g=c(t);_e(g,"$$prepended",!0),Ce.push(g)}var u=S(Ce),$=I.$$prototype,E=Object.getPrototypeOf($),a,k,pe;$.hasOwnProperty("$$dummy")?a=$.$$define_methods_on:(a=x(I),o(I),_e($,"$$dummy",!0),_e($,"$$define_methods_on",a),Le($,a),Le(a,E));var N=Je(I);if(N.indexOf(h)===-1)for(k=$,pe=Object.getPrototypeOf($);pe!=null&&!(pe.hasOwnProperty("$$root")||pe===a||!pe.hasOwnProperty("$$iclass"));)pe=Object.getPrototypeOf(pe);else Fe(P.RuntimeError,"Prepending a module multiple times is not supported");Le(k,u.first),Le(u.last,pe),I.$$own_prepended_modules=i(I),P.const_cache_version++};function o(h){for(var I=h.$$prototype,se=Object.getOwnPropertyNames(I),Ce=0;Ce<se.length;Ce++){var Ke=se[Ce];P.is_method(Ke)&&delete I[Ke]}}function c(h){var I=x(h);return h.$$is_module&&h.$$iclasses.push(I),I}function x(h){var I={},se=h.$$prototype;se.hasOwnProperty("$$dummy")&&(se=se.$$define_methods_on);var Ce=Object.getOwnPropertyNames(se),Ke=Ce.length,nt;for(nt=0;nt<Ke;nt++){var t=Ce[nt];_e(I,t,se[t])}return _e(I,"$$iclass",!0),_e(I,"$$module",h),I}function S(h){var I=h.length,se=h[0];if(_e(se,"$$root",!0),I===1)return{first:se,last:se};for(var Ce=se,Ke=1;Ke<I;Ke++){var nt=h[Ke];Le(Ce,nt),Ce=nt}return{first:h[0],last:h[I-1]}}P.bridge=function(h,I){h.hasOwnProperty("$$bridge")&&Fe(P.ArgumentError,"already bridged"),_e(h,"$$bridge",I),Le(h.prototype,(I.$$super||P.Object).$$prototype),_e(I,"$$prototype",h.prototype),_e(I.$$prototype,"$$class",I),_e(I,"$$constructor",h),_e(I,"$$bridge",!0)};function G(h){if(!h.hasOwnProperty("$$dummy")){if(h.hasOwnProperty("$$iclass"))return h.$$module;if(h.hasOwnProperty("$$class"))return h.$$class}}function qe(h){return h.$$own_prepended_modules.concat([h]).concat(h.$$own_included_modules)}function Je(h){if(!h)return[];if(h.$$ancestors_cache_version===P.const_cache_version)return h.$$ancestors;var I=[],se,Ce,Ke;for(se=0,Ce=qe(h),Ke=Ce.length;se<Ke;se++)I.push(Ce[se]);if(h.$$super)for(se=0,Ce=Je(h.$$super),Ke=Ce.length;se<Ke;se++)I.push(Ce[se]);return h.$$ancestors_cache_version=P.const_cache_version,h.$$ancestors=I,I}P.ancestors=Je,P.included_modules=function(h){for(var I=[],se=null,Ce=Object.getPrototypeOf(h.$$prototype);Ce&&Object.getPrototypeOf(Ce);Ce=Object.getPrototypeOf(Ce))se=G(Ce),se&&se.$$is_module&&Ce.$$iclass&&Ce.$$included&&I.push(se);return I},P.add_stubs=function(h){var I=P.BasicObject.$$prototype,se,Ce;h=h.split(",");for(var Ke=0,nt=h.length;Ke<nt;Ke++)se=_t(h[Ke]),Ce=I[se],(Ce==null||Ce.$$stub)&&P.add_stub_for(I,se)},P.add_stub_for=function(h,I){_e(h,I,P.stub_for(I))},P.stub_for=function(h){function I(){this.$method_missing.$$p=I.$$p,I.$$p=null;for(var se=new Array(arguments.length),Ce=0,Ke=se.length;Ce<Ke;Ce++)se[Ce]=arguments[Ce];return this.$method_missing.apply(this,[h.slice(1)].concat(se))}return I.$$stub=!0,I},P.ac=function(h,I,se,Ce){var Ke="";se.$$is_a_module?Ke+=se.$$name+".":Ke+=se.$$class.$$name+"#",Ke+=Ce,Fe(P.ArgumentError,"["+Ke+"] wrong number of arguments (given "+h+", expected "+I+")")},P.block_ac=function(h,I,se){var Ce="`block in "+se+"'";Fe(P.ArgumentError,Ce+": wrong number of arguments (given "+h+", expected "+I+")")};function $t(h){return h.hasOwnProperty("$$meta")&&h.$$meta!==null?Je(h.$$meta):Je(h.$$class)}P.find_super=function(h,I,se,Ce,Ke){var nt=_t(I),t,g;t=$t(h);for(var u=t.indexOf(se.$$owner),$=u+1;$<t.length;$++){var E=t[$],a=E.$$prototype;if(a.hasOwnProperty("$$dummy")&&(a=a.$$define_methods_on),a.hasOwnProperty(nt)){g=a[nt];break}}return!Ce&&g&&g.$$stub&&h.$method_missing.$$pristine&&Fe(P.NoMethodError,"super: no superclass method `"+I+"' for "+h,I),g.$$stub&&!Ke?null:g},P.find_block_super=function(h,I,se,Ce,Ke){var nt=I;return se||Fe(P.RuntimeError,"super called outside of method"),Ke&&se.$$define_meth&&Fe(P.RuntimeError,"implicit argument passing of super from method defined by define_method() is not supported. Specify all arguments explicitly"),se.$$def&&(nt=se.$$jsid),P.find_super(h,nt,se,Ce)},P.find_super_dispatcher=P.find_super,P.find_iter_super_dispatcher=P.find_block_super,P.yield1=function(h,I){typeof h!="function"&&Fe(P.LocalJumpError,"no block given");var se=h.$$has_top_level_mlhs_arg,Ce=h.$$has_trailing_comma_in_args;return(h.length>1||(se||Ce)&&h.length===1)&&(I=P.to_ary(I)),(h.length>1||Ce&&h.length===1)&&I.$$is_array?h.apply(null,I):h(I)},P.yieldX=function(h,I){if(typeof h!="function"&&Fe(P.LocalJumpError,"no block given"),h.length>1&&I.length===1&&I[0].$$is_array)return h.apply(null,I[0]);if(!I.$$is_array){for(var se=new Array(I.length),Ce=0,Ke=se.length;Ce<Ke;Ce++)se[Ce]=I[Ce];return h.apply(null,se)}return h.apply(null,I)},P.rescue=function(h,I){for(var se=0;se<I.length;se++){var Ce=I[se];if(Ce.$$is_array){var Ke=P.rescue(h,Ce);if(Ke)return Ke}else if(Ce===P.JS.Error||Ce["$==="](h))return Ce}return null},P.is_a=function(h,I){if(I!=null&&h.$$meta===I||h.$$class===I)return!0;if(h.$$is_number&&I.$$is_number_class)return I.$$is_integer_class?h%1===0:!0;var se=Je(h.$$is_class?P.get_singleton_class(h):h.$$meta||h.$$class);return se.indexOf(I)!==-1},P.to_hash=function(h){if(h.$$is_hash)return h;if(h["$respond_to?"]("to_hash",!0)){var I=h.$to_hash();if(I.$$is_hash)return I;Fe(P.TypeError,"Can't convert "+h.$$class+" to Hash ("+h.$$class+"#to_hash gives "+I.$$class+")")}else Fe(P.TypeError,"no implicit conversion of "+h.$$class+" into Hash")},P.to_ary=function(h){if(h.$$is_array)return h;if(h["$respond_to?"]("to_ary",!0)){var I=h.$to_ary();if(I===v)return[h];if(I.$$is_array)return I;Fe(P.TypeError,"Can't convert "+h.$$class+" to Array ("+h.$$class+"#to_ary gives "+I.$$class+")")}else return[h]},P.to_a=function(h){if(h.$$is_array)return h.slice();if(h["$respond_to?"]("to_a",!0)){var I=h.$to_a();if(I===v)return[h];if(I.$$is_array)return I;Fe(P.TypeError,"Can't convert "+h.$$class+" to Array ("+h.$$class+"#to_a gives "+I.$$class+")")}else return[h]},P.extract_kwargs=function(h){var I=h[h.length-1];if(I!=null&&P.respond_to(I,"$to_hash",!0))return xe(h,h.length-1),I},P.kwrestargs=function(h,I){var se=[],Ce={},Ke,nt=h.$$smap;for(Ke in nt)I[Ke]||(se.push(Ke),Ce[Ke]=nt[Ke]);return P.hash2(se,Ce)};function lt(h,I){typeof I=="number"?h.$$arity=I:typeof I=="object"&&Object.assign(h,I)}var gt={};function _t(h){return gt[h]||(gt[h]="$"+h)}P.jsid=_t,P.send=function(h,I,se,Ce,Ke){var nt;return typeof I=="function"?(nt=I,I=null):typeof I=="string"?nt=h[_t(I)]:Fe(P.NameError,"Passed method should be a string or a function"),P.send2(h,nt,I,se,Ce,Ke)},P.send2=function(h,I,se,Ce,Ke,nt){return I==null&&se!=null&&h.$method_missing&&(I=h.$method_missing,Ce=[se].concat(Ce)),lt(Ke,nt),typeof Ke=="function"&&(I.$$p=Ke),I.apply(h,Ce)},P.refined_send=function(h,I,se,Ce,Ke,nt){var t,g,u,$,E,a,k,pe,N,ve;for($=$t(I),t=0;t<$.length;t++)for(E=P.id($[t]),g=0;g<h.length;g++)for(a=h[g],u=a.length-1;u>=0;u--)if(k=a[u],!(typeof k.$$refine_modules>"u")&&(pe=k.$$refine_modules,!(typeof pe[E]>"u")&&(N=pe[E],typeof N.$$prototype[_t(se)]<"u")))return ve=N.$$prototype[_t(se)],P.send2(I,ve,se,Ce,Ke,nt);return P.send(I,se,Ce,Ke,nt)},P.lambda=function(h,I){return h.$$is_lambda=!0,lt(h,I),h},P.def=function(h,I,se,Ce){return lt(se,Ce),h===P.top?P.defn(P.Object,I,se):!h.$$eval&&h.$$is_a_module?P.defn(h,I,se):P.defs(h,I,se)},P.defn=function(h,I,se){mt(h),se.displayName=I,se.$$owner=h;var Ce=I.substr(1),Ke=h.$$prototype;if(Ke.hasOwnProperty("$$dummy")&&(Ke=Ke.$$define_methods_on),_e(Ke,I,se),h.$$is_module){h.$$module_function&&P.defs(h,I,se);for(var nt=0,t=h.$$iclasses,g=t.length;nt<g;nt++){var u=t[nt];_e(u,I,se)}}var $=h.$$singleton_of;return h.$method_added&&!h.$method_added.$$stub&&!$?h.$method_added(Ce):$&&$.$singleton_method_added&&!$.$singleton_method_added.$$stub&&$.$singleton_method_added(Ce),Ce},P.defs=function(h,I,se,Ce){return lt(se,Ce),(h.$$is_string||h.$$is_number)&&Fe(P.TypeError,"can't define singleton"),P.defn(P.get_singleton_class(h),I,se)},P.rdef=function(h,I){Se(h.$$prototype,I)||Fe(P.NameError,"method '"+I.substr(1)+"' not defined in "+h.$name()),delete h.$$prototype[I],h.$$is_singleton?h.$$prototype.$singleton_method_removed&&!h.$$prototype.$singleton_method_removed.$$stub&&h.$$prototype.$singleton_method_removed(I.substr(1)):h.$method_removed&&!h.$method_removed.$$stub&&h.$method_removed(I.substr(1))},P.udef=function(h,I){(!h.$$prototype[I]||h.$$prototype[I].$$stub)&&Fe(P.NameError,"method '"+I.substr(1)+"' not defined in "+h.$name()),P.add_stub_for(h.$$prototype,I),h.$$is_singleton?h.$$prototype.$singleton_method_undefined&&!h.$$prototype.$singleton_method_undefined.$$stub&&h.$$prototype.$singleton_method_undefined(I.substr(1)):h.$method_undefined&&!h.$method_undefined.$$stub&&h.$method_undefined(I.substr(1))};function vt(h){return typeof h=="function"&&!h.$$stub}P.alias=function(h,I,se){var Ce=_t(I),Ke=_t(se),nt,t;if(typeof h.$$prototype>"u"&&(h=P.Object),nt=h.$$prototype[Ke],h.$$eval)return P.alias(P.get_singleton_class(h),I,se);if(!vt(nt)){for(var g=h.$$super;typeof nt!="function"&&g;)nt=g[Ke],g=g.$$super;!vt(nt)&&h.$$is_module&&(nt=P.Object.$$prototype[Ke]),vt(nt)||Fe(P.NameError,"undefined method `"+se+"' for class `"+h.$name()+"'")}nt.$$alias_of&&(nt=nt.$$alias_of),t=function(){var u=t.$$p,$,E,a;for($=new Array(arguments.length),E=0,a=arguments.length;E<a;E++)$[E]=arguments[E];return t.$$p=null,P.send(this,nt,$,u)};try{Object.defineProperty(t,"length",{value:nt.length})}catch{}return t.displayName=I,t.$$arity=nt.$$arity==null?nt.length:nt.$$arity,t.$$parameters=nt.$$parameters,t.$$source_location=nt.$$source_location,t.$$alias_of=nt,t.$$alias_name=I,P.defn(h,Ce,t),h},P.alias_gvar=function(h,I){return Object.defineProperty(Ne,h,{configurable:!0,enumerable:!0,get:function(){return Ne[I]},set:function(se){Ne[I]=se}}),v},P.alias_native=function(h,I,se){var Ce=_t(I),Ke=h.$$prototype[se];return(typeof Ke!="function"||Ke.$$stub)&&Fe(P.NameError,"undefined native method `"+se+"' for class `"+h.$name()+"'"),P.defn(h,Ce,Ke),h},P.hash_init=function(h){h.$$smap=Object.create(null),h.$$map=Object.create(null),h.$$keys=[]},P.hash_clone=function(h,I){I.$$none=h.$$none,I.$$proc=h.$$proc;for(var se=0,Ce=h.$$keys,Ke=h.$$smap,nt=Ce.length,t,g;se<nt;se++)t=Ce[se],t.$$is_string?g=Ke[t]:(g=t.value,t=t.key),P.hash_put(I,t,g)},P.hash_put=function(h,I,se){if(I.$$is_string){Se(h.$$smap,I)||h.$$keys.push(I),h.$$smap[I]=se;return}var Ce,Ke,nt;if(Ce=h.$$by_identity?P.id(I):I.$hash(),!Se(h.$$map,Ce)){Ke={key:I,key_hash:Ce,value:se},h.$$keys.push(Ke),h.$$map[Ce]=Ke;return}for(Ke=h.$$map[Ce];Ke;){if(I===Ke.key||I["$eql?"](Ke.key)){nt=void 0,Ke.value=se;break}nt=Ke,Ke=Ke.next}nt&&(Ke={key:I,key_hash:Ce,value:se},h.$$keys.push(Ke),nt.next=Ke)},P.hash_get=function(h,I){if(I.$$is_string)return Se(h.$$smap,I)?h.$$smap[I]:void 0;var se,Ce;if(se=h.$$by_identity?P.id(I):I.$hash(),Se(h.$$map,se))for(Ce=h.$$map[se];Ce;){if(I===Ce.key||I["$eql?"](Ce.key))return Ce.value;Ce=Ce.next}},P.hash_delete=function(h,I){var se,Ce=h.$$keys,Ke=Ce.length,nt,t;if(I.$$is_string){if(typeof I!="string"&&(I=I.valueOf()),!Se(h.$$smap,I))return;for(se=0;se<Ke;se++)if(t=Ce[se],t.$$is_string&&typeof t!="string"&&(t=t.valueOf()),t===I){Ce.splice(se,1);break}return nt=h.$$smap[I],delete h.$$smap[I],nt}var g=I.$hash();if(Se(h.$$map,g))for(var u=h.$$map[g],$;u;){if(I===u.key||I["$eql?"](u.key)){for(nt=u.value,se=0;se<Ke;se++)if(Ce[se]===u){Ce.splice(se,1);break}return $&&u.next?$.next=u.next:$?delete $.next:u.next?h.$$map[g]=u.next:delete h.$$map[g],nt}$=u,u=u.next}},P.hash_rehash=function(h){for(var I=0,se=h.$$keys.length,Ce,Ke,nt;I<se;I++)if(!h.$$keys[I].$$is_string&&(Ce=h.$$keys[I].key.$hash(),Ce!==h.$$keys[I].key_hash)){for(Ke=h.$$map[h.$$keys[I].key_hash],nt=void 0;Ke;){if(Ke===h.$$keys[I]){nt&&Ke.next?nt.next=Ke.next:nt?delete nt.next:Ke.next?h.$$map[h.$$keys[I].key_hash]=Ke.next:delete h.$$map[h.$$keys[I].key_hash];break}nt=Ke,Ke=Ke.next}if(h.$$keys[I].key_hash=Ce,!Se(h.$$map,Ce)){h.$$map[Ce]=h.$$keys[I];continue}for(Ke=h.$$map[Ce],nt=void 0;Ke;){if(Ke===h.$$keys[I]){nt=void 0;break}nt=Ke,Ke=Ke.next}nt&&(nt.next=h.$$keys[I])}},P.hash=function(){var h=arguments.length,I,se,Ce,Ke,nt,t;if(h===1&&arguments[0].$$is_hash)return arguments[0];if(se=new P.Hash,P.hash_init(se),h===1)if(I=arguments[0],arguments[0].$$is_array){for(Ke=I.length,Ce=0;Ce<Ke;Ce++)I[Ce].length!==2&&Fe(P.ArgumentError,"value not of length 2: "+I[Ce].$inspect()),nt=I[Ce][0],t=I[Ce][1],P.hash_put(se,nt,t);return se}else{I=arguments[0];for(nt in I)Se(I,nt)&&(t=I[nt],P.hash_put(se,nt,t));return se}for(h%2!==0&&Fe(P.ArgumentError,"odd number of arguments for Hash"),Ce=0;Ce<h;Ce+=2)nt=arguments[Ce],t=arguments[Ce+1],P.hash_put(se,nt,t);return se},P.hash2=function(h,I){var se=new P.Hash;return se.$$smap=I,se.$$map=Object.create(null),se.$$keys=h,se},P.range=function(h,I,se){var Ce=new P.Range;return Ce.begin=h,Ce.end=I,Ce.excl=se,Ce};var dt=["constructor","displayName","__count__","__noSuchMethod__","__parent__","__proto__","hasOwnProperty","valueOf"];P.ivar=function(h){return dt.indexOf(h)!==-1&&(h+="$"),h};function mt(h){h.$$frozen&&Fe(P.FrozenError,"can't modify frozen "+h.$class()+": "+h,P.hash2(["receiver"],{receiver:h}))}P.deny_frozen_access=mt,P.freeze=function(h){return _e(h,"$$frozen",!0),h.hasOwnProperty("$$id")||_e(h,"$$id",We()),h.hasOwnProperty("$$meta")?h.$$meta.$freeze():_e(h,"$$meta",null),h.hasOwnProperty("$$comparable")||_e(h,"$$comparable",null),Object.seal(h),h},P.freeze_props=function(h){var I,se,Ce;for(I in h)se=typeof I,!((se==="string"||se==="object")&&I[0]==="$")&&(Ce=Object.getOwnPropertyDescriptor(h,I),Ce&&Ce.enumerable&&Ce.writable&&function(){var Ke=h[I];Object.defineProperty(h,I,{get:function(){return Ke},set:function(nt){mt(h)},enumerable:!0})}())},P.escape_regexp=function(h){return h.replace(/([-[\]\/{}()*+?.^$\\| ])/g,"\\$1").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\f]/g,"\\f").replace(/[\t]/g,"\\t")},P.global_regexp=function(h){return h.global?h:(h.$$g==null?h.$$g=new RegExp(h.source,(h.multiline?"gm":"g")+(h.ignoreCase?"i":"")):h.$$g.lastIndex=null,h.$$g)},P.global_multiline_regexp=function(h){var I,se;return h.global&&h.multiline?h:(se="gm"+(h.ignoreCase?"i":""),h.multiline?(h.$$g==null&&(h.$$g=new RegExp(h.source,se)),I=h.$$g):(h.$$gm==null&&(h.$$gm=new RegExp(h.source,se)),I=h.$$gm),I.lastIndex=null,I)},P.regexp=function(h,I){for(var se,Ce=typeof I<"u"&&I&&I.indexOf("i")>=0,Ke=0,nt=h.length;Ke<nt;Ke++)se=h[Ke],se instanceof RegExp&&(se.ignoreCase!==Ce&&P.Kernel.$warn("ignore case doesn't match for "+se.source.$inspect(),P.hash({uplevel:1})),se=se.source),se===""&&(se="(?:"+se+")"),h[Ke]=se;return I?new RegExp(h.join(""),I):new RegExp(h.join(""))},P.modules={},P.loaded_features=["corelib/runtime"],P.current_dir=".",P.require_table={"corelib/runtime":!0},P.normalize=function(h){var I,se,Ce=[],Ke="/";P.current_dir!=="."&&(h=P.current_dir.replace(/\/*$/,"/")+h),h=h.replace(/^\.\//,""),h=h.replace(/\.(rb|opal|js)$/,""),I=h.split(Ke);for(var nt=0,t=I.length;nt<t;nt++)se=I[nt],se!==""&&(se===".."?Ce.pop():Ce.push(se));return Ce.join(Ke)},P.loaded=function(h){var I,se,Ce;for(I=0,se=h.length;I<se;I++)Ce=P.normalize(h[I]),!P.require_table[Ce]&&(P.loaded_features.push(Ce),P.require_table[Ce]=!0)},P.load_normalized=function(h){P.loaded([h]);var I=P.modules[h];if(I){var se=I(P);if(typeof Promise<"u"&&se instanceof Promise)return se.then(Te(!0))}else{var Ce=P.config.missing_require_severity,Ke="cannot load such file -- "+h;Ce==="error"?Fe(P.LoadError,Ke):Ce==="warning"&&l.warn("WARNING: LoadError: "+Ke)}return!0},P.load=function(h){return h=P.normalize(h),P.load_normalized(h)},P.require=function(h){return h=P.normalize(h),P.require_table[h]?!1:P.load_normalized(h)},P.encodings=Object.create(null),P.set_encoding=function(h,I,se){typeof se>"u"&&(se="encoding"),(typeof h=="string"||h.$$frozen===!0)&&Fe(P.FrozenError,"can't modify frozen String");var Ce=P.find_encoding(I);return Ce===h[se]||(h[se]=Ce),h},P.find_encoding=function(h){var I=P.encodings,se=I[h]||I[h.toUpperCase()];return se||Fe(P.ArgumentError,"unknown encoding name - "+h),se},P.enc=function(h,I){var se=new String(h);return se=P.set_encoding(se,I),se.internal_encoding=se.encoding,se},P.binary=function(h){var I=new String(h);return P.set_encoding(I,"binary","internal_encoding")},P.last_promise=null,P.promise_unhandled_exception=!1,P.queue=function(h){if(P.last_promise)return P.last_promise=P.last_promise.then(function(){if(!P.promise_unhandled_exception)return h(P)}).catch(function(se){P.respond_to(se,"$full_message")&&(se=se.$full_message()),l.error(se),P.promise_unhandled_exception=!0,P.exit(1)}),P.last_promise;var I=h(P);return typeof Promise=="function"&&typeof I=="object"&&I instanceof Promise&&(P.last_promise=I),I};function bt(h,I){return typeof h=="number"&&typeof I=="number"}P.rb_plus=function(h,I){return bt(h,I)?h+I:h["$+"](I)},P.rb_minus=function(h,I){return bt(h,I)?h-I:h["$-"](I)},P.rb_times=function(h,I){return bt(h,I)?h*I:h["$*"](I)},P.rb_divide=function(h,I){return bt(h,I)?h/I:h["$/"](I)},P.rb_lt=function(h,I){return bt(h,I)?h<I:h["$<"](I)},P.rb_gt=function(h,I){return bt(h,I)?h>I:h["$>"](I)},P.rb_le=function(h,I){return bt(h,I)?h<=I:h["$<="](I)},P.rb_ge=function(h,I){return bt(h,I)?h>=I:h["$>="](I)};function Oe(h,I){return typeof h=="number"&&typeof I=="number"||typeof h=="string"&&typeof I=="string"}function be(h,I){return Oe(h,I)?h===I:ye(h["$=="](I))}P.eqeq=be,P.eqeqeq=function(h,I){return Oe(h,I)?h===I:ye(h["$==="](I))},P.neqeq=function(h,I){return Oe(h,I)?h!==I:ye(h["$!="](I))},P.not=function(h){return h==null||h===!1||v===h?!0:h===!0||h["$!"].$$pristine?!1:ye(h["$!"]())};function Te(h){return function(){return h}}P.return_val=Te,P.return_self=function(){return this},P.return_ivar=function(h){return function(){return this[h]==null?v:this[h]}},P.assign_ivar=function(h){return function(I){return mt(this),this[h]=I}},P.assign_ivar_val=function(h,I){return function(){return mt(this),this[h]=I}},P.ensure_kwargs=function(h){if(h==null)return P.hash2([],{});if(h.$$is_hash)return h;Fe(P.ArgumentError,"expected kwargs")},P.get_kwarg=function(h,I){return Se(h.$$smap,I)||Fe(P.ArgumentError,"missing keyword: "+I),h.$$smap[I]},P.large_array_unpack=function(h){var I=h.split(","),se=I.length,Ce;for(Ce=0;Ce<se;Ce++)switch(I[Ce][0]){case void 0:I[Ce]=v;break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":I[Ce]=+I[Ce]}return I},P.BasicObject=W=j("BasicObject",null),P.Object=L=j("Object",P.BasicObject),P.Module=ae=j("Module",P.Object),P.Class=te=j("Class",P.Module),P.Opal=le=re("Opal"),P.Kernel=ne=re("Kernel"),Le(P.BasicObject,P.Class.$$prototype),Le(P.Object,P.Class.$$prototype),Le(P.Module,P.Class.$$prototype),Le(P.Class,P.Class.$$prototype),W.$$const.BasicObject=W,q(L,"BasicObject",W),q(L,"Object",L),q(L,"Module",ae),q(L,"Class",te),q(L,"Opal",le),q(L,"Kernel",ne),W.$$class=te,L.$$class=te,ae.$$class=te,te.$$class=te,le.$$class=ae,ne.$$class=ae,_e(L.$$prototype,"toString",function(){var h=this.$to_s();return h.$$is_string&&typeof h=="object"?h.valueOf():h}),_e(L.$$prototype,"$require",P.require),P.top=new L,P.top.$to_s=P.top.$inspect=Te("main"),P.top.$define_method=He;function He(){var h=je(arguments),I=He.$$p;return He.$$p=null,P.send(L,"define_method",h,I)}P.NilClass=j("NilClass",P.Object),q(L,"NilClass",P.NilClass),v=P.nil=new P.NilClass,v.$$id=O,v.call=v.apply=function(){Fe(P.LocalJumpError,"no block given")},v.$$frozen=!0,v.$$comparable=!1,Object.seal(v),P.thrower=function(h){var I=new Error("unexpected "+h);return I.$thrower_type=h,I.$throw=function(se){throw se==null&&(se=v),I.$v=se,I},I},P.t_eval_return=P.thrower("return"),TypeError.$$super=Error,P.file_sources={}}).call(void 0);Opal.loaded(["corelib/runtime.js"]);Opal.modules["corelib/helpers"]=function(e){var l=e.type_error,v=e.coerce_to,W=e.module,L=e.defs,ae=e.slice,te=e.eqeqeq,le=e.Kernel,ne=e.truthy,P=e.Opal,oe=e.nil,me=e.$$$;return e.add_stubs("===,raise,respond_to?,nil?,__send__,<=>,class,coerce_to!,new,to_s,__id__"),function(Se){var Le=W(Se,"Opal");L(Le,"$bridge",function(O,Ie){return e.bridge(O,Ie)}),L(Le,"$coerce_to!",function(O,Ie,We,Ne){var Fe,_e,ye=oe;return Fe=ae(arguments,3),_e=Fe,ye=v(O,Ie,We,_e),te(Ie,ye)||le.$raise(l(O,Ie,We,ye)),ye},-4),L(Le,"$coerce_to?",function(O,Ie,We,Ne){var Fe,_e,ye=oe;return Fe=ae(arguments,3),_e=Fe,!ne(O["$respond_to?"](We))||(ye=v(O,Ie,We,_e),ne(ye["$nil?"]()))?oe:(te(Ie,ye)||le.$raise(l(O,Ie,We,ye)),ye)},-4),L(Le,"$try_convert",function(O,Ie,We){return te(Ie,O)?O:ne(O["$respond_to?"](We))?O.$__send__(We):oe}),L(Le,"$compare",function(O,Ie){var We=oe;return We=O["$<=>"](Ie),ne(We===oe)&&le.$raise(me("ArgumentError"),"comparison of "+O.$class()+" with "+Ie.$class()+" failed"),We}),L(Le,"$destructure",function(O){if(O.length==1)return O[0];if(O.$$is_array)return O;for(var Ie=new Array(O.length),We=0,Ne=Ie.length;We<Ne;We++)Ie[We]=O[We];return Ie}),L(Le,"$respond_to?",function(O,Ie,We){return We==null&&(We=!1),O==null||!O.$$class?!1:O["$respond_to?"](Ie,We)},-3),L(Le,"$instance_variable_name!",function(O){return O=P["$coerce_to!"](O,me("String"),"to_str"),ne(/^@[a-zA-Z_][a-zA-Z0-9_]*?$/.test(O))||le.$raise(me("NameError").$new("'"+O+"' is not allowed as an instance variable name",O)),O}),L(Le,"$class_variable_name!",function(O){return O=P["$coerce_to!"](O,me("String"),"to_str"),ne(O.length<3||O.slice(0,2)!=="@@")&&le.$raise(me("NameError").$new("`"+O+"' is not allowed as a class variable name",O)),O}),L(Le,"$const_name?",function(O){return typeof O!="string"&&(O=P["$coerce_to!"](O,me("String"),"to_str")),O[0]===O[0].toUpperCase()}),L(Le,"$const_name!",function(O){var Ie=this;return ne(me("::","String","skip_raise")?"constant":oe)&&(O=P["$coerce_to!"](O,me("String"),"to_str")),(!O||O[0]!=O[0].toUpperCase())&&Ie.$raise(me("NameError"),"wrong constant name "+O),O}),L(Le,"$pristine",function(O,Ie){var We,Ne;We=ae(arguments,1),Ne=We;for(var Fe,_e,ye=Ne.length-1;ye>=0;ye--)Fe=Ne[ye],_e=O.$$prototype[e.jsid(Fe)],_e&&!_e.$$stub&&(_e.$$pristine=!0);return oe},-2);var je=[];return L(Le,"$inspect",function(O){var Ie=oe,We=!1;return function(){try{try{return O===null?"null":O===void 0?"undefined":typeof O.$$class>"u"?Object.prototype.toString.apply(O):typeof O.$inspect!="function"||O.$inspect.$$stub||je.indexOf(O.$__id__())!==-1?"#<"+O.$$class+":0x"+O.$__id__().$to_s(16)+">":(je.push(O.$__id__()),We=!0,O.$inspect())}catch(Ne){if(e.rescue(Ne,[me("Exception")])){Ie=Ne;try{return"#<"+O.$$class+":0x"+O.$__id__().$to_s(16)+">"}finally{e.pop_exception()}}else throw Ne}}finally{We&&je.pop()}}()},-1)}("::")};Opal.modules["corelib/module"]=function(e){var l=e.truthy,v=e.coerce_to,W=e.const_set,L=e.Object,ae=e.return_ivar,te=e.assign_ivar,le=e.ivar,ne=e.deny_frozen_access,P=e.freeze,oe=e.prop,me=e.jsid,Se=e.klass,Le=e.defs,je=e.send,xe=e.def,O=e.eqeqeq,Ie=e.Module,We=e.Kernel,Ne=e.rb_lt,Fe=e.rb_gt,_e=e.slice,ye=e.to_a,de=e.hash2,ze=e.Opal,fe=e.return_val,ke=e.eqeq,ie=e.lambda,p=e.range,ee=e.send2,q=e.find_super,j=e.alias,F=[],Ee=e.nil,re=e.$$$;return e.add_stubs("module_eval,to_proc,===,raise,equal?,<,>,nil?,attr_reader,attr_writer,warn,attr_accessor,const_name?,class_variable_name!,pristine,const_name!,=~,new,inject,split,const_get,==,start_with?,!~,bind,call,class,frozen?,name,append_features,included,cover?,size,merge,compile,proc,any?,prepend_features,prepended,to_s,__id__,constants,include?,copy_class_variables,copy_constants,class_exec,module_exec,inspect"),function(U,m,s){var n=Se(U,m,"Module"),i=[n].concat(s),o=e.$r(i);return Le(n,"$allocate",function(){var x=this,S=e.allocate_module(Ee,function(){});return x!==e.Module&&Object.setPrototypeOf(S,x.$$prototype),S}),xe(n,"$initialize",function c(){var x=c.$$p||Ee,S=this;return c.$$p=null,x!==Ee?je(S,"module_eval",[],x.$to_proc()):Ee}),xe(n,"$===",function(x){var S=this;return l(x==null)?!1:e.is_a(x,S)}),xe(n,"$<",function(x){var S=this;O(Ie,x)||We.$raise(re("TypeError"),"compared with non class/module");var G=S,qe,Je,$t;if(G===x)return!1;for(Je=0,qe=e.ancestors(S),$t=qe.length;Je<$t;Je++)if(qe[Je]===x)return!0;for(Je=0,qe=e.ancestors(x),$t=qe.length;Je<$t;Je++)if(qe[Je]===S)return!1;return Ee}),xe(n,"$<=",function(x){var S=this,G=Ee;return l(G=S["$equal?"](x))?G:Ne(S,x)}),xe(n,"$>",function(x){var S=this;return O(Ie,x)||We.$raise(re("TypeError"),"compared with non class/module"),Ne(x,S)}),xe(n,"$>=",function(x){var S=this,G=Ee;return l(G=S["$equal?"](x))?G:Fe(S,x)}),xe(n,"$<=>",function(x){var S=this,G=Ee;return S===x?0:!O(Ie,x)||(G=Ne(S,x),l(G["$nil?"]()))?Ee:l(G)?-1:1}),xe(n,"$alias_method",function(x,S){var G=this;return ne(G),x=v(x,re("String"),"to_str"),S=v(S,re("String"),"to_str"),e.alias(G,x,S),G}),xe(n,"$alias_native",function(x,S){var G=this;return S==null&&(S=x),ne(G),e.alias_native(G,x,S),G},-2),xe(n,"$ancestors",function(){var x=this;return e.ancestors(x)}),xe(n,"$append_features",function(x){var S=this;return ne(x),e.append_features(S,x),S}),xe(n,"$attr_accessor",function(x){var S,G,qe=this;return S=_e(arguments),G=S,je(qe,"attr_reader",ye(G)),je(qe,"attr_writer",ye(G))},-1),xe(n,"$attr",function(x){var S,G,qe=this;return S=_e(arguments),G=S,G.length==2&&(G[1]===!0||G[1]===!1)?(qe.$warn("optional boolean argument is obsoleted",de(["uplevel"],{uplevel:1})),G[1]?qe.$attr_accessor(G[0]):qe.$attr_reader(G[0]),Ee):je(qe,"attr_reader",ye(G))},-1),xe(n,"$attr_reader",function(x){var S,G,qe=this;S=_e(arguments),G=S,ne(qe);for(var Je=qe.$$prototype,$t=G.length-1;$t>=0;$t--){var lt=G[$t],gt=me(lt),_t=le(lt),vt=ae(_t);e.prop(Je,_t,Ee),vt.$$parameters=[],vt.$$arity=0,e.defn(qe,gt,vt)}return Ee},-1),xe(n,"$attr_writer",function(x){var S,G,qe=this;S=_e(arguments),G=S,ne(qe);for(var Je=qe.$$prototype,$t=G.length-1;$t>=0;$t--){var lt=G[$t],gt=me(lt+"="),_t=le(lt),vt=te(_t);vt.$$parameters=[["req"]],vt.$$arity=1,e.prop(Je,_t,Ee),e.defn(qe,gt,vt)}return Ee},-1),xe(n,"$autoload",function(x,S){var G=this;return ne(G),o("Opal")["$const_name?"](x)||We.$raise(re("NameError"),"autoload must be constant name: "+x),S==""&&We.$raise(re("ArgumentError"),"empty file name"),G.$$const.hasOwnProperty(x)||(G.$$autoload||(G.$$autoload={}),e.const_cache_version++,G.$$autoload[x]={path:S,loaded:!1,required:!1,success:!1,exception:!1},G.$const_added&&!G.$const_added.$$pristine&&G.$const_added(x)),Ee}),xe(n,"$autoload?",function(x){var S=this;if(S.$$autoload&&S.$$autoload[x]&&!S.$$autoload[x].required&&!S.$$autoload[x].success)return S.$$autoload[x].path;for(var G=S.$ancestors(),qe=0,Je=G.length;qe<Je;qe++)if(G[qe].$$autoload&&G[qe].$$autoload[x]&&!G[qe].$$autoload[x].required&&!G[qe].$$autoload[x].success)return G[qe].$$autoload[x].path;return Ee}),xe(n,"$class_variables",function(){var x=this;return Object.keys(e.class_variables(x))}),xe(n,"$class_variable_get",function(x){var S=this;return x=ze["$class_variable_name!"](x),e.class_variable_get(S,x,!1)}),xe(n,"$class_variable_set",function(x,S){var G=this;return ne(G),x=ze["$class_variable_name!"](x),e.class_variable_set(G,x,S)}),xe(n,"$class_variable_defined?",function(x){var S=this;return x=ze["$class_variable_name!"](x),e.class_variables(S).hasOwnProperty(x)}),xe(n,"$const_added",fe(Ee)),ze.$pristine(n,"const_added"),xe(n,"$remove_class_variable",function(x){var S=this;if(ne(S),x=ze["$class_variable_name!"](x),e.hasOwnProperty.call(S.$$cvars,x)){var G=S.$$cvars[x];return delete S.$$cvars[x],G}else We.$raise(re("NameError"),"cannot remove "+x+" for "+S)}),xe(n,"$constants",function(x){var S=this;return x==null&&(x=!0),e.constants(S,x)},-1),Le(n,"$constants",function(x){var S=this;if(x==null){var G=(S.$$nesting||[]).concat(L),qe,Je={},$t,lt;for($t=0,lt=G.length;$t<lt;$t++)for(qe in G[$t].$$const)Je[qe]=!0;return Object.keys(Je)}else return e.constants(S,x)},-1),Le(n,"$nesting",function(){var x=this;return x.$$nesting||[]}),xe(n,"$const_defined?",function(x,S){var G=this;S==null&&(S=!0),x=o("Opal")["$const_name!"](x),l(x["$=~"](re(ze,"CONST_NAME_REGEXP")))||We.$raise(re("NameError").$new("wrong constant name "+x,x));var qe,Je=[G],$t,lt;for(S&&(Je=Je.concat(e.ancestors(G)),G.$$is_module&&(Je=Je.concat([L]).concat(e.ancestors(L)))),$t=0,lt=Je.length;$t<lt;$t++)if(qe=Je[$t],qe.$$const[x]!=null||qe.$$autoload&&qe.$$autoload[x]&&!qe.$$autoload[x].required&&!qe.$$autoload[x].success)return!0;return!1},-2),xe(n,"$const_get",function(x,S){var G=this;return S==null&&(S=!0),x=o("Opal")["$const_name!"](x),x.indexOf("::")===0&&x!=="::"&&(x=x.slice(2)),l(x.indexOf("::")!=-1&&x!="::")?je(x.$split("::"),"inject",[G],function(Je,$t){return Je==null&&(Je=Ee),$t==null&&($t=Ee),Je.$const_get($t)}):(l(x["$=~"](re(ze,"CONST_NAME_REGEXP")))||We.$raise(re("NameError").$new("wrong constant name "+x,x)),S?e.$$([G],x):e.const_get_local(G,x))},-2),xe(n,"$const_missing",function(x){var S=this,G=Ee;return G=ke(S,L)?x:""+S+"::"+x,We.$raise(re("NameError").$new("uninitialized constant "+G,x))}),xe(n,"$const_set",function(x,S){var G=this;return ne(G),x=ze["$const_name!"](x),(l(x["$!~"](re(ze,"CONST_NAME_REGEXP")))||l(x["$start_with?"]("::")))&&We.$raise(re("NameError").$new("wrong constant name "+x,x)),W(G,x,S),S}),xe(n,"$public_constant",fe(Ee)),xe(n,"$define_method",function c(x,S){var G=c.$$p||Ee,qe=this,Je=Ee,$t=Ee;return c.$$p=null,ne(qe),S===void 0&&G===Ee&&We.$raise(re("ArgumentError"),"tried to create a Proc object without a block"),G=l(Je=G)?Je:O(re("Proc"),$t=S)?S:O(re("Method"),$t)?S.$to_proc().$$unbound:O(re("UnboundMethod"),$t)?ie(function lt(gt){var _t,vt,dt=lt.$$s==null?this:lt.$$s,mt=Ee;return _t=_e(arguments),vt=_t,mt=S.$bind(dt),je(mt,"call",ye(vt))},{$$arity:-1,$$s:qe}):We.$raise(re("TypeError"),"wrong argument type "+G.$class()+" (expected Proc/Method)"),typeof Proxy<"u"&&(G.$$proxy_target=G,G=new Proxy(G,{apply:function(lt,gt,_t){var vt=lt.$$jsid;lt.$$jsid=x;try{return lt.apply(gt,_t)}catch(dt){if(dt===lt.$$brk||dt===lt.$$ret)return dt.$v;throw dt}finally{lt.$$jsid=vt}}})),G.$$jsid=x,G.$$s=null,G.$$def=G,G.$$define_meth=!0,e.defn(qe,me(x),G)},-2),xe(n,"$freeze",function(){var x=this;return l(x["$frozen?"]())?x:(x.hasOwnProperty("$$base_module")||oe(x,"$$base_module",null),P(x))}),xe(n,"$remove_method",function(x){var S,G,qe=this;S=_e(arguments),G=S;for(var Je=0;Je<G.length;Je++){var $t=G[Je];typeof $t=="string"||$t.$$is_string||qe.$raise(re("TypeError"),""+qe.$name()+" is not a symbol nor a string"),ne(qe),e.rdef(qe,"$"+$t)}return qe},-1),xe(n,"$singleton_class?",function(){var x=this;return!!x.$$is_singleton}),xe(n,"$include",function(x){var S,G,qe=this;S=_e(arguments),G=S;for(var Je=G.length-1;Je>=0;Je--){var $t=G[Je];$t.$$is_module||We.$raise(re("TypeError"),"wrong argument type "+$t.$class()+" (expected Module)"),$t.$append_features(qe),$t.$included(qe)}return qe},-1),xe(n,"$included_modules",function(){var x=this;return e.included_modules(x)}),xe(n,"$include?",function(x){var S=this;x.$$is_module||We.$raise(re("TypeError"),"wrong argument type "+x.$class()+" (expected Module)");var G,qe,Je,$t=e.ancestors(S);for(G=0,qe=$t.length;G<qe;G++)if(Je=$t[G],Je===x&&Je!==S)return!0;return!1}),xe(n,"$instance_method",function(x){var S=this,G=S.$$prototype[me(x)];return(!G||G.$$stub)&&We.$raise(re("NameError").$new("undefined method `"+x+"' for class `"+S.$name()+"'",x)),re("UnboundMethod").$new(S,G.$$owner||S,G,x)}),xe(n,"$instance_methods",function(x){var S=this;return x==null&&(x=!0),l(x)?e.instance_methods(S):e.own_instance_methods(S)},-1),xe(n,"$included",fe(Ee)),xe(n,"$extended",fe(Ee)),xe(n,"$extend_object",function(x){return ne(x),Ee}),xe(n,"$method_added",function(x){return _e(arguments),Ee},-1),xe(n,"$method_removed",function(x){return _e(arguments),Ee},-1),xe(n,"$method_undefined",function(x){return _e(arguments),Ee},-1),xe(n,"$module_eval",function c(x){var S=c.$$p||Ee,G,qe,Je,$t=this,lt=Ee,gt=Ee,_t=Ee,vt=Ee,dt=Ee,mt=Ee;c.$$p=null,G=_e(arguments),qe=G,l(S["$nil?"]())&&l(!!e.compile)?(l(p(1,3,!1)["$cover?"](qe.$size()))||We.$raise(re("ArgumentError"),"wrong number of arguments (0 for 1..3)"),Je=[].concat(ye(qe)),lt=Je[0]==null?Ee:Je[0],gt=Je[1]==null?Ee:Je[1],Je[2]==null||Je[2],_t=de(["file","eval"],{file:l(vt=gt)?vt:"(eval)",eval:!0}),dt=e.hash({arity_check:!1}).$merge(_t),mt=ze.$compile(lt,dt),S=je(We,"proc",[],function be(){var Te=be.$$s==null?this:be.$$s;return new Function("Opal,self","return "+mt)(e,Te)},{$$s:$t})):l(qe["$any?"]())&&We.$raise(re("ArgumentError"),"wrong number of arguments ("+qe.$size()+` for 0)

  NOTE:If you want to enable passing a String argument please add "require 'opal-parser'" to your script
`);var bt=S.$$s,Oe;return S.$$s=null,Oe=S.apply($t,[$t]),S.$$s=bt,Oe},-1),xe(n,"$module_exec",function c(x){var S=c.$$p||Ee,G,qe,Je=this;c.$$p=null,G=_e(arguments),qe=G,S===Ee&&We.$raise(re("LocalJumpError"),"no block given");var $t=S.$$s,lt;return S.$$s=null,lt=S.apply(Je,qe),S.$$s=$t,lt},-1),xe(n,"$method_defined?",function(x){var S=this,G=S.$$prototype[me(x)];return!!G&&!G.$$stub}),xe(n,"$module_function",function(x){var S,G,qe=this;if(S=_e(arguments),G=S,ne(qe),G.length===0)return qe.$$module_function=!0,Ee;for(var Je=0,$t=G.length;Je<$t;Je++){var lt=G[Je],gt=me(lt),_t=qe.$$prototype[gt];e.defs(qe,gt,_t)}return G.length===1?G[0]:G},-1),xe(n,"$name",function(){var x=this;if(x.$$full_name)return x.$$full_name;for(var S=[],G=x;G;){if(G.$$name===Ee||G.$$name==null)return Ee;if(S.unshift(G.$$name),G=G.$$base_module,G===L)break}return S.length===0?Ee:x.$$full_name=S.join("::")}),xe(n,"$prepend",function(x){var S,G,qe=this;S=_e(arguments),G=S,G.length===0&&We.$raise(re("ArgumentError"),"wrong number of arguments (given 0, expected 1+)");for(var Je=G.length-1;Je>=0;Je--){var $t=G[Je];$t.$$is_module||We.$raise(re("TypeError"),"wrong argument type "+$t.$class()+" (expected Module)"),$t.$prepend_features(qe),$t.$prepended(qe)}return qe},-1),xe(n,"$prepend_features",function(x){var S=this;return ne(x),S.$$is_module||We.$raise(re("TypeError"),"wrong argument type "+S.$class()+" (expected Module)"),e.prepend_features(S,x),S}),xe(n,"$prepended",fe(Ee)),xe(n,"$remove_const",function(x){var S=this;return ne(S),e.const_remove(S,x)}),xe(n,"$to_s",function(){var x=this,S=Ee;return l(S=e.Module.$name.call(x))?S:"#<"+(x.$$is_module?"Module":"Class")+":0x"+x.$__id__().$to_s(16)+">"}),xe(n,"$undef_method",function(x){var S,G,qe=this;S=_e(arguments),G=S;for(var Je=0;Je<G.length;Je++){var $t=G[Je];typeof $t=="string"||$t.$$is_string||qe.$raise(re("TypeError"),""+qe.$name()+" is not a symbol nor a string"),ne(qe),e.udef(qe,"$"+G[Je])}return qe},-1),xe(n,"$instance_variables",function(){var x=this,S=Ee;S=(e.Module.$$nesting=i,x.$constants());var G=[];for(var qe in x)x.hasOwnProperty(qe)&&qe.charAt(0)!=="$"&&qe!=="constructor"&&!S["$include?"](qe)&&G.push("@"+qe);return G}),xe(n,"$dup",function c(){var x=c.$$p||Ee,S=this,G=Ee;return c.$$p=null,G=ee(S,q(S,"dup",c,!1,!0),"dup",[],x),G.$copy_class_variables(S),G.$copy_constants(S),G}),xe(n,"$copy_class_variables",function(x){var S=this;for(var G in x.$$cvars)S.$$cvars[G]=x.$$cvars[G]}),xe(n,"$copy_constants",function(x){var S=this,G,qe=x.$$const;for(G in qe)W(S,G,qe[G])}),xe(n,"$refine",function c(x){var S=c.$$p||Ee,G,qe=this,Je=Ee,$t=Ee,lt=Ee;return c.$$p=null,G=[qe,Ee,Ee],Je=G[0],$t=G[1],lt=G[2],lt=e.id(x),typeof qe.$$refine_modules>"u"&&(qe.$$refine_modules=Object.create(null)),typeof qe.$$refine_modules[lt]>"u"?$t=qe.$$refine_modules[lt]=re("Refinement").$new():$t=qe.$$refine_modules[lt],$t.refinement_module=Je,$t.refined_class=x,je($t,"class_exec",[],S.$to_proc()),$t}),xe(n,"$refinements",function(){var x=this,S=x.$$refine_modules,G=de([],{});if(typeof S>"u")return G;for(var qe in S)G["$[]="](S[qe].refined_class,S[qe]);return G}),xe(n,"$using",function(x){return We.$raise("Module#using is not permitted in methods")}),j(n,"class_eval","module_eval"),j(n,"class_exec","module_exec"),j(n,"inspect","to_s")}("::",null,F),function(U,m){var s=Se(U,m,"Refinement"),n=s.$$prototype;return n.refinement_module=n.refined_class=Ee,s.$attr_reader("refined_class"),xe(s,"$inspect",function i(){var o=i.$$p||Ee,c=this;return i.$$p=null,l(c.refinement_module)?"#<refinement:"+c.refined_class.$inspect()+"@"+c.refinement_module.$inspect()+">":ee(c,q(c,"inspect",i,!1,!0),"inspect",[],o)})}("::",Ie)};Opal.modules["corelib/class"]=function(e){var l=e.klass,v=e.send,W=e.defs,L=e.def,ae=e.rb_plus,te=e.return_val,le=e.slice,ne=e.send2,P=e.find_super,oe=e.Kernel,me=e.alias,Se=e.top,Le=[],je=e.nil,xe=e.$$$;return e.add_stubs("require,class_eval,to_proc,+,subclasses,flatten,map,initialize_copy,allocate,name,to_s,raise"),Se.$require("corelib/module"),function(O,Ie,We){var Ne=l(O,Ie,"Class"),Fe=[Ne].concat(We),_e=e.$r(Fe);return W(Ne,"$new",function ye(de){var ze=ye.$$p||je;if(ye.$$p=null,de==null&&(de=_e("Object")),!de.$$is_class)throw e.TypeError.$new("superclass must be a Class");var fe=e.allocate_class(je,de);return de.$inherited(fe),ze!==je&&v(fe,"class_eval",[],ze.$to_proc()),fe},-1),L(Ne,"$allocate",function(){var de=this,ze=new de.$$constructor;return ze.$$id=e.uid(),ze}),L(Ne,"$descendants",function(){var de=this;return ae(de.$subclasses(),v(de.$subclasses(),"map",[],"descendants".$to_proc()).$flatten())}),L(Ne,"$inherited",te(je)),L(Ne,"$initialize_dup",function(de){var ze=this;ze.$initialize_copy(de),ze.$$name=null,ze.$$full_name=null}),L(Ne,"$new",function ye(de){var ze=ye.$$p||je,fe,ke,ie=this;ye.$$p=null,fe=le(arguments),ke=fe;var p=ie.$allocate();return e.send(p,p.$initialize,ke,ze),p},-1),L(Ne,"$subclasses",function(){var de=this;if(typeof WeakRef<"u"){var ze,fe,ke=[];for(ze=0;ze<de.$$subclasses.length;ze++)fe=de.$$subclasses[ze].deref(),fe!==void 0&&ke.push(fe);return ke}else return de.$$subclasses}),L(Ne,"$superclass",function(){var de=this;return de.$$super||je}),L(Ne,"$to_s",function ye(){ye.$$p;var de=this;ye.$$p=null;var ze=de.$$singleton_of;return ze&&ze.$$is_a_module?"#<Class:"+ze.$name()+">":ze?"#<Class:#<"+ze.$$class.$name()+":0x"+e.id(ze).$to_s(16)+">>":ne(de,P(de,"to_s",ye,!1,!0),"to_s",[],null)}),L(Ne,"$attached_object",function(){var de=this;if(de.$$singleton_of!=null)return de.$$singleton_of;oe.$raise(xe("TypeError"),"`"+de+"' is not a singleton class")}),me(Ne,"inspect","to_s")}("::",null,Le)};Opal.modules["corelib/basic_object"]=function(e){var l=e.klass,v=e.slice,W=e.def,L=e.alias,ae=e.return_val,te=e.Opal,le=e.truthy,ne=e.range,P=e.Kernel,oe=e.to_a,me=e.hash2,Se=e.send,Le=e.eqeq,je=e.rb_ge,xe=e.nil,O=e.$$$;return e.add_stubs("==,raise,inspect,pristine,!,nil?,cover?,size,merge,compile,proc,[],first,>=,length,instance_variable_get,any?,new,caller"),function(Ie,We){var Ne=l(Ie,We,"BasicObject");return W(Ne,"$initialize",function(_e){return v(arguments),xe},-1),W(Ne,"$==",function(_e){var ye=this;return ye===_e}),W(Ne,"$eql?",function(_e){var ye=this;return ye["$=="](_e)}),L(Ne,"equal?","=="),W(Ne,"$__id__",function(){var _e=this;return _e.$$id!=null||e.prop(_e,"$$id",e.uid()),_e.$$id}),W(Ne,"$__send__",function Fe(_e,ye){var de=Fe.$$p||xe,ze,fe,ke=this;Fe.$$p=null,ze=v(arguments,1),fe=ze,_e.$$is_string||ke.$raise(O("TypeError"),""+ke.$inspect()+" is not a symbol nor a string");var ie=ke[e.jsid(_e)];return ie?(de!==xe&&(ie.$$p=de),ie.apply(ke,fe)):(de!==xe&&(ke.$method_missing.$$p=de),ke.$method_missing.apply(ke,[_e].concat(fe)))},-2),W(Ne,"$!",ae(!1)),te.$pristine("!"),W(Ne,"$!=",function(_e){var ye=this;return ye["$=="](_e)["$!"]()}),W(Ne,"$instance_eval",function Fe(_e){var ye=Fe.$$p||xe,de,ze,fe,ke=this,ie=xe,p=xe,ee=xe,q=xe,j=xe,F=xe;if(Fe.$$p=null,de=v(arguments),ze=de,le(ye["$nil?"]())&&le(!!e.compile))le(ne(1,3,!1)["$cover?"](ze.$size()))||P.$raise(O("ArgumentError"),"wrong number of arguments (0 for 1..3)"),fe=[].concat(oe(ze)),ie=fe[0]==null?xe:fe[0],p=fe[1]==null?xe:fe[1],fe[2]==null||fe[2],ee=me(["file","eval"],{file:le(q=p)?q:"(eval)",eval:!0}),j=e.hash({arity_check:!1}).$merge(ee),F=te.$compile(ie,j),ye=Se(P,"proc",[],function U(){var m=U.$$s==null?this:U.$$s;return new Function("Opal,self","return "+F)(e,m)},{$$s:ke});else{if(le(ye["$nil?"]())&&le(je(ze.$length(),1))&&Le(ze.$first()["$[]"](0),"@"))return ke.$instance_variable_get(ze.$first());le(ze["$any?"]())&&P.$raise(O("ArgumentError"),"wrong number of arguments ("+ze.$size()+" for 0)")}var Ee=ye.$$s,re;if(ye.$$s=null,ke.$$is_a_module){ke.$$eval=!0;try{re=ye.call(ke,ke)}finally{ke.$$eval=!1}}else re=ye.call(ke,ke);return ye.$$s=Ee,re},-1),W(Ne,"$instance_exec",function Fe(_e){var ye=Fe.$$p||xe,de,ze,fe=this;Fe.$$p=null,de=v(arguments),ze=de,le(ye)||P.$raise(O("ArgumentError"),"no block given");var ke=ye.$$s,ie;if(ye.$$s=null,fe.$$is_a_module){fe.$$eval=!0;try{ie=ye.apply(fe,ze)}finally{fe.$$eval=!1}}else ie=ye.apply(fe,ze);return ye.$$s=ke,ie},-1),W(Ne,"$singleton_method_added",function(_e){return v(arguments),xe},-1),W(Ne,"$singleton_method_removed",function(_e){return v(arguments),xe},-1),W(Ne,"$singleton_method_undefined",function(_e){return v(arguments),xe},-1),W(Ne,"$method_missing",function Fe(_e,ye){Fe.$$p;var de,ze,fe=this,ke=xe;return Fe.$$p=null,de=v(arguments,1),ze=de,ke=te.$inspect(fe),P.$raise(O("NoMethodError").$new("undefined method `"+_e+"' for "+ke,_e,ze),xe,P.$caller(1))},-2),te.$pristine(Ne,"method_missing"),W(Ne,"$respond_to_missing?",function(_e,ye){return!1},-2)}("::",null)};Opal.modules["corelib/kernel"]=function(e){var l=e.truthy,v=e.coerce_to,W=e.respond_to,L=e.Opal,ae=e.deny_frozen_access,te=e.freeze,le=e.freeze_props,ne=e.jsid,P=e.module,oe=e.return_val,me=e.def,Se=e.Kernel,Le=e.gvars,je=e.slice,xe=e.send,O=e.to_a,Ie=e.ensure_kwargs,We=e.eqeq,Ne=e.hash2,Fe=e.rb_plus,_e=e.eqeqeq,ye=e.return_self,de=e.rb_le,ze=e.extract_kwargs,fe=e.rb_lt,ke=e.Object,ie=e.alias,p=e.klass,ee=[],q=e.nil,j=e.$$$;return e.add_stubs("!,=~,==,object_id,raise,new,class,coerce_to?,<<,map,caller,nil?,allocate,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_copy,define_method,singleton_class,to_proc,initialize_dup,for,empty?,pop,call,append_features,extend_object,extended,gets,__id__,include?,each,instance_variables,instance_variable_get,inspect,+,to_s,instance_variable_name!,respond_to?,to_int,coerce_to!,Integer,===,enum_for,result,any?,print,format,puts,<=,length,[],readline,<,first,split,to_str,exception,backtrace,rand,respond_to_missing?,pristine,try_convert!,expand_path,join,start_with?,new_seed,srand,tag,value,open,is_a?,__send__,yield_self,include"),function(F,Ee){var re=P(F,"Kernel"),U=[re].concat(Ee),m=e.$r(U);me(re,"$=~",oe(!1)),me(re,"$!~",function(i){var o=this;return o["$=~"](i)["$!"]()}),me(re,"$===",function(i){var o=this,c=q;return l(c=o.$object_id()["$=="](i.$object_id()))?c:o["$=="](i)}),me(re,"$<=>",function(i){var o=this;o.$$comparable=!0;var c=o["$=="](i);return c&&c!==q?0:q}),me(re,"$method",function(i){var o=this,c=o[ne(i)];return(!c||c.$$stub)&&Se.$raise(j("NameError").$new("undefined method `"+i+"' for class `"+o.$class()+"'",i)),j("Method").$new(o,c.$$owner||o.$class(),c,i)}),me(re,"$methods",function(i){var o=this;return i==null&&(i=!0),l(i)?e.methods(o):e.own_methods(o)},-1),me(re,"$public_methods",function(i){var o=this;return i==null&&(i=!0),l(i)?e.methods(o):e.receiver_methods(o)},-1),me(re,"$Array",function(i){var o;return i===q?[]:i.$$is_array?i:(o=L["$coerce_to?"](i,j("Array"),"to_ary"),o!==q||(o=L["$coerce_to?"](i,j("Array"),"to_a"),o!==q)?o:[i])}),me(re,"$at_exit",function n(){var i=n.$$p||q,o=q;return Le.__at_exit__==null&&(Le.__at_exit__=q),n.$$p=null,Le.__at_exit__=l(o=Le.__at_exit__)?o:[],Le.__at_exit__["$<<"](i),i}),me(re,"$caller",function(i,o){i==null&&(i=1),o==null&&(o=q);var c,x;c=new Error().$backtrace(),x=[];for(var S=i+1,G=c.length;S<G;S++)c[S].match(/runtime\.js/)||x.push(c[S]);return o!=q&&(x=x.slice(0,o)),x},-1),me(re,"$caller_locations",function(i){var o,c,x=this;return o=je(arguments),c=o,xe(xe(x,"caller",O(c)),"map",[],function(G){return G==null&&(G=q),j(j(j("Thread"),"Backtrace"),"Location").$new(G)})},-1),me(re,"$class",function(){var i=this;return i.$$class}),me(re,"$copy_instance_variables",function(i){var o=this,c=Object.keys(i),x,S,G;for(x=0,S=c.length;x<S;x++)G=c[x],G.charAt(0)!=="$"&&i.hasOwnProperty(G)&&(o[G]=i[G])}),me(re,"$copy_singleton_methods",function(i){var o=this,c,x,S,G;if(i.hasOwnProperty("$$meta")&&i.$$meta!==null){var qe=e.get_singleton_class(i),Je=e.get_singleton_class(o);for(S=Object.getOwnPropertyNames(qe.$$prototype),c=0,G=S.length;c<G;c++)x=S[c],e.is_method(x)&&(Je.$$prototype[x]=qe.$$prototype[x]);Je.$$const=Object.assign({},qe.$$const),Object.setPrototypeOf(Je.$$prototype,Object.getPrototypeOf(qe.$$prototype))}for(c=0,S=Object.getOwnPropertyNames(i),G=S.length;c<G;c++)x=S[c],x.charAt(0)==="$"&&x.charAt(1)!=="$"&&i.hasOwnProperty(x)&&(o[x]=i[x])}),me(re,"$clone",function(i){var o,c=this,x=q;return i=Ie(i),o=i.$$smap.freeze,o==null&&(o=q),l(o["$nil?"]())||We(o,!0)||We(o,!1)||c.$raise(m("ArgumentError"),"unexpected value for freeze: "+o.$class()),x=c.$class().$allocate(),x.$copy_instance_variables(c),x.$copy_singleton_methods(c),x.$initialize_clone(c,Ne(["freeze"],{freeze:o})),(We(o,!0)||l(o["$nil?"]())&&l(c["$frozen?"]()))&&x.$freeze(),x},-1),me(re,"$initialize_clone",function(i,o){var c=this;return o=Ie(o),o.$$smap.freeze,c.$initialize_copy(i),c},-2),me(re,"$define_singleton_method",function n(i,o){var c=n.$$p||q,x=this;return n.$$p=null,xe(x.$singleton_class(),"define_method",[i,o],c.$to_proc())},-2),me(re,"$dup",function(){var i=this,o=q;return o=i.$class().$allocate(),o.$copy_instance_variables(i),o.$initialize_dup(i),o}),me(re,"$initialize_dup",function(i){var o=this;return o.$initialize_copy(i)}),me(re,"$enum_for",function n(i,o){var c=n.$$p||q,x,S,G,qe=this;return n.$$p=null,x=je(arguments),x.length>0&&(S=x.shift()),S==null&&(S="each"),G=x,xe(j("Enumerator"),"for",[qe,S].concat(O(G)),c.$to_proc())},-1),me(re,"$equal?",function(i){var o=this;return o===i}),me(re,"$exit",function(i){var o=q,c=q;for(Le.__at_exit__==null&&(Le.__at_exit__=q),i==null&&(i=!0),Le.__at_exit__=l(o=Le.__at_exit__)?o:[];!l(Le.__at_exit__["$empty?"]());)c=Le.__at_exit__.$pop(),c.$call();return i.$$is_boolean?i=i?0:1:i=v(i,j("Integer"),"to_int"),e.exit(i),q},-1),me(re,"$extend",function(i){var o,c,x=this;o=je(arguments),c=o,c.length==0&&x.$raise(j("ArgumentError"),"wrong number of arguments (given 0, expected 1+)"),ae(x);for(var S=x.$singleton_class(),G=c.length-1;G>=0;G--){var qe=c[G];qe.$$is_module||Se.$raise(j("TypeError"),"wrong argument type "+qe.$class()+" (expected Module)"),qe.$append_features(S),qe.$extend_object(x),qe.$extended(x)}return x},-1),me(re,"$freeze",function(){var i=this;return l(i["$frozen?"]())?i:typeof i=="object"?(le(i),te(i)):i}),me(re,"$frozen?",function(){var i=this;switch(typeof i){case"string":case"symbol":case"number":case"boolean":return!0;case"object":return i.$$frozen||!1;default:return!1}}),me(re,"$gets",function(i){var o,c;return Le.stdin==null&&(Le.stdin=q),o=je(arguments),c=o,xe(Le.stdin,"gets",O(c))},-1),me(re,"$hash",function(){var i=this;return i.$__id__()}),me(re,"$initialize_copy",oe(q));var s=[];return me(re,"$inspect",function(){var i=this,o=q,c=q,x=q,S=q;return function(){try{try{return o="",c=i.$__id__(),l(s["$include?"](c))?o=" ...":(s["$<<"](c),x=!0,xe(i.$instance_variables(),"each",[],function G(qe){var Je=G.$$s==null?this:G.$$s,$t=q,lt=q;return qe==null&&(qe=q),$t=Je.$instance_variable_get(qe),lt=m("Opal").$inspect($t),o=Fe(o," "+qe+"="+lt)},{$$s:i})),"#<"+i.$class()+":0x"+c.$to_s(16)+o+">"}catch(G){if(e.rescue(G,[m("StandardError")])){S=G;try{return"#<"+i.$class()+":0x"+c.$to_s(16)+">"}finally{e.pop_exception()}}else throw G}}finally{l(x)&&s.$pop()}}()}),me(re,"$instance_of?",function(i){var o=this;return!i.$$is_class&&!i.$$is_module&&Se.$raise(j("TypeError"),"class or module required"),o.$$class===i}),me(re,"$instance_variable_defined?",function(i){var o=this;return i=L["$instance_variable_name!"](i),e.hasOwnProperty.call(o,i.substr(1))}),me(re,"$instance_variable_get",function(i){var o=this;i=L["$instance_variable_name!"](i);var c=o[e.ivar(i.substr(1))];return c??q}),me(re,"$instance_variable_set",function(i,o){var c=this;return ae(c),i=L["$instance_variable_name!"](i),c[e.ivar(i.substr(1))]=o}),me(re,"$remove_instance_variable",function(i){var o=this;i=L["$instance_variable_name!"](i);var c=e.ivar(i.substr(1)),x;return o.hasOwnProperty(c)?(x=o[c],delete o[c],x):Se.$raise(j("NameError"),"instance variable "+i+" not defined")}),me(re,"$instance_variables",function(){var i=this,o=[],c;for(var x in i)i.hasOwnProperty(x)&&x.charAt(0)!=="$"&&(x.substr(-1)==="$"?c=x.slice(0,x.length-1):c=x,o.push("@"+c));return o}),me(re,"$Integer",function(i,o){var c,x,S;return i.$$is_string?i==="0"?0:(o===void 0?o=0:(o=v(o,j("Integer"),"to_int"),(o===1||o<0||o>36)&&Se.$raise(j("ArgumentError"),"invalid radix "+o)),x=i.toLowerCase(),x=x.replace(/(\d)_(?=\d)/g,"$1"),x=x.replace(/^(\s*[+-]?)(0[bodx]?)/,function(G,qe,Je){switch(Je){case"0b":if(o===0||o===2)return o=2,qe;case"0":case"0o":if(o===0||o===8)return o=8,qe;case"0d":if(o===0||o===10)return o=10,qe;case"0x":if(o===0||o===16)return o=16,qe}Se.$raise(j("ArgumentError"),'invalid value for Integer(): "'+i+'"')}),o=o===0?10:o,S="0-"+(o<=10?o-1:"9a-"+String.fromCharCode(97+(o-11))),new RegExp("^\\s*[+-]?["+S+"]+\\s*$").test(x)||Se.$raise(j("ArgumentError"),'invalid value for Integer(): "'+i+'"'),c=parseInt(x,o),isNaN(c)&&Se.$raise(j("ArgumentError"),'invalid value for Integer(): "'+i+'"'),c):(o!==void 0&&Se.$raise(j("ArgumentError"),"base specified for non string value"),i===q&&Se.$raise(j("TypeError"),"can't convert nil into Integer"),i.$$is_number?((i===1/0||i===-1/0||isNaN(i))&&Se.$raise(j("FloatDomainError"),i),Math.floor(i)):i["$respond_to?"]("to_int")&&(c=i.$to_int(),c!==q)?c:L["$coerce_to!"](i,j("Integer"),"to_i"))},-2),me(re,"$Float",function(i){var o;return i===q&&Se.$raise(j("TypeError"),"can't convert nil into Float"),i.$$is_string?(o=i.toString(),o=o.replace(/(\d)_(?=\d)/g,"$1"),/^\s*[-+]?0[xX][0-9a-fA-F]+\s*$/.test(o)?Se.$Integer(o):(/^\s*[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?\s*$/.test(o)||Se.$raise(j("ArgumentError"),'invalid value for Float(): "'+i+'"'),parseFloat(o))):L["$coerce_to!"](i,j("Float"),"to_f")}),me(re,"$Hash",function(i){return l(i["$nil?"]())||We(i,[])?Ne([],{}):_e(j("Hash"),i)?i:L["$coerce_to!"](i,j("Hash"),"to_hash")}),me(re,"$is_a?",function(i){var o=this;return!i.$$is_class&&!i.$$is_module&&Se.$raise(j("TypeError"),"class or module required"),e.is_a(o,i)}),me(re,"$itself",ye),me(re,"$lambda",function n(){var i=n.$$p||q;return n.$$p=null,e.lambda(i)}),me(re,"$load",function(i){return i=L["$coerce_to!"](i,j("String"),"to_str"),e.load(i)}),me(re,"$loop",function n(){var i=n.$$p||q,o=this,c=q;if(n.$$p=null,i===q)return xe(o,"enum_for",["loop"],function(){return j(j("Float"),"INFINITY")});for(;l(!0);)try{e.yieldX(i,[])}catch(x){if(e.rescue(x,[j("StopIteration")])){c=x;try{return c.$result()}finally{e.pop_exception()}}else throw x}return o}),me(re,"$nil?",oe(!1)),me(re,"$printf",function(i){var o,c,x=this;return o=je(arguments),c=o,l(c["$any?"]())&&x.$print(xe(x,"format",O(c))),q},-1),me(re,"$proc",function n(){var i=n.$$p||q;return n.$$p=null,l(i)||Se.$raise(j("ArgumentError"),"tried to create Proc object without a block"),i.$$is_lambda=!1,i}),me(re,"$puts",function(i){var o,c;return Le.stdout==null&&(Le.stdout=q),o=je(arguments),c=o,xe(Le.stdout,"puts",O(c))},-1),me(re,"$p",function(i){var o,c;return o=je(arguments),c=o,xe(c,"each",[],function(S){return Le.stdout==null&&(Le.stdout=q),S==null&&(S=q),Le.stdout.$puts(S.$inspect())}),l(de(c.$length(),1))?c["$[]"](0):c},-1),me(re,"$print",function(i){var o,c;return Le.stdout==null&&(Le.stdout=q),o=je(arguments),c=o,xe(Le.stdout,"print",O(c))},-1),me(re,"$readline",function(i){var o,c;return Le.stdin==null&&(Le.stdin=q),o=je(arguments),c=o,xe(Le.stdin,"readline",O(c))},-1),me(re,"$warn",function(i,o){var c,x,S,G,qe,Je,$t=this,lt=q;return Le.VERBOSE==null&&(Le.VERBOSE=q),Le.stderr==null&&(Le.stderr=q),c=je(arguments),x=ze(c),x=Ie(x),S=c,G=x.$$smap.uplevel,G==null&&(G=q),l(G)&&(G=L["$coerce_to!"](G,j("Integer"),"to_str"),l(fe(G,0))&&Se.$raise(j("ArgumentError"),"negative level ("+G+")"),lt=(qe=(Je=$t.$caller(Fe(G,1),1).$first(),Je===q||Je==null?q:Je.$split(":in `")),qe===q||qe==null?q:qe.$first()),l(lt)&&(lt=""+lt+": "),S=xe(S,"map",[],function(_t){return _t==null&&(_t=q),""+lt+"warning: "+_t})),l(Le.VERBOSE["$nil?"]())||l(S["$empty?"]())?q:xe(Le.stderr,"puts",O(S))},-1),me(re,"$raise",function(i,o,c){throw Le["!"]==null&&(Le["!"]=q),Le["@"]==null&&(Le["@"]=q),o==null&&(o=q),c==null&&(c=q),i==null&&Le["!"]!==q?Le["!"]:(i==null?i=j("RuntimeError").$new(""):W(i,"$to_str")?i=j("RuntimeError").$new(i.$to_str()):i.$$is_class&&W(i,"$exception")?i=i.$exception(o):i.$$is_exception||(i=j("TypeError").$new("exception class/object expected")),c!==q&&i.$set_backtrace(c),Le["!"]!==q&&e.exceptions.push(Le["!"]),Le["!"]=i,Le["@"]=i.$backtrace(),i)},-1),me(re,"$rand",function(i){return i===void 0?j(j("Random"),"DEFAULT").$rand():(i.$$is_number&&(i<0&&(i=Math.abs(i)),i%1!==0&&(i=i.$to_i()),i===0&&(i=void 0)),j(j("Random"),"DEFAULT").$rand(i))},-1),me(re,"$respond_to?",function(i,o){var c=this;o==null&&(o=!1);var x=c[ne(i)];return typeof x=="function"&&!x.$$stub?!0:c["$respond_to_missing?"].$$pristine===!0?!1:c["$respond_to_missing?"](i,o)},-2),me(re,"$respond_to_missing?",function(i,o){return!1},-2),L.$pristine(re,"respond_to?","respond_to_missing?"),me(re,"$require",function(i){return typeof i!="string"&&e.String&&e.Array&&(i=L["$coerce_to!"](i,j("String"),"to_str")),e.require(i)}),me(re,"$require_relative",function(i){return L["$try_convert!"](i,j("String"),"to_str"),i=j("File").$expand_path(j("File").$join(e.current_file,"..",i)),e.require(i)}),me(re,"$require_tree",function(i,o){var c;o=Ie(o),c=o.$$smap.autoload,c==null&&(c=!1);var x=[];i=j("File").$expand_path(i),i=e.normalize(i),i==="."&&(i="");for(var S in e.modules)S["$start_with?"](i)&&(c?x.push([S,!0]):x.push([S,e.require(S)]));return x},-2),me(re,"$singleton_class",function(){var i=this;return e.get_singleton_class(i)}),me(re,"$sleep",function(i){i==null&&(i=q),i===q&&Se.$raise(j("TypeError"),"can't convert NilClass into time interval"),i.$$is_number||Se.$raise(j("TypeError"),"can't convert "+i.$class()+" into time interval"),i<0&&Se.$raise(j("ArgumentError"),"time interval must be positive");for(var o=e.global.performance?function(){return performance.now()}:function(){return new Date},c=o();o()-c<=i*1e3;);return Math.round(i)},-1),me(re,"$srand",function(i){return i==null&&(i=m("Random").$new_seed()),j("Random").$srand(i)},-1),me(re,"$String",function(i){var o=q;return l(o=L["$coerce_to?"](i,j("String"),"to_str"))?o:L["$coerce_to!"](i,j("String"),"to_s")}),me(re,"$tap",function n(){var i=n.$$p||q,o=this;return n.$$p=null,e.yield1(i,o),o}),me(re,"$to_proc",ye),me(re,"$to_s",function(){var i=this;return"#<"+i.$class()+":0x"+i.$__id__().$to_s(16)+">"}),me(re,"$catch",function n(i){var o=n.$$p||q,c=q,x=q;n.$$p=null,i==null&&(i=q);try{return i=l(c=i)?c:ke.$new(),e.yield1(o,i)}catch(S){if(e.rescue(S,[j("UncaughtThrowError")])){x=S;try{return We(x.$tag(),i)?x.$value():Se.$raise()}finally{e.pop_exception()}}else throw S}},-1),me(re,"$throw",function(i,o){return o==null&&(o=q),Se.$raise(j("UncaughtThrowError").$new(i,o))},-2),me(re,"$open",function n(i){var o=n.$$p||q,c,x;return n.$$p=null,c=je(arguments),x=c,xe(j("File"),"open",O(x),o.$to_proc())},-1),me(re,"$yield_self",function n(){var i=n.$$p||q,o=this;return n.$$p=null,i===q?xe(o,"enum_for",["yield_self"],oe(1)):e.yield1(i,o)}),ie(re,"fail","raise"),ie(re,"kind_of?","is_a?"),ie(re,"object_id","__id__"),ie(re,"public_send","__send__"),ie(re,"send","__send__"),ie(re,"then","yield_self"),ie(re,"to_enum","enum_for")}("::",ee),function(F,Ee){var re=p(F,Ee,"Object");return delete ke.$$prototype.$require,re.$include(Se)}("::",null)};Opal.modules["corelib/main"]=function(e){var l=e.return_val,v=e.def,W=e.Object,L=e.slice,ae=e.Kernel,te=e.top;return e.nil,e.add_stubs("include,raise"),function(le,ne){return v(le,"$to_s",l("main")),v(le,"$include",function(oe){return W.$include(oe)}),v(le,"$autoload",function(oe){var me,Se;return me=L(arguments),Se=me,e.Object.$autoload.apply(e.Object,Se)},-1),v(le,"$using",function(oe){return ae.$raise("main.using is permitted only at toplevel")})}(e.get_singleton_class(te))};Opal.modules["corelib/error/errno"]=function(e){var l=e.module,v=e.truthy,W=e.rb_plus,L=e.send2,ae=e.find_super,te=e.def,le=e.klass,ne=e.nil,P=e.$$$;return e.add_stubs("+,errno,class,attr_reader"),function(oe,me){var Se=l(oe,"Errno"),Le=ne,je=ne;Le=[["EINVAL","Invalid argument",22],["EEXIST","File exists",17],["EISDIR","Is a directory",21],["EMFILE","Too many open files",24],["ESPIPE","Illegal seek",29],["EACCES","Permission denied",13],["EPERM","Operation not permitted",1],["ENOENT","No such file or directory",2],["ENAMETOOLONG","File name too long",36]],je=ne;var xe;for(xe=0;xe<Le.length;xe++)(function(){var O=Le[xe][0],Ie=Le[xe][1],We=Le[xe][2];je=e.klass(Se,e.SystemCallError,O),je.errno=We,function(Ne,Fe){return te(Ne,"$new",function _e(ye){_e.$$p;var de=this,ze=ne;return _e.$$p=null,ye==null&&(ye=ne),ze=Ie,v(ye)&&(ze=W(ze," - "+ye)),L(de,ae(de,"new",_e,!1,!0),"new",[ze],null)},-1)}(e.get_singleton_class(je))})()}("::"),function(oe,me,Se){var Le=le(oe,me,"SystemCallError");return te(Le,"$errno",function(){var xe=this;return xe.$class().$errno()}),function(je,xe){return je.$attr_reader("errno")}(e.get_singleton_class(Le))}("::",P("StandardError"))};Opal.modules["corelib/error"]=function(e){var l=e.klass,v=e.slice,W=e.gvars,L=e.defs,ae=e.send,te=e.to_a,le=e.def,ne=e.truthy,P=e.hash2,oe=e.Kernel,me=e.not,Se=e.rb_plus,Le=e.eqeq,je=e.Object,xe=e.ensure_kwargs,O=e.send2,Ie=e.find_super,We=e.module,Ne=[],Fe=e.nil,_e=e.$$$;return e.add_stubs("new,map,backtrace,clone,to_s,merge,tty?,[],include?,raise,dup,empty?,!,caller,shift,+,class,join,cause,full_message,==,reverse,split,autoload,attr_reader,inspect"),function(ye,de,ze){var fe=l(ye,de,"Exception"),ke=[fe].concat(ze),ie=e.$r(ke),p=fe.$$prototype;p.message=Fe,e.prop(fe.$$prototype,"$$is_exception",!0);var ee;Error.stackTraceLimit=100,L(fe,"$new",function(F){var Ee,re,U=this;W["!"]==null&&(W["!"]=Fe),Ee=v(arguments),re=Ee;var m=re.length>0?re[0]:Fe,s=new U.$$constructor(m);return s.name=U.$$name,s.message=m,s.cause=W["!"],e.send(s,s.$initialize,re),e.config.enable_stack_trace&&Error.captureStackTrace&&Error.captureStackTrace(s,ee),s},-1),ee=fe.$new,L(fe,"$exception",function(F){var Ee,re,U=this;return Ee=v(arguments),re=Ee,ae(U,"new",te(re))},-1),le(fe,"$initialize",function(F){var Ee,re,U=this;return Ee=v(arguments),re=Ee,U.message=re.length>0?re[0]:Fe},-1);function q(j){for(var F=[],Ee,re=0;re<j.length;re++){var U=j[re];!U||!U.$$is_string||((Ee=U.match(/^    at (.*?) \((.*?)\)$/))?F.push(Ee[2]+":in `"+Ee[1]+"'"):(Ee=U.match(/^    at (.*?)$/))?F.push(Ee[1]+":in `undefined'"):(Ee=U.match(/^  from (.*?)$/))?F.push(Ee[1]):(Ee=U.match(/^(.*?)@(.*?)$/))&&F.push(Ee[2]+":in `"+Ee[1]+"'"))}return F}return le(fe,"$backtrace",function(){var F=this;if(F.backtrace)return F.backtrace;var Ee=F.stack;return typeof Ee<"u"&&Ee.$$is_string?F.backtrace=q(Ee.split(`
`)):Ee?F.backtrace=q(Ee):[]}),le(fe,"$backtrace_locations",function(){var F,Ee=this;return Ee.backtrace_locations||(Ee.backtrace_locations=(F=Ee.$backtrace(),F===Fe||F==null?Fe:ae(F,"map",[],function(U){return U==null&&(U=Fe),_e(_e(_e("Thread"),"Backtrace"),"Location").$new(U)}))),Ee.backtrace_locations}),le(fe,"$cause",function(){var F=this;return F.cause||Fe}),le(fe,"$exception",function(F){var Ee=this;if(F==null&&(F=Fe),F===Fe||Ee===F)return Ee;var re=Ee.$clone();return re.message=F,Ee.backtrace&&(re.backtrace=Ee.backtrace.$dup()),re.stack=Ee.stack,re.cause=Ee.cause,re},-1),le(fe,"$message",function(){var F=this;return F.$to_s()}),le(fe,"$full_message",function(F){var Ee,re=this,U=Fe,m=Fe,s=Fe,n=Fe,i=Fe,o=Fe,c=Fe,x=Fe,S=Fe;return W.stderr==null&&(W.stderr=Fe),F==null&&(F=Fe),ne(ie("Hash","skip_raise")?"constant":Fe)?(F=P(["highlight","order"],{highlight:W.stderr["$tty?"](),order:"top"}).$merge(ne(U=F)?U:P([],{})),Ee=[F["$[]"]("highlight"),F["$[]"]("order")],m=Ee[0],s=Ee[1],ne([!0,!1]["$include?"](m))||oe.$raise(_e("ArgumentError"),"expected true or false as highlight: "+m),ne(["top","bottom"]["$include?"](s))||oe.$raise(_e("ArgumentError"),"expected :top or :bottom as order: "+s),ne(m)?(n="\x1B[1;4m",i="\x1B[1m",o="\x1B[m"):n=i=o="",c=re.$backtrace().$dup(),(me(c)||ne(c["$empty?"]()))&&(c=re.$caller()),x=c.$shift(),S=""+x+": ",S=Se(S,""+i+re.$to_s()+" ("+n+re.$class()+o+i+")"+o+`
`),S=Se(S,ae(c,"map",[],function(qe){return qe==null&&(qe=Fe),"	from "+qe+`
`}).$join()),ne(re.$cause())&&(S=Se(S,re.$cause().$full_message(P(["highlight"],{highlight:m})))),Le(s,"bottom")&&(S=S.$split(`
`).$reverse().$join(`
`),S=Se(""+i+"Traceback"+o+` (most recent call last):
`,S)),S):""+re.message+`
`+re.stack},-1),le(fe,"$inspect",function(){var F=this,Ee=Fe;return Ee=F.$to_s(),ne(Ee["$empty?"]())?F.$class().$to_s():"#<"+F.$class().$to_s()+": "+F.$to_s()+">"}),le(fe,"$set_backtrace",function(F){var Ee=this,re=!0,U,m;if(F===Fe)Ee.backtrace=Fe,Ee.stack="";else if(F.$$is_string)Ee.backtrace=[F],Ee.stack="  from "+F;else{if(F.$$is_array){for(U=0,m=F.length;U<m;U++)if(!F[U].$$is_string){re=!1;break}}else re=!1;re===!1&&oe.$raise(_e("TypeError"),"backtrace must be Array of String"),Ee.backtrace=F,Ee.stack=ae(F,"map",[],function(n){return n==null&&(n=Fe),Se("  from ",n)}).join(`
`)}return F}),le(fe,"$to_s",function(){var F=this,Ee=Fe,re=Fe;return ne(Ee=ne(re=F.message)?F.message.$to_s():re)?Ee:F.$class().$to_s()})}("::",Error,Ne),l("::",_e("Exception"),"ScriptError"),l("::",_e("ScriptError"),"SyntaxError"),l("::",_e("ScriptError"),"LoadError"),l("::",_e("ScriptError"),"NotImplementedError"),l("::",_e("Exception"),"SystemExit"),l("::",_e("Exception"),"NoMemoryError"),l("::",_e("Exception"),"SignalException"),l("::",_e("SignalException"),"Interrupt"),l("::",_e("Exception"),"SecurityError"),l("::",_e("Exception"),"SystemStackError"),l("::",_e("Exception"),"StandardError"),l("::",_e("StandardError"),"EncodingError"),l("::",_e("StandardError"),"ZeroDivisionError"),l("::",_e("StandardError"),"NameError"),l("::",_e("NameError"),"NoMethodError"),l("::",_e("StandardError"),"RuntimeError"),l("::",_e("RuntimeError"),"FrozenError"),l("::",_e("StandardError"),"LocalJumpError"),l("::",_e("StandardError"),"TypeError"),l("::",_e("StandardError"),"ArgumentError"),l("::",_e("ArgumentError"),"UncaughtThrowError"),l("::",_e("StandardError"),"IndexError"),l("::",_e("IndexError"),"StopIteration"),l("::",_e("StopIteration"),"ClosedQueueError"),l("::",_e("IndexError"),"KeyError"),l("::",_e("StandardError"),"RangeError"),l("::",_e("RangeError"),"FloatDomainError"),l("::",_e("StandardError"),"IOError"),l("::",_e("IOError"),"EOFError"),l("::",_e("StandardError"),"SystemCallError"),l("::",_e("StandardError"),"RegexpError"),l("::",_e("StandardError"),"ThreadError"),l("::",_e("StandardError"),"FiberError"),je.$autoload("Errno","corelib/error/errno"),function(ye,de){var ze=l(ye,de,"FrozenError");return ze.$attr_reader("receiver"),le(ze,"$initialize",function fe(ke,ie){var p;fe.$$p;var ee=this;return fe.$$p=null,ie=xe(ie),p=ie.$$smap.receiver,p==null&&(p=Fe),O(ee,Ie(ee,"initialize",fe,!1,!0),"initialize",[ke],null),ee.receiver=p},-2)}("::",_e("RuntimeError")),function(ye,de){var ze=l(ye,de,"UncaughtThrowError"),fe=ze.$$prototype;return fe.tag=Fe,ze.$attr_reader("tag","value"),le(ze,"$initialize",function ke(ie,p){ke.$$p;var ee=this;return ke.$$p=null,p==null&&(p=Fe),ee.tag=ie,ee.value=p,O(ee,Ie(ee,"initialize",ke,!1,!0),"initialize",["uncaught throw "+ee.tag.$inspect()],null)},-2)}("::",_e("ArgumentError")),function(ye,de){var ze=l(ye,de,"NameError");return ze.$attr_reader("name"),le(ze,"$initialize",function fe(ke,ie){fe.$$p;var p=this;return fe.$$p=null,ie==null&&(ie=Fe),O(p,Ie(p,"initialize",fe,!1,!0),"initialize",[ke],null),p.name=ie},-2)}("::",null),function(ye,de){var ze=l(ye,de,"NoMethodError");return ze.$attr_reader("args"),le(ze,"$initialize",function fe(ke,ie,p){fe.$$p;var ee=this;return fe.$$p=null,ie==null&&(ie=Fe),p==null&&(p=[]),O(ee,Ie(ee,"initialize",fe,!1,!0),"initialize",[ke,ie],null),ee.args=p},-2)}("::",null),function(ye,de){var ze=l(ye,de,"StopIteration");return ze.$attr_reader("result")}("::",null),function(ye,de){var ze=l(ye,de,"KeyError"),fe=ze.$$prototype;return fe.receiver=fe.key=Fe,le(ze,"$initialize",function ke(ie,p){var ee,q;ke.$$p;var j=this;return ke.$$p=null,p=xe(p),ee=p.$$smap.receiver,ee==null&&(ee=Fe),q=p.$$smap.key,q==null&&(q=Fe),O(j,Ie(j,"initialize",ke,!1,!0),"initialize",[ie],null),j.receiver=ee,j.key=q},-2),le(ze,"$receiver",function(){var ie=this,p=Fe;return ne(p=ie.receiver)?p:oe.$raise(_e("ArgumentError"),"no receiver is available")}),le(ze,"$key",function(){var ie=this,p=Fe;return ne(p=ie.key)?p:oe.$raise(_e("ArgumentError"),"no key is available")})}("::",null),function(ye,de){var ze=We(ye,"JS"),fe=[ze].concat(de);return l(fe[0],null,"Error"),Fe}("::",Ne)};Opal.modules["corelib/constants"]=function(e){var l=e.const_set;e.nil;var v=e.$$$;return l("::","RUBY_PLATFORM","opal"),l("::","RUBY_ENGINE","opal"),l("::","RUBY_VERSION","3.2.0"),l("::","RUBY_ENGINE_VERSION","1.7.3"),l("::","RUBY_RELEASE_DATE","2023-03-23"),l("::","RUBY_PATCHLEVEL",0),l("::","RUBY_REVISION","0"),l("::","RUBY_COPYRIGHT","opal - Copyright (C) 2011-2023 Adam Beynon and the Opal contributors"),l("::","RUBY_DESCRIPTION","opal "+v("RUBY_ENGINE_VERSION")+" ("+v("RUBY_RELEASE_DATE")+" revision "+v("RUBY_REVISION")+")")};Opal.modules["opal/base"]=function(e){var l=e.Object;return e.nil,e.add_stubs("require"),l.$require("corelib/runtime"),l.$require("corelib/helpers"),l.$require("corelib/module"),l.$require("corelib/class"),l.$require("corelib/basic_object"),l.$require("corelib/kernel"),l.$require("corelib/main"),l.$require("corelib/error"),l.$require("corelib/constants")};Opal.modules["corelib/nil"]=function(e){var l=e.klass,v=e.Kernel,W=e.def,L=e.return_val,ae=e.ensure_kwargs,te=e.NilClass,le=e.slice,ne=e.truthy,P=e.rb_gt,oe=e.alias,me=e.nil,Se=e.$$$;return e.add_stubs("raise,name,new,>,length,Rational,to_i"),function(Le,je,xe){var O=l(Le,je,"NilClass");return O.$$prototype.$$meta=O,function(Ie,We){return W(Ie,"$allocate",function(){var Fe=this;return v.$raise(Se("TypeError"),"allocator undefined for "+Fe.$name())}),e.udef(Ie,"$new"),me}(e.get_singleton_class(O)),W(O,"$!",L(!0)),W(O,"$&",L(!1)),W(O,"$|",function(We){return We!==!1&&We!==me}),W(O,"$^",function(We){return We!==!1&&We!==me}),W(O,"$==",function(We){return We===me}),W(O,"$dup",L(me)),W(O,"$clone",function(We){return We=ae(We),We.$$smap.freeze,me},-1),W(O,"$inspect",L("nil")),W(O,"$nil?",L(!0)),W(O,"$singleton_class",function(){return te}),W(O,"$to_a",function(){return[]}),W(O,"$to_h",function(){return e.hash()}),W(O,"$to_i",L(0)),W(O,"$to_s",L("")),W(O,"$to_c",function(){return Se("Complex").$new(0,0)}),W(O,"$rationalize",function(We){var Ne,Fe;return Ne=le(arguments),Fe=Ne,ne(P(Fe.$length(),1))&&v.$raise(Se("ArgumentError")),v.$Rational(0,1)},-1),W(O,"$to_r",function(){return v.$Rational(0,1)}),W(O,"$instance_variables",function(){return[]}),oe(O,"to_f","to_i")}("::",null)};Opal.modules["corelib/boolean"]=function(e){var l=e.klass,v=e.Kernel,W=e.def,L=e.return_self,ae=e.ensure_kwargs,te=e.slice,le=e.truthy,ne=e.send2,P=e.find_super,oe=e.to_a,me=e.alias,Se=e.nil,Le=e.$$$;return e.add_stubs("raise,name,==,to_s,__id__"),function(je,xe,O){var Ie=l(je,xe,"Boolean");e.prop(Ie.$$prototype,"$$is_boolean",!0);for(var We=["$$class","$$meta"],Ne=0;Ne<We.length;Ne++)Object.defineProperty(Ie.$$prototype,We[Ne],{configurable:!0,enumerable:!1,get:function(){return this==!0?e.TrueClass:this==!1?e.FalseClass:e.Boolean}});return Object.defineProperty(Ie.$$prototype,"$$id",{configurable:!0,enumerable:!1,get:function(){return this==!0?2:this==!1?0:Se}}),function(Fe,_e){return W(Fe,"$allocate",function(){var de=this;return v.$raise(Le("TypeError"),"allocator undefined for "+de.$name())}),e.udef(Fe,"$new"),Se}(e.get_singleton_class(Ie)),W(Ie,"$__id__",function(){var _e=this;return _e.valueOf()?2:0}),W(Ie,"$!",function(){var _e=this;return _e!=!0}),W(Ie,"$&",function(_e){var ye=this;return ye==!0?_e!==!1&&_e!==Se:!1}),W(Ie,"$|",function(_e){var ye=this;return ye==!0?!0:_e!==!1&&_e!==Se}),W(Ie,"$^",function(_e){var ye=this;return ye==!0?_e===!1||_e===Se:_e!==!1&&_e!==Se}),W(Ie,"$==",function(_e){var ye=this;return ye==!0===_e.valueOf()}),W(Ie,"$singleton_class",function(){var _e=this;return _e.$$meta}),W(Ie,"$to_s",function(){var _e=this;return _e==!0?"true":"false"}),W(Ie,"$dup",L),W(Ie,"$clone",function(_e){var ye=this;return _e=ae(_e),_e.$$smap.freeze,ye},-1),W(Ie,"$method_missing",function Fe(_e,ye){var de=Fe.$$p||Se,ze,fe,ke=this;Fe.$$p=null,ze=te(arguments,1),fe=ze;var ie=ke.$$class.$$prototype[e.jsid(_e)];return le(typeof ie<"u"&&!ie.$$stub)||ne(ke,P(ke,"method_missing",Fe,!1,!0),"method_missing",[_e].concat(oe(fe)),de),e.send(ke,ie,fe,de)},-2),W(Ie,"$respond_to_missing?",function(_e,ye){var de=this,ze=de.$$class.$$prototype[e.jsid(_e)];return typeof ze<"u"&&!ze.$$stub},-2),me(Ie,"eql?","=="),me(Ie,"equal?","=="),me(Ie,"inspect","to_s"),me(Ie,"object_id","__id__")}("::",Boolean),l("::",Le("Boolean"),"TrueClass"),l("::",Le("Boolean"),"FalseClass"),Se};Opal.modules["corelib/comparable"]=function(e){var l=e.truthy,v=e.module,W=e.rb_gt,L=e.rb_lt,ae=e.eqeqeq,te=e.Kernel,le=e.def,ne=e.nil,P=e.$$$;return e.add_stubs(">,<,===,raise,class,<=>,equal?"),function(oe){var me=v(oe,"Comparable"),Se=ne;function Le(O){return e.is_a(O,e.Integer)?O:W(O,0)?1:L(O,0)?-1:0}function je(O,Ie){var We;ae(ne,Se=Ie)||ae(!0,Se)||ae(!1,Se)||ae(P("Integer"),Se)||ae(P("Float"),Se)?We=Ie.$inspect():We=Ie.$$class,te.$raise(P("ArgumentError"),"comparison of "+O.$class()+" with "+We+" failed")}function xe(O,Ie){var We=O["$<=>"](Ie);return l(We)||je(O,Ie),Le(We)}return le(me,"$==",function(Ie){var We=this,Ne=ne;return l(We["$equal?"](Ie))?!0:We["$<=>"]==e.Kernel["$<=>"]?!1:We.$$comparable?(We.$$comparable=!1,!1):l(Ne=We["$<=>"](Ie))?Le(Ne)==0:!1}),le(me,"$>",function(Ie){var We=this;return xe(We,Ie)>0}),le(me,"$>=",function(Ie){var We=this;return xe(We,Ie)>=0}),le(me,"$<",function(Ie){var We=this;return xe(We,Ie)<0}),le(me,"$<=",function(Ie){var We=this;return xe(We,Ie)<=0}),le(me,"$between?",function(Ie,We){var Ne=this;return!(L(Ne,Ie)||W(Ne,We))}),le(me,"$clamp",function(Ie,We){var Ne=this;We==null&&(We=ne);var Fe,_e;if(We===ne&&(e.is_a(Ie,e.Range)||te.$raise(P("TypeError"),"wrong argument type "+Ie.$class()+" (expected Range)"),_e=Ie.excl,We=Ie.end,Ie=Ie.begin,We!==ne&&_e&&te.$raise(P("ArgumentError"),"cannot clamp with an exclusive range")),Ie!==ne&&We!==ne&&xe(Ie,We)>0&&te.$raise(P("ArgumentError"),"min argument must be smaller than max argument"),Ie!==ne){if(Fe=xe(Ne,Ie),Fe==0)return Ne;if(Fe<0)return Ie}return We!==ne&&(Fe=xe(Ne,We),Fe>0)?We:Ne},-2)}("::")};Opal.modules["corelib/regexp"]=function(e){var l=e.coerce_to,v=e.prop,W=e.freeze,L=e.klass,ae=e.const_set,te=e.send2,le=e.find_super,ne=e.def,P=e.truthy,oe=e.gvars,me=e.slice,Se=e.Kernel,Le=e.Opal,je=e.alias,xe=e.send,O=e.hash2,Ie=e.rb_plus,We=e.ensure_kwargs,Ne=e.rb_ge,Fe=e.to_a,_e=e.eqeqeq,ye=e.rb_minus,de=e.return_ivar,ze=[],fe=e.nil,ke=e.$$$;return e.add_stubs("nil?,[],raise,escape,options,to_str,new,join,coerce_to!,!,match,coerce_to?,begin,frozen?,uniq,map,scan,source,to_proc,transform_values,group_by,each_with_index,+,last,=~,==,attr_reader,>=,length,is_a?,include?,names,regexp,named_captures,===,captures,-,inspect,empty?,each,to_a"),L("::",ke("StandardError"),"RegexpError"),function(ie,p,ee){var q=L(ie,p,"Regexp"),j=[q].concat(ee),F=e.$r(j);return ae(q,"IGNORECASE",1),ae(q,"EXTENDED",2),ae(q,"MULTILINE",4),e.prop(q.$$prototype,"$$is_regexp",!0),function(Ee,re){var U=[Ee].concat(re),m=e.$r(U);return ne(Ee,"$allocate",function s(){var n=s.$$p||fe,i=this,o=fe;return s.$$p=null,o=te(i,le(i,"allocate",s,!1,!0),"allocate",[],n),o.uninitialized=!0,o}),ne(Ee,"$escape",function(n){return e.escape_regexp(n)}),ne(Ee,"$last_match",function(n){return oe["~"]==null&&(oe["~"]=fe),n==null&&(n=fe),P(n["$nil?"]())?oe["~"]:P(oe["~"])?oe["~"]["$[]"](n):fe},-1),ne(Ee,"$union",function(n){var i,o,c=this;i=me(arguments),o=i;var x,S,G,qe,Je;if(o.length==0)return/(?!)/;if(o.length==1&&o[0].$$is_regexp)return o[0];x=o[0].$$is_array,o.length>1&&x&&Se.$raise(ke("TypeError"),"no implicit conversion of Array into String"),x&&(o=o[0]),qe=void 0,S=[];for(var $t=0;$t<o.length;$t++)G=o[$t],G.$$is_string?S.push(c.$escape(G)):G.$$is_regexp?(Je=G.$options(),qe!=null&&qe!=Je&&Se.$raise(ke("TypeError"),"All expressions must use the same options"),qe=Je,S.push("("+G.source+")")):S.push(c.$escape(G.$to_str()));return c.$new(S.$join("|"),qe)},-1),ne(Ee,"$new",function(n,i){if(n.$$is_regexp)return new RegExp(n);if(n=Le["$coerce_to!"](n,ke("String"),"to_str"),n.charAt(n.length-1)==="\\"&&n.charAt(n.length-2)!=="\\"&&Se.$raise(ke("RegexpError"),"too short escape sequence: /"+n+"/"),n=n.replace("\\A","^").replace("\\z","$"),i===void 0||i["$!"]())return new RegExp(n);if(i.$$is_number){var o="";m("IGNORECASE")&i&&(o+="i"),m("MULTILINE")&i&&(o+="m"),i=o}else i="i";return new RegExp(n,i)},-2),je(Ee,"compile","new"),je(Ee,"quote","escape")}(e.get_singleton_class(q),j),ne(q,"$==",function(re){var U=this;return re instanceof RegExp&&U.toString()===re.toString()}),ne(q,"$===",function(re){var U=this;return U.$match(Le["$coerce_to?"](re,ke("String"),"to_str"))!==fe}),ne(q,"$=~",function(re){var U=this,m=fe;return oe["~"]==null&&(oe["~"]=fe),P(m=U.$match(re))?oe["~"].$begin(0):m}),ne(q,"$freeze",function(){var re=this;return P(re["$frozen?"]())?re:(re.hasOwnProperty("$$g")||v(re,"$$g",null),re.hasOwnProperty("$$gm")||v(re,"$$gm",null),W(re))}),ne(q,"$inspect",function(){var re=this,U=/^\/(.*)\/([^\/]*)$/,m=re.toString(),s=U.exec(m);if(s){for(var n=s[1],i=s[2],o=n.split(""),c=o.length,x=!1,S="",G=0;G<c;G++){var qe=o[G];!x&&qe=="/"&&(S=S.concat("\\")),S=S.concat(qe),qe=="\\"?x?x=!1:x=!0:x=!1}return"/"+S+"/"+i}else return m}),ne(q,"$match",function Ee(re,U){var m=Ee.$$p||fe,s=this;if(oe["~"]==null&&(oe["~"]=fe),Ee.$$p=null,s.uninitialized&&Se.$raise(ke("TypeError"),"uninitialized Regexp"),U===void 0){if(re===fe)return oe["~"]=fe;var n=s.exec(l(re,ke("String"),"to_str"));return n?(oe["~"]=ke("MatchData").$new(s,n),m===fe?oe["~"]:e.yield1(m,oe["~"])):oe["~"]=fe}if(U=l(U,ke("Integer"),"to_int"),re===fe||(re=l(re,ke("String"),"to_str"),U<0&&(U+=re.length,U<0)))return oe["~"]=fe;for(var i,o=e.global_regexp(s);;){if(i=o.exec(re),i===null)return oe["~"]=fe;if(i.index>=U)return oe["~"]=ke("MatchData").$new(o,i),m===fe?oe["~"]:e.yield1(m,oe["~"]);o.lastIndex=i.index+1}},-2),ne(q,"$match?",function(re,U){var m=this;if(m.uninitialized&&Se.$raise(ke("TypeError"),"uninitialized Regexp"),U===void 0)return re===fe?!1:m.test(l(re,ke("String"),"to_str"));if(U=l(U,ke("Integer"),"to_int"),re===fe||(re=l(re,ke("String"),"to_str"),U<0&&(U+=re.length,U<0)))return!1;var s,n=e.global_regexp(m);return s=n.exec(re),!(s===null||s.index<U)},-2),ne(q,"$names",function(){var re=this;return xe(re.$source().$scan(/\(?<(\w+)>/,O(["no_matchdata"],{no_matchdata:!0})),"map",[],"first".$to_proc()).$uniq()}),ne(q,"$named_captures",function(){var re=this;return xe(xe(xe(re.$source().$scan(/\(?<(\w+)>/,O(["no_matchdata"],{no_matchdata:!0})),"map",[],"first".$to_proc()).$each_with_index(),"group_by",[],"first".$to_proc()),"transform_values",[],function(m){return m==null&&(m=fe),xe(m,"map",[],function(n){return n==null&&(n=fe),Ie(n.$last(),1)})})}),ne(q,"$~",function(){var re=this;return oe._==null&&(oe._=fe),re["$=~"](oe._)}),ne(q,"$source",function(){var re=this;return re.source}),ne(q,"$options",function(){var re=this;re.uninitialized&&Se.$raise(ke("TypeError"),"uninitialized Regexp");var U=0;return re.multiline&&(U|=F("MULTILINE")),re.ignoreCase&&(U|=F("IGNORECASE")),U}),ne(q,"$casefold?",function(){var re=this;return re.ignoreCase}),je(q,"eql?","=="),je(q,"to_s","source")}("::",RegExp,ze),function(ie,p,ee){var q=L(ie,p,"MatchData"),j=[q].concat(ee),F=e.$r(j),Ee=q.$$prototype;return Ee.matches=fe,q.$attr_reader("post_match","pre_match","regexp","string"),ne(q,"$initialize",function(U,m,s){var n,i=this;s=We(s),n=s.$$smap.no_matchdata,n==null&&(n=!1),P(n)||(oe["~"]=i),i.regexp=U,i.begin=m.index,i.string=m.input,i.pre_match=m.input.slice(0,m.index),i.post_match=m.input.slice(m.index+m[0].length),i.matches=[];for(var o=0,c=m.length;o<c;o++){var x=m[o];x==null?i.matches.push(fe):i.matches.push(x)}},-3),ne(q,"$match",function(U){var m=this,s=fe;return P(s=m["$[]"](U))?s:P(U["$is_a?"](F("Integer")))&&P(Ne(U,m.$length()))?Se.$raise(ke("IndexError"),"index "+U+" out of matches"):fe}),ne(q,"$match_length",function(U){var m,s=this;return m=s.$match(U),m===fe||m==null?fe:m.$length()}),ne(q,"$[]",function(U){var m,s,n=this;return m=me(arguments),s=m,s[0].$$is_string?(n.$regexp().$names()["$include?"](s["$[]"](0))["$!"]()&&Se.$raise(ke("IndexError"),"undefined group name reference: "+s["$[]"](0)),n.$named_captures()["$[]"](s["$[]"](0))):xe(n.matches,"[]",Fe(s))},-1),ne(q,"$offset",function(U){var m=this;return U!==0&&Se.$raise(ke("ArgumentError"),"MatchData#offset only supports 0th element"),[m.begin,m.begin+m.matches[U].length]}),ne(q,"$==",function(U){var m=this,s=fe,n=fe,i=fe,o=fe;return _e(ke("MatchData"),U)?P(s=P(n=P(i=P(o=m.string==U.string)?m.regexp.toString()==U.regexp.toString():o)?m.pre_match==U.pre_match:i)?m.post_match==U.post_match:n)?m.begin==U.begin:s:!1}),ne(q,"$begin",function(U){var m=this;return U!==0&&Se.$raise(ke("ArgumentError"),"MatchData#begin only supports 0th element"),m.begin}),ne(q,"$end",function(U){var m=this;return U!==0&&Se.$raise(ke("ArgumentError"),"MatchData#end only supports 0th element"),m.begin+m.matches[U].length}),ne(q,"$captures",function(){var U=this;return U.matches.slice(1)}),ne(q,"$named_captures",function(){var U=this,m=fe;return m=U.$captures(),xe(U.$regexp().$named_captures(),"transform_values",[],function(n){return n==null&&(n=fe),m["$[]"](ye(n.$last(),1))})}),ne(q,"$names",function(){var U=this;return U.$regexp().$names()}),ne(q,"$inspect",function(){var U=this,m="#<MatchData "+U.matches[0].$inspect();if(U.$regexp().$names()["$empty?"]())for(var s=1,n=U.matches.length;s<n;s++)m+=" "+s+":"+U.matches[s].$inspect();else xe(U.$named_captures(),"each",[],function(o,c){return o==null&&(o=fe),c==null&&(c=fe),m+=" "+o+":"+c.$inspect()});return m+">"}),ne(q,"$length",function(){var U=this;return U.matches.length}),ne(q,"$to_a",de("matches")),ne(q,"$to_s",function(){var U=this;return U.matches[0]}),ne(q,"$values_at",function(U){var m,s,n=this;m=me(arguments),s=m;var i,o,c,x=[];for(i=0;i<s.length;i++){if(s[i].$$is_range&&(o=s[i].$to_a(),o.unshift(i,1),Array.prototype.splice.apply(s,o)),c=Le["$coerce_to!"](s[i],ke("Integer"),"to_int"),c<0&&(c+=n.matches.length,c<0)){x.push(fe);continue}x.push(n.matches[c])}return x},-1),je(q,"eql?","=="),je(q,"size","length")}(ze[0],null,ze)};Opal.modules["corelib/string"]=function(e){var l=e.coerce_to,v=e.respond_to,W=e.global_multiline_regexp,L=e.prop,ae=e.klass,te=e.def,le=e.Opal,ne=e.defs,P=e.slice,oe=e.send,me=e.to_a,Se=e.extract_kwargs,Le=e.ensure_kwargs,je=e.eqeqeq,xe=e.Kernel,O=e.truthy,Ie=e.gvars,We=e.rb_divide,Ne=e.rb_plus,Fe=e.eqeq,_e=e.hash2,ye=e.alias,de=e.const_set,ze=e.top,fe=[],ke=e.$r(fe),ie=e.nil,p=e.$$$;return e.add_stubs("require,include,coerce_to?,initialize,===,format,raise,respond_to?,to_s,to_str,<=>,==,=~,new,force_encoding,casecmp,empty?,ljust,ceil,/,+,rjust,floor,coerce_to!,nil?,class,copy_singleton_methods,initialize_clone,initialize_dup,enum_for,chomp,[],to_i,length,each_line,to_proc,to_a,match,match?,captures,proc,succ,escape,include?,upcase,unicode_normalize,dup,__id__,next,intern,pristine"),ze.$require("corelib/comparable"),ze.$require("corelib/regexp"),function(ee,q,j){var F=ae(ee,q,"String"),Ee=[F].concat(j),re=e.$r(Ee);F.$include(p("Comparable")),e.prop(F.$$prototype,"$$is_string",!0),te(F,"$__id__",function(){var s=this;return s.toString()}),ne(F,"$try_convert",function(s){return le["$coerce_to?"](s,p("String"),"to_str")}),ne(F,"$new",function(s){var n,i,o=this;n=P(arguments),i=n;var c=i[0]||"",x=i[i.length-1];return c=l(c,p("String"),"to_str"),x&&x.$$is_hash&&x.$$smap.encoding&&(c=c.$force_encoding(x.$$smap.encoding)),c=new o.$$constructor(c),c.$initialize.$$pristine||oe(c,"initialize",me(i)),c},-1),te(F,"$initialize",function(s,n){var i,o;return i=P(arguments),o=Se(i),o=Le(o),i.length>0&&i.shift(),o.$$smap.encoding,o.$$smap.capacity,ie},-1),te(F,"$%",function(s){var n=this;return je(p("Array"),s)?oe(n,"format",[n].concat(me(s))):n.$format(n,s)}),te(F,"$*",function(s){var n=this;if(s=l(s,p("Integer"),"to_int"),s<0&&xe.$raise(p("ArgumentError"),"negative argument"),s===0)return"";var i="",o=n.toString();for(o.length*s>=1<<28&&xe.$raise(p("RangeError"),"multiply count must not overflow maximum string size");(s&1)===1&&(i+=o),s>>>=1,s!==0;)o+=o;return i}),te(F,"$+",function(s){var n=this;if(s=l(s,p("String"),"to_str"),s==""&&n.$$class===e.String)return n;if(n==""&&s.$$class===e.String)return s;var i=n+s;return n.encoding===i.encoding&&s.encoding===i.encoding||n.encoding.name==="UTF-8"||s.encoding.name==="UTF-8"?i:e.enc(i,n.encoding)}),te(F,"$<=>",function(s){var n=this;if(O(s["$respond_to?"]("to_str")))return s=s.$to_str().$to_s(),n>s?1:n<s?-1:0;var i=s["$<=>"](n);return i===ie?ie:i>0?-1:i<0?1:0}),te(F,"$==",function(s){var n=this;return s.$$is_string?n.toString()===s.toString():v(s,"$to_str")?s["$=="](n):!1}),te(F,"$=~",function(s){var n=this;return s.$$is_string&&xe.$raise(p("TypeError"),"type mismatch: String given"),s["$=~"](n)}),te(F,"$[]",function(s,n){var i=this,o=i.length,c,x;if(s.$$is_range)return c=s.excl,x=s,n=s.end===ie?-1:l(s.end,p("Integer"),"to_int"),s=s.begin===ie?0:l(s.begin,p("Integer"),"to_int"),Math.abs(s)>o?ie:(s<0&&(s+=o),n<0&&(n+=o),(!c||x.end===ie)&&(n+=1),n=n-s,n<0&&(n=0),i.substr(s,n));if(s.$$is_string)return n!=null&&xe.$raise(p("TypeError")),i.indexOf(s)!==-1?s:ie;if(s.$$is_regexp){var S=i.match(s);return S===null?(Ie["~"]=ie,ie):(Ie["~"]=p("MatchData").$new(s,S),n==null?S[0]:(n=l(n,p("Integer"),"to_int"),n<0&&-n<S.length?S[n+=S.length]:n>=0&&n<S.length?S[n]:ie))}return s=l(s,p("Integer"),"to_int"),s<0&&(s+=o),n==null?s>=o||s<0?ie:i.substr(s,1):(n=l(n,p("Integer"),"to_int"),n<0||s>o||s<0?ie:i.substr(s,n))},-2),te(F,"$b",function(){var s=this;return new String(s).$force_encoding("binary")}),te(F,"$capitalize",function(){var s=this;return s.charAt(0).toUpperCase()+s.substr(1).toLowerCase()}),te(F,"$casecmp",function(s){var n=this;if(!O(s["$respond_to?"]("to_str")))return ie;s=l(s,p("String"),"to_str").$to_s();var i=/^[\x00-\x7F]*$/;return i.test(n)&&i.test(s)&&(n=n.toLowerCase(),s=s.toLowerCase()),n["$<=>"](s)}),te(F,"$casecmp?",function(s){var n=this,i=n.$casecmp(s);return i===ie?ie:i===0}),te(F,"$center",function(s,n){var i=this;if(n==null&&(n=" "),s=l(s,p("Integer"),"to_int"),n=l(n,p("String"),"to_str").$to_s(),O(n["$empty?"]())&&xe.$raise(p("ArgumentError"),"zero width padding"),O(s<=i.length))return i;var o=i.$ljust(We(Ne(s,i.length),2).$ceil(),n),c=i.$rjust(We(Ne(s,i.length),2).$floor(),n);return c+o.slice(i.length)},-2),te(F,"$chomp",function(s){var n=this;if(Ie["/"]==null&&(Ie["/"]=ie),s==null&&(s=Ie["/"]),O(s===ie||n.length===0))return n;s=le["$coerce_to!"](s,p("String"),"to_str").$to_s();var i;if(s===`
`)i=n.replace(/\r?\n?$/,"");else if(s==="")i=n.replace(/(\r?\n)+$/,"");else if(n.length>=s.length){var o=n.substr(n.length-s.length,s.length);o===s&&(i=n.substr(0,n.length-s.length))}return i??n},-1),te(F,"$chop",function(){var s=this,n=s.length,i;return n<=1?i="":s.charAt(n-1)===`
`&&s.charAt(n-2)==="\r"?i=s.substr(0,n-2):i=s.substr(0,n-1),i}),te(F,"$chr",function(){var s=this;return s.charAt(0)}),te(F,"$clone",function(s){var n,i=this,o=ie;return s=Le(s),n=s.$$smap.freeze,n==null&&(n=ie),O(n["$nil?"]())||Fe(n,!0)||Fe(n,!1)||i.$raise(re("ArgumentError"),"unexpected value for freeze: "+n.$class()),o=new String(i),o.$copy_singleton_methods(i),o.$initialize_clone(i,_e(["freeze"],{freeze:n})),Fe(n,!0)?o.$$frozen||(o.$$frozen=!0):O(n["$nil?"]())&&i.$$frozen&&(o.$$frozen=!0),o},-1),te(F,"$dup",function(){var s=this,n=ie;return n=new String(s),n.$initialize_dup(s),n}),te(F,"$count",function(s){var n,i,o=this;n=P(arguments),i=n,i.length===0&&xe.$raise(p("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var c=U(i);return c===null?0:o.length-o.replace(new RegExp(c,"g"),"").length},-1),te(F,"$delete",function(s){var n,i,o=this;n=P(arguments),i=n,i.length===0&&xe.$raise(p("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var c=U(i);return c===null?o:o.replace(new RegExp(c,"g"),"")},-1),te(F,"$delete_prefix",function(s){var n=this;return s.$$is_string||(s=l(s,p("String"),"to_str")),n.slice(0,s.length)===s?n.slice(s.length):n}),te(F,"$delete_suffix",function(s){var n=this;return s.$$is_string||(s=l(s,p("String"),"to_str")),n.slice(n.length-s.length)===s?n.slice(0,n.length-s.length):n}),te(F,"$downcase",function(){var s=this;return s.toLowerCase()}),te(F,"$each_line",function m(s,n){var i=m.$$p||ie,o,c,x,S,G=this;if(Ie["/"]==null&&(Ie["/"]=ie),m.$$p=null,o=P(arguments),c=Se(o),c=Le(c),o.length>0&&(x=o.shift()),x==null&&(x=Ie["/"]),S=c.$$smap.chomp,S==null&&(S=!1),i===ie)return G.$enum_for("each_line",x,_e(["chomp"],{chomp:S}));if(x===ie)return e.yield1(i,G),G;x=l(x,p("String"),"to_str");var qe,Je,$t,lt,gt,_t,vt,dt;if(x.length===0){for(qe=G.split(/((?:\r?\n){2})(?:(?:\r?\n)*)/),Je=0,$t=qe.length;Je<$t;Je+=2)(qe[Je]||qe[Je+1])&&(dt=(qe[Je]||"")+(qe[Je+1]||""),S&&(dt=dt.$chomp(`
`)),e.yield1(i,dt));return G}for(gt=G.$chomp(x),_t=G.length!=gt.length,vt=gt.split(x),Je=0,lt=vt.length;Je<lt;Je++)dt=vt[Je],(Je<lt-1||_t)&&(dt+=x),S&&(dt=dt.$chomp(x)),e.yield1(i,dt);return G},-1),te(F,"$empty?",function(){var s=this;return s.length===0}),te(F,"$end_with?",function(s){var n,i,o=this;n=P(arguments),i=n;for(var c=0,x=i.length;c<x;c++){var S=l(i[c],p("String"),"to_str").$to_s();if(o.length>=S.length&&o.substr(o.length-S.length,S.length)==S)return!0}return!1},-1),te(F,"$gsub",function m(s,n){var i=m.$$p||ie,o=this;if(m.$$p=null,n===void 0&&i===ie)return o.$enum_for("gsub",s);var c="",x=ie,S=0,G,qe;s.$$is_regexp?s=W(s):(s=l(s,p("String"),"to_str"),s=new RegExp(s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));for(var Je;;){if(G=s.exec(o),G===null){Ie["~"]=ie,c+=o.slice(S);break}x=p("MatchData").$new(s,G),n===void 0?(Je=s.lastIndex,qe=i(G[0]),s.lastIndex=Je):n.$$is_hash?qe=n["$[]"](G[0]).$to_s():(n.$$is_string||(n=l(n,p("String"),"to_str")),qe=n.replace(/([\\]+)([0-9+&`'])/g,function($t,lt,gt){if(lt.length%2===0)return $t;switch(gt){case"+":for(var _t=G.length-1;_t>0;_t--)if(G[_t]!==void 0)return lt.slice(1)+G[_t];return"";case"&":return lt.slice(1)+G[0];case"`":return lt.slice(1)+o.slice(0,G.index);case"'":return lt.slice(1)+o.slice(G.index+G[0].length);default:return lt.slice(1)+(G[gt]||"")}}).replace(/\\\\/g,"\\")),s.lastIndex===G.index?(c+=o.slice(S,G.index)+qe+(o[G.index]||""),s.lastIndex+=1):c+=o.slice(S,G.index)+qe,S=s.lastIndex}return Ie["~"]=x,c},-2),te(F,"$hash",function(){var s=this;return s.toString()}),te(F,"$hex",function(){var s=this;return s.$to_i(16)}),te(F,"$include?",function(s){var n=this;return s.$$is_string||(s=l(s,p("String"),"to_str")),n.indexOf(s)!==-1}),te(F,"$index",function(s,n){var i=this,o,c,x;if(n===void 0)n=0;else if(n=l(n,p("Integer"),"to_int"),n<0&&(n+=i.length,n<0))return ie;if(s.$$is_regexp)for(x=W(s);;){if(c=x.exec(i),c===null){Ie["~"]=ie,o=-1;break}if(c.index>=n){Ie["~"]=p("MatchData").$new(x,c),o=c.index;break}x.lastIndex=c.index+1}else s=l(s,p("String"),"to_str"),s.length===0&&n>i.length?o=-1:o=i.indexOf(s,n);return o===-1?ie:o},-2),te(F,"$inspect",function(){var s=this,n=/[\\\"\x00-\x1f\u007F-\u009F\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i={"\x07":"\\a","\x1B":"\\e","\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\v":"\\v",'"':'\\"',"\\":"\\\\"},o=s.replace(n,function(c){return i[c]?i[c]:(c=c.charCodeAt(0),c<=255&&(s.encoding["$binary?"]()||s.internal_encoding["$binary?"]())?"\\x"+("00"+c.toString(16).toUpperCase()).slice(-2):"\\u"+("0000"+c.toString(16).toUpperCase()).slice(-4))});return'"'+o.replace(/\#[\$\@\{]/g,"\\$&")+'"'}),te(F,"$intern",function(){var s=this;return s.toString()}),te(F,"$length",function(){var s=this;return s.length}),ye(F,"size","length"),te(F,"$lines",function m(s,n){var i=m.$$p||ie,o,c,x,S,G=this,qe=ie;return Ie["/"]==null&&(Ie["/"]=ie),m.$$p=null,o=P(arguments),c=Se(o),c=Le(c),o.length>0&&(x=o.shift()),x==null&&(x=Ie["/"]),S=c.$$smap.chomp,S==null&&(S=!1),qe=oe(G,"each_line",[x,_e(["chomp"],{chomp:S})],i.$to_proc()),O(i)?G:qe.$to_a()},-1),te(F,"$ljust",function(s,n){var i=this;if(n==null&&(n=" "),s=l(s,p("Integer"),"to_int"),n=l(n,p("String"),"to_str").$to_s(),O(n["$empty?"]())&&xe.$raise(p("ArgumentError"),"zero width padding"),O(s<=i.length))return i;var o=-1,c="";for(s-=i.length;++o<s;)c+=n;return i+c.slice(0,s)},-2),te(F,"$lstrip",function(){var s=this;return s.replace(/^[\u0000\s]*/,"")}),te(F,"$ascii_only?",function(){var s=this;return s.encoding.ascii?/^[\x00-\x7F]*$/.test(s):!1}),te(F,"$match",function m(s,n){var i=m.$$p||ie,o=this;return m.$$p=null,(je(re("String"),s)||O(s["$respond_to?"]("to_str")))&&(s=p("Regexp").$new(s.$to_str())),je(p("Regexp"),s)||xe.$raise(p("TypeError"),"wrong argument type "+s.$class()+" (expected Regexp)"),oe(s,"match",[o,n],i.$to_proc())},-2),te(F,"$match?",function(s,n){var i=this;return(je(re("String"),s)||O(s["$respond_to?"]("to_str")))&&(s=p("Regexp").$new(s.$to_str())),je(p("Regexp"),s)||xe.$raise(p("TypeError"),"wrong argument type "+s.$class()+" (expected Regexp)"),s["$match?"](i,n)},-2),te(F,"$next",function(){var s=this,n=s.length;if(n===0)return"";for(var i=s,o=s.search(/[a-zA-Z0-9]/),c=!1,x;n--;){if(x=s.charCodeAt(n),x>=48&&x<=57||x>=65&&x<=90||x>=97&&x<=122)switch(x){case 57:c=!0,x=48;break;case 90:c=!0,x=65;break;case 122:c=!0,x=97;break;default:c=!1,x+=1}else o===-1?x===255?(c=!0,x=0):(c=!1,x+=1):c=!0;if(i=i.slice(0,n)+String.fromCharCode(x)+i.slice(n+1),c&&(n===0||n===o)){switch(x){case 65:break;case 97:break;default:x+=1}n===0?i=String.fromCharCode(x)+i:i=i.slice(0,n)+String.fromCharCode(x)+i.slice(n),c=!1}if(!c)break}return i}),te(F,"$oct",function(){var s=this,n,i=s,o=8;return/^\s*_/.test(i)?0:(i=i.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/i,function(c,x,S,G){switch(G.charAt(0)){case"+":case"-":return c;case"0":if(G.charAt(1)==="x"&&S==="0x")return c}switch(S){case"0b":o=2;break;case"0":case"0o":o=8;break;case"0d":o=10;break;case"0x":o=16;break}return x+G}),n=parseInt(i.replace(/_(?!_)/g,""),o),isNaN(n)?0:n)}),te(F,"$ord",function(){var s=this;return typeof s.codePointAt=="function"?s.codePointAt(0):s.charCodeAt(0)}),te(F,"$partition",function(s){var n=this,i,o;return s.$$is_regexp?(o=s.exec(n),o===null?i=-1:(p("MatchData").$new(s,o),s=o[0],i=o.index)):(s=l(s,p("String"),"to_str"),i=n.indexOf(s)),i===-1?[n,"",""]:[n.slice(0,i),n.slice(i,i+s.length),n.slice(i+s.length)]}),te(F,"$reverse",function(){var s=this;return s.split("").reverse().join("")}),te(F,"$rindex",function(s,n){var i=this,o,c,x,S;if(n===void 0)n=i.length;else if(n=l(n,p("Integer"),"to_int"),n<0&&(n+=i.length,n<0))return ie;if(s.$$is_regexp){for(c=null,x=W(s);S=x.exec(i),!(S===null||S.index>n);)c=S,x.lastIndex=c.index+1;c===null?(Ie["~"]=ie,o=-1):(p("MatchData").$new(x,c),o=c.index)}else s=l(s,p("String"),"to_str"),o=i.lastIndexOf(s,n);return o===-1?ie:o},-2),te(F,"$rjust",function(s,n){var i=this;if(n==null&&(n=" "),s=l(s,p("Integer"),"to_int"),n=l(n,p("String"),"to_str").$to_s(),O(n["$empty?"]())&&xe.$raise(p("ArgumentError"),"zero width padding"),O(s<=i.length))return i;var o=Math.floor(s-i.length),c=Math.floor(o/n.length),x=Array(c+1).join(n),S=o-x.length;return x+n.slice(0,S)+i},-2),te(F,"$rpartition",function(s){var n=this,i,o,c,x;if(s.$$is_regexp){for(o=null,c=W(s);x=c.exec(n),x!==null;)o=x,c.lastIndex=o.index+1;o===null?i=-1:(p("MatchData").$new(c,o),s=o[0],i=o.index)}else s=l(s,p("String"),"to_str"),i=n.lastIndexOf(s);return i===-1?["","",n]:[n.slice(0,i),n.slice(i,i+s.length),n.slice(i+s.length)]}),te(F,"$rstrip",function(){var s=this;return s.replace(/[\s\u0000]*$/,"")}),te(F,"$scan",function m(s,n){var i=m.$$p||ie,o,c=this;m.$$p=null,n=Le(n),o=n.$$smap.no_matchdata,o==null&&(o=!1);var x=[],S=ie,G;for(s.$$is_regexp?s=W(s):(s=l(s,p("String"),"to_str"),s=new RegExp(s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));(G=s.exec(c))!=null;)S=p("MatchData").$new(s,G,_e(["no_matchdata"],{no_matchdata:o})),i===ie?G.length==1?x.push(G[0]):x.push(S.$captures()):G.length==1?e.yield1(i,G[0]):e.yield1(i,S.$captures()),s.lastIndex===G.index&&(s.lastIndex+=1);return o||(Ie["~"]=S),i!==ie?c:x},-2),te(F,"$singleton_class",function(){var s=this;return e.get_singleton_class(s)}),te(F,"$split",function(s,n){var i=this,o=ie;if(Ie[";"]==null&&(Ie[";"]=ie),i.length===0)return[];if(n===void 0)n=0;else if(n=le["$coerce_to!"](n,p("Integer"),"to_int"),n===1)return[i];(s===void 0||s===ie)&&(s=O(o=Ie[";"])?o:" ");var c=[],x=i.toString(),S=0,G,qe,Je;if(s.$$is_regexp?s=W(s):(s=l(s,p("String"),"to_str").$to_s(),s===" "?(s=/\s+/gm,x=x.replace(/^\s+/,"")):s=new RegExp(s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm")),c=x.split(s),c.length===1&&c[0]===x)return[c[0]];for(;(qe=c.indexOf(void 0))!==-1;)c.splice(qe,1);if(n===0){for(;c[c.length-1]==="";)c.length-=1;return c}if(G=s.exec(x),n<0){if(G!==null&&G[0]===""&&s.source.indexOf("(?=")===-1)for(qe=0,Je=G.length;qe<Je;qe++)c.push("");return c}if(G!==null&&G[0]==="")return c.splice(n-1,c.length-1,c.slice(n-1).join("")),c;if(n>=c.length)return c;for(qe=0;G!==null&&(qe++,S=s.lastIndex,qe+1!==n);)G=s.exec(x);return c.splice(n-1,c.length-1,x.slice(S)),c},-1),te(F,"$squeeze",function(s){var n,i,o=this;if(n=P(arguments),i=n,i.length===0)return o.replace(/(.)\1+/g,"$1");var c=U(i);return c===null?o:o.replace(new RegExp("("+c+")\\1+","g"),"$1")},-1),te(F,"$start_with?",function(s){var n,i,o=this;n=P(arguments),i=n;for(var c=0,x=i.length;c<x;c++)if(i[c].$$is_regexp){var S=i[c],G=S.exec(o);if(G!=null&&G.index===0)return Ie["~"]=p("MatchData").$new(S,G),!0;Ie["~"]=ie}else{var qe=l(i[c],p("String"),"to_str").$to_s();if(o.indexOf(qe)===0)return!0}return!1},-1),te(F,"$strip",function(){var s=this;return s.replace(/^[\s\u0000]*|[\s\u0000]*$/g,"")}),te(F,"$sub",function m(s,n){var i=m.$$p||ie,o=this;m.$$p=null,s.$$is_regexp||(s=l(s,p("String"),"to_str"),s=new RegExp(s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")));var c,x=s.exec(o);return x===null?(Ie["~"]=ie,c=o.toString()):(p("MatchData").$new(s,x),n===void 0?(i===ie&&xe.$raise(p("ArgumentError"),"wrong number of arguments (1 for 2)"),c=o.slice(0,x.index)+i(x[0])+o.slice(x.index+x[0].length)):n.$$is_hash?c=o.slice(0,x.index)+n["$[]"](x[0]).$to_s()+o.slice(x.index+x[0].length):(n=l(n,p("String"),"to_str"),n=n.replace(/([\\]+)([0-9+&`'])/g,function(S,G,qe){if(G.length%2===0)return S;switch(qe){case"+":for(var Je=x.length-1;Je>0;Je--)if(x[Je]!==void 0)return G.slice(1)+x[Je];return"";case"&":return G.slice(1)+x[0];case"`":return G.slice(1)+o.slice(0,x.index);case"'":return G.slice(1)+o.slice(x.index+x[0].length);default:return G.slice(1)+(x[qe]||"")}}).replace(/\\\\/g,"\\"),c=o.slice(0,x.index)+n+o.slice(x.index+x[0].length))),c},-2),te(F,"$sum",function(s){var n=this;s==null&&(s=16),s=l(s,p("Integer"),"to_int");for(var i=0,o=n.length,c=0;c<o;c++)i+=n.charCodeAt(c);return s<=0?i:i&Math.pow(2,s)-1},-1),te(F,"$swapcase",function(){var s=this,n=s.replace(/([a-z]+)|([A-Z]+)/g,function(i,o,c){return o?i.toUpperCase():i.toLowerCase()});return n}),te(F,"$to_f",function(){var s=this;if(s.charAt(0)==="_")return 0;var n=parseFloat(s.replace(/_/g,""));return isNaN(n)||n==1/0||n==-1/0?0:n}),te(F,"$to_i",function(s){var n=this;s==null&&(s=10);var i,o=n.toLowerCase(),c=l(s,p("Integer"),"to_int");return(c===1||c<0||c>36)&&xe.$raise(p("ArgumentError"),"invalid radix "+c),/^\s*_/.test(o)?0:(o=o.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/,function(x,S,G,qe){switch(qe.charAt(0)){case"+":case"-":return x;case"0":if(qe.charAt(1)==="x"&&G==="0x"&&(c===0||c===16))return x}switch(G){case"0b":if(c===0||c===2)return c=2,S+qe;break;case"0":case"0o":if(c===0||c===8)return c=8,S+qe;break;case"0d":if(c===0||c===10)return c=10,S+qe;break;case"0x":if(c===0||c===16)return c=16,S+qe;break}return x}),i=parseInt(o.replace(/_(?!_)/g,""),c),isNaN(i)?0:i)},-1),te(F,"$to_proc",function m(){m.$$p;var s=this,n=ie,i=ie,o=ie;return m.$$p=null,n=s.valueOf(),i=e.jsid(n),o=oe(xe,"proc",[],function c(x){var S=c.$$p||ie,G,qe;c.$$p=null,G=P(arguments),qe=G,qe.length===0&&xe.$raise(p("ArgumentError"),"no receiver given");var Je=qe[0];Je==null&&(Je=ie);var $t=Je[i];return $t?qe=qe.slice(1):($t=Je.$method_missing,qe[0]=n),typeof S=="function"&&($t.$$p=S),qe.length===0?$t.call(Je):$t.apply(Je,qe)},-1),o.$$source_location=ie,o}),te(F,"$to_s",function(){var s=this;return s.toString()}),te(F,"$tr",function(s,n){var i=this;if(s=l(s,p("String"),"to_str").$to_s(),n=l(n,p("String"),"to_str").$to_s(),s.length==0||s===n)return i;var o,c,x,S,G,qe,Je,$t={},lt=s.split(""),gt=lt.length,_t=n.split(""),vt=_t.length,dt=!1,mt=null;lt[0]==="^"&&lt.length>1&&(dt=!0,lt.shift(),mt=_t[vt-1],gt-=1);var bt=[],Oe=null;for(c=!1,o=0;o<gt;o++)if(S=lt[o],Oe==null)Oe=S,bt.push(S);else if(S==="-")Oe==="-"?(bt.push("-"),bt.push("-")):o==gt-1?bt.push("-"):c=!0;else if(c){for(G=Oe.charCodeAt(0),qe=S.charCodeAt(0),G>qe&&xe.$raise(p("ArgumentError"),'invalid range "'+String.fromCharCode(G)+"-"+String.fromCharCode(qe)+'" in string transliteration'),x=G+1;x<qe;x++)bt.push(String.fromCharCode(x));bt.push(S),c=null,Oe=null}else bt.push(S);if(lt=bt,gt=lt.length,dt)for(o=0;o<gt;o++)$t[lt[o]]=!0;else{if(vt>0){var be=[],Te=null;for(c=!1,o=0;o<vt;o++)if(S=_t[o],Te==null)Te=S,be.push(S);else if(S==="-")Te==="-"?(be.push("-"),be.push("-")):o==vt-1?be.push("-"):c=!0;else if(c){for(G=Te.charCodeAt(0),qe=S.charCodeAt(0),G>qe&&xe.$raise(p("ArgumentError"),'invalid range "'+String.fromCharCode(G)+"-"+String.fromCharCode(qe)+'" in string transliteration'),x=G+1;x<qe;x++)be.push(String.fromCharCode(x));be.push(S),c=null,Te=null}else be.push(S);_t=be,vt=_t.length}var He=gt-vt;if(He>0){var h=vt>0?_t[vt-1]:"";for(o=0;o<He;o++)_t.push(h)}for(o=0;o<gt;o++)$t[lt[o]]=_t[o]}var I="";for(o=0,Je=i.length;o<Je;o++){S=i.charAt(o);var se=$t[S];dt?I+=se==null?mt:S:I+=se??S}return I}),te(F,"$tr_s",function(s,n){var i=this;if(s=l(s,p("String"),"to_str").$to_s(),n=l(n,p("String"),"to_str").$to_s(),s.length==0)return i;var o,c,x,S,G,qe,Je,$t={},lt=s.split(""),gt=lt.length,_t=n.split(""),vt=_t.length,dt=!1,mt=null;lt[0]==="^"&&lt.length>1&&(dt=!0,lt.shift(),mt=_t[vt-1],gt-=1);var bt=[],Oe=null;for(c=!1,o=0;o<gt;o++)if(S=lt[o],Oe==null)Oe=S,bt.push(S);else if(S==="-")Oe==="-"?(bt.push("-"),bt.push("-")):o==gt-1?bt.push("-"):c=!0;else if(c){for(G=Oe.charCodeAt(0),qe=S.charCodeAt(0),G>qe&&xe.$raise(p("ArgumentError"),'invalid range "'+String.fromCharCode(G)+"-"+String.fromCharCode(qe)+'" in string transliteration'),x=G+1;x<qe;x++)bt.push(String.fromCharCode(x));bt.push(S),c=null,Oe=null}else bt.push(S);if(lt=bt,gt=lt.length,dt)for(o=0;o<gt;o++)$t[lt[o]]=!0;else{if(vt>0){var be=[],Te=null;for(c=!1,o=0;o<vt;o++)if(S=_t[o],Oe==null)Oe=S,be.push(S);else if(S==="-")Te==="-"?(be.push("-"),be.push("-")):o==vt-1?be.push("-"):c=!0;else if(c){for(G=Oe.charCodeAt(0),qe=S.charCodeAt(0),G>qe&&xe.$raise(p("ArgumentError"),'invalid range "'+String.fromCharCode(G)+"-"+String.fromCharCode(qe)+'" in string transliteration'),x=G+1;x<qe;x++)be.push(String.fromCharCode(x));be.push(S),c=null,Oe=null}else be.push(S);_t=be,vt=_t.length}var He=gt-vt;if(He>0){var h=vt>0?_t[vt-1]:"";for(o=0;o<He;o++)_t.push(h)}for(o=0;o<gt;o++)$t[lt[o]]=_t[o]}var I="",se=null;for(o=0,Je=i.length;o<Je;o++){S=i.charAt(o);var Ce=$t[S];dt?Ce==null?se==null&&(I+=mt,se=!0):(I+=S,se=null):Ce!=null?(se==null||se!==Ce)&&(I+=Ce,se=Ce):(I+=S,se=null)}return I}),te(F,"$upcase",function(){var s=this;return s.toUpperCase()}),te(F,"$upto",function m(s,n){var i=m.$$p||ie,o=this;if(m.$$p=null,n==null&&(n=!1),i===ie)return o.$enum_for("upto",s,n);var c,x,S=o.toString();if(s=l(s,p("String"),"to_str"),S.length===1&&s.length===1)for(c=S.charCodeAt(0),x=s.charCodeAt(0);c<=x&&!(n&&c===x);)i(String.fromCharCode(c)),c+=1;else if(parseInt(S,10).toString()===S&&parseInt(s,10).toString()===s)for(c=parseInt(S,10),x=parseInt(s,10);c<=x&&!(n&&c===x);)i(c.toString()),c+=1;else for(;S.length<=s.length&&S<=s&&!(n&&S===s);)i(S),S=S.$succ();return o},-2);function U(m){function s($t){var lt="",gt,_t=$t.length,vt,dt,mt,bt,Oe;for(gt=0;gt<_t;gt++)if(vt=$t.charAt(gt),vt==="-"&&gt>0&&gt<_t-1&&!dt){for(mt=$t.charCodeAt(gt-1),bt=$t.charCodeAt(gt+1),mt>bt&&xe.$raise(p("ArgumentError"),'invalid range "'+mt+"-"+bt+'" in string transliteration'),Oe=mt+1;Oe<bt+1;Oe++)lt+=String.fromCharCode(Oe);dt=!0,gt++}else dt=vt==="\\",lt+=vt;return lt}function n($t,lt){if($t.length===0)return lt;var gt="",_t,vt=$t.length,dt;for(_t=0;_t<vt;_t++)dt=$t.charAt(_t),lt.indexOf(dt)!==-1&&(gt+=dt);return gt}var i,o,c,x,S,G,qe="",Je="";for(i=0,o=m.length;i<o;i++)c=l(m[i],p("String"),"to_str"),x=c.charAt(0)==="^"&&c.length>1,c=s(x?c.slice(1):c),x?Je=n(Je,c):qe=n(qe,c);if(qe.length>0&&Je.length>0){for(G="",i=0,o=qe.length;i<o;i++)S=qe.charAt(i),Je.indexOf(S)===-1&&(G+=S);qe=G,Je=""}return qe.length>0?"["+p("Regexp").$escape(qe)+"]":Je.length>0?"[^"+p("Regexp").$escape(Je)+"]":null}return te(F,"$instance_variables",function(){return[]}),ne(F,"$_load",function(s){var n,i,o=this;return n=P(arguments),i=n,oe(o,"new",me(i))},-1),te(F,"$unicode_normalize",function(s){var n=this;return s==null&&(s="nfc"),O(["nfc","nfd","nfkc","nfkd"]["$include?"](s))||xe.$raise(p("ArgumentError"),"Invalid normalization form "+s),n.normalize(s.$upcase())},-1),te(F,"$unicode_normalized?",function(s){var n=this;return s==null&&(s="nfc"),n.$unicode_normalize(s)["$=="](n)},-1),te(F,"$unpack",function(s){return xe.$raise("To use String#unpack, you must first require 'corelib/string/unpack'.")}),te(F,"$unpack1",function(s){return xe.$raise("To use String#unpack1, you must first require 'corelib/string/unpack'.")}),te(F,"$freeze",function(){var s=this;return typeof s=="string"||L(s,"$$frozen",!0),s}),te(F,"$-@",function(){var s=this;return typeof s=="string"||s.$$frozen?s:s.encoding.name=="UTF-8"&&s.internal_encoding.name=="UTF-8"?s.toString():s.$dup().$freeze()}),te(F,"$frozen?",function(){var s=this;return typeof s=="string"||s.$$frozen===!0}),ye(F,"+@","dup"),ye(F,"===","=="),ye(F,"byteslice","[]"),ye(F,"eql?","=="),ye(F,"equal?","==="),ye(F,"object_id","__id__"),ye(F,"slice","[]"),ye(F,"succ","next"),ye(F,"to_str","to_s"),ye(F,"to_sym","intern"),le.$pristine(F,"initialize")}("::",String,fe),de(fe[0],"Symbol",ke("String"))};Opal.modules["corelib/enumerable"]=function(e){var l=e.truthy,v=e.coerce_to,W=e.yield1,L=e.yieldX,ae=e.deny_frozen_access,te=e.module,le=e.send,ne=e.slice,P=e.to_a,oe=e.Opal,me=e.thrower,Se=e.def,Le=e.Kernel,je=e.return_val,xe=e.rb_gt,O=e.rb_times,Ie=e.rb_lt,We=e.eqeq,Ne=e.rb_plus,Fe=e.rb_minus,_e=e.rb_divide,ye=e.rb_le,de=e.hash2,ze=e.lambda,fe=e.not,ke=e.alias,ie=[],p=e.nil,ee=e.$$$;return e.add_stubs("each,public_send,destructure,to_enum,enumerator_size,new,yield,raise,slice_when,!,enum_for,flatten,map,to_proc,compact,to_a,warn,proc,==,nil?,respond_to?,coerce_to!,>,*,try_convert,<,+,-,ceil,/,size,select,__send__,length,<=,[],push,<<,[]=,===,inspect,<=>,first,reverse,sort,take,sort_by,compare,call,dup,sort!,map!,include?,-@,key?,values,transform_values,group_by,fetch,to_h,coerce_to?,class,zip,detect,find_all,collect_concat,collect,inject,entries"),function(q,j){var F=te(q,"Enumerable"),Ee=[F].concat(j),re=e.$r(Ee);function U(m){return m.length===0&&(m=[p]),m.length>1&&(m=[m]),m}return Se(F,"$all?",function m(s){try{var n=me("return"),i=m.$$p||p,o=this;return m.$$p=null,l(s!==void 0)?le(o,"each",[],function(x){var S,G,qe=p;if(S=ne(arguments),G=S,qe=U(G),l(le(s,"public_send",["==="].concat(P(qe)))))return p;n.$throw(!1)},{$$arity:-1,$$ret:n}):i!==p?le(o,"each",[],function(x){var S,G;if(S=ne(arguments),G=S,l(e.yieldX(i,P(G))))return p;n.$throw(!1)},{$$arity:-1,$$ret:n}):le(o,"each",[],function(x){var S,G;if(S=ne(arguments),G=S,l(oe.$destructure(G)))return p;n.$throw(!1)},{$$arity:-1,$$ret:n}),!0}catch(c){if(c===n)return c.$v;throw c}},-1),Se(F,"$any?",function m(s){try{var n=me("return"),i=m.$$p||p,o=this;return m.$$p=null,l(s!==void 0)?le(o,"each",[],function(x){var S,G,qe=p;if(S=ne(arguments),G=S,qe=U(G),l(le(s,"public_send",["==="].concat(P(qe)))))n.$throw(!0);else return p},{$$arity:-1,$$ret:n}):i!==p?le(o,"each",[],function(x){var S,G;if(S=ne(arguments),G=S,l(e.yieldX(i,P(G))))n.$throw(!0);else return p},{$$arity:-1,$$ret:n}):le(o,"each",[],function(x){var S,G;if(S=ne(arguments),G=S,l(oe.$destructure(G)))n.$throw(!0);else return p},{$$arity:-1,$$ret:n}),!1}catch(c){if(c===n)return c.$v;throw c}},-1),Se(F,"$chunk",function m(){var s=m.$$p||p,n=this;return m.$$p=null,s===p?le(n,"to_enum",["chunk"],function i(){var o=i.$$s==null?this:i.$$s;return o.$enumerator_size()},{$$s:n}):le(ee("Enumerator"),"new",[],function i(o){var c=i.$$s==null?this:i.$$s;o==null&&(o=p);var x=p,S=[];function G(){S.length>0&&o.$yield(x,S)}c.$each.$$p=function(qe){var Je=W(s,qe);Je===p?(G(),S=[],x=p):(x===p||x===Je?S.push(qe):(G(),S=[qe]),x=Je)},c.$each(),G()},{$$s:n})}),Se(F,"$chunk_while",function m(){var s=m.$$p||p,n=this;return m.$$p=null,s===p&&Le.$raise(ee("ArgumentError"),"no block given"),le(n,"slice_when",[],function(o,c){return o==null&&(o=p),c==null&&(c=p),e.yieldX(s,[o,c])["$!"]()})}),Se(F,"$collect",function m(){var s=m.$$p||p,n=this;if(m.$$p=null,s===p)return le(n,"enum_for",["collect"],function o(){var c=o.$$s==null?this:o.$$s;return c.$enumerator_size()},{$$s:n});var i=[];return n.$each.$$p=function(){var o=L(s,arguments);i.push(o)},n.$each(),i}),Se(F,"$collect_concat",function m(){var s=m.$$p||p,n=this;return m.$$p=null,s===p?le(n,"enum_for",["collect_concat"],function i(){var o=i.$$s==null?this:i.$$s;return o.$enumerator_size()},{$$s:n}):le(n,"map",[],s.$to_proc()).$flatten(1)}),Se(F,"$compact",function(){var s=this;return s.$to_a().$compact()}),Se(F,"$count",function m(s){var n=m.$$p||p,i=this,o=p;return m.$$p=null,o=0,s!=null&&n!==p&&i.$warn("warning: given block not used"),l(s!=null)?n=le(Le,"proc",[],function(x){var S,G;return S=ne(arguments),G=S,oe.$destructure(G)["$=="](s)},-1):l(n["$nil?"]())&&(n=le(Le,"proc",[],je(!0))),le(i,"each",[],function(x){var S,G;return S=ne(arguments),G=S,l(L(n,G))?o++:p},-1),o},-1),Se(F,"$cycle",function m(s){var n=m.$$p||p,i=this;if(m.$$p=null,s==null&&(s=p),n===p)return le(i,"enum_for",["cycle",s],function S(){var G=S.$$s==null?this:S.$$s;return l(s["$nil?"]())?l(G["$respond_to?"]("size"))?ee(ee("Float"),"INFINITY"):p:(s=oe["$coerce_to!"](s,ee("Integer"),"to_int"),l(xe(s,0))?O(G.$enumerator_size(),s):0)},{$$s:i});if(!l(s["$nil?"]())&&(s=oe["$coerce_to!"](s,ee("Integer"),"to_int"),l(s<=0)))return p;var o=[],c,x;if(i.$each.$$p=function(){var S=oe.$destructure(arguments);W(n,S),o.push(S)},i.$each(),o.length===0)return p;if(s===p)for(;;)for(c=0,x=o.length;c<x;c++)W(n,o[c]);else for(;s>1;){for(c=0,x=o.length;c<x;c++)W(n,o[c]);s--}},-1),Se(F,"$detect",function m(s){try{var n=me("return"),i=m.$$p||p,o=this;return m.$$p=null,i===p?o.$enum_for("detect",s):(le(o,"each",[],function(x){var S,G,qe=p;if(S=ne(arguments),G=S,qe=oe.$destructure(G),l(e.yield1(i,qe)))n.$throw(qe);else return p},{$$arity:-1,$$ret:n}),s!==void 0?typeof s=="function"?s():s:p)}catch(c){if(c===n)return c.$v;throw c}},-1),Se(F,"$drop",function(s){var n=this;s=v(s,ee("Integer"),"to_int"),l(s<0)&&Le.$raise(ee("ArgumentError"),"attempt to drop negative size");var i=[],o=0;return n.$each.$$p=function(){s<=o&&i.push(oe.$destructure(arguments)),o++},n.$each(),i}),Se(F,"$drop_while",function m(){var s=m.$$p||p,n=this;if(m.$$p=null,s===p)return n.$enum_for("drop_while");var i=[],o=!0;return n.$each.$$p=function(){var c=oe.$destructure(arguments);if(o){var x=W(s,c);l(x)||(o=!1,i.push(c))}else i.push(c)},n.$each(),i}),Se(F,"$each_cons",function m(s){var n=m.$$p||p,i=this;if(m.$$p=null,l(arguments.length!=1)&&Le.$raise(ee("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)"),s=oe.$try_convert(s,ee("Integer"),"to_int"),l(s<=0)&&Le.$raise(ee("ArgumentError"),"invalid size"),n===p)return le(i,"enum_for",["each_cons",s],function c(){var x=c.$$s==null?this:c.$$s,S=p;return S=x.$enumerator_size(),l(S["$nil?"]())?p:We(S,0)||l(Ie(S,s))?0:Ne(Fe(S,s),1)},{$$s:i});var o=[];return i.$each.$$p=function(){var c=oe.$destructure(arguments);o.push(c),o.length>s&&o.shift(),o.length==s&&W(n,o.slice(0,s))},i.$each(),i}),Se(F,"$each_entry",function m(s){var n=m.$$p||p,i,o,c=this;return m.$$p=null,i=ne(arguments),o=i,n===p?le(c,"to_enum",["each_entry"].concat(P(o)),function x(){var S=x.$$s==null?this:x.$$s;return S.$enumerator_size()},{$$s:c}):(c.$each.$$p=function(){var x=oe.$destructure(arguments);W(n,x)},c.$each.apply(c,o),c)},-1),Se(F,"$each_slice",function m(s){var n=m.$$p||p,i=this;if(m.$$p=null,s=v(s,ee("Integer"),"to_int"),l(s<=0)&&Le.$raise(ee("ArgumentError"),"invalid slice size"),n===p)return le(i,"enum_for",["each_slice",s],function c(){var x=c.$$s==null?this:c.$$s;return l(x["$respond_to?"]("size"))?_e(x.$size(),s).$ceil():p},{$$s:i});var o=[];return i.$each.$$p=function(){var c=oe.$destructure(arguments);o.push(c),o.length===s&&(W(n,o),o=[])},i.$each(),o.length>0&&W(n,o),i}),Se(F,"$each_with_index",function m(s){var n=m.$$p||p,i,o,c=this;if(m.$$p=null,i=ne(arguments),o=i,n===p)return le(c,"enum_for",["each_with_index"].concat(P(o)),function S(){var G=S.$$s==null?this:S.$$s;return G.$enumerator_size()},{$$s:c});var x=0;return c.$each.$$p=function(){var S=oe.$destructure(arguments);n(S,x),x++},c.$each.apply(c,o),c},-1),Se(F,"$each_with_object",function m(s){var n=m.$$p||p,i=this;return m.$$p=null,n===p?le(i,"enum_for",["each_with_object",s],function o(){var c=o.$$s==null?this:o.$$s;return c.$enumerator_size()},{$$s:i}):(i.$each.$$p=function(){var o=oe.$destructure(arguments);n(o,s)},i.$each(),s)}),Se(F,"$entries",function(s){var n,i,o=this;n=ne(arguments),i=n;var c=[];return o.$each.$$p=function(){c.push(oe.$destructure(arguments))},o.$each.apply(o,i),c},-1),Se(F,"$filter_map",function m(){var s=m.$$p||p,n=this;return m.$$p=null,s===p?le(n,"enum_for",["filter_map"],function i(){var o=i.$$s==null?this:i.$$s;return o.$enumerator_size()},{$$s:n}):le(le(n,"map",[],s.$to_proc()),"select",[],"itself".$to_proc())}),Se(F,"$find_all",function m(){var s=m.$$p||p,n=this;if(m.$$p=null,s===p)return le(n,"enum_for",["find_all"],function o(){var c=o.$$s==null?this:o.$$s;return c.$enumerator_size()},{$$s:n});var i=[];return n.$each.$$p=function(){var o=oe.$destructure(arguments),c=W(s,o);l(c)&&i.push(o)},n.$each(),i}),Se(F,"$find_index",function m(s){try{var n=me("return"),i=m.$$p||p,o=this,c=p;return m.$$p=null,l(s===void 0&&i===p)?o.$enum_for("find_index"):(s!=null&&i!==p&&o.$warn("warning: given block not used"),c=0,l(s!=null)?le(o,"each",[],function(S){var G,qe;return G=ne(arguments),qe=G,We(oe.$destructure(qe),s)&&n.$throw(c),c+=1},{$$arity:-1,$$ret:n}):le(o,"each",[],function(S){var G,qe;return G=ne(arguments),qe=G,l(e.yieldX(i,P(qe)))&&n.$throw(c),c+=1},{$$arity:-1,$$ret:n}),p)}catch(x){if(x===n)return x.$v;throw x}},-1),Se(F,"$first",function(s){try{var n=me("return"),i=this,o=p,c=p;return l(s===void 0)?le(i,"each",[],function(S){S==null&&(S=p),n.$throw(S)},{$$ret:n}):(o=[],s=v(s,ee("Integer"),"to_int"),l(s<0)&&Le.$raise(ee("ArgumentError"),"attempt to take negative size"),l(s==0)?[]:(c=0,le(i,"each",[],function(S){var G,qe;if(G=ne(arguments),qe=G,o.push(oe.$destructure(qe)),l(s<=++c))n.$throw(o);else return p},{$$arity:-1,$$ret:n}),o))}catch(x){if(x===n)return x.$v;throw x}},-1),Se(F,"$grep",function m(s){var n=m.$$p||p,i=this,o=p;return m.$$p=null,o=[],le(i,"each",[],function(x){var S,G,qe=p;return S=ne(arguments),G=S,qe=U(G),l(le(s,"__send__",["==="].concat(P(qe))))?(n!==p?(l(xe(G.$length(),1))&&(G=[G]),G=e.yieldX(n,P(G))):l(ye(G.$length(),1))&&(G=G["$[]"](0)),o.$push(G)):p},-1),o}),Se(F,"$grep_v",function m(s){var n=m.$$p||p,i=this,o=p;return m.$$p=null,o=[],le(i,"each",[],function(x){var S,G,qe=p;return S=ne(arguments),G=S,qe=U(G),l(le(s,"__send__",["==="].concat(P(qe))))?p:(n!==p?(l(xe(G.$length(),1))&&(G=[G]),G=e.yieldX(n,P(G))):l(ye(G.$length(),1))&&(G=G["$[]"](0)),o.$push(G))},-1),o}),Se(F,"$group_by",function m(){var s=m.$$p||p,n,i=this,o=p,c=p;return m.$$p=null,s===p?le(i,"enum_for",["group_by"],function x(){var S=x.$$s==null?this:x.$$s;return S.$enumerator_size()},{$$s:i}):(o=de([],{}),i.$each.$$p=function(){var x=oe.$destructure(arguments),S=W(s,x);(l(c=o["$[]"](S))?c:(n=[S,[]],le(o,"[]=",n),n[n.length-1]))["$<<"](x)},i.$each(),o)}),Se(F,"$include?",function(s){try{var n=me("return"),i=this;return le(i,"each",[],function(c){var x,S;if(x=ne(arguments),S=x,We(oe.$destructure(S),s))n.$throw(!0);else return p},{$$arity:-1,$$ret:n}),!1}catch(o){if(o===n)return o.$v;throw o}}),Se(F,"$inject",function m(s,n){var i=m.$$p||p,o=this;m.$$p=null;var c=s;return i!==p&&n===void 0?o.$each.$$p=function(){var x=oe.$destructure(arguments);if(c===void 0){c=x;return}x=L(i,[c,x]),c=x}:(n===void 0&&(ee("Symbol")["$==="](s)||Le.$raise(ee("TypeError"),""+s.$inspect()+" is not a Symbol"),n=s,c=void 0),o.$each.$$p=function(){var x=oe.$destructure(arguments);if(c===void 0){c=x;return}c=c.$__send__(n,x)}),o.$each(),c??p},-1),Se(F,"$lazy",function(){var s=this;return le(ee(ee("Enumerator"),"Lazy"),"new",[s,s.$enumerator_size()],function(i,o){var c,x;return i==null&&(i=p),c=ne(arguments,1),x=c,le(i,"yield",P(x))},-2)}),Se(F,"$enumerator_size",function(){var s=this;return l(s["$respond_to?"]("size"))?s.$size():p}),Se(F,"$max",function m(s){var n=m.$$p||p,i=this;if(m.$$p=null,s===void 0||s===p){var o,c;return i.$each.$$p=function(){var x=oe.$destructure(arguments);if(o===void 0){o=x;return}n!==p?c=L(n,[x,o]):c=x["$<=>"](o),c===p&&Le.$raise(ee("ArgumentError"),"comparison failed"),c>0&&(o=x)},i.$each(),o===void 0?p:o}return s=v(s,ee("Integer"),"to_int"),le(i,"sort",[],n.$to_proc()).$reverse().$first(s)},-1),Se(F,"$max_by",function m(s){var n=m.$$p||p,i=this;if(m.$$p=null,s==null&&(s=p),!l(n))return le(i,"enum_for",["max_by",s],function x(){var S=x.$$s==null?this:x.$$s;return S.$enumerator_size()},{$$s:i});if(!l(s["$nil?"]()))return le(i,"sort_by",[],n.$to_proc()).$reverse().$take(s);var o,c;return i.$each.$$p=function(){var x=oe.$destructure(arguments),S=W(n,x);if(o===void 0){o=x,c=S;return}S["$<=>"](c)>0&&(o=x,c=S)},i.$each(),o===void 0?p:o},-1),Se(F,"$min",function m(s){var n=m.$$p||p,i=this;if(m.$$p=null,s==null&&(s=p),!l(s["$nil?"]()))return n!==p?le(i,"sort",[],function(x,S){return x==null&&(x=p),S==null&&(S=p),e.yieldX(n,[x,S])}).$take(s):i.$sort().$take(s);var o;return n!==p?i.$each.$$p=function(){var c=oe.$destructure(arguments);if(o===void 0){o=c;return}var x=n(c,o);x===p&&Le.$raise(ee("ArgumentError"),"comparison failed"),x<0&&(o=c)}:i.$each.$$p=function(){var c=oe.$destructure(arguments);if(o===void 0){o=c;return}oe.$compare(c,o)<0&&(o=c)},i.$each(),o===void 0?p:o},-1),Se(F,"$min_by",function m(s){var n=m.$$p||p,i=this;if(m.$$p=null,s==null&&(s=p),!l(n))return le(i,"enum_for",["min_by",s],function x(){var S=x.$$s==null?this:x.$$s;return S.$enumerator_size()},{$$s:i});if(!l(s["$nil?"]()))return le(i,"sort_by",[],n.$to_proc()).$take(s);var o,c;return i.$each.$$p=function(){var x=oe.$destructure(arguments),S=W(n,x);if(o===void 0){o=x,c=S;return}S["$<=>"](c)<0&&(o=x,c=S)},i.$each(),o===void 0?p:o},-1),Se(F,"$minmax",function m(){var s=m.$$p||p,n=this,i=p;m.$$p=null,s=l(i=s)?i:le(Le,"proc",[],function(G,qe){return G==null&&(G=p),qe==null&&(qe=p),G["$<=>"](qe)});var o=p,c=p,x=!0;return n.$each.$$p=function(){var S=oe.$destructure(arguments);if(x)o=c=S,x=!1;else{var G=s.$call(o,S);G===p?Le.$raise(ee("ArgumentError"),"comparison failed"):G>0&&(o=S);var qe=s.$call(c,S);qe===p?Le.$raise(ee("ArgumentError"),"comparison failed"):qe<0&&(c=S)}},n.$each(),[o,c]}),Se(F,"$minmax_by",function m(){var s=m.$$p||p,n=this;if(m.$$p=null,!l(s))return le(n,"enum_for",["minmax_by"],function S(){var G=S.$$s==null?this:S.$$s;return G.$enumerator_size()},{$$s:n});var i=p,o=p,c,x;return n.$each.$$p=function(){var S=oe.$destructure(arguments),G=W(s,S);(c===void 0||G["$<=>"](c)<0)&&(i=S,c=G),(x===void 0||G["$<=>"](x)>0)&&(o=S,x=G)},n.$each(),[i,o]}),Se(F,"$none?",function m(s){try{var n=me("return"),i=m.$$p||p,o=this;return m.$$p=null,l(s!==void 0)?le(o,"each",[],function(x){var S,G,qe=p;if(S=ne(arguments),G=S,qe=U(G),l(le(s,"public_send",["==="].concat(P(qe)))))n.$throw(!1);else return p},{$$arity:-1,$$ret:n}):i!==p?le(o,"each",[],function(x){var S,G;if(S=ne(arguments),G=S,l(e.yieldX(i,P(G))))n.$throw(!1);else return p},{$$arity:-1,$$ret:n}):le(o,"each",[],function(x){var S,G,qe=p;if(S=ne(arguments),G=S,qe=oe.$destructure(G),l(qe))n.$throw(!1);else return p},{$$arity:-1,$$ret:n}),!0}catch(c){if(c===n)return c.$v;throw c}},-1),Se(F,"$one?",function m(s){try{var n=me("return"),i=m.$$p||p,o=this,c=p;return m.$$p=null,c=0,l(s!==void 0)?le(o,"each",[],function(S){var G,qe,Je=p;if(G=ne(arguments),qe=G,Je=U(qe),l(le(s,"public_send",["==="].concat(P(Je)))))if(c=Ne(c,1),l(xe(c,1)))n.$throw(!1);else return p;else return p},{$$arity:-1,$$ret:n}):i!==p?le(o,"each",[],function(S){var G,qe;if(G=ne(arguments),qe=G,!l(e.yieldX(i,P(qe))))return p;if(c=Ne(c,1),l(xe(c,1)))n.$throw(!1);else return p},{$$arity:-1,$$ret:n}):le(o,"each",[],function(S){var G,qe;if(G=ne(arguments),qe=G,!l(oe.$destructure(qe)))return p;if(c=Ne(c,1),l(xe(c,1)))n.$throw(!1);else return p},{$$arity:-1,$$ret:n}),c["$=="](1)}catch(x){if(x===n)return x.$v;throw x}},-1),Se(F,"$partition",function m(){var s=m.$$p||p,n=this;if(m.$$p=null,s===p)return le(n,"enum_for",["partition"],function c(){var x=c.$$s==null?this:c.$$s;return x.$enumerator_size()},{$$s:n});var i=[],o=[];return n.$each.$$p=function(){var c=oe.$destructure(arguments),x=W(s,c);l(x)?i.push(c):o.push(c)},n.$each(),[i,o]}),Se(F,"$reject",function m(){var s=m.$$p||p,n=this;if(m.$$p=null,s===p)return le(n,"enum_for",["reject"],function o(){var c=o.$$s==null?this:o.$$s;return c.$enumerator_size()},{$$s:n});var i=[];return n.$each.$$p=function(){var o=oe.$destructure(arguments),c=W(s,o);l(c)||i.push(o)},n.$each(),i}),Se(F,"$reverse_each",function m(){var s=m.$$p||p,n=this;if(m.$$p=null,s===p)return le(n,"enum_for",["reverse_each"],function c(){var x=c.$$s==null?this:c.$$s;return x.$enumerator_size()},{$$s:n});var i=[];n.$each.$$p=function(){i.push(arguments)},n.$each();for(var o=i.length-1;o>=0;o--)L(s,i[o]);return i}),Se(F,"$slice_before",function m(s){var n=m.$$p||p,i=this;return m.$$p=null,l(s===void 0&&n===p)&&Le.$raise(ee("ArgumentError"),"both pattern and block are given"),l(s!==void 0&&n!==p||arguments.length>1)&&Le.$raise(ee("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),le(ee("Enumerator"),"new",[],function o(c){var x=o.$$s==null?this:o.$$s;c==null&&(c=p);var S=[];n!==p?s===void 0?x.$each.$$p=function(){var G=oe.$destructure(arguments),qe=W(n,G);l(qe)&&S.length>0&&(c["$<<"](S),S=[]),S.push(G)}:x.$each.$$p=function(){var G=oe.$destructure(arguments),qe=n(G,s.$dup());l(qe)&&S.length>0&&(c["$<<"](S),S=[]),S.push(G)}:x.$each.$$p=function(){var G=oe.$destructure(arguments),qe=s["$==="](G);l(qe)&&S.length>0&&(c["$<<"](S),S=[]),S.push(G)},x.$each(),S.length>0&&c["$<<"](S)},{$$s:i})},-1),Se(F,"$slice_after",function m(s){var n=m.$$p||p,i=this;return m.$$p=null,l(s===void 0&&n===p)&&Le.$raise(ee("ArgumentError"),"both pattern and block are given"),l(s!==void 0&&n!==p||arguments.length>1)&&Le.$raise(ee("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),l(s!==void 0)&&(n=le(Le,"proc",[],function(c){return c==null&&(c=p),s["$==="](c)})),le(ee("Enumerator"),"new",[],function o(c){var x=o.$$s==null?this:o.$$s;c==null&&(c=p);var S;x.$each.$$p=function(){var G=oe.$destructure(arguments),qe=W(n,G);S==null&&(S=[]),l(qe)?(S.push(G),c.$yield(S),S=null):S.push(G)},x.$each(),S!=null&&c.$yield(S)},{$$s:i})},-1),Se(F,"$slice_when",function m(){var s=m.$$p||p,n=this;return m.$$p=null,s===p&&Le.$raise(ee("ArgumentError"),"wrong number of arguments (0 for 1)"),le(ee("Enumerator"),"new",[],function i(o){var c=i.$$s==null?this:i.$$s;o==null&&(o=p);var x=p,S=p;c.$each_cons.$$p=function(){var G=oe.$destructure(arguments),qe=G[0],Je=G[1],$t=L(s,[qe,Je]);S=Je,x===p&&(x=[]),l($t)?(x.push(qe),o.$yield(x),x=[]):x.push(qe)},c.$each_cons(2),x!==p&&(x.push(S),o.$yield(x))},{$$s:n})}),Se(F,"$sort",function m(){var s=m.$$p||p,n=this,i=p;return m.$$p=null,i=n.$to_a(),s===p&&(s=ze(function(c,x){return c==null&&(c=p),x==null&&(x=p),c["$<=>"](x)})),le(i,"sort",[],s.$to_proc())}),Se(F,"$sort_by",function m(){var s=m.$$p||p,n=this,i=p;return m.$$p=null,s===p?le(n,"enum_for",["sort_by"],function o(){var c=o.$$s==null?this:o.$$s;return c.$enumerator_size()},{$$s:n}):(i=le(n,"map",[],function(){var c=p;return c=oe.$destructure(arguments),[e.yield1(s,c),c]}),le(i,"sort!",[],function(c,x){return c==null&&(c=p),x==null&&(x=p),c[0]["$<=>"](x[0])}),le(i,"map!",[],function(c){return c==null&&(c=p),c[1]}))}),Se(F,"$sum",function m(s){var n=m.$$p||p,i=this,o=p,c=p;return m.$$p=null,s==null&&(s=0),o=s,c=0,le(i,"each",[],function(S){var G,qe,Je=p,$t=p,lt=p;return G=ne(arguments),qe=G,Je=n!==p?e.yieldX(n,P(qe)):oe.$destructure(qe),fe([ee(ee("Float"),"INFINITY"),ee(ee("Float"),"INFINITY")["$-@"]()]["$include?"](Je))&&l(Je["$respond_to?"]("-"))?($t=Fe(Je,c),lt=Ne(o,$t),c=Fe(Fe(lt,o),$t),o=lt):o=Ne(o,Je)},-1),o},-1),Se(F,"$take",function(s){var n=this;return n.$first(s)}),Se(F,"$take_while",function m(){try{var s=me("return"),n=m.$$p||p,i=this,o=p;return m.$$p=null,l(n)?(o=[],le(i,"each",[],function(x){var S,G,qe=p;return S=ne(arguments),G=S,qe=oe.$destructure(G),l(e.yield1(n,qe))||s.$throw(o),o.push(qe)},{$$arity:-1,$$ret:s})):i.$enum_for("take_while")}catch(c){if(c===s)return c.$v;throw c}}),Se(F,"$uniq",function m(){var s=m.$$p||p,n=this,i=p;return m.$$p=null,i=de([],{}),le(n,"each",[],function(c){var x,S,G,qe=p,Je=p;return x=ne(arguments),S=x,qe=oe.$destructure(S),Je=s!==p?e.yield1(s,qe):qe,l(i["$key?"](Je))?p:(G=[Je,qe],le(i,"[]=",G),G[G.length-1])},-1),i.$values()}),Se(F,"$tally",function(s){var n=this,i=p;return s&&s!==p&&ae(s),i=le(le(n,"group_by",[],"itself".$to_proc()),"transform_values",[],"count".$to_proc()),l(s)?(le(i,"each",[],function(c,x){var S;return c==null&&(c=p),x==null&&(x=p),S=[c,Ne(s.$fetch(c,0),x)],le(s,"[]=",S),S[S.length-1]}),s):i},-1),Se(F,"$to_h",function m(s){var n=m.$$p||p,i,o,c=this;if(m.$$p=null,i=ne(arguments),o=i,n!==p)return le(le(c,"map",[],n.$to_proc()),"to_h",P(o));var x=de([],{});return c.$each.$$p=function(){var S=oe.$destructure(arguments),G=oe["$coerce_to?"](S,ee("Array"),"to_ary"),qe,Je;G.$$is_array||Le.$raise(ee("TypeError"),"wrong element type "+G.$class()+" (expected array)"),G.length!==2&&Le.$raise(ee("ArgumentError"),"wrong array length (expected 2, was "+G.$length()+")"),qe=G[0],Je=G[1],e.hash_put(x,qe,Je)},c.$each.apply(c,o),x},-1),Se(F,"$to_set",function m(s,n){var i=m.$$p||p,o,c,x,S=this;return m.$$p=null,o=ne(arguments),o.length>0&&(c=o.shift()),c==null&&(c=re("Set")),x=o,le(c,"new",[S].concat(P(x)),i.$to_proc())},-1),Se(F,"$zip",function m(s){m.$$p;var n,i,o=this;return m.$$p=null,n=ne(arguments),i=n,le(o.$to_a(),"zip",P(i))},-1),ke(F,"find","detect"),ke(F,"filter","find_all"),ke(F,"flat_map","collect_concat"),ke(F,"map","collect"),ke(F,"member?","include?"),ke(F,"reduce","inject"),ke(F,"select","find_all"),ke(F,"to_a","entries")}("::",ie)};Opal.modules["corelib/enumerator/arithmetic_sequence"]=function(e){var l=e.klass,v=e.truthy,W=e.to_a,L=e.eqeq,ae=e.Kernel,te=e.def,le=e.rb_gt,ne=e.rb_lt,P=e.rb_le,oe=e.rb_ge,me=e.rb_plus,Se=e.rb_minus,Le=e.eqeqeq,je=e.not,xe=e.rb_times,O=e.rb_divide,Ie=e.alias,We=[],Ne=e.nil,Fe=e.$$$;return e.add_stubs("is_a?,==,raise,respond_to?,class,attr_reader,begin,end,exclude_end?,>,step,<,<=,>=,-@,_lesser_than_end?,<<,+,-,===,%,_greater_than_begin?,reverse,!,include?,*,to_i,abs,/,hash,inspect"),function(_e,ye,de){var ze=l(_e,ye,"Enumerator"),fe=[ze].concat(de);return function(ke,ie,p){var ee=l(ke,ie,"ArithmeticSequence"),q=[ee].concat(p),j=e.$r(q),F=ee.$$prototype;F.step_arg2=F.receiver_num=F.step_arg1=F.step=F.range=F.topfx=F.bypfx=F.creation_method=F.skipped_arg=Ne,e.prop(ee.$$prototype,"$$is_arithmetic_seq",!0);var Ee=1/0;return te(ee,"$initialize",function(U,m,s){var n,i=this,o=Ne;return s==null&&(s="step"),i.creation_method=s,v(U["$is_a?"](Fe("Array")))?(n=[].concat(W(U)),i.step_arg1=n[0]==null?Ne:n[0],i.step_arg2=n[1]==null?Ne:n[1],i.topfx=n[2]==null?Ne:n[2],i.bypfx=n[3]==null?Ne:n[3],i.receiver_num=m,i.step=1,i.range=v(i.step_arg2)?(i.step=i.step_arg2,e.Range.$new(i.receiver_num,i.step_arg1,!1)):v(i.step_arg1)?e.Range.$new(i.receiver_num,i.step_arg1,!1):e.Range.$new(i.receiver_num,Ne,!1)):(v(m)||(i.skipped_arg=!0),n=[U,v(o=m)?o:1],i.range=n[0],i.step=n[1]),i.object=i,L(i.step,0)&&ae.$raise(j("ArgumentError"),"step can't be 0"),v(i.step["$respond_to?"]("to_int"))?Ne:ae.$raise(j("ArgumentError"),"no implicit conversion of "+i.step.$class()+" into Integer")},-2),ee.$attr_reader("step"),te(ee,"$begin",function(){var U=this;return U.range.$begin()}),te(ee,"$end",function(){var U=this;return U.range.$end()}),te(ee,"$exclude_end?",function(){var U=this;return U.range["$exclude_end?"]()}),te(ee,"$_lesser_than_end?",function(U){var m=this,s=Ne,n=Ne;return s=v(n=m.$end())?n:Ee,v(le(m.$step(),0))?v(m["$exclude_end?"]())?ne(U,s):P(U,s):v(m["$exclude_end?"]())?le(U,s):oe(U,s)}),te(ee,"$_greater_than_begin?",function(U){var m=this,s=Ne,n=Ne;return s=v(n=m.$begin())?n:Ee["$-@"](),v(le(m.$step(),0))?le(U,s):ne(U,s)}),te(ee,"$first",function(U){var m=this,s=Ne,n=Ne,i=Ne;if(s=v(n=m.$begin())?n:Ee["$-@"](),!v(U))return v(m["$_lesser_than_end?"](s))?s:Ne;for(i=[];v(v(n=m["$_lesser_than_end?"](s))?le(U,0):n);)i["$<<"](s),s=me(s,m.$step()),U=Se(U,1);return i},-1),te(ee,"$each",function re(){var U=re.$$p||Ne,m=this,s=Ne,n=Ne;if(re.$$p=null,U===Ne)return m;for(Le(Ne,s=m.$begin())&&ae.$raise(j("TypeError"),"nil can't be coerced into Integer"),n=v(s=m.$begin())?s:Ee["$-@"]();v(m["$_lesser_than_end?"](n));)e.yield1(U,n),n=me(n,m.$step());return m}),te(ee,"$last",function(U){var m=this,s=Ne,n=Ne,i=Ne;if(Le(Ee,s=m.$end())||Le(Ee["$-@"](),s)?ae.$raise(Fe("FloatDomainError"),m.$end()):Le(Ne,s)&&ae.$raise(Fe("RangeError"),"cannot get the last element of endless arithmetic sequence"),n=Se(m.$end(),Se(m.$end(),m.$begin())["$%"](m.$step())),v(m["$_lesser_than_end?"](n))||(n=Se(n,m.$step())),!v(U))return v(m["$_greater_than_begin?"](n))?n:Ne;for(i=[];v(v(s=m["$_greater_than_begin?"](n))?le(U,0):s);)i["$<<"](n),n=Se(n,m.$step()),U=Se(U,1);return i.$reverse()},-1),te(ee,"$size",function(){var U=this,m=Ne,s=Ne;return m=v(le(U.$step(),0))?1:-1,je(U["$_lesser_than_end?"](U.$begin()))?0:v([Ee["$-@"](),Ee]["$include?"](U.$step()))?1:v([xe(Ee["$-@"](),m),Ne]["$include?"](U.$begin()))||v([xe(Ee,m),Ne]["$include?"](U.$end()))?Ee:(s=Se(U.$end(),Se(U.$end(),U.$begin())["$%"](U.$step())),v(U["$_lesser_than_end?"](s))||(s=Se(s,U.$step())),me(O(Se(s,U.$begin()),U.$step()).$abs().$to_i(),1))}),te(ee,"$==",function(U){var m=this,s=Ne,n=Ne,i=Ne,o=Ne;return v(s=v(n=v(i=v(o=m.$class()["$=="](U.$class()))?m.$begin()["$=="](U.$begin()):o)?m.$end()["$=="](U.$end()):i)?m.$step()["$=="](U.$step()):n)?m["$exclude_end?"]()["$=="](U["$exclude_end?"]()):s}),te(ee,"$hash",function(){var U=this;return[U.$begin(),U.$end(),U.$step(),U["$exclude_end?"]()].$hash()}),te(ee,"$inspect",function(){var U=this,m=Ne;return v(U.receiver_num)?(m=v(U.step_arg2)?"("+U.topfx+U.step_arg1.$inspect()+", "+U.bypfx+U.step_arg2.$inspect()+")":v(U.step_arg1)?"("+U.topfx+U.step_arg1.$inspect()+")":Ne,"("+U.receiver_num.$inspect()+"."+U.creation_method+m+")"):(m=v(U.skipped_arg)?Ne:"("+U.step+")","(("+U.range.$inspect()+")."+U.creation_method+m+")")}),Ie(ee,"===","=="),Ie(ee,"eql?","==")}(ze,ze,fe)}("::",null,We)};Opal.modules["corelib/enumerator/chain"]=function(e){var l=e.deny_frozen_access,v=e.klass,W=e.slice,L=e.def,ae=e.send,te=e.to_a,le=e.truthy,ne=e.rb_plus,P=e.thrower,oe=e.nil,me=e.$$$;return e.add_stubs("to_enum,size,each,<<,to_proc,include?,+,reverse_each,respond_to?,rewind,inspect"),function(Se,Le){var je=v(Se,Le,"Enumerator");return function(xe,O){var Ie=v(xe,O,"Chain"),We=Ie.$$prototype;return We.enums=We.iterated=oe,L(Ie,"$initialize",function(Fe){var _e,ye,de=this;return _e=W(arguments),ye=_e,l(de),de.enums=ye,de.iterated=[],de.object=de},-1),L(Ie,"$each",function Ne(Fe){var _e=Ne.$$p||oe,ye,de,ze=this;return Ne.$$p=null,ye=W(arguments),de=ye,_e===oe?ae(ze,"to_enum",["each"].concat(te(de)),function fe(){var ke=fe.$$s==null?this:fe.$$s;return ke.$size()},{$$s:ze}):(ae(ze.enums,"each",[],function fe(ke){var ie=fe.$$s==null?this:fe.$$s;return ie.iterated==null&&(ie.iterated=oe),ke==null&&(ke=oe),ie.iterated["$<<"](ke),ae(ke,"each",te(de),_e.$to_proc())},{$$s:ze}),ze)},-1),L(Ie,"$size",function(Fe){try{var _e=P("return"),ye,de,ze=this,fe=oe;return ye=W(arguments),de=ye,fe=0,ae(ze.enums,"each",[],function(ie){var p=oe;return ie==null&&(ie=oe),p=ae(ie,"size",te(de)),le([oe,me(me("Float"),"INFINITY")]["$include?"](p))&&_e.$throw(p),fe=ne(fe,p)},{$$ret:_e}),fe}catch(ke){if(ke===_e)return ke.$v;throw ke}},-1),L(Ie,"$rewind",function(){var Fe=this;return ae(Fe.iterated,"reverse_each",[],function(ye){return ye==null&&(ye=oe),le(ye["$respond_to?"]("rewind"))?ye.$rewind():oe}),Fe.iterated=[],Fe}),L(Ie,"$inspect",function(){var Fe=this;return"#<Enumerator::Chain: "+Fe.enums.$inspect()+">"})}(je,je)}("::",null)};Opal.modules["corelib/enumerator/generator"]=function(e){var l=e.deny_frozen_access,v=e.klass,W=e.truthy,L=e.Kernel,ae=e.def,te=e.slice,le=e.send,ne=[],P=e.nil,oe=e.$$$;return e.add_stubs("include,raise,new,to_proc"),function(me,Se,Le){var je=v(me,Se,"Enumerator"),xe=[je].concat(Le);return function(O,Ie,We){var Ne=v(O,Ie,"Generator"),Fe=[Ne].concat(We),_e=e.$r(Fe),ye=Ne.$$prototype;return ye.block=P,Ne.$include(oe("Enumerable")),ae(Ne,"$initialize",function de(){var ze=de.$$p||P,fe=this;return de.$$p=null,l(fe),W(ze)||L.$raise(oe("LocalJumpError"),"no block given"),fe.block=ze}),ae(Ne,"$each",function de(ze){var fe=de.$$p||P,ke,ie,p=this,ee=P;de.$$p=null,ke=te(arguments),ie=ke,ee=le(_e("Yielder"),"new",[],fe.$to_proc());try{ie.unshift(ee),e.yieldX(p.block,ie)}catch(q){if(q&&q.$thrower_type=="breaker")return q.$v;throw q}return p},-1)}(xe[0],null,xe)}(ne[0],null,ne)};Opal.modules["corelib/enumerator/lazy"]=function(e){var l=e.truthy,v=e.coerce_to,W=e.yield1,L=e.yieldX,ae=e.deny_frozen_access,te=e.klass,le=e.slice,ne=e.send2,P=e.find_super,oe=e.to_a,me=e.defs,Se=e.Kernel,Le=e.send,je=e.def,xe=e.return_self,O=e.Opal,Ie=e.rb_lt,We=e.eqeqeq,Ne=e.rb_plus,Fe=e.alias,_e=[],ye=e.nil,de=e.$$$;return e.add_stubs("raise,each,new,enumerator_size,yield,respond_to?,try_convert,<,===,+,for,class,to_proc,destructure,inspect,to_a,find_all,collect_concat,collect,enum_for"),function(ze,fe,ke){var ie=te(ze,fe,"Enumerator"),p=[ie].concat(ke);return function(ee,q,j){var F=te(ee,q,"Lazy"),Ee=[F].concat(j),re=e.$r(Ee),U=F.$$prototype;return U.enumerator=ye,te(F,de("Exception"),"StopLazyError"),me(F,"$for",function m(s,n){var i,o,c=m.$$p||ye,x=this,S=ye;return m.$$p=null,i=le(arguments,1),o=i,S=ne(x,P(x,"for",m,!1,!0),"for",[s].concat(oe(o)),c),S.enumerator=s,S},-2),je(F,"$initialize",function m(s,n){var i=m.$$p||ye,o=this;return m.$$p=null,n==null&&(n=ye),ae(o),i===ye&&Se.$raise(de("ArgumentError"),"tried to call lazy new without a block"),o.enumerator=s,ne(o,P(o,"initialize",m,!1,!0),"initialize",[n],function(x,S){var G,qe;x==null&&(x=ye),G=le(arguments,1),qe=G;try{return Le(s,"each",oe(qe),function($t){var lt,gt;lt=le(arguments),gt=lt,gt.unshift(x),L(i,gt)},-1)}catch(Je){if(e.rescue(Je,[re("StopLazyError")]))try{return ye}finally{e.pop_exception()}else throw Je}},-2)},-2),je(F,"$lazy",xe),je(F,"$collect",function m(){var s=m.$$p||ye,n=this;return m.$$p=null,l(s)||Se.$raise(de("ArgumentError"),"tried to call lazy map without a block"),Le(re("Lazy"),"new",[n,n.$enumerator_size()],function(o,c){var x,S;o==null&&(o=ye),x=le(arguments,1),S=x;var G=L(s,S);o.$yield(G)},-2)}),je(F,"$collect_concat",function m(){var s=m.$$p||ye,n=this;return m.$$p=null,l(s)||Se.$raise(de("ArgumentError"),"tried to call lazy map without a block"),Le(re("Lazy"),"new",[n,ye],function(o,c){var x,S;o==null&&(o=ye),x=le(arguments,1),S=x;var G=L(s,S);if(G["$respond_to?"]("force")&&G["$respond_to?"]("each"))Le(G,"each",[],function($t){return $t==null&&($t=ye),o.$yield($t)});else{var qe=O.$try_convert(G,de("Array"),"to_ary");qe===ye?o.$yield(G):Le(G,"each",[],function($t){return $t==null&&($t=ye),o.$yield($t)})}},-2)}),je(F,"$drop",function(s){var n=this,i=ye,o=ye,c=ye;return s=v(s,de("Integer"),"to_int"),l(Ie(s,0))&&Se.$raise(de("ArgumentError"),"attempt to drop negative size"),i=n.$enumerator_size(),o=We(de("Integer"),i)&&l(Ie(s,i))?s:i,c=0,Le(re("Lazy"),"new",[n,o],function(S,G){var qe,Je;return S==null&&(S=ye),qe=le(arguments,1),Je=qe,l(Ie(c,s))?c=Ne(c,1):Le(S,"yield",oe(Je))},-2)}),je(F,"$drop_while",function m(){var s=m.$$p||ye,n=this,i=ye;return m.$$p=null,l(s)||Se.$raise(de("ArgumentError"),"tried to call lazy drop_while without a block"),i=!0,Le(re("Lazy"),"new",[n,ye],function(c,x){var S,G;if(c==null&&(c=ye),S=le(arguments,1),G=S,l(i)){var qe=L(s,G);l(qe)||(i=!1,Le(c,"yield",oe(G)))}else return Le(c,"yield",oe(G))},-2)}),je(F,"$enum_for",function m(s,n){var i=m.$$p||ye,o,c,x,S=this;return m.$$p=null,o=le(arguments),o.length>0&&(c=o.shift()),c==null&&(c="each"),x=o,Le(S.$class(),"for",[S,c].concat(oe(x)),i.$to_proc())},-1),je(F,"$find_all",function m(){var s=m.$$p||ye,n=this;return m.$$p=null,l(s)||Se.$raise(de("ArgumentError"),"tried to call lazy select without a block"),Le(re("Lazy"),"new",[n,ye],function(o,c){var x,S;o==null&&(o=ye),x=le(arguments,1),S=x;var G=L(s,S);l(G)&&Le(o,"yield",oe(S))},-2)}),je(F,"$grep",function m(s){var n=m.$$p||ye,i=this;return m.$$p=null,l(n)?Le(re("Lazy"),"new",[i,ye],function(c,x){var S,G;c==null&&(c=ye),S=le(arguments,1),G=S;var qe=O.$destructure(G),Je=s["$==="](qe);l(Je)&&(Je=W(n,qe),c.$yield(W(n,qe)))},-2):Le(re("Lazy"),"new",[i,ye],function(c,x){var S,G;c==null&&(c=ye),S=le(arguments,1),G=S;var qe=O.$destructure(G),Je=s["$==="](qe);l(Je)&&c.$yield(qe)},-2)}),je(F,"$reject",function m(){var s=m.$$p||ye,n=this;return m.$$p=null,l(s)||Se.$raise(de("ArgumentError"),"tried to call lazy reject without a block"),Le(re("Lazy"),"new",[n,ye],function(o,c){var x,S;o==null&&(o=ye),x=le(arguments,1),S=x;var G=L(s,S);l(G)||Le(o,"yield",oe(S))},-2)}),je(F,"$take",function(s){var n=this,i=ye,o=ye,c=ye;return s=v(s,de("Integer"),"to_int"),l(Ie(s,0))&&Se.$raise(de("ArgumentError"),"attempt to take negative size"),i=n.$enumerator_size(),o=We(de("Integer"),i)&&l(Ie(s,i))?s:i,c=0,Le(re("Lazy"),"new",[n,o],function(S,G){var qe,Je;return S==null&&(S=ye),qe=le(arguments,1),Je=qe,l(Ie(c,s))?(Le(S,"yield",oe(Je)),c=Ne(c,1)):Se.$raise(re("StopLazyError"))},-2)}),je(F,"$take_while",function m(){var s=m.$$p||ye,n=this;return m.$$p=null,l(s)||Se.$raise(de("ArgumentError"),"tried to call lazy take_while without a block"),Le(re("Lazy"),"new",[n,ye],function(o,c){var x,S;o==null&&(o=ye),x=le(arguments,1),S=x;var G=L(s,S);l(G)?Le(o,"yield",oe(S)):Se.$raise(re("StopLazyError"))},-2)}),je(F,"$inspect",function(){var s=this;return"#<"+s.$class()+": "+s.enumerator.$inspect()+">"}),Fe(F,"force","to_a"),Fe(F,"filter","find_all"),Fe(F,"flat_map","collect_concat"),Fe(F,"map","collect"),Fe(F,"select","find_all"),Fe(F,"to_enum","enum_for")}(ie,ie,p)}("::",null,_e)};Opal.modules["corelib/enumerator/yielder"]=function(e){var l=e.klass,v=e.def,W=e.slice,L=e.send,ae=e.to_a,te=[],le=e.nil;return e.add_stubs("yield,proc"),function(ne,P,oe){var me=l(ne,P,"Enumerator"),Se=[me].concat(oe);return function(Le,je){var xe=l(Le,je,"Yielder"),O=xe.$$prototype;return O.block=le,v(xe,"$initialize",function Ie(){var We=Ie.$$p||le,Ne=this;return Ie.$$p=null,Ne.block=We,Ne}),v(xe,"$yield",function(We){var Ne,Fe,_e=this;Ne=W(arguments),Fe=Ne;var ye=e.yieldX(_e.block,Fe);if(ye&&ye.$thrower_type=="break")throw ye;return ye},-1),v(xe,"$<<",function(We){var Ne=this;return Ne.$yield(We),Ne}),v(xe,"$to_proc",function(){var We=this;return L(We,"proc",[],function Ne(Fe){var _e,ye,de=Ne.$$s==null?this:Ne.$$s;return _e=W(arguments),ye=_e,L(de,"yield",ae(ye))},{$$arity:-1,$$s:We})})}(Se[0],null)}(te[0],null,te)};Opal.modules["corelib/enumerator"]=function(e){var l=e.slice,v=e.coerce_to,W=e.deny_frozen_access,L=e.klass,ae=e.defs,te=e.truthy,le=e.send,ne=e.not,P=e.def,oe=e.rb_plus,me=e.to_a,Se=e.Opal,Le=e.send2,je=e.find_super,xe=e.rb_ge,O=e.Kernel,Ie=e.rb_le,We=e.alias,Ne=e.top,Fe=[],_e=e.nil,ye=e.$$$;return e.add_stubs("require,include,allocate,new,to_proc,!,respond_to?,empty?,nil?,+,class,__send__,call,enum_for,size,destructure,map,>=,length,raise,[],peek_values,<=,next_values,inspect,any?,each_with_object,autoload"),Ne.$require("corelib/enumerable"),function(de,ze,fe){var ke=L(de,ze,"Enumerator"),ie=[ke].concat(fe),p=e.$r(ie),ee=ke.$$prototype;return ee.size=ee.args=ee.object=ee.method=ee.values=ee.cursor=_e,ke.$include(ye("Enumerable")),ke.$$prototype.$$is_enumerator=!0,ae(ke,"$for",function q(j,F,Ee){var re=q.$$p||_e,U,m,s,n=this;q.$$p=null,U=l(arguments,1),U.length>0&&(m=U.shift()),m==null&&(m="each"),s=U;var i=n.$allocate();return i.object=j,i.size=re,i.method=m,i.args=s,i.cursor=0,i},-2),P(ke,"$initialize",function q(j){var F=q.$$p||_e,Ee=this;return q.$$p=null,l(arguments),W(Ee),Ee.cursor=0,te(F)?(Ee.object=le(p("Generator"),"new",[],F.$to_proc()),Ee.method="each",Ee.args=[],Ee.size=arguments[0]||_e,te(Ee.size)&&ne(Ee.size["$respond_to?"]("call"))?Ee.size=v(Ee.size,ye("Integer"),"to_int"):_e):(Ee.object=arguments[0],Ee.method=arguments[1]||"each",Ee.args=l(arguments,2),Ee.size=_e)},-1),P(ke,"$each",function q(j){var F=q.$$p||_e,Ee,re,U=this;return q.$$p=null,Ee=l(arguments),re=Ee,te(F["$nil?"]())&&te(re["$empty?"]())?U:(re=oe(U.args,re),te(F["$nil?"]())?le(U.$class(),"new",[U.object,U.method].concat(me(re))):le(U.object,"__send__",[U.method].concat(me(re)),F.$to_proc()))},-1),P(ke,"$size",function(){var j=this;return te(j.size["$respond_to?"]("call"))?le(j.size,"call",me(j.args)):j.size}),P(ke,"$with_index",function q(j){var F=q.$$p||_e,Ee=this;if(q.$$p=null,j==null&&(j=0),j=te(j)?v(j,ye("Integer"),"to_int"):0,!te(F))return le(Ee,"enum_for",["with_index",j],function U(){var m=U.$$s==null?this:U.$$s;return m.$size()},{$$s:Ee});var re=j;return Ee.$each.$$p=function(){var U=Se.$destructure(arguments),m=F(U,re);return re++,m},Ee.$each()},-1),P(ke,"$each_with_index",function q(){var j=q.$$p||_e,F=this;return q.$$p=null,j===_e?le(F,"enum_for",["each_with_index"],function Ee(){var re=Ee.$$s==null?this:Ee.$$s;return re.$size()},{$$s:F}):(Le(F,je(F,"each_with_index",q,!1,!0),"each_with_index",[],j),F.object)}),P(ke,"$rewind",function(){var j=this;return j.cursor=0,j}),P(ke,"$peek_values",function(){var j=this,F=_e;return j.values=te(F=j.values)?F:le(j,"map",[],function(re){var U,m;return U=l(arguments),m=U,m},-1),te(xe(j.cursor,j.values.$length()))&&O.$raise(ye("StopIteration"),"iteration reached an end"),j.values["$[]"](j.cursor)}),P(ke,"$peek",function(){var j=this,F=_e;return F=j.$peek_values(),te(Ie(F.$length(),1))?F["$[]"](0):F}),P(ke,"$next_values",function(){var j=this,F=_e;return F=j.$peek_values(),j.cursor=oe(j.cursor,1),F}),P(ke,"$next",function(){var j=this,F=_e;return F=j.$next_values(),te(Ie(F.$length(),1))?F["$[]"](0):F}),P(ke,"$feed",function(j){var F=this;return F.$raise(p("NotImplementedError"),"Opal doesn't support Enumerator#feed")}),P(ke,"$+",function(j){var F=this;return ye(ye("Enumerator"),"Chain").$new(F,j)}),P(ke,"$inspect",function(){var j=this,F=_e;return F="#<"+j.$class()+": "+j.object.$inspect()+":"+j.method,te(j.args["$any?"]())&&(F=oe(F,"("+j.args.$inspect()["$[]"](ye("Range").$new(1,-2))+")")),oe(F,">")}),We(ke,"with_object","each_with_object"),ke.$autoload("ArithmeticSequence","corelib/enumerator/arithmetic_sequence"),ke.$autoload("Chain","corelib/enumerator/chain"),ke.$autoload("Generator","corelib/enumerator/generator"),ke.$autoload("Lazy","corelib/enumerator/lazy"),ke.$autoload("Yielder","corelib/enumerator/yielder")}("::",null,Fe)};Opal.modules["corelib/numeric"]=function(e){var l=e.klass,v=e.truthy,W=e.Kernel,L=e.def,ae=e.to_ary,te=e.return_self,le=e.rb_minus,ne=e.rb_times,P=e.rb_lt,oe=e.eqeq,me=e.rb_divide,Se=e.return_val,Le=e.Opal,je=e.slice,xe=e.extract_kwargs,O=e.ensure_kwargs,Ie=e.not,We=e.send,Ne=e.rb_ge,Fe=e.rb_le,_e=e.rb_plus,ye=e.rb_gt,de=e.alias,ze=e.top,fe=e.nil,ke=e.$$$;return e.add_stubs("require,include,instance_of?,class,Float,respond_to?,coerce,__send__,raise,equal?,-,*,div,<,-@,ceil,to_f,denominator,to_r,==,floor,/,%,Complex,zero?,numerator,abs,arg,coerce_to!,round,<=>,compare,is_a?,!,new,enum_for,to_proc,negative?,>=,<=,+,to_i,truncate,>,angle,conj,imag,rect"),ze.$require("corelib/comparable"),function(ie,p){var ee=l(ie,p,"Numeric");return ee.$include(ke("Comparable")),L(ee,"$coerce",function(j){var F=this;return v(j["$instance_of?"](F.$class()))?[j,F]:[W.$Float(j),W.$Float(F)]}),L(ee,"$__coerced__",function(j,F){var Ee,re,U=this,m=fe,s=fe;if(v(F["$respond_to?"]("coerce")))return re=F.$coerce(U),Ee=ae(re),m=Ee[0]==null?fe:Ee[0],s=Ee[1]==null?fe:Ee[1],m.$__send__(j,s);switch(j){case"+":case"-":case"*":case"/":case"%":case"&":case"|":case"^":case"**":return W.$raise(ke("TypeError"),""+F.$class()+" can't be coerced into Numeric");case">":case">=":case"<":case"<=":case"<=>":return W.$raise(ke("ArgumentError"),"comparison of "+U.$class()+" with "+F.$class()+" failed");default:return fe}}),L(ee,"$<=>",function(j){var F=this;return v(F["$equal?"](j))?0:fe}),L(ee,"$+@",te),L(ee,"$-@",function(){var j=this;return le(0,j)}),L(ee,"$%",function(j){var F=this;return le(F,ne(j,F.$div(j)))}),L(ee,"$abs",function(){var j=this;return P(j,0)?j["$-@"]():j}),L(ee,"$abs2",function(){var j=this;return ne(j,j)}),L(ee,"$angle",function(){var j=this;return P(j,0)?ke(ke("Math"),"PI"):0}),L(ee,"$ceil",function(j){var F=this;return j==null&&(j=0),F.$to_f().$ceil(j)},-1),L(ee,"$conj",te),L(ee,"$denominator",function(){var j=this;return j.$to_r().$denominator()}),L(ee,"$div",function(j){var F=this;return oe(j,0)&&W.$raise(ke("ZeroDivisionError"),"divided by o"),me(F,j).$floor()}),L(ee,"$divmod",function(j){var F=this;return[F.$div(j),F["$%"](j)]}),L(ee,"$fdiv",function(j){var F=this;return me(F.$to_f(),j)}),L(ee,"$floor",function(j){var F=this;return j==null&&(j=0),F.$to_f().$floor(j)},-1),L(ee,"$i",function(){var j=this;return W.$Complex(0,j)}),L(ee,"$imag",Se(0)),L(ee,"$integer?",Se(!1)),L(ee,"$nonzero?",function(){var j=this;return v(j["$zero?"]())?fe:j}),L(ee,"$numerator",function(){var j=this;return j.$to_r().$numerator()}),L(ee,"$polar",function(){var j=this;return[j.$abs(),j.$arg()]}),L(ee,"$quo",function(j){var F=this;return me(Le["$coerce_to!"](F,ke("Rational"),"to_r"),j)}),L(ee,"$real",te),L(ee,"$real?",Se(!0)),L(ee,"$rect",function(){var j=this;return[j,0]}),L(ee,"$round",function(j){var F=this;return F.$to_f().$round(j)},-1),L(ee,"$step",function q(j,F,Ee){var re=q.$$p||fe,U,m,s,n,i,o,c=this,x=fe;q.$$p=null,U=je(arguments),m=xe(U),m=O(m),U.length>0&&(s=U.shift()),U.length>0&&(n=U.shift()),i=m.$$smap.to,o=m.$$smap.by,s!==void 0&&i!==void 0&&W.$raise(ke("ArgumentError"),"to is given twice"),n!==void 0&&o!==void 0&&W.$raise(ke("ArgumentError"),"step is given twice"),i!==void 0&&(s=i),o!==void 0&&(n=o),s===void 0&&(s=fe);function S(){n===fe&&W.$raise(ke("TypeError"),"step must be numeric"),n!=null&&n["$=="](0)&&W.$raise(ke("ArgumentError"),"step can't be 0"),(n===fe||n==null)&&(n=1);var mt=n["$<=>"](0);mt===fe&&W.$raise(ke("ArgumentError"),"0 can't be coerced into "+n.$class()),(s===fe||s==null)&&(s=mt>0?ke(ke("Float"),"INFINITY"):ke(ke("Float"),"INFINITY")["$-@"]()),Le.$compare(c,s)}function G(){if(n>0&&c>s||n<0&&c<s)return 0;if(n===1/0||n===-1/0)return 1;var mt=Math.abs,bt=Math.floor,Oe=(mt(c)+mt(s)+mt(s-c))/mt(n)*ke(ke("Float"),"EPSILON");return Oe===1/0||Oe===-1/0?0:(Oe>.5&&(Oe=.5),bt((s-c)/n+Oe)+1)}function qe(){if(S(),n===0)return 1/0;if(n%1!==0)return G();if(n>0&&c>s||n<0&&c<s)return 0;var mt=Math.ceil,bt=Math.abs,Oe=bt(c-s)+1,be=bt(n);return mt(Oe/be)}if(re===fe)return(Ie(s)||v(s["$is_a?"](ke("Numeric"))))&&(Ie(n)||v(n["$is_a?"](ke("Numeric"))))?ke(ke("Enumerator"),"ArithmeticSequence").$new([s,n,v(i)?"to: ":fe,v(o)?"by: ":fe],c):We(c,"enum_for",["step",s,n],qe.$to_proc());S();var Je=n["$negative?"](),$t=n["$=="](0)||s===1/0&&!Je||s===-1/0&&Je;if(c.$$is_number&&n.$$is_number&&s.$$is_number)if(c%1===0&&($t||s%1===0)&&n%1===0){var lt=c;if($t)for(;;lt+=n)re(lt);else if(Je)for(;lt>=s;lt+=n)re(lt);else for(;lt<=s;lt+=n)re(lt);return c}else{var gt=c.$to_f().valueOf();n=n.$to_f().valueOf(),s=s.$to_f().valueOf();var _t=G();if(!isFinite(n))_t!==0&&re(gt);else if(n===0)for(;;)re(gt);else for(var vt=0;vt<_t;vt++){var dt=vt*n+c;(n>=0?s<dt:s>dt)&&(dt=s),re(dt)}return c}for(x=c;v(Je?Ne(x,s):Fe(x,s));)e.yield1(re,x),x=_e(x,n)},-1),L(ee,"$to_c",function(){var j=this;return W.$Complex(j,0)}),L(ee,"$to_int",function(){var j=this;return j.$to_i()}),L(ee,"$truncate",function(j){var F=this;return j==null&&(j=0),F.$to_f().$truncate(j)},-1),L(ee,"$zero?",function(){var j=this;return j["$=="](0)}),L(ee,"$positive?",function(){var j=this;return ye(j,0)}),L(ee,"$negative?",function(){var j=this;return P(j,0)}),L(ee,"$dup",te),L(ee,"$clone",function(j){var F=this;return j=O(j),j.$$smap.freeze,F},-1),L(ee,"$finite?",Se(!0)),L(ee,"$infinite?",Se(fe)),de(ee,"arg","angle"),de(ee,"conjugate","conj"),de(ee,"imaginary","imag"),de(ee,"magnitude","abs"),de(ee,"modulo","%"),de(ee,"phase","arg"),de(ee,"rectangular","rect")}("::",null)};Opal.modules["corelib/array"]=function(e){var l=e.truthy,v=e.falsy,W=e.hash_ids,L=e.yield1,ae=e.hash_get,te=e.hash_put,le=e.hash_delete,ne=e.coerce_to,P=e.respond_to,oe=e.deny_frozen_access,me=e.freeze,Se=e.klass,Le=e.slice,je=e.defs,xe=e.Kernel,O=e.def,Ie=e.Opal,We=e.eqeqeq,Ne=e.hash2,Fe=e.send2,_e=e.find_super,ye=e.send,de=e.rb_gt,ze=e.rb_times,fe=e.eqeq,ke=e.rb_minus,ie=e.to_a,p=e.to_ary,ee=e.gvars,q=e.rb_ge,j=e.assign_ivar,F=e.rb_lt,Ee=e.return_self,re=e.neqeq,U=e.alias,m=e.top,s=[],n=e.nil,i=e.$$$;return e.add_stubs("require,include,to_a,warn,raise,replace,respond_to?,to_ary,coerce_to?,===,join,to_str,hash,<=>,==,object_id,inspect,enum_for,class,bsearch_index,to_proc,nil?,coerce_to!,>,*,enumerator_size,empty?,size,map,equal?,dup,each,reduce,-,[],dig,eql?,length,exclude_end?,flatten,frozen?,__id__,&,!,intersection,to_s,new,item,max,min,>=,**,delete_if,reverse,rotate,rand,at,keep_if,shuffle!,<,sort,sort_by,!=,times,[]=,<<,uniq,|,values,is_a?,end,begin,upto,reject,push,select,select!,collect,collect!,unshift,pristine,singleton_class"),m.$require("corelib/enumerable"),m.$require("corelib/numeric"),function(o,c,x){var S=Se(o,c,"Array"),G=[S].concat(x),qe=e.$r(G);S.$include(i("Enumerable")),e.prop(S.$$prototype,"$$is_array",!0);function Je(Oe){for(var be=Oe[0],Te=1,He=Oe.length;Te<He;Te++)Oe[Te-1]=Oe[Te];return Oe.pop(),be}function $t(Oe,be){return be.$$name===e.Array?Oe:be.$allocate().$replace(Oe.$to_a())}function lt(Oe,be,Te){for(var He,h=null,I=new Array(Oe.length),se=0,Ce=0,Ke=Oe.length;se<Ke;se++){if(!h)try{He=L(Te,Oe[se])}catch(nt){h=nt}(h||be(He))&&(I[Ce]=Oe[se],Ce+=1)}if(Ce!==se&&(Oe.splice.apply(Oe,[0,I.length].concat(I)),Oe.splice(Ce,I.length)),h)throw h}je(S,"$[]",function(be){var Te,He,h=this;return Te=Le(arguments),He=Te,$t(He,h)},-1),O(S,"$initialize",function Oe(be,Te){var He=Oe.$$p||n,h=this;if(Oe.$$p=null,be==null&&(be=n),Te==null&&(Te=n),oe(h),Te!==n&&He!==n&&xe.$warn("warning: block supersedes default value argument"),be>i(i("Integer"),"MAX")&&xe.$raise(i("ArgumentError"),"array size too big"),arguments.length>2&&xe.$raise(i("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..2)"),arguments.length===0)return h.splice(0,h.length),h;if(arguments.length===1){if(be.$$is_array)return h.$replace(be.$to_a()),h;if(be["$respond_to?"]("to_ary"))return h.$replace(be.$to_ary()),h}be=ne(be,i("Integer"),"to_int"),be<0&&xe.$raise(i("ArgumentError"),"negative array size"),h.splice(0,h.length);var I,se;if(He===n)for(I=0;I<be;I++)h.push(Te);else for(I=0,se;I<be;I++)se=He(I),h[I]=se;return h},-1),je(S,"$try_convert",function(be){return Ie["$coerce_to?"](be,i("Array"),"to_ary")}),O(S,"$&",function(be){var Te=this;be=We(i("Array"),be)?be.$to_a():ne(be,i("Array"),"to_ary").$to_a();var He=[],h=Ne([],{}),I,se,Ce;for(I=0,se=be.length;I<se;I++)te(h,be[I],!0);for(I=0,se=Te.length;I<se;I++)Ce=Te[I],le(h,Ce)!==void 0&&He.push(Ce);return He}),O(S,"$|",function(be){var Te=this;be=We(i("Array"),be)?be.$to_a():ne(be,i("Array"),"to_ary").$to_a();var He=Ne([],{}),h,I;for(h=0,I=Te.length;h<I;h++)te(He,Te[h],!0);for(h=0,I=be.length;h<I;h++)te(He,be[h],!0);return He.$keys()}),O(S,"$*",function(be){var Te=this;if(l(be["$respond_to?"]("to_str")))return Te.$join(be.$to_str());be=ne(be,i("Integer"),"to_int"),l(be<0)&&xe.$raise(i("ArgumentError"),"negative argument");for(var He=[],h=Te.$to_a(),I=0;I<be;I++)He=He.concat(h);return He}),O(S,"$+",function(be){var Te=this;return be=We(i("Array"),be)?be.$to_a():ne(be,i("Array"),"to_ary").$to_a(),Te.concat(be)}),O(S,"$-",function(be){var Te=this;if(be=We(i("Array"),be)?be.$to_a():ne(be,i("Array"),"to_ary").$to_a(),l(Te.length===0))return[];if(l(be.length===0))return Te.slice();var He=[],h=Ne([],{}),I,se,Ce;for(I=0,se=be.length;I<se;I++)te(h,be[I],!0);for(I=0,se=Te.length;I<se;I++)Ce=Te[I],ae(h,Ce)===void 0&&He.push(Ce);return He}),O(S,"$<<",function(be){var Te=this;return oe(Te),Te.push(be),Te}),O(S,"$<=>",function(be){var Te=this;if(We(i("Array"),be))be=be.$to_a();else if(l(be["$respond_to?"]("to_ary")))be=be.$to_ary().$to_a();else return n;if(Te.$hash()===be.$hash())return 0;for(var He=Math.min(Te.length,be.length),h=0;h<He;h++){var I=Te[h]["$<=>"](be[h]);if(I!==0)return I}return Te.length["$<=>"](be.length)}),O(S,"$==",function(be){var Te=this,He={};function h(I,se){var Ce,Ke,nt,t;if(I===se)return!0;if(!se.$$is_array)return P(se,"$to_ary")?se["$=="](I):!1;if(I.$$constructor!==Array&&(I=I.$to_a()),se.$$constructor!==Array&&(se=se.$to_a()),I.length!==se.length)return!1;for(He[I.$object_id()]=!0,Ce=0,Ke=I.length;Ce<Ke;Ce++)if(nt=I[Ce],t=se[Ce],nt.$$is_array){if(t.$$is_array&&t.length!==nt.length||!He.hasOwnProperty(nt.$object_id())&&!h(nt,t))return!1}else if(!nt["$=="](t))return!1;return!0}return h(Te,be)});function gt(Oe,be){var Te=Oe.length,He,h,I,se;return He=be.excl,h=be.begin===n?0:ne(be.begin,e.Integer,"to_int"),I=be.end===n?-1:ne(be.end,e.Integer,"to_int"),h<0&&(h+=Te,h<0)||(be.excl_rev&&be.begin!==n&&(h+=1),h>Te)?n:I<0&&(I+=Te,I<0)?[]:((!He||be.end===n)&&(I+=1),se=Oe.slice(h,I),se)}function _t(Oe,be){var Te,He=[],h=0,I;for(be.step<0?(I={begin:be.range.end,end:be.range.begin,excl:!1,excl_rev:be.range.excl},Te=gt(Oe,I).$reverse()):Te=gt(Oe,be.range);h<Te.length;)He.push(Te[h]),h+=Math.abs(be.step);return He}function vt(Oe,be,Te){var He=Oe.length,h;return be=ne(be,e.Integer,"to_int"),be<0&&(be+=He,be<0)?n:Te===void 0?be>=He||be<0?n:Oe[be]:(Te=ne(Te,e.Integer,"to_int"),Te<0||be>He||be<0?n:(h=Oe.slice(be,be+Te),h))}O(S,"$[]",function(be,Te){var He=this;return be.$$is_range?gt(He,be):be.$$is_arithmetic_seq?_t(He,be):vt(He,be,Te)},-2),O(S,"$[]=",function(be,Te,He){var h=this,I=n,se=n;oe(h),I=n;var Ce,Ke=h.length;if(be.$$is_range){Te.$$is_array?I=Te.$to_a():Te["$respond_to?"]("to_ary")?I=Te.$to_ary().$to_a():I=[Te];var nt=be.excl,t=be.begin===n?0:ne(be.begin,e.Integer,"to_int"),g=be.end===n?-1:ne(be.end,e.Integer,"to_int");if(t<0&&(t+=Ke,t<0&&xe.$raise(i("RangeError"),""+be.$inspect()+" out of range")),g<0&&(g+=Ke),(!nt||be.end===n)&&(g+=1),t>Ke)for(Ce=Ke;Ce<t;Ce++)h[Ce]=n;return g<0?h.splice.apply(h,[t,0].concat(I)):h.splice.apply(h,[t,g-t].concat(I)),Te}else{He===void 0?se=1:(se=Te,Te=He,Te.$$is_array?I=Te.$to_a():Te["$respond_to?"]("to_ary")?I=Te.$to_ary().$to_a():I=[Te]);var u;if(be=ne(be,i("Integer"),"to_int"),se=ne(se,i("Integer"),"to_int"),be<0&&(u=be,be+=Ke,be<0&&xe.$raise(i("IndexError"),"index "+u+" too small for array; minimum "+-h.length)),se<0&&xe.$raise(i("IndexError"),"negative length ("+se+")"),be>Ke)for(Ce=Ke;Ce<be;Ce++)h[Ce]=n;return He===void 0?h[be]=Te:h.splice.apply(h,[be,se].concat(I)),Te}},-3),O(S,"$any?",function Oe(be){var Te=Oe.$$p||n,He=this;return Oe.$$p=null,He.length===0?!1:Fe(He,_e(He,"any?",Oe,!1,!0),"any?",[be],Te)},-1),O(S,"$assoc",function(be){for(var Te=this,He=0,h=Te.length,I;He<h;He++)if(I=Te[He],I.length&&I[0]["$=="](be))return I;return n}),O(S,"$at",function(be){var Te=this;return be=ne(be,i("Integer"),"to_int"),be<0&&(be+=Te.length),be<0||be>=Te.length?n:Te[be]}),O(S,"$bsearch_index",function Oe(){var be=Oe.$$p||n,Te=this;if(Oe.$$p=null,be===n)return Te.$enum_for("bsearch_index");for(var He=0,h=Te.length,I,se,Ce,Ke=!1,nt=n;He<h;){if(I=He+Math.floor((h-He)/2),se=Te[I],Ce=L(be,se),Ce===!0)nt=I,Ke=!0;else if(Ce===!1||Ce===n)Ke=!1;else if(Ce.$$is_number){if(Ce===0)return I;Ke=Ce<0}else xe.$raise(i("TypeError"),"wrong argument type "+Ce.$class()+" (must be numeric, true, false or nil)");Ke?h=I:He=I+1}return nt}),O(S,"$bsearch",function Oe(){var be=Oe.$$p||n,Te=this,He=n;return Oe.$$p=null,be===n?Te.$enum_for("bsearch"):(He=ye(Te,"bsearch_index",[],be.$to_proc()),He!=null&&He.$$is_number?Te[He]:He)}),O(S,"$cycle",function Oe(be){var Te=Oe.$$p||n,He=this;if(Oe.$$p=null,be==null&&(be=n),Te===n)return ye(He,"enum_for",["cycle",be],function se(){var Ce=se.$$s==null?this:se.$$s;return l(be["$nil?"]())?i(i("Float"),"INFINITY"):(be=Ie["$coerce_to!"](be,i("Integer"),"to_int"),l(de(be,0))?ze(Ce.$enumerator_size(),be):0)},{$$s:He});if(l(He["$empty?"]())||fe(be,0))return n;var h,I;if(be===n)for(;;)for(h=0,I=He.length;h<I;h++)L(Te,He[h]);else{if(be=Ie["$coerce_to!"](be,i("Integer"),"to_int"),be<=0)return He;for(;be>0;){for(h=0,I=He.length;h<I;h++)L(Te,He[h]);be--}}return He},-1),O(S,"$clear",function(){var be=this;return oe(be),be.splice(0,be.length),be}),O(S,"$count",function Oe(be){var Te=Oe.$$p||n,He=this;return Oe.$$p=null,l(be!==void 0)||l(Te)?Fe(He,_e(He,"count",Oe,!1,!0),"count",[be],Te):He.$size()},-1),O(S,"$initialize_copy",function(be){var Te=this;return Te.$replace(be)}),O(S,"$collect",function Oe(){var be=Oe.$$p||n,Te=this;if(Oe.$$p=null,be===n)return ye(Te,"enum_for",["collect"],function Ce(){var Ke=Ce.$$s==null?this:Ce.$$s;return Ke.$size()},{$$s:Te});for(var He=[],h=0,I=Te.length;h<I;h++){var se=L(be,Te[h]);He.push(se)}return He}),O(S,"$collect!",function Oe(){var be=Oe.$$p||n,Te=this;if(Oe.$$p=null,be===n)return ye(Te,"enum_for",["collect!"],function se(){var Ce=se.$$s==null?this:se.$$s;return Ce.$size()},{$$s:Te});oe(Te);for(var He=0,h=Te.length;He<h;He++){var I=L(be,Te[He]);Te[He]=I}return Te});function dt(Oe,be){return Oe===be||be===0?1:be>0&&Oe>be?dt(Oe-1,be-1)+dt(Oe-1,be):0}O(S,"$combination",function Oe(be){var Te=Oe.$$p||n,He=this,h=n;if(Oe.$$p=null,h=Ie["$coerce_to!"](be,i("Integer"),"to_int"),Te===n)return ye(He,"enum_for",["combination",h],function u(){var $=u.$$s==null?this:u.$$s;return dt($.length,h)},{$$s:He});var I,se,Ce,Ke,nt,t,g;if(h===0)e.yield1(Te,[]);else if(h===1)for(I=0,se=He.length;I<se;I++)e.yield1(Te,[He[I]]);else if(h===He.length)e.yield1(Te,He.slice());else if(h>=0&&h<He.length){for(Ce=[],I=0;I<=h+1;I++)Ce.push(0);for(Ke=[],nt=0,t=!1,Ce[0]=-1;!t;){for(Ke[nt]=He[Ce[nt+1]];nt<h-1;)nt++,g=Ce[nt+1]=Ce[nt]+1,Ke[nt]=He[g];e.yield1(Te,Ke.slice()),nt++;do t=nt===0,Ce[nt]++,nt--;while(Ce[nt+1]+h===He.length+nt+1)}}return He}),O(S,"$repeated_combination",function Oe(be){var Te=Oe.$$p||n,He=this,h=n;if(Oe.$$p=null,h=Ie["$coerce_to!"](be,i("Integer"),"to_int"),Te===n)return ye(He,"enum_for",["repeated_combination",h],function se(){var Ce=se.$$s==null?this:se.$$s;return dt(Ce.length+h-1,h)},{$$s:He});function I(se,Ce,Ke,nt){if(Ke.length==se){var t=Ke.slice();e.yield1(Te,t);return}for(var g=Ce;g<nt.length;g++)Ke.push(nt[g]),I(se,g,Ke,nt),Ke.pop()}return h>=0&&I(h,0,[],He),He}),O(S,"$compact",function(){for(var be=this,Te=[],He=0,h=be.length,I;He<h;He++)(I=be[He])!==n&&Te.push(I);return Te}),O(S,"$compact!",function(){var be=this;oe(be);for(var Te=be.length,He=0,h=be.length;He<h;He++)be[He]===n&&(be.splice(He,1),h--,He--);return be.length===Te?n:be}),O(S,"$concat",function(be){var Te,He,h=this;return Te=Le(arguments),He=Te,oe(h),He=ye(He,"map",[],function I(se){var Ce=I.$$s==null?this:I.$$s;return se==null&&(se=n),se=We(i("Array"),se)?se.$to_a():ne(se,i("Array"),"to_ary").$to_a(),l(se["$equal?"](Ce))&&(se=se.$dup()),se},{$$s:h}),ye(He,"each",[],function I(se){var Ce=I.$$s==null?this:I.$$s;se==null&&(se=n);for(var Ke=0,nt=se.length;Ke<nt;Ke++)Ce.push(se[Ke])},{$$s:h}),h},-1),O(S,"$delete",function Oe(be){var Te=Oe.$$p||n,He=this;Oe.$$p=null;for(var h=He.length,I=0,se=h;I<se;I++)He[I]["$=="](be)&&(oe(He),He.splice(I,1),se--,I--);return He.length===h?Te!==n?e.yieldX(Te,[]):n:be}),O(S,"$delete_at",function(be){var Te=this;if(oe(Te),be=ne(be,i("Integer"),"to_int"),be<0&&(be+=Te.length),be<0||be>=Te.length)return n;var He=Te[be];return Te.splice(be,1),He}),O(S,"$delete_if",function Oe(){var be=Oe.$$p||n,Te=this;return Oe.$$p=null,be===n?ye(Te,"enum_for",["delete_if"],function He(){var h=He.$$s==null?this:He.$$s;return h.$size()},{$$s:Te}):(oe(Te),lt(Te,v,be),Te)}),O(S,"$difference",function(be){var Te,He,h=this;return Te=Le(arguments),He=Te,ye(He,"reduce",[h.$to_a().$dup()],function(se,Ce){return se==null&&(se=n),Ce==null&&(Ce=n),ke(se,Ce)})},-1),O(S,"$dig",function(be,Te){var He,h,I=this,se=n;return He=Le(arguments,1),h=He,se=I["$[]"](be),se===n||h.length===0?se:(l(se["$respond_to?"]("dig"))||xe.$raise(i("TypeError"),""+se.$class()+" does not have #dig method"),ye(se,"dig",ie(h)))},-2),O(S,"$drop",function(be){var Te=this;return be=ne(be,i("Integer"),"to_int"),be<0&&xe.$raise(i("ArgumentError")),Te.slice(be)}),O(S,"$dup",function Oe(){var be=Oe.$$p||n,Te=this;return Oe.$$p=null,Te.$$class===e.Array&&Te.$$class.$allocate.$$pristine&&Te.$copy_instance_variables.$$pristine&&Te.$initialize_dup.$$pristine?Te.slice(0):Fe(Te,_e(Te,"dup",Oe,!1,!0),"dup",[],be)}),O(S,"$each",function Oe(){var be=Oe.$$p||n,Te=this;if(Oe.$$p=null,be===n)return ye(Te,"enum_for",["each"],function I(){var se=I.$$s==null?this:I.$$s;return se.$size()},{$$s:Te});for(var He=0,h=Te.length;He<h;He++)L(be,Te[He]);return Te}),O(S,"$each_index",function Oe(){var be=Oe.$$p||n,Te=this;if(Oe.$$p=null,be===n)return ye(Te,"enum_for",["each_index"],function I(){var se=I.$$s==null?this:I.$$s;return se.$size()},{$$s:Te});for(var He=0,h=Te.length;He<h;He++)L(be,He);return Te}),O(S,"$empty?",function(){var be=this;return be.length===0}),O(S,"$eql?",function(be){var Te=this,He={};function h(I,se){var Ce,Ke,nt,t;if(!se.$$is_array||(se=se.$to_a(),I.length!==se.length))return!1;for(He[I.$object_id()]=!0,Ce=0,Ke=I.length;Ce<Ke;Ce++)if(nt=I[Ce],t=se[Ce],nt.$$is_array){if(t.$$is_array&&t.length!==nt.length||!He.hasOwnProperty(nt.$object_id())&&!h(nt,t))return!1}else if(!nt["$eql?"](t))return!1;return!0}return h(Te,be)}),O(S,"$fetch",function Oe(be,Te){var He=Oe.$$p||n,h=this;Oe.$$p=null;var I=be;if(be=ne(be,i("Integer"),"to_int"),be<0&&(be+=h.length),be>=0&&be<h.length)return h[be];if(He!==n&&Te!=null&&h.$warn("warning: block supersedes default value argument"),He!==n)return He(I);if(Te!=null)return Te;h.length===0?xe.$raise(i("IndexError"),"index "+I+" outside of array bounds: 0...0"):xe.$raise(i("IndexError"),"index "+I+" outside of array bounds: -"+h.length+"..."+h.length)},-2),O(S,"$fill",function Oe(be){var Te=Oe.$$p||n,He,h,I,se,Ce=this,Ke=n,nt=n,t=n,g=n,u=n;Oe.$$p=null,He=Le(arguments),h=He,oe(Ce);var $,E;if(l(Te)?(l(h.length>2)&&xe.$raise(i("ArgumentError"),"wrong number of arguments ("+h.$length()+" for 0..2)"),se=h,I=p(se),Ke=I[0]==null?n:I[0],nt=I[1]==null?n:I[1]):(l(h.length==0)?xe.$raise(i("ArgumentError"),"wrong number of arguments (0 for 1..3)"):l(h.length>3)&&xe.$raise(i("ArgumentError"),"wrong number of arguments ("+h.$length()+" for 1..3)"),se=h,I=p(se),t=I[0]==null?n:I[0],Ke=I[1]==null?n:I[1],nt=I[2]==null?n:I[2]),We(i("Range"),Ke)){if(l(nt)&&xe.$raise(i("TypeError"),"length invalid with range"),g=Ke.begin===n?0:ne(Ke.begin,i("Integer"),"to_int"),l(g<0)&&(g+=this.length),l(g<0)&&xe.$raise(i("RangeError"),""+Ke.$inspect()+" out of range"),u=Ke.end===n?-1:ne(Ke.end,i("Integer"),"to_int"),l(u<0)&&(u+=this.length),l(Ke["$exclude_end?"]())||(u+=1),l(u<=g))return Ce}else if(l(Ke))if(g=ne(Ke,i("Integer"),"to_int"),l(g<0)&&(g+=this.length),l(g<0)&&(g=0),l(nt)){if(u=ne(nt,i("Integer"),"to_int"),l(u==0))return Ce;u+=g}else u=this.length;else g=0,u=this.length;if(l(g>this.length))for($=this.length;$<u;$++)Ce[$]=n;if(l(u>this.length)&&(this.length=u),l(Te))for(this.length;g<u;g++)E=Te(g),Ce[g]=E;else for(this.length;g<u;g++)Ce[g]=t;return Ce},-1),O(S,"$first",function(be){var Te=this;return be==null?Te.length===0?n:Te[0]:(be=ne(be,i("Integer"),"to_int"),be<0&&xe.$raise(i("ArgumentError"),"negative array size"),Te.slice(0,be))},-1),O(S,"$flatten",function(be){var Te=this;function He(h,I){var se=[],Ce,Ke,nt,t;for(h=h.$to_a(),Ce=0,Ke=h.length;Ce<Ke;Ce++){if(nt=h[Ce],!P(nt,"$to_ary",!0)){se.push(nt);continue}if(t=nt.$to_ary(),t===n){se.push(nt);continue}switch(t.$$is_array||xe.$raise(i("TypeError")),t===Te&&xe.$raise(i("ArgumentError")),I){case void 0:se=se.concat(He(t));break;case 0:se.push(t);break;default:se.push.apply(se,He(t,I-1))}}return se}return be!==void 0&&(be=ne(be,i("Integer"),"to_int")),He(Te,be)},-1),O(S,"$flatten!",function(be){var Te=this;oe(Te);var He=Te.$flatten(be);if(Te.length==He.length){for(var h=0,I=Te.length;h<I&&Te[h]===He[h];h++);if(h==I)return n}return Te.$replace(He),Te},-1),O(S,"$freeze",function(){var be=this;return l(be["$frozen?"]())?be:me(be)}),O(S,"$hash",function(){var be=this,Te=W===void 0,He=["A"],h=be.$object_id(),I,se,Ce;try{if(Te&&(W=Object.create(null)),W[h])return"self";for(Ce in W)if(I=W[Ce],be["$eql?"](I))return"self";for(W[h]=be,se=0;se<be.length;se++)I=be[se],He.push(I.$hash());return He.join(",")}finally{Te&&(W=void 0)}}),O(S,"$include?",function(be){for(var Te=this,He=0,h=Te.length;He<h;He++)if(Te[He]["$=="](be))return!0;return!1}),O(S,"$index",function Oe(be){var Te=Oe.$$p||n,He=this;Oe.$$p=null;var h,I,se;if(be!=null&&Te!==n&&He.$warn("warning: given block not used"),be!=null){for(h=0,I=He.length;h<I;h++)if(He[h]["$=="](be))return h}else if(Te!==n){for(h=0,I=He.length;h<I;h++)if(se=Te(He[h]),se!==!1&&se!==n)return h}else return He.$enum_for("index");return n},-1),O(S,"$insert",function(be,Te){var He,h,I=this;if(He=Le(arguments,1),h=He,oe(I),be=ne(be,i("Integer"),"to_int"),h.length>0){if(be<0&&(be+=I.length+1,be<0&&xe.$raise(i("IndexError"),""+be+" is out of bounds")),be>I.length)for(var se=I.length;se<be;se++)I.push(n);I.splice.apply(I,[be,0].concat(h))}return I},-2);var mt=[];O(S,"$inspect",function(){var be=this,Te=[],He=be.$__id__(),h=!0;return function(){try{if(mt.indexOf(He)!==-1)return h=!1,"[...]";mt.push(He);for(var I=0,se=be.length;I<se;I++){var Ce=be["$[]"](I);Te.push(qe("Opal").$inspect(Ce))}return"["+Te.join(", ")+"]"}finally{h&&mt.pop()}}()}),O(S,"$intersection",function(be){var Te,He,h=this;return Te=Le(arguments),He=Te,ye(He,"reduce",[h.$to_a().$dup()],function(se,Ce){return se==null&&(se=n),Ce==null&&(Ce=n),se["$&"](Ce)})},-1),O(S,"$intersect?",function(be){var Te=this;return Te.$intersection(be)["$empty?"]()["$!"]()}),O(S,"$join",function(be){var Te=this;if(ee[","]==null&&(ee[","]=n),be==null&&(be=n),l(Te.length===0))return"";l(be===n)&&(be=ee[","]);var He=[],h,I,se,Ce;for(h=0,I=Te.length;h<I;h++){if(se=Te[h],P(se,"$to_str")&&(Ce=se.$to_str(),Ce!==n)){He.push(Ce.$to_s());continue}if(P(se,"$to_ary")&&(Ce=se.$to_ary(),Ce===Te&&xe.$raise(i("ArgumentError")),Ce!==n)){He.push(Ce.$join(be));continue}if(P(se,"$to_s")&&(Ce=se.$to_s(),Ce!==n)){He.push(Ce);continue}xe.$raise(i("NoMethodError").$new(""+qe("Opal").$inspect(Te.$item())+" doesn't respond to #to_str, #to_ary or #to_s","to_str"))}return be===n?He.join(""):He.join(Ie["$coerce_to!"](be,i("String"),"to_str").$to_s())},-1),O(S,"$keep_if",function Oe(){var be=Oe.$$p||n,Te=this;return Oe.$$p=null,be===n?ye(Te,"enum_for",["keep_if"],function He(){var h=He.$$s==null?this:He.$$s;return h.$size()},{$$s:Te}):(oe(Te),lt(Te,l,be),Te)}),O(S,"$last",function(be){var Te=this;return be==null?Te.length===0?n:Te[Te.length-1]:(be=ne(be,i("Integer"),"to_int"),be<0&&xe.$raise(i("ArgumentError"),"negative array size"),be>Te.length&&(be=Te.length),Te.slice(Te.length-be,Te.length))},-1),O(S,"$length",function(){var be=this;return be.length}),O(S,"$max",function Oe(be){var Te=Oe.$$p||n,He=this;return Oe.$$p=null,ye(He.$each(),"max",[be],Te.$to_proc())},-1),O(S,"$min",function Oe(){var be=Oe.$$p||n,Te=this;return Oe.$$p=null,ye(Te.$each(),"min",[],be.$to_proc())});function bt(Oe,be){for(var Te=be>=0?1:0;be;)Te*=Oe,Oe--,be--;return Te}return O(S,"$permutation",function Oe(be){var Te=Oe.$$p||n,He=this,h=n,I=n;if(Oe.$$p=null,Te===n)return ye(He,"enum_for",["permutation",be],function t(){var g=t.$$s==null?this:t.$$s;return bt(g.length,be===void 0?g.length:be)},{$$s:He});var se,Ce,Ke;if(be===void 0?be=He.length:be=ne(be,i("Integer"),"to_int"),!(be<0||He.length<be))if(be===0)e.yield1(Te,[]);else if(be===1)for(var nt=0;nt<He.length;nt++)e.yield1(Te,[He[nt]]);else h=qe("Array").$new(be),I=qe("Array").$new(He.length,!1),se=function(t,g,u,$,E){He=this;for(var a=0;a<He.length;a++)if($["$[]"](a)["$!"]())if(g[u]=a,u<t-1)$[a]=!0,se.call(He,t,g,u+1,$,E),$[a]=!1;else{Ke=[];for(var k=0;k<g.length;k++)Ke.push(He[g[k]]);L(E,Ke)}},Te!==n?(Ce=He.slice(),se.call(Ce,be,h,0,I,Te)):se.call(He,be,h,0,I,Te);return He},-1),O(S,"$repeated_permutation",function Oe(be){var Te=Oe.$$p||n,He=this,h=n;if(Oe.$$p=null,h=Ie["$coerce_to!"](be,i("Integer"),"to_int"),Te===n)return ye(He,"enum_for",["repeated_permutation",h],function se(){var Ce=se.$$s==null?this:se.$$s;return l(q(h,0))?Ce.$size()["$**"](h):0},{$$s:He});function I(se,Ce,Ke){if(Ce.length==se){var nt=Ce.slice();e.yield1(Te,nt);return}for(var t=0;t<Ke.length;t++)Ce.push(Ke[t]),I(se,Ce,Ke),Ce.pop()}return I(h,[],He.slice()),He}),O(S,"$pop",function(be){var Te=this;return oe(Te),l(be===void 0)?l(Te.length===0)?n:Te.pop():(be=ne(be,i("Integer"),"to_int"),l(be<0)&&xe.$raise(i("ArgumentError"),"negative array size"),l(Te.length===0)?[]:l(be===1)?[Te.pop()]:l(be>Te.length)?Te.splice(0,Te.length):Te.splice(Te.length-be,Te.length))},-1),O(S,"$product",function Oe(be){var Te=Oe.$$p||n,He,h,I=this;Oe.$$p=null,He=Le(arguments),h=He;var se=Te!==n?null:[],Ce=h.length+1,Ke=new Array(Ce),nt=new Array(Ce),t=new Array(Ce),g,u,$,E,a=1;for(t[0]=I,g=1;g<Ce;g++)t[g]=ne(h[g-1],i("Array"),"to_ary");for(g=0;g<Ce;g++){if(E=t[g].length,E===0)return se||I;a*=E,a>2147483647&&xe.$raise(i("RangeError"),"too big to product"),nt[g]=E,Ke[g]=0}e:for(;;){for($=[],g=0;g<Ce;g++)$.push(t[g][Ke[g]]);for(se?se.push($):e.yield1(Te,$),u=Ce-1,Ke[u]++;Ke[u]===nt[u];){if(Ke[u]=0,--u<0)break e;Ke[u]++}}return se||I},-1),O(S,"$push",function(be){var Te,He,h=this;Te=Le(arguments),He=Te,oe(h);for(var I=0,se=He.length;I<se;I++)h.push(He[I]);return h},-1),O(S,"$rassoc",function(be){for(var Te=this,He=0,h=Te.length,I;He<h;He++)if(I=Te[He],I.length&&I[1]!==void 0&&I[1]["$=="](be))return I;return n}),O(S,"$reject",function Oe(){var be=Oe.$$p||n,Te=this;if(Oe.$$p=null,be===n)return ye(Te,"enum_for",["reject"],function Ce(){var Ke=Ce.$$s==null?this:Ce.$$s;return Ke.$size()},{$$s:Te});for(var He=[],h=0,I=Te.length,se;h<I;h++)se=be(Te[h]),(se===!1||se===n)&&He.push(Te[h]);return He}),O(S,"$reject!",function Oe(){var be=Oe.$$p||n,Te=this,He=n;return Oe.$$p=null,be===n?ye(Te,"enum_for",["reject!"],function h(){var I=h.$$s==null?this:h.$$s;return I.$size()},{$$s:Te}):(oe(Te),He=Te.$length(),ye(Te,"delete_if",[],be.$to_proc()),fe(Te.$length(),He)?n:Te)}),O(S,"$replace",function(be){var Te=this;return oe(Te),be=We(i("Array"),be)?be.$to_a():ne(be,i("Array"),"to_ary").$to_a(),Te.splice(0,Te.length),Te.push.apply(Te,be),Te}),O(S,"$reverse",function(){var be=this;return be.slice(0).reverse()}),O(S,"$reverse!",function(){var be=this;return oe(be),be.reverse()}),O(S,"$reverse_each",function Oe(){var be=Oe.$$p||n,Te=this;return Oe.$$p=null,be===n?ye(Te,"enum_for",["reverse_each"],function He(){var h=He.$$s==null?this:He.$$s;return h.$size()},{$$s:Te}):(ye(Te.$reverse(),"each",[],be.$to_proc()),Te)}),O(S,"$rindex",function Oe(be){var Te=Oe.$$p||n,He=this;Oe.$$p=null;var h,I;if(be!=null&&Te!==n&&He.$warn("warning: given block not used"),be!=null){for(h=He.length-1;h>=0&&!(h>=He.length);h--)if(He[h]["$=="](be))return h}else if(Te!==n){for(h=He.length-1;h>=0&&!(h>=He.length);h--)if(I=Te(He[h]),I!==!1&&I!==n)return h}else if(be==null)return He.$enum_for("rindex");return n},-1),O(S,"$rotate",function(be){var Te=this;be==null&&(be=1);var He,h,I,se;return be=ne(be,i("Integer"),"to_int"),Te.length===1?Te.slice():Te.length===0?[]:(He=Te.slice(),h=be%He.length,I=He.slice(h),se=He.slice(0,h),I.concat(se))},-1),O(S,"$rotate!",function(be){var Te=this,He=n;return be==null&&(be=1),oe(Te),Te.length===0||Te.length===1?Te:(be=ne(be,i("Integer"),"to_int"),He=Te.$rotate(be),Te.$replace(He))},-1),function(Oe,be){var Te=Se(Oe,be,"SampleRandom"),He=Te.$$prototype;return He.rng=n,O(Te,"$initialize",j("rng")),O(Te,"$rand",function(I){var se=this,Ce=n;return Ce=ne(se.rng.$rand(I),i("Integer"),"to_int"),l(Ce<0)&&xe.$raise(i("RangeError"),"random value must be >= 0"),l(Ce<I)||xe.$raise(i("RangeError"),"random value must be less than Array size"),Ce})}(S,null),O(S,"$sample",function(be,Te){var He=this,h=n,I=n;if(l(be===void 0))return He.$at(xe.$rand(He.length));if(l(Te===void 0)?l(h=Ie["$coerce_to?"](be,i("Hash"),"to_hash"))?(Te=h,be=n):(Te=n,be=ne(be,i("Integer"),"to_int")):(be=ne(be,i("Integer"),"to_int"),Te=ne(Te,i("Hash"),"to_hash")),l(be)&&l(be<0)&&xe.$raise(i("ArgumentError"),"count must be greater than 0"),l(Te)&&(I=Te["$[]"]("random")),I=l(I)&&l(I["$respond_to?"]("rand"))?qe("SampleRandom").$new(I):xe,!l(be))return He[I.$rand(He.length)];var se,Ce,Ke,nt,t,g,u,$;switch(be>He.length&&(be=He.length),be){case 0:return[];case 1:return[He[I.$rand(He.length)]];case 2:return nt=I.$rand(He.length),t=I.$rand(He.length-1),nt<=t&&t++,[He[nt],He[t]];default:if(He.length/be>3){for(se=!1,Ce=0,Ke=qe("Array").$new(be),nt=1,Ke[0]=I.$rand(He.length);nt<be;){for(g=I.$rand(He.length),t=0;t<nt;){for(;g===Ke[t];){if(Ce++,Ce>100){se=!0;break}g=I.$rand(He.length)}if(se)break;t++}if(se)break;Ke[nt]=g,nt++}if(!se){for(nt=0;nt<be;)Ke[nt]=He[Ke[nt]],nt++;return Ke}}Ke=He.slice();for(var E=0;E<be;E++)u=I.$rand(He.length-E)+E,$=Ke[E],Ke[E]=Ke[u],Ke[u]=$;return be===He.length?Ke:Ke["$[]"](0,be)}},-1),O(S,"$select",function Oe(){var be=Oe.$$p||n,Te=this;if(Oe.$$p=null,be===n)return ye(Te,"enum_for",["select"],function Ke(){var nt=Ke.$$s==null?this:Ke.$$s;return nt.$size()},{$$s:Te});for(var He=[],h=0,I=Te.length,se,Ce;h<I;h++)se=Te[h],Ce=L(be,se),l(Ce)&&He.push(se);return He}),O(S,"$select!",function Oe(){var be=Oe.$$p||n,Te=this;if(Oe.$$p=null,be===n)return ye(Te,"enum_for",["select!"],function h(){var I=h.$$s==null?this:h.$$s;return I.$size()},{$$s:Te});oe(Te);var He=Te.length;return ye(Te,"keep_if",[],be.$to_proc()),Te.length===He?n:Te}),O(S,"$shift",function(be){var Te=this;return oe(Te),l(be===void 0)?l(Te.length===0)?n:Je(Te):(be=ne(be,i("Integer"),"to_int"),l(be<0)&&xe.$raise(i("ArgumentError"),"negative array size"),l(Te.length===0)?[]:Te.splice(0,be))},-1),O(S,"$shuffle",function(be){var Te=this;return Te.$dup().$to_a()["$shuffle!"](be)},-1),O(S,"$shuffle!",function(be){var Te=this;oe(Te);var He,h=Te.length,I,se;for(be!==void 0&&(be=Ie["$coerce_to?"](be,i("Hash"),"to_hash"),be!==n&&(be=be["$[]"]("random"),be!==n&&be["$respond_to?"]("rand")&&(He=be)));h;)He?(I=He.$rand(h).$to_int(),I<0&&xe.$raise(i("RangeError"),"random number too small "+I),I>=h&&xe.$raise(i("RangeError"),"random number too big "+I)):I=Te.$rand(h),se=Te[--h],Te[h]=Te[I],Te[I]=se;return Te},-1),O(S,"$slice!",function(be,Te){var He=this,h=n,I=n,se=n,Ce=n,Ke=n;if(oe(He),h=n,l(Te===void 0))if(We(i("Range"),be)){I=be,h=He["$[]"](I),se=I.begin===n?0:ne(I.begin,i("Integer"),"to_int"),Ce=I.end===n?-1:ne(I.end,i("Integer"),"to_int"),se<0&&(se+=He.length),Ce<0?Ce+=He.length:Ce>=He.length&&(Ce=He.length-1,I.excl&&(Ce+=1));var nt=Ce-se;I.excl&&I.end!==n?Ce-=1:nt+=1,se<He.length&&se>=0&&Ce<He.length&&Ce>=0&&nt>0&&He.splice(se,nt)}else{if(Ke=ne(be,i("Integer"),"to_int"),Ke<0&&(Ke+=He.length),Ke<0||Ke>=He.length)return n;h=He[Ke],Ke===0?He.shift():He.splice(Ke,1)}else{if(Ke=ne(be,i("Integer"),"to_int"),Te=ne(Te,i("Integer"),"to_int"),Te<0)return n;h=He["$[]"](Ke,Te),Ke<0&&(Ke+=He.length),Ke+Te>He.length&&(Te=He.length-Ke),Ke<He.length&&Ke>=0&&He.splice(Ke,Te)}return h},-2),O(S,"$sort",function Oe(){var be=Oe.$$p||n,Te=this;return Oe.$$p=null,l(Te.length>1)?(be===n&&(be=function(He,h){return He["$<=>"](h)}),Te.slice().sort(function(He,h){var I=be(He,h);return I===n&&xe.$raise(i("ArgumentError"),"comparison of "+He.$inspect()+" with "+h.$inspect()+" failed"),de(I,0)?1:F(I,0)?-1:0})):Te}),O(S,"$sort!",function Oe(){var be=Oe.$$p||n,Te=this;Oe.$$p=null,oe(Te);var He;be!==n?He=ye(Te.slice(),"sort",[],be.$to_proc()):He=Te.slice().$sort(),Te.length=0;for(var h=0,I=He.length;h<I;h++)Te.push(He[h]);return Te}),O(S,"$sort_by!",function Oe(){var be=Oe.$$p||n,Te=this;return Oe.$$p=null,be===n?ye(Te,"enum_for",["sort_by!"],function He(){var h=He.$$s==null?this:He.$$s;return h.$size()},{$$s:Te}):(oe(Te),Te.$replace(ye(Te,"sort_by",[],be.$to_proc())))}),O(S,"$take",function(be){var Te=this;return be<0&&xe.$raise(i("ArgumentError")),Te.slice(0,be)}),O(S,"$take_while",function Oe(){var be=Oe.$$p||n,Te=this;Oe.$$p=null;for(var He=[],h=0,I=Te.length,se,Ce;h<I;h++){if(se=Te[h],Ce=be(se),Ce===!1||Ce===n)return He;He.push(se)}return He}),O(S,"$to_a",function(){var be=this;return be.$$class===e.Array?be:e.Array.$new(be)}),O(S,"$to_ary",Ee),O(S,"$to_h",function Oe(){var be=Oe.$$p||n,Te=this,He=n;Oe.$$p=null,He=Te,be!==n&&(He=ye(He,"map",[],be.$to_proc()));var h,I=He.length,se,Ce,Ke,nt=Ne([],{});for(h=0;h<I;h++)se=Ie["$coerce_to?"](He[h],i("Array"),"to_ary"),se.$$is_array||xe.$raise(i("TypeError"),"wrong element type "+se.$class()+" at "+h+" (expected array)"),se.length!==2&&xe.$raise(i("ArgumentError"),"wrong array length at "+h+" (expected 2, was "+se.$length()+")"),Ce=se[0],Ke=se[1],te(nt,Ce,Ke);return nt}),O(S,"$transpose",function(){var be=this,Te=n,He=n;return l(be["$empty?"]())?[]:(Te=[],He=n,ye(be,"each",[],function(I){var se=n;return I==null&&(I=n),I=We(i("Array"),I)?I.$to_a():ne(I,i("Array"),"to_ary").$to_a(),He=l(se=He)?se:I.length,re(I.length,He)&&xe.$raise(i("IndexError"),"element size differs ("+I.length+" should be "+He+")"),ye(I.length,"times",[],function(Ke){var nt,t=n;return Ke==null&&(Ke=n),t=l(se=Te["$[]"](Ke))?se:(nt=[Ke,[]],ye(Te,"[]=",nt),nt[nt.length-1]),t["$<<"](I.$at(Ke))})}),Te)}),O(S,"$union",function(be){var Te,He,h=this;return Te=Le(arguments),He=Te,ye(He,"reduce",[h.$uniq()],function(se,Ce){return se==null&&(se=n),Ce==null&&(Ce=n),se["$|"](Ce)})},-1),O(S,"$uniq",function Oe(){var be=Oe.$$p||n,Te=this;Oe.$$p=null;var He=Ne([],{}),h,I,se,Ce;if(be===n)for(h=0,I=Te.length;h<I;h++)se=Te[h],ae(He,se)===void 0&&te(He,se,se);else for(h=0,I=Te.length;h<I;h++)se=Te[h],Ce=L(be,se),ae(He,Ce)===void 0&&te(He,Ce,se);return He.$values()}),O(S,"$uniq!",function Oe(){var be=Oe.$$p||n,Te=this;Oe.$$p=null,oe(Te);var He=Te.length,h=Ne([],{}),I,se,Ce,Ke;for(I=0,se=He;I<se;I++){if(Ce=Te[I],Ke=be===n?Ce:L(be,Ce),ae(h,Ke)===void 0){te(h,Ke,Ce);continue}Te.splice(I,1),se--,I--}return Te.length===He?n:Te}),O(S,"$unshift",function(be){var Te,He,h=this;Te=Le(arguments),He=Te,oe(h);var I=h.length,se=He.length;if(se==0)return h;for(var Ce=I-se,Ke=0;Ke<se;Ke++)h.push(h[Ce+Ke]);for(var nt=I-1;nt-se>=0;)h[nt]=h[nt-se],nt--;for(var t=0;t<se;t++)h[t]=He[t];return h},-1),O(S,"$values_at",function(be){var Te,He,h=this,I=n;return Te=Le(arguments),He=Te,I=[],ye(He,"each",[],function se(Ce){var Ke=se.$$s==null?this:se.$$s,nt=n,t=n,g=n;return Ce==null&&(Ce=n),l(Ce["$is_a?"](i("Range")))?(nt=Ce.$end()===n?-1:ne(Ce.$end(),i("Integer"),"to_int"),t=Ce.$begin()===n?0:ne(Ce.$begin(),i("Integer"),"to_int"),t<0?(t=t+Ke.length,n):(nt<0&&(nt=nt+Ke.length),Ce["$exclude_end?"]()&&Ce.$end()!==n&&nt--,nt<t?n:ye(t,"upto",[nt],function u($){var E=u.$$s==null?this:u.$$s;return $==null&&($=n),I["$<<"](E.$at($))},{$$s:Ke}))):(g=ne(Ce,i("Integer"),"to_int"),I["$<<"](Ke.$at(g)))},{$$s:h}),I},-1),O(S,"$zip",function Oe(be){var Te=Oe.$$p||n,He,h,I=this,se=n;Oe.$$p=null,He=Le(arguments),h=He;var Ce=[],Ke=I.length,nt,t,g,u,$;for(u=0,$=h.length;u<$;u++)if(t=h[u],!t.$$is_array){if(t.$$is_range||t.$$is_enumerator){h[u]=t.$take(Ke);continue}h[u]=(l(se=Ie["$coerce_to?"](t,i("Array"),"to_ary"))?se:Ie["$coerce_to!"](t,i("Enumerator"),"to_enum","each")).$to_a()}for(g=0;g<Ke;g++){for(nt=[I[g]],u=0,$=h.length;u<$;u++)t=h[u][g],t==null&&(t=n),nt[u+1]=t;Ce[g]=nt}if(Te!==n){for(g=0;g<Ke;g++)e.yield1(Te,Ce[g]);return n}return Ce},-1),je(S,"$inherited",function(be){be.$$prototype.$to_a=function(){return this.slice(0,this.length)}}),O(S,"$instance_variables",function Oe(){var be=Oe.$$p||n,Te=this;return Oe.$$p=null,ye(Fe(Te,_e(Te,"instance_variables",Oe,!1,!0),"instance_variables",[],be),"reject",[],function(h){var I=n;return h==null&&(h=n),l(I=/^@\d+$/.test(h))?I:h["$=="]("@length")})}),O(S,"$pack",function(be){return Le(arguments),xe.$raise("To use Array#pack, you must first require 'corelib/array/pack'.")},-1),U(S,"append","push"),U(S,"filter","select"),U(S,"filter!","select!"),U(S,"map","collect"),U(S,"map!","collect!"),U(S,"prepend","unshift"),U(S,"size","length"),U(S,"slice","[]"),U(S,"to_s","inspect"),Ie.$pristine(S.$singleton_class(),"allocate"),Ie.$pristine(S,"copy_instance_variables","initialize_dup")}("::",Array,s)};Opal.modules["corelib/hash"]=function(e){var l=e.yield1,v=e.hash,W=e.hash_init,L=e.hash_get,ae=e.hash_put,te=e.hash_delete,le=e.deny_frozen_access,ne=e.freeze,P=e.klass,oe=e.slice,me=e.Opal,Se=e.Kernel,Le=e.defs,je=e.def,xe=e.send,O=e.rb_ge,Ie=e.rb_gt,We=e.hash2,Ne=e.truthy,Fe=e.to_a,_e=e.return_self,ye=e.alias,de=e.top,ze=[],fe=e.nil,ke=e.$$$;return e.add_stubs("require,include,coerce_to?,[],merge!,allocate,raise,coerce_to!,each,fetch,>=,>,==,compare_by_identity,lambda?,abs,arity,enum_for,size,respond_to?,class,dig,except!,dup,delete,new,inspect,map,to_proc,flatten,frozen?,eql?,default,default_proc,default_proc=,default=,to_h,proc,clone,select,select!,has_key?,indexes,index,length,[]=,has_value?"),de.$require("corelib/enumerable"),function(ie,p,ee){var q=P(ie,p,"Hash"),j=[q].concat(ee),F=e.$r(j);q.$include(ke("Enumerable")),q.$$prototype.$$is_hash=!0,Le(q,"$[]",function(U){var m,s,n=this;m=oe(arguments),s=m;var i,o=s.length,c;if(o===1){if(i=me["$coerce_to?"](s["$[]"](0),ke("Hash"),"to_hash"),i!==fe)return n.$allocate()["$merge!"](i);for(s=me["$coerce_to?"](s["$[]"](0),ke("Array"),"to_ary"),s===fe&&Se.$raise(ke("ArgumentError"),"odd number of arguments for Hash"),o=s.length,i=n.$allocate(),c=0;c<o;c++)if(s[c].$$is_array)switch(s[c].length){case 1:i.$store(s[c][0],fe);break;case 2:i.$store(s[c][0],s[c][1]);break;default:Se.$raise(ke("ArgumentError"),"invalid number of elements ("+s[c].length+" for 1..2)")}return i}for(o%2!==0&&Se.$raise(ke("ArgumentError"),"odd number of arguments for Hash"),i=n.$allocate(),c=0;c<o;c+=2)i.$store(s[c],s[c+1]);return i},-1),Le(q,"$allocate",function(){var U=this,m=new U.$$constructor;return W(m),m.$$none=fe,m.$$proc=fe,m}),Le(q,"$try_convert",function(U){return me["$coerce_to?"](U,ke("Hash"),"to_hash")}),je(q,"$initialize",function re(U){var m=re.$$p||fe,s=this;return re.$$p=null,le(s),U!==void 0&&m!==fe&&Se.$raise(ke("ArgumentError"),"wrong number of arguments (1 for 0)"),s.$$none=U===void 0?fe:U,s.$$proc=m,s},-1),je(q,"$==",function(U){var m=this;if(m===U)return!0;if(!U.$$is_hash||m.$$keys.length!==U.$$keys.length)return!1;for(var s=0,n=m.$$keys,i=n.length,o,c,x;s<i;s++)if(o=n[s],o.$$is_string?(c=m.$$smap[o],x=U.$$smap[o]):(c=o.value,x=L(U,o.key)),x===void 0||!c["$eql?"](x))return!1;return!0}),je(q,"$>=",function(U){var m=this,s=fe;return U=me["$coerce_to!"](U,ke("Hash"),"to_hash"),m.$$keys.length<U.$$keys.length?!1:(s=!0,xe(U,"each",[],function n(i,o){var c=n.$$s==null?this:n.$$s,x=fe;if(i==null&&(i=fe),o==null&&(o=fe),x=c.$fetch(i,null),x==null||x!==o){s=!1;return}},{$$s:m}),s)}),je(q,"$>",function(U){var m=this;return U=me["$coerce_to!"](U,ke("Hash"),"to_hash"),m.$$keys.length<=U.$$keys.length?!1:O(m,U)}),je(q,"$<",function(U){var m=this;return U=me["$coerce_to!"](U,ke("Hash"),"to_hash"),Ie(U,m)}),je(q,"$<=",function(U){var m=this;return U=me["$coerce_to!"](U,ke("Hash"),"to_hash"),O(U,m)}),je(q,"$[]",function(U){var m=this,s=L(m,U);return s!==void 0?s:m.$default(U)}),je(q,"$[]=",function(U,m){var s=this;return le(s),ae(s,U,m),m}),je(q,"$assoc",function(U){for(var m=this,s=0,n=m.$$keys,i=n.length,o;s<i;s++)if(o=n[s],o.$$is_string){if(o["$=="](U))return[o,m.$$smap[o]]}else if(o.key["$=="](U))return[o.key,o.value];return fe}),je(q,"$clear",function(){var U=this;return le(U),W(U),U}),je(q,"$clone",function(){var U=this,m=new U.$$class;return W(m),e.hash_clone(U,m),m}),je(q,"$compact",function(){for(var U=this,m=v(),s=0,n=U.$$keys,i=n.length,o,c,x;s<i;s++)o=n[s],o.$$is_string?c=U.$$smap[o]:(c=o.value,o=o.key),c!==fe&&ae(m,o,c);return m}),je(q,"$compact!",function(){var U=this;le(U);for(var m=!1,s=0,n=U.$$keys,i=n.length,o,c,x;s<i;s++)o=n[s],o.$$is_string?c=U.$$smap[o]:(c=o.value,o=o.key),c===fe&&te(U,o)!==void 0&&(m=!0,i--,s--);return m?U:fe}),je(q,"$compare_by_identity",function(){var U=this;le(U);var m,s,n,i=U.$$keys,o;if(U.$$by_identity)return U;if(U.$$keys.length===0)return U.$$by_identity=!0,U;for(o=We([],{}).$compare_by_identity(),m=0,s=i.length;m<s;m++)n=i[m],n.$$is_string||(n=n.key),ae(o,n,L(U,n));return U.$$by_identity=!0,U.$$map=o.$$map,U.$$smap=o.$$smap,U}),je(q,"$compare_by_identity?",function(){var U=this;return U.$$by_identity===!0}),je(q,"$default",function(U){var m=this;return U!==void 0&&m.$$proc!==fe&&m.$$proc!==void 0?m.$$proc.$call(m,U):m.$$none===void 0?fe:m.$$none},-1),je(q,"$default=",function(U){var m=this;return le(m),m.$$proc=fe,m.$$none=U,U}),je(q,"$default_proc",function(){var U=this;return U.$$proc!==void 0?U.$$proc:fe}),je(q,"$default_proc=",function(U){var m=this;le(m);var s=U;return s!==fe&&(s=me["$coerce_to!"](s,ke("Proc"),"to_proc"),s["$lambda?"]()&&s.$arity().$abs()!==2&&Se.$raise(ke("TypeError"),"default_proc takes two arguments")),m.$$none=fe,m.$$proc=s,U}),je(q,"$delete",function re(U){var m=re.$$p||fe,s=this;re.$$p=null,le(s);var n=te(s,U);return n!==void 0?n:m!==fe?e.yield1(m,U):fe}),je(q,"$delete_if",function re(){var U=re.$$p||fe,m=this;if(re.$$p=null,!Ne(U))return xe(m,"enum_for",["delete_if"],function S(){var G=S.$$s==null?this:S.$$s;return G.$size()},{$$s:m});le(m);for(var s=0,n=m.$$keys,i=n.length,o,c,x;s<i;s++)o=n[s],o.$$is_string?c=m.$$smap[o]:(c=o.value,o=o.key),x=U(o,c),x!==!1&&x!==fe&&te(m,o)!==void 0&&(i--,s--);return m}),je(q,"$dig",function(U,m){var s,n,i=this,o=fe;return s=oe(arguments,1),n=s,o=i["$[]"](U),o===fe||n.length===0?o:(Ne(o["$respond_to?"]("dig"))||Se.$raise(ke("TypeError"),""+o.$class()+" does not have #dig method"),xe(o,"dig",Fe(n)))},-2),je(q,"$each",function re(){var U=re.$$p||fe,m=this;if(re.$$p=null,!Ne(U))return xe(m,"enum_for",["each"],function x(){var S=x.$$s==null?this:x.$$s;return S.$size()},{$$s:m});for(var s=0,n=m.$$keys.slice(),i=n.length,o,c;s<i;s++)o=n[s],o.$$is_string?c=m.$$smap[o]:(c=o.value,o=o.key),l(U,[o,c]);return m}),je(q,"$each_key",function re(){var U=re.$$p||fe,m=this;if(re.$$p=null,!Ne(U))return xe(m,"enum_for",["each_key"],function c(){var x=c.$$s==null?this:c.$$s;return x.$size()},{$$s:m});for(var s=0,n=m.$$keys.slice(),i=n.length,o;s<i;s++)o=n[s],U(o.$$is_string?o:o.key);return m}),je(q,"$each_value",function re(){var U=re.$$p||fe,m=this;if(re.$$p=null,!Ne(U))return xe(m,"enum_for",["each_value"],function c(){var x=c.$$s==null?this:c.$$s;return x.$size()},{$$s:m});for(var s=0,n=m.$$keys.slice(),i=n.length,o;s<i;s++)o=n[s],U(o.$$is_string?m.$$smap[o]:o.value);return m}),je(q,"$empty?",function(){var U=this;return U.$$keys.length===0}),je(q,"$except",function(U){var m,s,n=this;return m=oe(arguments),s=m,xe(n.$dup(),"except!",Fe(s))},-1),je(q,"$except!",function(U){var m,s,n=this;return m=oe(arguments),s=m,xe(s,"each",[],function i(o){var c=i.$$s==null?this:i.$$s;return o==null&&(o=fe),c.$delete(o)},{$$s:n}),n},-1),je(q,"$fetch",function re(U,m){var s=re.$$p||fe,n=this;re.$$p=null;var i=L(n,U);return i!==void 0?i:s!==fe?s(U):m!==void 0?m:Se.$raise(ke("KeyError").$new("key not found: "+U.$inspect(),We(["key","receiver"],{key:U,receiver:n})))},-2),je(q,"$fetch_values",function re(U){var m=re.$$p||fe,s,n,i=this;return re.$$p=null,s=oe(arguments),n=s,xe(n,"map",[],function o(c){var x=o.$$s==null?this:o.$$s;return c==null&&(c=fe),xe(x,"fetch",[c],m.$to_proc())},{$$s:i})},-1),je(q,"$flatten",function(U){var m=this;U==null&&(U=1),U=me["$coerce_to!"](U,ke("Integer"),"to_int");for(var s=[],n=0,i=m.$$keys,o=i.length,c,x;n<o;n++){if(c=i[n],c.$$is_string?x=m.$$smap[c]:(x=c.value,c=c.key),s.push(c),x.$$is_array){if(U===1){s.push(x);continue}s=s.concat(x.$flatten(U-2));continue}s.push(x)}return s},-1),je(q,"$freeze",function(){var U=this;return Ne(U["$frozen?"]())?U:ne(U)}),je(q,"$has_key?",function(U){var m=this;return L(m,U)!==void 0}),je(q,"$has_value?",function(U){for(var m=this,s=0,n=m.$$keys,i=n.length,o;s<i;s++)if(o=n[s],(o.$$is_string?m.$$smap[o]:o.value)["$=="](U))return!0;return!1}),je(q,"$hash",function(){var U=this,m=e.hash_ids===void 0,s=U.$object_id(),n=["Hash"],i,o;try{if(m&&(e.hash_ids=Object.create(null)),e[s])return"self";for(i in e.hash_ids)if(o=e.hash_ids[i],U["$eql?"](o))return"self";e.hash_ids[s]=U;for(var c=0,x=U.$$keys,S=x.length;c<S;c++)i=x[c],i.$$is_string?n.push([i,U.$$smap[i].$hash()]):n.push([i.key_hash,i.value.$hash()]);return n.sort().join()}finally{m&&(e.hash_ids=void 0)}}),je(q,"$index",function(U){for(var m=this,s=0,n=m.$$keys,i=n.length,o,c;s<i;s++)if(o=n[s],o.$$is_string?c=m.$$smap[o]:(c=o.value,o=o.key),c["$=="](U))return o;return fe}),je(q,"$indexes",function(U){var m,s,n=this;m=oe(arguments),s=m;for(var i=[],o=0,c=s.length,x,S;o<c;o++){if(x=s[o],S=L(n,x),S===void 0){i.push(n.$default());continue}i.push(S)}return i},-1);var Ee;return je(q,"$inspect",function(){var U=this,m=Ee===void 0,s=U.$object_id(),n=[];return function(){try{if(m&&(Ee={}),Ee.hasOwnProperty(s))return"{...}";Ee[s]=!0;for(var i=0,o=U.$$keys,c=o.length,x,S;i<c;i++)x=o[i],x.$$is_string?S=U.$$smap[x]:(S=x.value,x=x.key),x=F("Opal").$inspect(x),S=F("Opal").$inspect(S),n.push(x+"=>"+S);return"{"+n.join(", ")+"}"}finally{m&&(Ee=void 0)}}()}),je(q,"$invert",function(){for(var U=this,m=v(),s=0,n=U.$$keys,i=n.length,o,c;s<i;s++)o=n[s],o.$$is_string?c=U.$$smap[o]:(c=o.value,o=o.key),ae(m,c,o);return m}),je(q,"$keep_if",function re(){var U=re.$$p||fe,m=this;if(re.$$p=null,!Ne(U))return xe(m,"enum_for",["keep_if"],function S(){var G=S.$$s==null?this:S.$$s;return G.$size()},{$$s:m});le(m);for(var s=0,n=m.$$keys,i=n.length,o,c,x;s<i;s++)o=n[s],o.$$is_string?c=m.$$smap[o]:(c=o.value,o=o.key),x=U(o,c),(x===!1||x===fe)&&te(m,o)!==void 0&&(i--,s--);return m}),je(q,"$keys",function(){for(var U=this,m=[],s=0,n=U.$$keys,i=n.length,o;s<i;s++)o=n[s],o.$$is_string?m.push(o):m.push(o.key);return m}),je(q,"$length",function(){var U=this;return U.$$keys.length}),je(q,"$merge",function re(U){var m=re.$$p||fe,s,n,i=this;return re.$$p=null,s=oe(arguments),n=s,xe(i.$dup(),"merge!",Fe(n),m.$to_proc())},-1),je(q,"$merge!",function re(U){var m=re.$$p||fe,s,n,i=this;re.$$p=null,s=oe(arguments),n=s,le(i);var o,c,x,S,G,qe,Je,$t;for(o=0;o<n.length;++o)if(x=me["$coerce_to!"](n[o],ke("Hash"),"to_hash"),S=x.$$keys,G=S.length,m===fe)for(c=0;c<G;c++)qe=S[c],qe.$$is_string?$t=x.$$smap[qe]:($t=qe.value,qe=qe.key),ae(i,qe,$t);else for(c=0;c<G;c++){if(qe=S[c],qe.$$is_string?$t=x.$$smap[qe]:($t=qe.value,qe=qe.key),Je=L(i,qe),Je===void 0){ae(i,qe,$t);continue}ae(i,qe,m(qe,Je,$t))}return i},-1),je(q,"$rassoc",function(U){for(var m=this,s=0,n=m.$$keys,i=n.length,o,c;s<i;s++)if(o=n[s],o.$$is_string?c=m.$$smap[o]:(c=o.value,o=o.key),c["$=="](U))return[o,c];return fe}),je(q,"$rehash",function(){var U=this;return le(U),e.hash_rehash(U),U}),je(q,"$reject",function re(){var U=re.$$p||fe,m=this;if(re.$$p=null,!Ne(U))return xe(m,"enum_for",["reject"],function G(){var qe=G.$$s==null?this:G.$$s;return qe.$size()},{$$s:m});for(var s=v(),n=0,i=m.$$keys,o=i.length,c,x,S;n<o;n++)c=i[n],c.$$is_string?x=m.$$smap[c]:(x=c.value,c=c.key),S=U(c,x),(S===!1||S===fe)&&ae(s,c,x);return s}),je(q,"$reject!",function re(){var U=re.$$p||fe,m=this;if(re.$$p=null,!Ne(U))return xe(m,"enum_for",["reject!"],function G(){var qe=G.$$s==null?this:G.$$s;return qe.$size()},{$$s:m});le(m);for(var s=!1,n=0,i=m.$$keys,o=i.length,c,x,S;n<o;n++)c=i[n],c.$$is_string?x=m.$$smap[c]:(x=c.value,c=c.key),S=U(c,x),S!==!1&&S!==fe&&te(m,c)!==void 0&&(s=!0,o--,n--);return s?m:fe}),je(q,"$replace",function(U){var m=this;le(m),U=me["$coerce_to!"](U,ke("Hash"),"to_hash"),W(m);for(var s=0,n=U.$$keys,i=n.length,o,c,x;s<i;s++)o=n[s],o.$$is_string?x=U.$$smap[o]:(x=o.value,o=o.key),ae(m,o,x);return Ne(U.$default_proc())?m["$default_proc="](U.$default_proc()):m["$default="](U.$default()),m}),je(q,"$select",function re(){var U=re.$$p||fe,m=this;if(re.$$p=null,!Ne(U))return xe(m,"enum_for",["select"],function G(){var qe=G.$$s==null?this:G.$$s;return qe.$size()},{$$s:m});for(var s=v(),n=0,i=m.$$keys,o=i.length,c,x,S;n<o;n++)c=i[n],c.$$is_string?x=m.$$smap[c]:(x=c.value,c=c.key),S=U(c,x),S!==!1&&S!==fe&&ae(s,c,x);return s}),je(q,"$select!",function re(){var U=re.$$p||fe,m=this;if(re.$$p=null,!Ne(U))return xe(m,"enum_for",["select!"],function G(){var qe=G.$$s==null?this:G.$$s;return qe.$size()},{$$s:m});le(m);for(var s=fe,n=0,i=m.$$keys,o=i.length,c,x,S;n<o;n++)c=i[n],c.$$is_string?x=m.$$smap[c]:(x=c.value,c=c.key),S=U(c,x),(S===!1||S===fe)&&(te(m,c)!==void 0&&(o--,n--),s=m);return s}),je(q,"$shift",function(){var U=this;le(U);var m=U.$$keys,s;return m.length>0?(s=m[0],s=s.$$is_string?s:s.key,[s,te(U,s)]):fe}),je(q,"$slice",function(U){var m,s,n=this;m=oe(arguments),s=m;for(var i=v(),o=0,c=s.length;o<c;o++){var x=s[o],S=L(n,x);S!==void 0&&ae(i,x,S)}return i},-1),je(q,"$to_a",function(){for(var U=this,m=[],s=0,n=U.$$keys,i=n.length,o,c;s<i;s++)o=n[s],o.$$is_string?c=U.$$smap[o]:(c=o.value,o=o.key),m.push([o,c]);return m}),je(q,"$to_h",function re(){var U=re.$$p||fe,m=this;if(re.$$p=null,U!==fe)return xe(m,"map",[],U.$to_proc()).$to_h();if(m.$$class===e.Hash)return m;var s=new e.Hash;return W(s),e.hash_clone(m,s),s}),je(q,"$to_hash",_e),je(q,"$to_proc",function(){var U=this;return xe(U,"proc",[],function m(s){var n=m.$$s==null?this:m.$$s;return s==null&&Se.$raise(ke("ArgumentError"),"no key given"),n["$[]"](s)},{$$arity:-1,$$s:U})}),je(q,"$transform_keys",function re(){var U=re.$$p||fe,m=this;if(re.$$p=null,!Ne(U))return xe(m,"enum_for",["transform_keys"],function S(){var G=S.$$s==null?this:S.$$s;return G.$size()},{$$s:m});for(var s=v(),n=0,i=m.$$keys,o=i.length,c,x;n<o;n++)c=i[n],c.$$is_string?x=m.$$smap[c]:(x=c.value,c=c.key),c=l(U,c),ae(s,c,x);return s}),je(q,"$transform_keys!",function re(){var U=re.$$p||fe,m=this;if(re.$$p=null,!Ne(U))return xe(m,"enum_for",["transform_keys!"],function S(){var G=S.$$s==null?this:S.$$s;return G.$size()},{$$s:m});le(m);var s=e.slice(m.$$keys),n,i=s.length,o,c,x;for(n=0;n<i;n++)o=s[n],o.$$is_string?c=m.$$smap[o]:(c=o.value,o=o.key),x=l(U,o),te(m,o),ae(m,x,c);return m}),je(q,"$transform_values",function re(){var U=re.$$p||fe,m=this;if(re.$$p=null,!Ne(U))return xe(m,"enum_for",["transform_values"],function S(){var G=S.$$s==null?this:S.$$s;return G.$size()},{$$s:m});for(var s=v(),n=0,i=m.$$keys,o=i.length,c,x;n<o;n++)c=i[n],c.$$is_string?x=m.$$smap[c]:(x=c.value,c=c.key),x=l(U,x),ae(s,c,x);return s}),je(q,"$transform_values!",function re(){var U=re.$$p||fe,m=this;if(re.$$p=null,!Ne(U))return xe(m,"enum_for",["transform_values!"],function x(){var S=x.$$s==null?this:x.$$s;return S.$size()},{$$s:m});le(m);for(var s=0,n=m.$$keys,i=n.length,o,c;s<i;s++)o=n[s],o.$$is_string?c=m.$$smap[o]:(c=o.value,o=o.key),c=l(U,c),ae(m,o,c);return m}),je(q,"$values",function(){for(var U=this,m=[],s=0,n=U.$$keys,i=n.length,o;s<i;s++)o=n[s],o.$$is_string?m.push(U.$$smap[o]):m.push(o.value);return m}),ye(q,"dup","clone"),ye(q,"each_pair","each"),ye(q,"eql?","=="),ye(q,"filter","select"),ye(q,"filter!","select!"),ye(q,"include?","has_key?"),ye(q,"indices","indexes"),ye(q,"key","index"),ye(q,"key?","has_key?"),ye(q,"member?","has_key?"),ye(q,"size","length"),ye(q,"store","[]="),ye(q,"to_s","inspect"),ye(q,"update","merge!"),ye(q,"value?","has_value?"),ye(q,"values_at","indexes")}("::",null,ze)};Opal.modules["corelib/number"]=function(e){var l=e.klass,v=e.Opal,W=e.Kernel,L=e.def,ae=e.eqeqeq,te=e.truthy,le=e.rb_gt,ne=e.not,P=e.rb_lt,oe=e.alias,me=e.send2,Se=e.find_super,Le=e.send,je=e.rb_plus,xe=e.rb_minus,O=e.eqeq,Ie=e.return_self,We=e.rb_divide,Ne=e.to_ary,Fe=e.rb_times,_e=e.rb_le,ye=e.rb_ge,de=e.return_val,ze=e.const_set,fe=e.top,ke=[],ie=e.nil,p=e.$$$;return e.add_stubs("require,bridge,raise,name,class,Float,respond_to?,coerce_to!,__coerced__,===,>,!,**,new,<,to_f,==,nan?,infinite?,enum_for,+,-,gcd,lcm,%,/,frexp,to_i,ldexp,rationalize,*,<<,to_r,truncate,-@,size,<=,>=,inspect,angle,to_s,is_a?,abs,__id__,next,coerce_to?"),fe.$require("corelib/numeric"),function(ee,q,j){var F=l(ee,q,"Number");v.$bridge(Number,F),e.prop(F.$$prototype,"$$is_number",!0),F.$$is_number_class=!0,function(n,i){return L(n,"$allocate",function(){var c=this;return W.$raise(p("TypeError"),"allocator undefined for "+c.$name())}),e.udef(n,"$new"),ie}(e.get_singleton_class(F)),L(F,"$coerce",function(i){var o=this;if(i===ie)W.$raise(p("TypeError"),"can't convert "+i.$class()+" into Float");else{if(i.$$is_string)return[W.$Float(i),o];if(i["$respond_to?"]("to_f"))return[v["$coerce_to!"](i,p("Float"),"to_f"),o];if(i.$$is_number)return[i,o];W.$raise(p("TypeError"),"can't convert "+i.$class()+" into Float")}}),L(F,"$__id__",function(){var i=this;return i*2+1}),L(F,"$+",function(i){var o=this;return i.$$is_number?o+i:o.$__coerced__("+",i)}),L(F,"$-",function(i){var o=this;return i.$$is_number?o-i:o.$__coerced__("-",i)}),L(F,"$*",function(i){var o=this;return i.$$is_number?o*i:o.$__coerced__("*",i)}),L(F,"$/",function(i){var o=this;return i.$$is_number?o/i:o.$__coerced__("/",i)}),L(F,"$%",function(i){var o=this;if(i.$$is_number){if(i==-1/0)return i;if(i==0)W.$raise(p("ZeroDivisionError"),"divided by 0");else return i<0||o<0?(o%i+i)%i:o%i}else return o.$__coerced__("%",i)}),L(F,"$&",function(i){var o=this;return i.$$is_number?o&i:o.$__coerced__("&",i)}),L(F,"$|",function(i){var o=this;return i.$$is_number?o|i:o.$__coerced__("|",i)}),L(F,"$^",function(i){var o=this;return i.$$is_number?o^i:o.$__coerced__("^",i)}),L(F,"$<",function(i){var o=this;return i.$$is_number?o<i:o.$__coerced__("<",i)}),L(F,"$<=",function(i){var o=this;return i.$$is_number?o<=i:o.$__coerced__("<=",i)}),L(F,"$>",function(i){var o=this;return i.$$is_number?o>i:o.$__coerced__(">",i)}),L(F,"$>=",function(i){var o=this;return i.$$is_number?o>=i:o.$__coerced__(">=",i)});var Ee=function(n,i){return i.$$is_number?isNaN(n)||isNaN(i)?ie:n>i?1:n<i?-1:0:n.$__coerced__("<=>",i)};L(F,"$<=>",function(i){var o=this;try{return Ee(o,i)}catch(c){if(e.rescue(c,[p("ArgumentError")]))try{return ie}finally{e.pop_exception()}else throw c}}),L(F,"$<<",function(i){var o=this;return i=v["$coerce_to!"](i,p("Integer"),"to_int"),i>0?o<<i:o>>-i}),L(F,"$>>",function(i){var o=this;return i=v["$coerce_to!"](i,p("Integer"),"to_int"),i>0?o>>i:o<<-i}),L(F,"$[]",function(i){var o=this;return i=v["$coerce_to!"](i,p("Integer"),"to_int"),i<0?0:i>=32?o<0?1:0:o>>i&1}),L(F,"$+@",function(){var i=this;return+i}),L(F,"$-@",function(){var i=this;return-i}),L(F,"$~",function(){var i=this;return~i}),L(F,"$**",function(i){var o=this;return ae(p("Integer"),i)?ne(p("Integer")["$==="](o))||te(le(i,0))?Math.pow(o,i):p("Rational").$new(o,1)["$**"](i):P(o,0)&&(ae(p("Float"),i)||ae(p("Rational"),i))?p("Complex").$new(o,0)["$**"](i.$to_f()):te(i.$$is_number!=null)?Math.pow(o,i):o.$__coerced__("**",i)}),L(F,"$==",function(i){var o=this;return i.$$is_number?o.valueOf()===i.valueOf():i["$respond_to?"]("==")?i["$=="](o):!1}),oe(F,"===","=="),L(F,"$abs",function(){var i=this;return Math.abs(i)}),L(F,"$abs2",function(){var i=this;return Math.abs(i*i)}),L(F,"$allbits?",function(i){var o=this;return i=v["$coerce_to!"](i,p("Integer"),"to_int"),(o&i)==i}),L(F,"$anybits?",function(i){var o=this;return i=v["$coerce_to!"](i,p("Integer"),"to_int"),(o&i)!==0}),L(F,"$angle",function(){var i=this;return te(i["$nan?"]())?i:i==0?1/i>0?0:Math.PI:i<0?Math.PI:0}),L(F,"$bit_length",function(){var i=this;if(ae(p("Integer"),i)||W.$raise(p("NoMethodError").$new("undefined method `bit_length` for "+i+":Float","bit_length")),i===0||i===-1)return 0;for(var o=0,c=i<0?~i:i;c!=0;)o+=1,c>>>=1;return o}),L(F,"$ceil",function(i){var o=this;i==null&&(i=0);var c=o.$to_f();if(c%1===0&&i>=0)return c;var x=Math.pow(10,i),S=Math.ceil(c*x)/x;return c%1===0&&(S=Math.round(S)),S},-1),L(F,"$chr",function(i){var o=this;return e.enc(String.fromCharCode(o),i||"BINARY")},-1),L(F,"$denominator",function n(){var i=n.$$p||ie,o=this;return n.$$p=null,te(o["$nan?"]())||te(o["$infinite?"]())?1:me(o,Se(o,"denominator",n,!1,!0),"denominator",[],i)}),L(F,"$downto",function n(i){var o=n.$$p||ie,c=this;if(n.$$p=null,o===ie)return Le(c,"enum_for",["downto",i],function S(){var G=S.$$s==null?this:S.$$s;return ae(p("Numeric"),i)||W.$raise(p("ArgumentError"),"comparison of "+G.$class()+" with "+i.$class()+" failed"),te(le(i,G))?0:je(xe(G,i),1)},{$$s:c});i.$$is_number||W.$raise(p("ArgumentError"),"comparison of "+c.$class()+" with "+i.$class()+" failed");for(var x=c;x>=i;x--)o(x);return c}),L(F,"$equal?",function(i){var o=this,c=ie;return te(c=o["$=="](i))?c:isNaN(o)&&isNaN(i)}),L(F,"$even?",function(){var i=this;return i%2===0}),L(F,"$floor",function(i){var o=this;i==null&&(i=0);var c=o.$to_f();if(c%1===0&&i>=0)return c;var x=Math.pow(10,i),S=Math.floor(c*x)/x;return c%1===0&&(S=Math.round(S)),S},-1),L(F,"$gcd",function(i){var o=this;ae(p("Integer"),i)||W.$raise(p("TypeError"),"not an integer");for(var c=Math.abs(o),x=Math.abs(i);c>0;){var S=c;c=x%c,x=S}return x}),L(F,"$gcdlcm",function(i){var o=this;return[o.$gcd(i),o.$lcm(i)]}),L(F,"$integer?",function(){var i=this;return i%1===0}),L(F,"$is_a?",function n(i){var o=n.$$p||ie,c=this;return n.$$p=null,O(i,p("Integer"))&&ae(p("Integer"),c)||O(i,p("Integer"))&&ae(p("Integer"),c)||O(i,p("Float"))&&ae(p("Float"),c)?!0:me(c,Se(c,"is_a?",n,!1,!0),"is_a?",[i],o)}),L(F,"$instance_of?",function n(i){var o=n.$$p||ie,c=this;return n.$$p=null,O(i,p("Integer"))&&ae(p("Integer"),c)||O(i,p("Integer"))&&ae(p("Integer"),c)||O(i,p("Float"))&&ae(p("Float"),c)?!0:me(c,Se(c,"instance_of?",n,!1,!0),"instance_of?",[i],o)}),L(F,"$lcm",function(i){var o=this;return ae(p("Integer"),i)||W.$raise(p("TypeError"),"not an integer"),o==0||i==0?0:Math.abs(o*i/o.$gcd(i))}),L(F,"$next",function(){var i=this;return i+1}),L(F,"$nobits?",function(i){var o=this;return i=v["$coerce_to!"](i,p("Integer"),"to_int"),(o&i)==0}),L(F,"$nonzero?",function(){var i=this;return i==0?ie:i}),L(F,"$numerator",function n(){var i=n.$$p||ie,o=this;return n.$$p=null,te(o["$nan?"]())||te(o["$infinite?"]())?o:me(o,Se(o,"numerator",n,!1,!0),"numerator",[],i)}),L(F,"$odd?",function(){var i=this;return i%2!==0}),L(F,"$ord",Ie),L(F,"$pow",function(i,o){var c=this;return c==0&&W.$raise(p("ZeroDivisionError"),"divided by 0"),o===void 0?c["$**"](i):(p("Integer")["$==="](i)||W.$raise(p("TypeError"),"Integer#pow() 2nd argument not allowed unless a 1st argument is integer"),i<0&&W.$raise(p("TypeError"),"Integer#pow() 1st argument cannot be negative when 2nd argument specified"),p("Integer")["$==="](o)||W.$raise(p("TypeError"),"Integer#pow() 2nd argument not allowed unless all arguments are integers"),o===0&&W.$raise(p("ZeroDivisionError"),"divided by 0"),c["$**"](i)["$%"](o))},-2),L(F,"$pred",function(){var i=this;return i-1}),L(F,"$quo",function n(i){var o=n.$$p||ie,c=this;return n.$$p=null,ae(p("Integer"),c)?me(c,Se(c,"quo",n,!1,!0),"quo",[i],o):We(c,i)}),L(F,"$rationalize",function(i){var o,c,x=this,S=ie,G=ie;return arguments.length>1&&W.$raise(p("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),ae(p("Integer"),x)?p("Rational").$new(x,1):te(x["$infinite?"]())?W.$raise(p("FloatDomainError"),"Infinity"):te(x["$nan?"]())?W.$raise(p("FloatDomainError"),"NaN"):te(i==null)?(c=p("Math").$frexp(x),o=Ne(c),S=o[0]==null?ie:o[0],G=o[1]==null?ie:o[1],S=p("Math").$ldexp(S,p(p("Float"),"MANT_DIG")).$to_i(),G=xe(G,p(p("Float"),"MANT_DIG")),p("Rational").$new(Fe(2,S),1["$<<"](xe(1,G))).$rationalize(p("Rational").$new(1,1["$<<"](xe(1,G))))):x.$to_r().$rationalize(i)},-1),L(F,"$remainder",function(i){var o=this;return xe(o,Fe(i,We(o,i).$truncate()))}),L(F,"$round",function(i){var o,c,x=this,S=ie;if(ae(p("Integer"),x)){if(te(i==null)||(ae(p("Float"),i)&&te(i["$infinite?"]())&&W.$raise(p("RangeError"),"Infinity"),i=v["$coerce_to!"](i,p("Integer"),"to_int"),te(P(i,p(p("Integer"),"MIN")))&&W.$raise(p("RangeError"),"out of bounds"),te(i>=0)))return x;if(i=i["$-@"](),.415241*i-.125>x.$size())return 0;var G=Math.pow(10,i),qe=Math.floor((Math.abs(x)+G/2)/G)*G;return x<0?-qe:qe}else{if(te(x["$nan?"]())&&te(i==null)&&W.$raise(p("FloatDomainError"),"NaN"),i=v["$coerce_to!"](i||0,p("Integer"),"to_int"),te(_e(i,0)))te(x["$nan?"]())?W.$raise(p("RangeError"),"NaN"):te(x["$infinite?"]())&&W.$raise(p("FloatDomainError"),"Infinity");else{if(O(i,0))return Math.round(x);if(te(x["$nan?"]())||te(x["$infinite?"]()))return x}return c=p("Math").$frexp(x),o=Ne(c),o[0]==null||o[0],S=o[1]==null?ie:o[1],te(ye(i,xe(je(p(p("Float"),"DIG"),2),te(le(S,0))?We(S,4):xe(We(S,3),1))))?x:te(P(i,(te(le(S,0))?je(We(S,3),1):We(S,4))["$-@"]()))?0:Math.round(x*Math.pow(10,i))/Math.pow(10,i)}},-1),L(F,"$times",function n(){var i=n.$$p||ie,o=this;if(n.$$p=null,!te(i))return Le(o,"enum_for",["times"],function x(){var S=x.$$s==null?this:x.$$s;return S},{$$s:o});for(var c=0;c<o;c++)i(c);return o}),L(F,"$to_f",Ie),L(F,"$to_i",function(){var i=this;return i<0?Math.ceil(i):Math.floor(i)}),L(F,"$to_r",function(){var i,o,c=this,x=ie,S=ie;return ae(p("Integer"),c)?p("Rational").$new(c,1):(o=p("Math").$frexp(c),i=Ne(o),x=i[0]==null?ie:i[0],S=i[1]==null?ie:i[1],x=p("Math").$ldexp(x,p(p("Float"),"MANT_DIG")).$to_i(),S=xe(S,p(p("Float"),"MANT_DIG")),Fe(x,p(p("Float"),"RADIX")["$**"](S)).$to_r())}),L(F,"$to_s",function(i){var o=this;return i==null&&(i=10),i=v["$coerce_to!"](i,p("Integer"),"to_int"),(te(P(i,2))||te(le(i,36)))&&W.$raise(p("ArgumentError"),"invalid radix "+i),O(o,0)&&te(1/o===-1/0)?"-0.0":o.toString(i)},-1),L(F,"$truncate",function(i){var o=this;i==null&&(i=0);var c=o.$to_f();if(c%1===0&&i>=0)return c;var x=Math.pow(10,i),S=parseInt(c*x,10)/x;return c%1===0&&(S=Math.round(S)),S},-1),L(F,"$digits",function(i){var o=this;i==null&&(i=10),P(o,0)&&W.$raise(p(p("Math"),"DomainError"),"out of domain"),i=v["$coerce_to!"](i,p("Integer"),"to_int"),te(P(i,2))&&W.$raise(p("ArgumentError"),"invalid radix "+i),o!=parseInt(o)&&W.$raise(p("NoMethodError"),"undefined method `digits' for "+o.$inspect());var c=o,x=[];if(o==0)return[0];for(;c!=0;)x.push(c%i),c=parseInt(c/i,10);return x},-1),L(F,"$divmod",function n(i){var o=n.$$p||ie,c=this;return n.$$p=null,te(c["$nan?"]())||te(i["$nan?"]())?W.$raise(p("FloatDomainError"),"NaN"):te(c["$infinite?"]())?W.$raise(p("FloatDomainError"),"Infinity"):me(c,Se(c,"divmod",n,!1,!0),"divmod",[i],o)}),L(F,"$upto",function n(i){var o=n.$$p||ie,c=this;if(n.$$p=null,o===ie)return Le(c,"enum_for",["upto",i],function S(){var G=S.$$s==null?this:S.$$s;return ae(p("Numeric"),i)||W.$raise(p("ArgumentError"),"comparison of "+G.$class()+" with "+i.$class()+" failed"),te(P(i,G))?0:je(xe(i,G),1)},{$$s:c});i.$$is_number||W.$raise(p("ArgumentError"),"comparison of "+c.$class()+" with "+i.$class()+" failed");for(var x=c;x<=i;x++)o(x);return c}),L(F,"$zero?",function(){var i=this;return i==0}),L(F,"$size",de(4)),L(F,"$nan?",function(){var i=this;return isNaN(i)}),L(F,"$finite?",function(){var i=this;return i!=1/0&&i!=-1/0&&!isNaN(i)}),L(F,"$infinite?",function(){var i=this;return i==1/0?1:i==-1/0?-1:ie}),L(F,"$positive?",function(){var i=this;return i!=0&&(i==1/0||1/i>0)}),L(F,"$negative?",function(){var i=this;return i==-1/0||1/i<0});function re(n){var i=new Uint8Array(8);return new DataView(i.buffer).setFloat64(0,n,!0),i}function U(n){return new DataView(n.buffer).getFloat64(0,!0)}function m(n){for(var i=re(n),o=0;o<i.length;o++)if(i[o]===255)i[o]=0;else{i[o]++;break}return U(i)}function s(n){for(var i=re(n),o=0;o<i.length;o++)if(i[o]===0)i[o]=255;else{i[o]--;break}return U(i)}return L(F,"$next_float",function(){var i=this;return O(i,p(p("Float"),"INFINITY"))?p(p("Float"),"INFINITY"):te(i["$nan?"]())?p(p("Float"),"NAN"):ye(i,0)?m(Math.abs(i)):s(i)}),L(F,"$prev_float",function(){var i=this;return O(i,p(p("Float"),"INFINITY")["$-@"]())?p(p("Float"),"INFINITY")["$-@"]():te(i["$nan?"]())?p(p("Float"),"NAN"):le(i,0)?s(i):-m(Math.abs(i))}),oe(F,"arg","angle"),oe(F,"eql?","=="),oe(F,"fdiv","/"),oe(F,"inspect","to_s"),oe(F,"kind_of?","is_a?"),oe(F,"magnitude","abs"),oe(F,"modulo","%"),oe(F,"object_id","__id__"),oe(F,"phase","angle"),oe(F,"succ","next"),oe(F,"to_int","to_i")}("::",p("Numeric")),ze("::","Fixnum",p("Number")),function(ee,q,j){var F=l(ee,q,"Integer"),Ee=[F].concat(j);return F.$$is_number_class=!0,F.$$is_integer_class=!0,function(re,U){var m=[re].concat(U),s=e.$r(m);return L(re,"$allocate",function(){var i=this;return W.$raise(p("TypeError"),"allocator undefined for "+i.$name())}),e.udef(re,"$new"),L(re,"$sqrt",function(i){return i=v["$coerce_to!"](i,p("Integer"),"to_int"),i<0&&W.$raise(p(p("Math"),"DomainError"),'Numerical argument is out of domain - "isqrt"'),parseInt(Math.sqrt(i),10)}),L(re,"$try_convert",function(i){var o=this;return s("Opal")["$coerce_to?"](i,o,"to_int")})}(e.get_singleton_class(F),Ee),ze(F,"MAX",Math.pow(2,30)-1),ze(F,"MIN",-Math.pow(2,30))}("::",p("Numeric"),ke),function(ee,q,j){var F=l(ee,q,"Float");return F.$$is_number_class=!0,function(Ee,re){return L(Ee,"$allocate",function(){var m=this;return W.$raise(p("TypeError"),"allocator undefined for "+m.$name())}),e.udef(Ee,"$new"),L(Ee,"$===",function(m){return!!m.$$is_number})}(e.get_singleton_class(F)),ze(F,"INFINITY",1/0),ze(F,"MAX",Number.MAX_VALUE),ze(F,"MIN",Number.MIN_VALUE),ze(F,"NAN",NaN),ze(F,"DIG",15),ze(F,"MANT_DIG",53),ze(F,"RADIX",2),ze(F,"EPSILON",Number.EPSILON||2220446049250313e-31)}("::",p("Numeric"))};Opal.modules["corelib/range"]=function(e){var l=e.klass,v=e.truthy,W=e.Kernel,L=e.def,ae=e.not,te=e.send2,le=e.find_super,ne=e.rb_lt,P=e.rb_le,oe=e.send,me=e.eqeq,Se=e.eqeqeq,Le=e.return_ivar,je=e.rb_gt,xe=e.rb_minus,O=e.Opal,Ie=e.rb_divide,We=e.rb_plus,Ne=e.rb_times,Fe=e.rb_ge,_e=e.thrower,ye=e.alias,de=e.top,ze=[],fe=e.nil,ke=e.$$$;return e.add_stubs("require,include,attr_reader,raise,nil?,<=>,include?,!,<,<=,enum_for,size,upto,to_proc,respond_to?,class,succ,==,===,exclude_end?,eql?,begin,end,last,to_a,>,-@,-,to_i,coerce_to!,ceil,/,is_a?,new,loop,+,*,>=,each_with_index,%,step,bsearch,inspect,[],hash,cover?"),de.$require("corelib/enumerable"),function(ie,p,ee){var q=l(ie,p,"Range"),j=[q].concat(ee),F=e.$r(j),Ee=q.$$prototype;Ee.begin=Ee.end=Ee.excl=fe,q.$include(ke("Enumerable")),q.$$prototype.$$is_range=!0,q.$attr_reader("begin","end"),L(q,"$initialize",function(m,s,n){var i=this;return n==null&&(n=!1),v(i.begin)&&W.$raise(ke("NameError"),"'initialize' called twice"),v(m["$<=>"](s))||v(m["$nil?"]())||v(s["$nil?"]())||W.$raise(ke("ArgumentError"),"bad value for range"),i.begin=m,i.end=s,i.excl=n},-3),L(q,"$===",function(m){var s=this;return s["$include?"](m)});function re(U){return U.begin===fe||U.end===fe||U.begin===-1/0||U.end===1/0||U.begin===1/0||U.end===-1/0}return L(q,"$count",function U(){var m=U.$$p||fe,s=this;return U.$$p=null,ae(m!==fe)&&v(re(s))?ke(ke("Float"),"INFINITY"):te(s,le(s,"count",U,!1,!0),"count",[],m)}),L(q,"$to_a",function U(){var m=U.$$p||fe,s=this;return U.$$p=null,v(re(s))&&W.$raise(ke("TypeError"),"cannot convert endless range to an array"),te(s,le(s,"to_a",U,!1,!0),"to_a",[],m)}),L(q,"$cover?",function(m){var s=this,n=fe,i=fe,o=fe,c=fe,x=fe;return n=v(i=v(o=v(c=s.begin["$nil?"]())?-1:c)?o:s.begin["$<=>"](m))&&i,x=v(i=v(o=v(c=s.end["$nil?"]())?-1:c)?o:m["$<=>"](s.end))&&i,v(i=v(o=v(s.excl)?v(c=x)?ne(x,0):c:v(c=x)?P(x,0):c)?n:o)?P(n,0):i}),L(q,"$each",function U(){var m=U.$$p||fe,s=this,n=fe,i=fe,o=fe;if(U.$$p=null,m===fe)return oe(s,"enum_for",["each"],function S(){var G=S.$$s==null?this:S.$$s;return G.$size()},{$$s:s});var c,x;if(s.begin.$$is_number&&s.end.$$is_number){for((s.begin%1!==0||s.end%1!==0)&&W.$raise(ke("TypeError"),"can't iterate from Float"),c=s.begin,x=s.end+(v(s.excl)?0:1);c<x;c++)m(c);return s}if(s.begin.$$is_string&&s.end.$$is_string)return oe(s.begin,"upto",[s.end,s.excl],m.$to_proc()),s;for(n=s.begin,i=s.end,v(n["$respond_to?"]("succ"))||W.$raise(ke("TypeError"),"can't iterate from "+n.$class());v(v(o=s.end["$nil?"]())?o:ne(n["$<=>"](i),0));)e.yield1(m,n),n=n.$succ();return ae(s.excl)&&me(n,i)&&e.yield1(m,n),s}),L(q,"$eql?",function(m){var s=this,n=fe,i=fe;return Se(ke("Range"),m)?v(n=v(i=s.excl["$==="](m["$exclude_end?"]()))?s.begin["$eql?"](m.$begin()):i)?s.end["$eql?"](m.$end()):n:!1}),L(q,"$exclude_end?",Le("excl")),L(q,"$first",function U(m){var s=U.$$p||fe,n=this;return U.$$p=null,v(n.begin["$nil?"]())&&W.$raise(ke("RangeError"),"cannot get the minimum of beginless range"),v(m==null)?n.begin:te(n,le(n,"first",U,!1,!0),"first",[m],s)},-1),L(q,"$last",function(m){var s=this;return v(s.end["$nil?"]())&&W.$raise(ke("RangeError"),"cannot get the maximum of endless range"),v(m==null)?s.end:s.$to_a().$last(m)},-1),L(q,"$max",function U(){var m=U.$$p||fe,s=this;return U.$$p=null,v(s.end["$nil?"]())?W.$raise(ke("RangeError"),"cannot get the maximum of endless range"):m!==fe?te(s,le(s,"max",U,!1,!0),"max",[],m):ae(s.begin["$nil?"]())&&(v(je(s.begin,s.end))||v(s.excl)&&me(s.begin,s.end))?fe:s.excl?s.end-1:s.end}),L(q,"$min",function U(){var m=U.$$p||fe,s=this;return U.$$p=null,v(s.begin["$nil?"]())?W.$raise(ke("RangeError"),"cannot get the minimum of beginless range"):m!==fe?te(s,le(s,"min",U,!1,!0),"min",[],m):ae(s.end["$nil?"]())&&(v(je(s.begin,s.end))||v(s.excl)&&me(s.begin,s.end))?fe:s.begin}),L(q,"$size",function(){var m=this,s=fe,n=fe,i=fe;return s=ke(ke("Float"),"INFINITY"),me(m.begin,s)&&ae(m.end["$nil?"]())||me(m.end,s["$-@"]())&&ae(m.begin["$nil?"]())?0:v(re(m))?s:Se(ke("Numeric"),m.begin)&&Se(ke("Numeric"),m.end)?(n=m.begin,i=m.end,v(m.excl)&&(i=xe(i,1)),v(ne(i,n))?0:(Math.abs(i-n)+1).$to_i()):fe}),L(q,"$step",function U(m){var s=U.$$p||fe,n=this,i=fe,o=fe;U.$$p=null;function c(){m==null?m=1:m.$$is_number||(m=O["$coerce_to!"](m,ke("Integer"),"to_int")),m<0?W.$raise(ke("ArgumentError"),"step can't be negative"):m===0&&W.$raise(ke("ArgumentError"),"step can't be 0")}function x(){if(!n.begin["$respond_to?"]("succ")||n.begin.$$is_string&&n.end.$$is_string)return fe;if(m%1===0)return Ie(n.$size(),m).$ceil();var S=n.begin,G=n.end,qe=Math.abs,Je=Math.floor,$t=(qe(S)+qe(G)+qe(G-S))/qe(m)*ke(ke("Float"),"EPSILON"),lt;return $t>.5&&($t=.5),n.excl?(lt=Je((G-S)/m-$t),lt*m+S<G&&lt++):lt=Je((G-S)/m+$t)+1,lt}return s===fe?(v(n.begin["$is_a?"](F("Numeric")))||v(n.begin["$nil?"]()))&&(v(n.end["$is_a?"](F("Numeric")))||v(n.end["$nil?"]()))&&ae(v(i=n.begin["$nil?"]())?n.end["$nil?"]():i)?ke(ke("Enumerator"),"ArithmeticSequence").$new(n,m,"step"):oe(n,"enum_for",["step",m],function(){return c(),x()}):(c(),v(n.begin.$$is_number&&n.end.$$is_number)?(o=0,function(){try{var S=_e("break");return oe(n,"loop",[],function G(){var qe=G.$$s==null?this:G.$$s,Je=fe;return qe.begin==null&&(qe.begin=fe),qe.excl==null&&(qe.excl=fe),qe.end==null&&(qe.end=fe),Je=We(qe.begin,Ne(o,m)),v(qe.excl)?v(Fe(Je,qe.end))&&S.$throw():v(je(Je,qe.end))&&S.$throw(),e.yield1(s,Je),o=We(o,1)},{$$s:n})}catch(G){if(G===S)return G.$v;throw G}}()):(n.begin.$$is_string&&n.end.$$is_string&&m%1!==0&&W.$raise(ke("TypeError"),"no implicit conversion to float from string"),oe(n,"each_with_index",[],function(G,qe){return G==null&&(G=fe),qe==null&&(qe=fe),me(qe["$%"](m),0)?e.yield1(s,G):fe})),n)},-1),L(q,"$%",function(m){var s=this;return v(s.begin["$is_a?"](F("Numeric")))&&v(s.end["$is_a?"](F("Numeric")))?ke(ke("Enumerator"),"ArithmeticSequence").$new(s,m,"%"):s.$step(m)}),L(q,"$bsearch",function U(){var m=U.$$p||fe,s=this;return U.$$p=null,m===fe?s.$enum_for("bsearch"):(v(re(s)&&(s.begin.$$is_number||s.end.$$is_number))&&W.$raise(ke("NotImplementedError"),"Can't #bsearch an infinite range"),v(s.begin.$$is_number&&s.end.$$is_number)||W.$raise(ke("TypeError"),"can't do binary search for "+s.begin.$class()),oe(s.$to_a(),"bsearch",[],m.$to_proc()))}),L(q,"$to_s",function(){var m=this,s=fe;return""+(v(s=m.begin)?s:"")+(v(m.excl)?"...":"..")+(v(s=m.end)?s:"")}),L(q,"$inspect",function(){var m=this,s=fe;return""+(v(s=m.begin)?m.begin.$inspect():s)+(v(m.excl)?"...":"..")+(v(s=m.end)?m.end.$inspect():s)}),L(q,"$marshal_load",function(m){var s=this;return s.begin=m["$[]"]("begin"),s.end=m["$[]"]("end"),s.excl=m["$[]"]("excl")}),L(q,"$hash",function(){var m=this;return[m.begin,m.end,m.excl].$hash()}),ye(q,"==","eql?"),ye(q,"include?","cover?"),ye(q,"member?","cover?")}("::",null,ze)};Opal.modules["corelib/proc"]=function(e){var l=e.slice,v=e.klass,W=e.truthy,L=e.Kernel,ae=e.defs,te=e.def,le=e.send,ne=e.to_a,P=e.return_self,oe=e.ensure_kwargs,me=e.Opal,Se=e.alias,Le=e.nil,je=e.$$$;return e.add_stubs("raise,proc,call,to_proc,new,source_location,coerce_to!,dup"),function(xe,O){var Ie=v(xe,O,"Proc");return e.prop(Ie.$$prototype,"$$is_proc",!0),e.prop(Ie.$$prototype,"$$is_lambda",!1),ae(Ie,"$new",function We(){var Ne=We.$$p||Le;return We.$$p=null,W(Ne)||L.$raise(je("ArgumentError"),"tried to create a Proc object without a block"),Ne}),te(Ie,"$call",function We(Ne){var Fe=We.$$p||Le,_e,ye,de=this;We.$$p=null,_e=l(arguments),ye=_e,Fe!==Le&&(de.$$p=Fe);var ze,fe=de.$$brk,ke=de.$$ret;if(fe||ke&&de.$$is_lambda)try{de.$$is_lambda?ze=de.apply(null,ye):ze=e.yieldX(de,ye)}catch(ie){if(ie===fe)return ie.$v;if(de.$$is_lambda&&ie===ke)return ie.$v;throw ie}else de.$$is_lambda?ze=de.apply(null,ye):ze=e.yieldX(de,ye);return ze},-1),te(Ie,"$>>",function We(Ne){We.$$p;var Fe=this;return We.$$p=null,le(L,"proc",[],function _e(ye){var de=_e.$$p||Le,ze,fe,ke=_e.$$s==null?this:_e.$$s,ie=Le;return _e.$$p=null,ze=l(arguments),fe=ze,ie=le(ke,"call",ne(fe),de.$to_proc()),Ne.$call(ie)},{$$arity:-1,$$s:Fe})}),te(Ie,"$<<",function We(Ne){We.$$p;var Fe=this;return We.$$p=null,le(L,"proc",[],function _e(ye){var de=_e.$$p||Le,ze,fe,ke=_e.$$s==null?this:_e.$$s,ie=Le;return _e.$$p=null,ze=l(arguments),fe=ze,ie=le(Ne,"call",ne(fe),de.$to_proc()),ke.$call(ie)},{$$arity:-1,$$s:Fe})}),te(Ie,"$to_proc",P),te(Ie,"$lambda?",function(){var Ne=this;return!!Ne.$$is_lambda}),te(Ie,"$arity",function(){var Ne=this;return Ne.$$is_curried?-1:Ne.$$arity!=null?Ne.$$arity:Ne.length}),te(Ie,"$source_location",function(){var Ne=this,Fe=Le;return Ne.$$is_curried?Le:W(Fe=Ne.$$source_location)?Fe:Le}),te(Ie,"$binding",function(){var Ne=this;return Ne.$$is_curried&&L.$raise(je("ArgumentError"),"Can't create Binding"),W(je("::","Binding","skip_raise")?"constant":Le)?je("Binding").$new(Le,[],Ne.$$s,Ne.$source_location()):Le}),te(Ie,"$parameters",function(Ne){var Fe,_e=this;if(Ne=oe(Ne),Fe=Ne.$$smap.lambda,_e.$$is_curried)return[["rest"]];if(_e.$$parameters){if(Fe??_e.$$is_lambda)return _e.$$parameters;var ye=[],de,ze;for(de=0,ze=_e.$$parameters.length;de<ze;de++){var fe=_e.$$parameters[de];fe[0]==="req"&&(fe=["opt",fe[1]]),ye.push(fe)}return ye}else return[]},-1),te(Ie,"$curry",function(Ne){var Fe=this;Ne===void 0?Ne=Fe.length:(Ne=me["$coerce_to!"](Ne,je("Integer"),"to_int"),Fe.$$is_lambda&&Ne!==Fe.length&&L.$raise(je("ArgumentError"),"wrong number of arguments ("+Ne+" for "+Fe.length+")"));function _e(){var ye=l(arguments),de=ye.length,ze;return de>Ne&&Fe.$$is_lambda&&!Fe.$$is_curried&&L.$raise(je("ArgumentError"),"wrong number of arguments ("+de+" for "+Ne+")"),de>=Ne?Fe.$call.apply(Fe,ye):(ze=function(){return _e.apply(null,ye.concat(l(arguments)))},ze.$$is_lambda=Fe.$$is_lambda,ze.$$is_curried=!0,ze)}return _e.$$is_lambda=Fe.$$is_lambda,_e.$$is_curried=!0,_e},-1),te(Ie,"$dup",function(){var Ne=this,Fe=Ne.$$original_proc||Ne,_e=function(){return Fe.apply(this,arguments)};for(var ye in Ne)Ne.hasOwnProperty(ye)&&(_e[ye]=Ne[ye]);return _e}),Se(Ie,"===","call"),Se(Ie,"clone","dup"),Se(Ie,"yield","call"),Se(Ie,"[]","call")}("::",Function)};Opal.modules["corelib/method"]=function(e){var l=e.klass,v=e.def,W=e.truthy,L=e.slice,ae=e.alias,te=e.Kernel,le=e.send,ne=e.to_a,P=e.nil,oe=e.$$$;return e.add_stubs("attr_reader,arity,curry,>>,<<,new,class,join,source_location,call,raise,bind,to_proc"),function(me,Se){var Le=l(me,Se,"Method"),je=Le.$$prototype;return je.method=je.receiver=je.owner=je.name=P,Le.$attr_reader("owner","receiver","name"),v(Le,"$initialize",function(O,Ie,We,Ne){var Fe=this;return Fe.receiver=O,Fe.owner=Ie,Fe.name=Ne,Fe.method=We}),v(Le,"$arity",function(){var O=this;return O.method.$arity()}),v(Le,"$parameters",function(){var O=this;return O.method.$$parameters}),v(Le,"$source_location",function(){var O=this,Ie=P;return W(Ie=O.method.$$source_location)?Ie:["(eval)",0]}),v(Le,"$comments",function(){var O=this,Ie=P;return W(Ie=O.method.$$comments)?Ie:[]}),v(Le,"$call",function xe(O){var Ie=xe.$$p||P,We,Ne,Fe=this;return xe.$$p=null,We=L(arguments),Ne=We,Fe.method.$$p=Ie,Fe.method.apply(Fe.receiver,Ne)},-1),v(Le,"$curry",function(O){var Ie=this;return Ie.method.$curry(O)},-1),v(Le,"$>>",function(O){var Ie=this;return Ie.method["$>>"](O)}),v(Le,"$<<",function(O){var Ie=this;return Ie.method["$<<"](O)}),v(Le,"$unbind",function(){var O=this;return oe("UnboundMethod").$new(O.receiver.$class(),O.owner,O.method,O.name)}),v(Le,"$to_proc",function(){var O=this,Ie=O.$call.bind(O);return Ie.$$unbound=O.method,Ie.$$is_lambda=!0,Ie.$$arity=O.method.$$arity==null?O.method.length:O.method.$$arity,Ie.$$parameters=O.method.$$parameters,Ie}),v(Le,"$inspect",function(){var O=this;return"#<"+O.$class()+": "+O.receiver.$class()+"#"+O.name+" (defined in "+O.owner+" in "+O.$source_location().$join(":")+")>"}),ae(Le,"[]","call"),ae(Le,"===","call")}("::",null),function(me,Se){var Le=l(me,Se,"UnboundMethod"),je=Le.$$prototype;return je.method=je.owner=je.name=je.source=P,Le.$attr_reader("source","owner","name"),v(Le,"$initialize",function(O,Ie,We,Ne){var Fe=this;return Fe.source=O,Fe.owner=Ie,Fe.method=We,Fe.name=Ne}),v(Le,"$arity",function(){var O=this;return O.method.$arity()}),v(Le,"$parameters",function(){var O=this;return O.method.$$parameters}),v(Le,"$source_location",function(){var O=this,Ie=P;return W(Ie=O.method.$$source_location)?Ie:["(eval)",0]}),v(Le,"$comments",function(){var O=this,Ie=P;return W(Ie=O.method.$$comments)?Ie:[]}),v(Le,"$bind",function(O){var Ie=this;if(Ie.owner.$$is_module||e.is_a(O,Ie.owner))return oe("Method").$new(O,Ie.owner,Ie.method,Ie.name);te.$raise(oe("TypeError"),"can't bind singleton method to a different class (expected "+O+".kind_of?("+Ie.owner+" to be true)")}),v(Le,"$bind_call",function xe(O,Ie){var We=xe.$$p||P,Ne,Fe,_e=this;return xe.$$p=null,Ne=L(arguments,1),Fe=Ne,le(_e.$bind(O),"call",ne(Fe),We.$to_proc())},-2),v(Le,"$inspect",function(){var O=this;return"#<"+O.$class()+": "+O.source+"#"+O.name+" (defined in "+O.owner+" in "+O.$source_location().$join(":")+")>"})}("::",null)};Opal.modules["corelib/variables"]=function(e){var l=e.gvars,v=e.const_set,W=e.Object,L=e.hash2,ae=e.nil;return e.add_stubs("new"),l["&"]=l["~"]=l["`"]=l["'"]=ae,l.LOADED_FEATURES=l['"']=e.loaded_features,l.LOAD_PATH=l[":"]=[],l["/"]=`
`,l[","]=ae,v("::","ARGV",[]),v("::","ARGF",W.$new()),v("::","ENV",L([],{})),l.VERBOSE=!1,l.DEBUG=!1,l.SAFE=0};Opal.modules["corelib/io"]=function(e){var l=e.klass,v=e.const_set,W=e.not,L=e.truthy,ae=e.def,te=e.return_ivar,le=e.return_val,ne=e.slice,P=e.Kernel,oe=e.gvars,me=e.send,Se=e.to_a,Le=e.rb_plus,je=e.neqeq,xe=e.range,O=e.hash2,Ie=e.eqeq,We=e.to_ary,Ne=e.rb_gt,Fe=e.assign_ivar_val,_e=e.alias,ye,de=e.nil,ze=e.$$$;e.add_stubs("attr_reader,attr_accessor,!,match?,include?,size,write,String,flatten,puts,sysread_noraise,+,!=,[],ord,getc,readchar,raise,gets,==,to_str,length,split,sub,sysread,>,to_a,each_line,enum_for,getbyte,closed_write?,closed_read?,each,eof,new,write_proc=,read_proc="),function(ke,ie){var p=l(ke,ie,"IO"),ee=p.$$prototype;return ee.read_buffer=ee.closed=de,v(p,"SEEK_SET",0),v(p,"SEEK_CUR",1),v(p,"SEEK_END",2),v(p,"SEEK_DATA",3),v(p,"SEEK_HOLE",4),v(p,"READABLE",1),v(p,"WRITABLE",4),p.$attr_reader("eof"),p.$attr_accessor("read_proc","sync","tty","write_proc"),ae(p,"$initialize",function(j,F){var Ee=this;return F==null&&(F="r"),Ee.fd=j,Ee.flags=F,Ee.eof=!1,L(F["$include?"]("r"))&&W(F["$match?"](/[wa+]/))?Ee.closed="write":L(F["$match?"](/[wa]/))&&W(F["$match?"](/[r+]/))?Ee.closed="read":de},-2),ae(p,"$fileno",te("fd")),ae(p,"$tty?",function(){var j=this;return j.tty==!0}),ae(p,"$write",function(j){var F=this;return F.write_proc(j),j.$size()}),ae(p,"$flush",le(de)),ae(p,"$<<",function(j){var F=this;return F.$write(j),F}),ae(p,"$print",function(j){var F,Ee,re=this;oe[","]==null&&(oe[","]=de),F=ne(arguments),Ee=F;for(var U=0,m=Ee.length;U<m;U++)Ee[U]=P.$String(Ee[U]);return re.$write(Ee.join(oe[","])),de},-1),ae(p,"$puts",function(j){var F,Ee,re=this;F=ne(arguments),Ee=F;var U;if(Ee.length===0)return re.$write(`
`),de;for(var m=0,s=Ee.length;m<s;m++)if(Ee[m].$$is_array){var n=Ee[m].$flatten();n.length>0&&me(re,"puts",Se(n))}else Ee[m].$$is_string?U=Ee[m].valueOf():U=P.$String(Ee[m]),U.endsWith(`
`)||(U+=`
`),re.$write(U);return de},-1),ae(p,"$getc",function(){var j=this,F=de,Ee=de,re=de;j.read_buffer=L(F=j.read_buffer)?F:"",Ee="";do if(j.read_buffer=Le(j.read_buffer,Ee),je(j.read_buffer,""))return re=j.read_buffer["$[]"](0),j.read_buffer=j.read_buffer["$[]"](xe(1,-1,!1)),re;while(L(Ee=j.$sysread_noraise(1)));return de}),ae(p,"$getbyte",function(){var j,F=this;return j=F.$getc(),j===de||j==null?de:j.$ord()}),ae(p,"$readbyte",function(){var j=this;return j.$readchar().$ord()}),ae(p,"$readchar",function(){var j=this,F=de;return L(F=j.$getc())?F:P.$raise(ze("EOFError"),"end of file reached")}),ae(p,"$readline",function(j){var F,Ee,re=this,U=de;return F=ne(arguments),Ee=F,L(U=me(re,"gets",Se(Ee)))?U:P.$raise(ze("EOFError"),"end of file reached")},-1),ae(p,"$gets",function(j,F,Ee){var re,U,m=this,s=de,n=de,i=de,o=de,c=de,x=de;oe["/"]==null&&(oe["/"]=de),j==null&&(j=!1),F==null&&(F=de),Ee==null&&(Ee=O([],{})),L(j.$$is_number)&&W(F)&&(re=[!1,j,F],j=re[0],F=re[1],Ee=re[2]),L(j.$$is_hash)&&W(F)&&Ie(Ee,O([],{}))?(re=[!1,de,j],j=re[0],F=re[1],Ee=re[2]):L(F.$$is_hash)&&Ie(Ee,O([],{}))&&(re=[j,de,F],j=re[0],F=re[1],Ee=re[2]),s=j,Ie(j,!1)&&(j=oe["/"]),Ie(j,"")&&(j=/\r?\n\r?\n/),j=L(n=j)?n:"",Ie(s,"")||(j=j.$to_str()),i=Ie(s,"")?2:j.$length(),Ie(j," ")&&(j=/ /),m.read_buffer=L(n=m.read_buffer)?n:"",o="",c=de;do if(m.read_buffer=Le(m.read_buffer,o),je(j,"")&&L(L(j.$$is_regexp)?m.read_buffer["$match?"](j):m.read_buffer["$include?"](j))){x=m.read_buffer,U=m.read_buffer.$split(j,2),re=We(U),c=re[0]==null?de:re[0],m.read_buffer=re[1]==null?de:re[1],je(c,x)&&(c=Le(c,x["$[]"](c.$length(),i)));break}while(L(o=m.$sysread_noraise(Ie(j,"")?65536:1)));return L(c)||(re=[L(n=m.read_buffer)?n:"",""],c=re[0],m.read_buffer=re[1],Ie(c,"")&&(c=de)),L(c)&&(L(F)&&(c=c["$[]"](e.Range.$new(0,F,!0)),m.read_buffer=Le(c["$[]"](e.Range.$new(F,-1,!1)),m.read_buffer)),L(Ee["$[]"]("chomp"))&&(c=c.$sub(/\r?\n$/,"")),Ie(s,"")&&(c=c.$sub(/^[\r\n]+/,""))),Ie(s,!1)&&(oe._=c),c},-1),ae(p,"$sysread",function(j){var F=this,Ee=de;return L(Ee=F.read_proc(j))?Ee:(F.eof=!0,P.$raise(ze("EOFError"),"end of file reached"))}),ae(p,"$sysread_noraise",function(j){var F=this;try{return F.$sysread(j)}catch(Ee){if(e.rescue(Ee,[ze("EOFError")]))try{return de}finally{e.pop_exception()}else throw Ee}}),ae(p,"$readpartial",function(j){var F,Ee=this,re=de,U=de,m=de;return Ee.read_buffer=L(re=Ee.read_buffer)?re:"",U=Ee.$sysread(j),F=[Le(Ee.read_buffer,L(re=U)?re:""),""],m=F[0],Ee.read_buffer=F[1],Ie(m,"")&&(m=de),m}),ae(p,"$read",function(j){var F,Ee=this,re=de,U=de,m=de;j==null&&(j=de),Ee.read_buffer=L(re=Ee.read_buffer)?re:"",U="",m=de;do if(Ee.read_buffer=Le(Ee.read_buffer,U),L(j)&&L(Ne(Ee.read_buffer.$length(),j)))return F=[Ee.read_buffer["$[]"](e.Range.$new(0,j,!0)),Ee.read_buffer["$[]"](e.Range.$new(j,-1,!1))],m=F[0],Ee.read_buffer=F[1],m;while(L(U=Ee.$sysread_noraise(L(re=j)?re:65536)));return F=[Ee.read_buffer,""],m=F[0],Ee.read_buffer=F[1],m},-1),ae(p,"$readlines",function(j){var F=this;return oe["/"]==null&&(oe["/"]=de),j==null&&(j=oe["/"]),F.$each_line(j).$to_a()},-1),ae(p,"$each",function q(j,F){var Ee=q.$$p||de,re,U,m,s=this,n=de;if(oe["/"]==null&&(oe["/"]=de),q.$$p=null,re=ne(arguments),re.length>0&&(U=re.shift()),U==null&&(U=oe["/"]),m=re,Ee===de)return me(s,"enum_for",["each",U].concat(Se(m)));for(;L(n=me(s,"gets",[U].concat(Se(m))));)e.yield1(Ee,n);return s},-1),ae(p,"$each_byte",function q(){var j=q.$$p||de,F=this,Ee=de;if(q.$$p=null,j===de)return F.$enum_for("each_byte");for(;L(Ee=F.$getbyte());)e.yield1(j,Ee);return F}),ae(p,"$each_char",function q(){var j=q.$$p||de,F=this,Ee=de;if(q.$$p=null,j===de)return F.$enum_for("each_char");for(;L(Ee=F.$getc());)e.yield1(j,Ee);return F}),ae(p,"$close",Fe("closed","both")),ae(p,"$close_read",function(){var j=this;return Ie(j.closed,"write")?j.closed="both":j.closed="read"}),ae(p,"$close_write",function(){var j=this;return Ie(j.closed,"read")?j.closed="both":j.closed="write"}),ae(p,"$closed?",function(){var j=this;return j.closed["$=="]("both")}),ae(p,"$closed_read?",function(){var j=this,F=de;return L(F=j.closed["$=="]("read"))?F:j.closed["$=="]("both")}),ae(p,"$closed_write?",function(){var j=this,F=de;return L(F=j.closed["$=="]("write"))?F:j.closed["$=="]("both")}),ae(p,"$check_writable",function(){var j=this;return L(j["$closed_write?"]())?P.$raise(ze("IOError"),"not opened for writing"):de}),ae(p,"$check_readable",function(){var j=this;return L(j["$closed_read?"]())?P.$raise(ze("IOError"),"not opened for reading"):de}),_e(p,"each_line","each"),_e(p,"eof?","eof")}("::",null),v("::","STDIN",oe.stdin=ze("IO").$new(0,"r")),v("::","STDOUT",oe.stdout=ze("IO").$new(1,"w")),v("::","STDERR",oe.stderr=ze("IO").$new(2,"w"));var fe=e.global.console;return ze("STDOUT")["$write_proc="](typeof or=="object"&&typeof or.stdout=="object"?function(ke){or.stdout.write(ke)}:function(ke){fe.log(ke)}),ze("STDERR")["$write_proc="](typeof or=="object"&&typeof or.stderr=="object"?function(ke){or.stderr.write(ke)}:function(ke){fe.warn(ke)}),ye=[function(ke){var ie=prompt();return ie!==null?ie+`
`:de}],me(ze("STDIN"),"read_proc=",ye),ye[ye.length-1]};Opal.modules["opal/regexp_anchors"]=function(e){var l=e.module,v=e.const_set,W=[];e.nil;var L=e.$$$;return e.add_stubs("new"),function(ae,te){var le=l(ae,"Opal"),ne=[le].concat(te),P=e.$r(ne);return v(le,"REGEXP_START","^"),v(le,"REGEXP_END","$"),v(le,"FORBIDDEN_STARTING_IDENTIFIER_CHARS","\\u0001-\\u002F\\u003A-\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),v(le,"FORBIDDEN_ENDING_IDENTIFIER_CHARS","\\u0001-\\u0020\\u0022-\\u002F\\u003A-\\u003E\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),v(le,"INLINE_IDENTIFIER_REGEXP",P("Regexp").$new("[^"+L(le,"FORBIDDEN_STARTING_IDENTIFIER_CHARS")+"]*[^"+L(le,"FORBIDDEN_ENDING_IDENTIFIER_CHARS")+"]")),v(le,"FORBIDDEN_CONST_NAME_CHARS","\\u0001-\\u0020\\u0021-\\u002F\\u003B-\\u003F\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),v(le,"CONST_NAME_REGEXP",P("Regexp").$new(""+L(le,"REGEXP_START")+"(::)?[A-Z][^"+L(le,"FORBIDDEN_CONST_NAME_CHARS")+"]*"+L(le,"REGEXP_END")))}(W[0],W)};Opal.modules["opal/mini"]=function(e){var l=e.Object;return e.nil,e.add_stubs("require"),l.$require("opal/base"),l.$require("corelib/nil"),l.$require("corelib/boolean"),l.$require("corelib/string"),l.$require("corelib/comparable"),l.$require("corelib/enumerable"),l.$require("corelib/enumerator"),l.$require("corelib/array"),l.$require("corelib/hash"),l.$require("corelib/number"),l.$require("corelib/range"),l.$require("corelib/proc"),l.$require("corelib/method"),l.$require("corelib/regexp"),l.$require("corelib/variables"),l.$require("corelib/io"),l.$require("opal/regexp_anchors")};Opal.modules["corelib/kernel/format"]=function(e){var l=e.coerce_to,v=e.module,W=e.slice,L=e.truthy,ae=e.eqeq,te=e.Opal,le=e.Kernel,ne=e.gvars,P=e.def,oe=e.alias,me=e.nil,Se=e.$$$;return e.add_stubs("respond_to?,[],==,length,coerce_to?,nil?,to_a,raise,to_int,fetch,Integer,Float,to_ary,to_str,inspect,to_s,format"),function(Le){var je=v(Le,"Kernel");return P(je,"$format",function(O,Ie){var We,Ne,Fe=me;ne.DEBUG==null&&(ne.DEBUG=me),We=W(arguments,1),Ne=We,ae(Ne.$length(),1)&&L(Ne["$[]"](0)["$respond_to?"]("to_ary"))&&(Fe=te["$coerce_to?"](Ne["$[]"](0),Se("Array"),"to_ary"),L(Fe["$nil?"]())||(Ne=Fe.$to_a()));var _e="",ye=0,de,ze,fe=O.length,ke,ie,p,ee,q,j,F,Ee,re,U,m,s,n,i=1,o=0,c,x=0,S=1,G=2,qe=4,Je=8,$t=16,lt=32,gt=64,_t=128;function vt(){c&lt&&le.$raise(Se("ArgumentError"),"flag after width"),c&_t&&le.$raise(Se("ArgumentError"),"flag after precision")}function dt(){c&lt&&le.$raise(Se("ArgumentError"),"width given twice"),c&_t&&le.$raise(Se("ArgumentError"),"width after precision")}function mt(h){return h>=Ne.length&&le.$raise(Se("ArgumentError"),"too few arguments"),Ne[h]}function bt(){switch(o){case-1:le.$raise(Se("ArgumentError"),"unnumbered("+i+") mixed with numbered");case-2:le.$raise(Se("ArgumentError"),"unnumbered("+i+") mixed with named")}return o=i++,mt(o-1)}function Oe(h){return o>0&&le.$raise(Se("ArgumentError"),"numbered("+h+") after unnumbered("+o+")"),o===-2&&le.$raise(Se("ArgumentError"),"numbered("+h+") after named"),h<1&&le.$raise(Se("ArgumentError"),"invalid index - "+h+"$"),o=-1,mt(h-1)}function be(){return n===void 0?bt():n}function Te(h){for(var I,se="";;ze++){if(ze===fe&&le.$raise(Se("ArgumentError"),"malformed format string - %*[0-9]"),O.charCodeAt(ze)<48||O.charCodeAt(ze)>57)return ze--,I=parseInt(se,10)||0,I>2147483647&&le.$raise(Se("ArgumentError"),""+h+" too big"),I;se+=O.charAt(ze)}}function He(h){var I,se=Te(h);return O.charAt(ze+1)==="$"?(ze++,I=Oe(se)):I=bt(),I.$to_int()}for(ze=O.indexOf("%");ze!==-1;ze=O.indexOf("%",ze)){switch(ie=void 0,c=x,ee=-1,q=-1,n=void 0,de=ze,ze++,O.charAt(ze)){case"%":ye=ze;case"":case`
`:case"\0":ze++;continue}e:for(;ze<fe;ze++)switch(O.charAt(ze)){case" ":vt(),c|=$t;continue e;case"#":vt(),c|=S;continue e;case"+":vt(),c|=qe;continue e;case"-":vt(),c|=G;continue e;case"0":vt(),c|=Je;continue e;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(j=Te("width"),O.charAt(ze+1)==="$"){if(ze+2===fe){ie="%",ze++;break e}n!==void 0&&le.$raise(Se("ArgumentError"),"value given twice - %"+j+"$"),n=Oe(j),ze++}else dt(),c|=lt,ee=j;continue e;case"<":case"{":for(Ee=O.charAt(ze)==="<"?">":"}",F="",ze++;;ze++){if(ze===fe&&le.$raise(Se("ArgumentError"),"malformed name - unmatched parenthesis"),O.charAt(ze)===Ee){if(o>0&&le.$raise(Se("ArgumentError"),"named "+F+" after unnumbered("+o+")"),o===-1&&le.$raise(Se("ArgumentError"),"named "+F+" after numbered"),o=-2,(Ne[0]===void 0||!Ne[0].$$is_hash)&&le.$raise(Se("ArgumentError"),"one hash required"),n=Ne[0].$fetch(F),Ee===">")continue e;if(ie=n.toString(),q!==-1&&(ie=ie.slice(0,q)),c&G)for(;ie.length<ee;)ie=ie+" ";else for(;ie.length<ee;)ie=" "+ie;break e}F+=O.charAt(ze)}case"*":ze++,dt(),c|=lt,ee=He("width"),ee<0&&(c|=G,ee=-ee);continue e;case".":if(c&_t&&le.$raise(Se("ArgumentError"),"precision given twice"),c|=gt|_t,q=0,ze++,O.charAt(ze)==="*"){ze++,q=He("precision"),q<0&&(c&=~gt);continue e}q=Te("precision");continue e;case"d":case"i":case"u":if(ke=le.$Integer(be()),ke>=0){for(ie=ke.toString();ie.length<q;)ie="0"+ie;if(c&G)for((c&qe||c&$t)&&(ie=(c&qe?"+":" ")+ie);ie.length<ee;)ie=ie+" ";else if(c&Je&&q===-1){for(;ie.length<ee-(c&qe||c&$t?1:0);)ie="0"+ie;(c&qe||c&$t)&&(ie=(c&qe?"+":" ")+ie)}else for((c&qe||c&$t)&&(ie=(c&qe?"+":" ")+ie);ie.length<ee;)ie=" "+ie}else{for(ie=(-ke).toString();ie.length<q;)ie="0"+ie;if(c&G)for(ie="-"+ie;ie.length<ee;)ie=ie+" ";else if(c&Je&&q===-1){for(;ie.length<ee-1;)ie="0"+ie;ie="-"+ie}else for(ie="-"+ie;ie.length<ee;)ie=" "+ie}break e;case"b":case"B":case"o":case"x":case"X":switch(O.charAt(ze)){case"b":case"B":re=2,U="0b",m=/^1+/,s="1";break;case"o":re=8,U="0",m=/^3?7+/,s="7";break;case"x":case"X":re=16,U="0x",m=/^f+/,s="f";break}if(ke=le.$Integer(be()),ke>=0){for(ie=ke.toString(re);ie.length<q;)ie="0"+ie;if(c&G)for((c&qe||c&$t)&&(ie=(c&qe?"+":" ")+ie),c&S&&ke!==0&&(ie=U+ie);ie.length<ee;)ie=ie+" ";else if(c&Je&&q===-1){for(;ie.length<ee-(c&qe||c&$t?1:0)-(c&S&&ke!==0?U.length:0);)ie="0"+ie;c&S&&ke!==0&&(ie=U+ie),(c&qe||c&$t)&&(ie=(c&qe?"+":" ")+ie)}else for(c&S&&ke!==0&&(ie=U+ie),(c&qe||c&$t)&&(ie=(c&qe?"+":" ")+ie);ie.length<ee;)ie=" "+ie}else if(c&qe||c&$t){for(ie=(-ke).toString(re);ie.length<q;)ie="0"+ie;if(c&G)for(c&S&&(ie=U+ie),ie="-"+ie;ie.length<ee;)ie=ie+" ";else if(c&Je&&q===-1){for(;ie.length<ee-1-(c&S?2:0);)ie="0"+ie;c&S&&(ie=U+ie),ie="-"+ie}else for(c&S&&(ie=U+ie),ie="-"+ie;ie.length<ee;)ie=" "+ie}else{for(ie=(ke>>>0).toString(re).replace(m,s);ie.length<q-2;)ie=s+ie;if(c&G)for(ie=".."+ie,c&S&&(ie=U+ie);ie.length<ee;)ie=ie+" ";else if(c&Je&&q===-1){for(;ie.length<ee-2-(c&S?U.length:0);)ie=s+ie;ie=".."+ie,c&S&&(ie=U+ie)}else for(ie=".."+ie,c&S&&(ie=U+ie);ie.length<ee;)ie=" "+ie}O.charAt(ze)===O.charAt(ze).toUpperCase()&&(ie=ie.toUpperCase());break e;case"f":case"e":case"E":case"g":case"G":if(ke=le.$Float(be()),ke>=0||isNaN(ke)){if(ke===1/0)ie="Inf";else switch(O.charAt(ze)){case"f":ie=ke.toFixed(q===-1?6:q);break;case"e":case"E":ie=ke.toExponential(q===-1?6:q);break;case"g":case"G":ie=ke.toExponential(),p=parseInt(ie.split("e")[1],10),p<-4||p>=(q===-1?6:q)||(ie=ke.toPrecision(q===-1?c&S?6:void 0:q));break}if(c&G)for((c&qe||c&$t)&&(ie=(c&qe?"+":" ")+ie);ie.length<ee;)ie=ie+" ";else if(c&Je&&ke!==1/0&&!isNaN(ke)){for(;ie.length<ee-(c&qe||c&$t?1:0);)ie="0"+ie;(c&qe||c&$t)&&(ie=(c&qe?"+":" ")+ie)}else for((c&qe||c&$t)&&(ie=(c&qe?"+":" ")+ie);ie.length<ee;)ie=" "+ie}else{if(ke===-1/0)ie="Inf";else switch(O.charAt(ze)){case"f":ie=(-ke).toFixed(q===-1?6:q);break;case"e":case"E":ie=(-ke).toExponential(q===-1?6:q);break;case"g":case"G":ie=(-ke).toExponential(),p=parseInt(ie.split("e")[1],10),p<-4||p>=(q===-1?6:q)||(ie=(-ke).toPrecision(q===-1?c&S?6:void 0:q));break}if(c&G)for(ie="-"+ie;ie.length<ee;)ie=ie+" ";else if(c&Je&&ke!==-1/0){for(;ie.length<ee-1;)ie="0"+ie;ie="-"+ie}else for(ie="-"+ie;ie.length<ee;)ie=" "+ie}O.charAt(ze)===O.charAt(ze).toUpperCase()&&ke!==1/0&&ke!==-1/0&&!isNaN(ke)&&(ie=ie.toUpperCase()),ie=ie.replace(/([eE][-+]?)([0-9])$/,"$10$2");break e;case"a":case"A":le.$raise(Se("NotImplementedError"),"`A` and `a` format field types are not implemented in Opal yet");case"c":if(ke=be(),ke["$respond_to?"]("to_ary")&&(ke=ke.$to_ary()[0]),ke["$respond_to?"]("to_str")?ie=ke.$to_str():ie=String.fromCharCode(l(ke,Se("Integer"),"to_int")),ie.length!==1&&le.$raise(Se("ArgumentError"),"%c requires a character"),c&G)for(;ie.length<ee;)ie=ie+" ";else for(;ie.length<ee;)ie=" "+ie;break e;case"p":if(ie=be().$inspect(),q!==-1&&(ie=ie.slice(0,q)),c&G)for(;ie.length<ee;)ie=ie+" ";else for(;ie.length<ee;)ie=" "+ie;break e;case"s":if(ie=be().$to_s(),q!==-1&&(ie=ie.slice(0,q)),c&G)for(;ie.length<ee;)ie=ie+" ";else for(;ie.length<ee;)ie=" "+ie;break e;default:le.$raise(Se("ArgumentError"),"malformed format string - %"+O.charAt(ze))}ie===void 0&&le.$raise(Se("ArgumentError"),"malformed format string - %"),_e+=O.slice(ye,de)+ie,ye=ze+1}return ne.DEBUG&&o>=0&&i<Ne.length&&le.$raise(Se("ArgumentError"),"too many arguments for format string"),_e+O.slice(ye)},-2),oe(je,"sprintf","format")}("::")};Opal.modules["corelib/string/encoding"]=function(e){var l=e.klass,v=e.hash2,W=e.rb_plus,L=e.truthy,ae=e.send,te=e.defs,le=e.eqeq,ne=e.def,P=e.return_ivar,oe=e.return_val,me=e.slice,Se=e.Kernel,Le=e.Opal,je=e.rb_lt,xe,O=e.top,Ie=[],We=e.$r(Ie),Ne=e.nil,Fe=e.$$$;return e.add_stubs("require,+,[],clone,initialize,new,instance_eval,to_proc,each,const_set,tr,==,default_external,attr_accessor,singleton_class,attr_reader,raise,register,length,bytes,force_encoding,dup,bytesize,enum_for,each_byte,to_a,each_char,each_codepoint,coerce_to!,find,<,default_external="),O.$require("corelib/string"),function(_e,ye){var de=l(_e,ye,"Encoding"),ze=de.$$prototype;return ze.name=ze.dummy=Ne,te(de,"$register",function fe(ke,ie){var p=fe.$$p||Ne,ee=this,q=Ne,j=Ne,F=Ne,Ee=Ne,re=Ne,U=Ne;return fe.$$p=null,ie==null&&(ie=v([],{})),q=W([ke],L(j=ie["$[]"]("aliases"))?j:[]),F=L(j=ie["$[]"]("ascii"))&&j,Ee=L(j=ie["$[]"]("dummy"))&&j,L(ie["$[]"]("inherits"))?(re=ie["$[]"]("inherits").$clone(),re.$initialize(ke,q,F,Ee)):re=ee.$new(ke,q,F,Ee),p!==Ne&&ae(re,"instance_eval",[],p.$to_proc()),U=e.encodings,ae(q,"each",[],function m(s){var n=m.$$s==null?this:m.$$s;return s==null&&(s=Ne),n.$const_set(s.$tr("-","_"),re),U[s]=re},{$$s:ee})},-2),te(de,"$find",function(ke){var ie=this;return le(ke,"default_external")?ie.$default_external():e.find_encoding(ke)}),de.$singleton_class().$attr_accessor("default_external"),de.$attr_reader("name","names"),ne(de,"$initialize",function(ke,ie,p,ee){var q=this;return q.name=ke,q.names=ie,q.ascii=p,q.dummy=ee}),ne(de,"$ascii_compatible?",P("ascii")),ne(de,"$dummy?",P("dummy")),ne(de,"$binary?",oe(!1)),ne(de,"$to_s",P("name")),ne(de,"$inspect",function(){var ke=this;return"#<Encoding:"+ke.name+(L(ke.dummy)?" (dummy)":Ne)+">"}),ne(de,"$charsize",function(ke){for(var ie=0,p=0,ee=ke.length;p<ee;p++){var q=ke.charCodeAt(p);q>=55296&&q<=56319||ie++}return ie}),ne(de,"$each_char",function fe(ke){var ie=fe.$$p||Ne;fe.$$p=null;for(var p="",ee=0,q=ke.length;ee<q;ee++){var j=ke.charCodeAt(ee),F=ke.charAt(ee);if(j>=56320&&j<=57343){p=F;continue}else j>=55296&&j<=56319&&(F=p+F);ke.encoding.name!="UTF-8"&&(F=new String(F),F.encoding=ke.encoding),e.yield1(ie,F)}}),ne(de,"$each_byte",function(ke){return me(arguments),Se.$raise(Fe("NotImplementedError"))},-1),ne(de,"$bytesize",function(ke){return me(arguments),Se.$raise(Fe("NotImplementedError"))},-1),l("::",Fe("StandardError"),"EncodingError"),l("::",Fe("EncodingError"),"CompatibilityError"),Ne}("::",null),ae(Fe("Encoding"),"register",["UTF-8",v(["aliases","ascii"],{aliases:["CP65001"],ascii:!0})],function _e(){var ye=_e.$$s==null?this:_e.$$s;return ne(ye,"$each_byte",function de(ze){var fe=de.$$p||Ne;de.$$p=null;for(var ke=1/0,ie,p=ze.length,ee=null,q=0;q<p;++q){if(ie=ze.charCodeAt(q),ie>55295&&ie<57344){if(!ee){if(ie>56319){(ke-=3)>-1&&(e.yield1(fe,239),e.yield1(fe,191),e.yield1(fe,189));continue}else if(q+1===p){(ke-=3)>-1&&(e.yield1(fe,239),e.yield1(fe,191),e.yield1(fe,189));continue}ee=ie;continue}if(ie<56320){(ke-=3)>-1&&(e.yield1(fe,239),e.yield1(fe,191),e.yield1(fe,189)),ee=ie;continue}ie=(ee-55296<<10|ie-56320)+65536}else ee&&(ke-=3)>-1&&(e.yield1(fe,239),e.yield1(fe,191),e.yield1(fe,189));if(ee=null,ie<128){if((ke-=1)<0)break;e.yield1(fe,ie)}else if(ie<2048){if((ke-=2)<0)break;e.yield1(fe,ie>>6|192),e.yield1(fe,ie&63|128)}else if(ie<65536){if((ke-=3)<0)break;e.yield1(fe,ie>>12|224),e.yield1(fe,ie>>6&63|128),e.yield1(fe,ie&63|128)}else if(ie<1114112){if((ke-=4)<0)break;e.yield1(fe,ie>>18|240),e.yield1(fe,ie>>12&63|128),e.yield1(fe,ie>>6&63|128),e.yield1(fe,ie&63|128)}}}),ne(ye,"$bytesize",function(ze){return ze.$bytes().$length()})},{$$s:O}),ae(Fe("Encoding"),"register",["UTF-16LE"],function _e(){var ye=_e.$$s==null?this:_e.$$s;return ne(ye,"$each_byte",function de(ze){var fe=de.$$p||Ne;de.$$p=null;for(var ke=0,ie=ze.length;ke<ie;ke++){var p=ze.charCodeAt(ke);e.yield1(fe,p&255),e.yield1(fe,p>>8)}}),ne(ye,"$bytesize",function(ze){return ze.length*2})},{$$s:O}),ae(Fe("Encoding"),"register",["UTF-16BE",v(["inherits"],{inherits:Fe(Fe("Encoding"),"UTF_16LE")})],function _e(){var ye=_e.$$s==null?this:_e.$$s;return ne(ye,"$each_byte",function de(ze){var fe=de.$$p||Ne;de.$$p=null;for(var ke=0,ie=ze.length;ke<ie;ke++){var p=ze.charCodeAt(ke);e.yield1(fe,p>>8),e.yield1(fe,p&255)}})},{$$s:O}),ae(Fe("Encoding"),"register",["UTF-32LE"],function _e(){var ye=_e.$$s==null?this:_e.$$s;return ne(ye,"$each_byte",function de(ze){var fe=de.$$p||Ne;de.$$p=null;for(var ke=0,ie=ze.length;ke<ie;ke++){var p=ze.charCodeAt(ke);e.yield1(fe,p&255),e.yield1(fe,p>>8),e.yield1(fe,0),e.yield1(fe,0)}}),ne(ye,"$bytesize",function(ze){return ze.length*4})},{$$s:O}),ae(Fe("Encoding"),"register",["UTF-32BE",v(["inherits"],{inherits:Fe(Fe("Encoding"),"UTF_32LE")})],function _e(){var ye=_e.$$s==null?this:_e.$$s;return ne(ye,"$each_byte",function de(ze){var fe=de.$$p||Ne;de.$$p=null;for(var ke=0,ie=ze.length;ke<ie;ke++){var p=ze.charCodeAt(ke);e.yield1(fe,0),e.yield1(fe,0),e.yield1(fe,p>>8),e.yield1(fe,p&255)}})},{$$s:O}),ae(Fe("Encoding"),"register",["ASCII-8BIT",v(["aliases","ascii"],{aliases:["BINARY"],ascii:!0})],function _e(){var ye=_e.$$s==null?this:_e.$$s;return ne(ye,"$each_char",function de(ze){var fe=de.$$p||Ne;de.$$p=null;for(var ke=0,ie=ze.length;ke<ie;ke++){var p=new String(ze.charAt(ke));p.encoding=ze.encoding,e.yield1(fe,p)}}),ne(ye,"$charsize",function(ze){return ze.length}),ne(ye,"$each_byte",function de(ze){var fe=de.$$p||Ne;de.$$p=null;for(var ke=0,ie=ze.length;ke<ie;ke++){var p=ze.charCodeAt(ke);e.yield1(fe,p&255)}}),ne(ye,"$bytesize",function(ze){return ze.length}),ne(ye,"$binary?",oe(!0))},{$$s:O}),Fe("Encoding").$register("ISO-8859-1",v(["aliases","ascii","inherits"],{aliases:["ISO8859-1"],ascii:!0,inherits:Fe(Fe("Encoding"),"ASCII_8BIT")})),Fe("Encoding").$register("US-ASCII",v(["aliases","ascii","inherits"],{aliases:["ASCII"],ascii:!0,inherits:Fe(Fe("Encoding"),"ASCII_8BIT")})),function(_e,ye){var de=l(_e,ye,"String"),ze=de.$$prototype;return ze.internal_encoding=ze.bytes=ze.encoding=Ne,de.$attr_reader("encoding"),de.$attr_reader("internal_encoding"),e.prop(String.prototype,"bytes",Ne),e.prop(String.prototype,"encoding",Fe(Fe("Encoding"),"UTF_8")),e.prop(String.prototype,"internal_encoding",Fe(Fe("Encoding"),"UTF_8")),ne(de,"$b",function(){var ke=this;return ke.$dup().$force_encoding("binary")}),ne(de,"$bytesize",function(){var ke=this;return ke.internal_encoding.$bytesize(ke)}),ne(de,"$each_byte",function fe(){var ke=fe.$$p||Ne,ie=this;return fe.$$p=null,ke===Ne?ae(ie,"enum_for",["each_byte"],function p(){var ee=p.$$s==null?this:p.$$s;return ee.$bytesize()},{$$s:ie}):(ae(ie.internal_encoding,"each_byte",[ie],ke.$to_proc()),ie)}),ne(de,"$bytes",function(){var ke=this,ie=Ne;return typeof ke=="string"?new String(ke).$each_byte().$to_a():(ke.bytes=L(ie=ke.bytes)?ie:ke.$each_byte().$to_a(),ke.bytes.$dup())}),ne(de,"$each_char",function fe(){var ke=fe.$$p||Ne,ie=this;return fe.$$p=null,ke===Ne?ae(ie,"enum_for",["each_char"],function p(){var ee=p.$$s==null?this:p.$$s;return ee.$length()},{$$s:ie}):(ae(ie.encoding,"each_char",[ie],ke.$to_proc()),ie)}),ne(de,"$chars",function fe(){var ke=fe.$$p||Ne,ie=this;return fe.$$p=null,L(ke)?ae(ie,"each_char",[],ke.$to_proc()):ie.$each_char().$to_a()}),ne(de,"$each_codepoint",function fe(){var ke=fe.$$p||Ne,ie=this;if(fe.$$p=null,ke===Ne)return ie.$enum_for("each_codepoint");for(var p=0,ee=ie.length;p<ee;p++)e.yield1(ke,ie.codePointAt(p));return ie}),ne(de,"$codepoints",function fe(){var ke=fe.$$p||Ne,ie=this;return fe.$$p=null,ke!==Ne?ae(ie,"each_codepoint",[],ke.$to_proc()):ie.$each_codepoint().$to_a()}),ne(de,"$encode",function(ke){var ie=this;return e.enc(ie,ke)}),ne(de,"$force_encoding",function(ke){var ie=this,p=ie;return ke===p.encoding||(ke=Le["$coerce_to!"](ke,Fe("String"),"to_s"),ke=Fe("Encoding").$find(ke),ke===p.encoding)||(p=e.set_encoding(p,ke)),p}),ne(de,"$getbyte",function(ke){var ie=this,p=Ne;return p=ie.$bytes(),ke=Le["$coerce_to!"](ke,Fe("Integer"),"to_int"),L(je(p.$length(),ke))?Ne:p["$[]"](ke)}),ne(de,"$initialize_copy",function(ke){return`
      self.encoding = other.encoding;
      self.internal_encoding = other.internal_encoding;
    `}),ne(de,"$valid_encoding?",oe(!0))}("::",null),xe=[Fe(We("Encoding"),"UTF_8")],ae(Fe("Encoding"),"default_external=",xe),xe[xe.length-1]};Opal.modules["corelib/math"]=function(e){var l=e.type_error,v=e.module,W=e.const_set,L=e.Class,ae=e.slice,te=e.Kernel,le=e.defs,ne=e.truthy,P=e.send,oe=e.def,me=e.rb_minus,Se=e.eqeqeq,Le=e.rb_divide,je=[],xe=e.nil,O=e.$$$;return e.add_stubs("new,raise,Float,Integer,module_function,each,define_method,checked,float!,===,gamma,-,integer!,/,infinite?"),function(Ie,We){var Ne=v(Ie,"Math"),Fe=[Ne].concat(We),_e=e.$r(Fe);return W(Ne,"E",Math.E),W(Ne,"PI",Math.PI),W(Ne,"DomainError",L.$new(O("StandardError"))),le(Ne,"$checked",function(de,ze){var fe,ke;if(fe=ae(arguments,1),ke=fe,isNaN(ke[0])||ke.length==2&&isNaN(ke[1]))return NaN;var ie=Math[de].apply(null,ke);return isNaN(ie)&&te.$raise(_e("DomainError"),'Numerical argument is out of domain - "'+de+'"'),ie},-2),le(Ne,"$float!",function(de){try{return te.$Float(de)}catch(ze){if(e.rescue(ze,[O("ArgumentError")]))try{return te.$raise(l(de,O("Float")))}finally{e.pop_exception()}else throw ze}}),le(Ne,"$integer!",function(de){try{return te.$Integer(de)}catch(ze){if(e.rescue(ze,[O("ArgumentError")]))try{return te.$raise(l(de,O("Integer")))}finally{e.pop_exception()}else throw ze}}),Ne.$module_function(),ne(typeof Math.erf<"u")||e.prop(Math,"erf",function(ye){var de=.254829592,ze=-.284496736,fe=1.421413741,ke=-1.453152027,ie=1.061405429,p=.3275911,ee=1;ye<0&&(ee=-1),ye=Math.abs(ye);var q=1/(1+p*ye),j=1-((((ie*q+ke)*q+fe)*q+ze)*q+de)*q*Math.exp(-ye*ye);return ee*j}),ne(typeof Math.erfc<"u")||e.prop(Math,"erfc",function(ye){var de=Math.abs(ye),ze=1/(.5*de+1),fe=ze*.17087277+-.82215223,ke=ze*fe+1.48851587,ie=ze*ke+-1.13520398,p=ze*ie+.27886807,ee=ze*p+-.18628806,q=ze*ee+.09678418,j=ze*q+.37409196,F=ze*j+1.00002368,Ee=ze*F,re=-de*de-1.26551223+Ee,U=ze*Math.exp(re);return ye<0?2-U:U}),P(["acos","acosh","asin","asinh","atan","atanh","cbrt","cos","cosh","erf","erfc","exp","sin","sinh","sqrt","tanh"],"each",[],function ye(de){var ze=ye.$$s==null?this:ye.$$s;return de==null&&(de=xe),P(ze,"define_method",[de],function(ke){return ke==null&&(ke=xe),O("Math").$checked(de,O("Math")["$float!"](ke))})},{$$s:Ne}),oe(Ne,"$atan2",function(de,ze){return O("Math").$checked("atan2",O("Math")["$float!"](de),O("Math")["$float!"](ze))}),oe(Ne,"$hypot",function(de,ze){return O("Math").$checked("hypot",O("Math")["$float!"](de),O("Math")["$float!"](ze))}),oe(Ne,"$frexp",function(de){if(de=_e("Math")["$float!"](de),isNaN(de))return[NaN,0];var ze=Math.floor(Math.log(Math.abs(de))/Math.log(2))+1,fe=de/Math.pow(2,ze);return[fe,ze]}),oe(Ne,"$gamma",function(de){de=_e("Math")["$float!"](de);var ze,fe,ke,ie,p,ee,q,j,F,Ee=4.7421875,re=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];if(isNaN(de))return NaN;if(de===0&&1/de<0)return-1/0;if((de===-1||de===-1/0)&&te.$raise(_e("DomainError"),'Numerical argument is out of domain - "gamma"'),_e("Integer")["$==="](de)){if(de<=0)return isFinite(de)?1/0:NaN;if(de>171)return 1/0;for(ie=de-2,p=de-1;ie>1;)p*=ie,ie--;return p==0&&(p=1),p}if(de<.5)return Math.PI/(Math.sin(Math.PI*de)*O("Math").$gamma(me(1,de)));if(de>=171.35)return 1/0;if(de>85)return ee=de*de,q=ee*de,j=q*de,F=j*de,Math.sqrt(2*Math.PI/de)*Math.pow(de/Math.E,de)*(1+1/(12*de)+1/(288*ee)-139/(51840*q)-571/(2488320*j)+163879/(209018880*F)+5246819/(75246796800*F*de));for(de-=1,ke=re[0],ze=1;ze<re.length;++ze)ke+=re[ze]/(de+ze);return fe=de+Ee+.5,Math.sqrt(2*Math.PI)*Math.pow(fe,de+.5)*Math.exp(-fe)*ke}),oe(Ne,"$ldexp",function(de,ze){return de=_e("Math")["$float!"](de),ze=_e("Math")["$integer!"](ze),isNaN(ze)&&te.$raise(O("RangeError"),"float NaN out of range of integer"),de*Math.pow(2,ze)}),oe(Ne,"$lgamma",function(de){return de==-1?[1/0,1]:[Math.log(Math.abs(O("Math").$gamma(de))),O("Math").$gamma(de)<0?-1:1]}),oe(Ne,"$log",function(de,ze){return Se(O("String"),de)&&te.$raise(l(de,O("Float"))),ne(ze==null)?O("Math").$checked("log",O("Math")["$float!"](de)):(Se(O("String"),ze)&&te.$raise(l(ze,O("Float"))),Le(O("Math").$checked("log",O("Math")["$float!"](de)),O("Math").$checked("log",O("Math")["$float!"](ze))))},-2),oe(Ne,"$log10",function(de){return Se(O("String"),de)&&te.$raise(l(de,O("Float"))),O("Math").$checked("log10",O("Math")["$float!"](de))}),oe(Ne,"$log2",function(de){return Se(O("String"),de)&&te.$raise(l(de,O("Float"))),O("Math").$checked("log2",O("Math")["$float!"](de))}),oe(Ne,"$tan",function(de){return de=O("Math")["$float!"](de),ne(de["$infinite?"]())?O(O("Float"),"NAN"):O("Math").$checked("tan",O("Math")["$float!"](de))})}("::",je)};Opal.modules["corelib/complex/base"]=function(e){var l=e.module,v=e.truthy,W=e.def,L=e.klass,ae=[],te=e.nil;return e.add_stubs("new,from_string"),function(le,ne){var P=l(le,"Kernel"),oe=[P].concat(ne),me=e.$r(oe);return W(P,"$Complex",function(Le,je){return je==null&&(je=te),v(je)?me("Complex").$new(Le,je):me("Complex").$new(Le,0)},-2)}("::",ae),function(le,ne,P){var oe=L(le,ne,"String"),me=[oe].concat(P),Se=e.$r(me);return W(oe,"$to_c",function(){var je=this;return Se("Complex").$from_string(je)})}("::",null,ae)};Opal.modules["corelib/complex"]=function(e){var l=e.klass,v=e.truthy,W=e.eqeqeq,L=e.Kernel,ae=e.defs,te=e.rb_times,le=e.def,ne=e.rb_plus,P=e.rb_minus,oe=e.rb_divide,me=e.eqeq,Se=e.to_ary,Le=e.rb_gt,je=e.neqeq,xe=e.return_val,O=e.const_set,Ie=e.alias,We=e.top,Ne=[],Fe=e.nil,_e=e.$$$;return e.add_stubs("require,real?,===,raise,new,*,cos,sin,attr_reader,freeze,class,==,real,imag,Complex,-@,+,__coerced__,-,nan?,/,conj,abs2,quo,polar,exp,log,>,!=,divmod,**,hypot,atan2,lcm,denominator,finite?,infinite?,numerator,abs,arg,rationalize,to_f,to_i,to_r,inspect,zero?,positive?,Rational,rect,angle"),We.$require("corelib/numeric"),We.$require("corelib/complex/base"),function(ye,de,ze){var fe=l(ye,de,"Complex"),ke=[fe].concat(ze),ie=e.$r(ke),p=fe.$$prototype;return p.real=p.imag=Fe,ae(fe,"$rect",function(q,j){var F=this;return j==null&&(j=0),W(_e("Numeric"),q)&&v(q["$real?"]())&&W(_e("Numeric"),j)&&v(j["$real?"]())||L.$raise(_e("TypeError"),"not a real"),F.$new(q,j)},-2),ae(fe,"$polar",function(q,j){var F=this;return j==null&&(j=0),W(_e("Numeric"),q)&&v(q["$real?"]())&&W(_e("Numeric"),j)&&v(j["$real?"]())||L.$raise(_e("TypeError"),"not a real"),F.$new(te(q,_e("Math").$cos(j)),te(q,_e("Math").$sin(j)))},-2),fe.$attr_reader("real","imag"),le(fe,"$initialize",function(q,j){var F=this;return j==null&&(j=0),F.real=q,F.imag=j,F.$freeze()},-2),le(fe,"$coerce",function(q){var j=this;return W(_e("Complex"),q)?[q,j]:W(_e("Numeric"),q)&&v(q["$real?"]())?[_e("Complex").$new(q,0),j]:L.$raise(_e("TypeError"),""+q.$class()+" can't be coerced into Complex")}),le(fe,"$==",function(q){var j=this,F=Fe;return W(_e("Complex"),q)?v(F=j.real["$=="](q.$real()))?j.imag["$=="](q.$imag()):F:W(_e("Numeric"),q)&&v(q["$real?"]())?v(F=j.real["$=="](q))?j.imag["$=="](0):F:q["$=="](j)}),le(fe,"$-@",function(){var q=this;return L.$Complex(q.real["$-@"](),q.imag["$-@"]())}),le(fe,"$+",function(q){var j=this;return W(_e("Complex"),q)?L.$Complex(ne(j.real,q.$real()),ne(j.imag,q.$imag())):W(_e("Numeric"),q)&&v(q["$real?"]())?L.$Complex(ne(j.real,q),j.imag):j.$__coerced__("+",q)}),le(fe,"$-",function(q){var j=this;return W(_e("Complex"),q)?L.$Complex(P(j.real,q.$real()),P(j.imag,q.$imag())):W(_e("Numeric"),q)&&v(q["$real?"]())?L.$Complex(P(j.real,q),j.imag):j.$__coerced__("-",q)}),le(fe,"$*",function(q){var j=this;return W(_e("Complex"),q)?L.$Complex(P(te(j.real,q.$real()),te(j.imag,q.$imag())),ne(te(j.real,q.$imag()),te(j.imag,q.$real()))):W(_e("Numeric"),q)&&v(q["$real?"]())?L.$Complex(te(j.real,q),te(j.imag,q)):j.$__coerced__("*",q)}),le(fe,"$/",function(q){var j=this;return W(_e("Complex"),q)?W(_e("Number"),j.real)&&v(j.real["$nan?"]())||W(_e("Number"),j.imag)&&v(j.imag["$nan?"]())||W(_e("Number"),q.$real())&&v(q.$real()["$nan?"]())||W(_e("Number"),q.$imag())&&v(q.$imag()["$nan?"]())?_e("Complex").$new(_e(_e("Float"),"NAN"),_e(_e("Float"),"NAN")):oe(te(j,q.$conj()),q.$abs2()):W(_e("Numeric"),q)&&v(q["$real?"]())?L.$Complex(j.real.$quo(q),j.imag.$quo(q)):j.$__coerced__("/",q)}),le(fe,"$**",function(q){var j,F,Ee=this,re=Fe,U=Fe,m=Fe,s=Fe,n=Fe,i=Fe,o=Fe,c=Fe,x=Fe,S=Fe,G=Fe;if(me(q,0))return _e("Complex").$new(1,0);if(W(_e("Complex"),q))return F=Ee.$polar(),j=Se(F),re=j[0]==null?Fe:j[0],U=j[1]==null?Fe:j[1],m=q.$real(),s=q.$imag(),n=_e("Math").$exp(P(te(m,_e("Math").$log(re)),te(s,U))),i=ne(te(U,m),te(s,_e("Math").$log(re))),_e("Complex").$polar(n,i);if(W(_e("Integer"),q))if(v(Le(q,0))){for(o=Ee,c=o,x=P(q,1);je(x,0);){for(F=x.$divmod(2),j=Se(F),S=j[0]==null?Fe:j[0],G=j[1]==null?Fe:j[1];me(G,0);)o=L.$Complex(P(te(o.$real(),o.$real()),te(o.$imag(),o.$imag())),te(te(2,o.$real()),o.$imag())),x=S,F=x.$divmod(2),j=Se(F),S=j[0]==null?Fe:j[0],G=j[1]==null?Fe:j[1];c=te(c,o),x=P(x,1)}return c}else return oe(_e("Rational").$new(1,1),Ee)["$**"](q["$-@"]());else return W(_e("Float"),q)||W(_e("Rational"),q)?(F=Ee.$polar(),j=Se(F),re=j[0]==null?Fe:j[0],U=j[1]==null?Fe:j[1],_e("Complex").$polar(re["$**"](q),te(U,q))):Ee.$__coerced__("**",q)}),le(fe,"$abs",function(){var q=this;return _e("Math").$hypot(q.real,q.imag)}),le(fe,"$abs2",function(){var q=this;return ne(te(q.real,q.real),te(q.imag,q.imag))}),le(fe,"$angle",function(){var q=this;return _e("Math").$atan2(q.imag,q.real)}),le(fe,"$conj",function(){var q=this;return L.$Complex(q.real,q.imag["$-@"]())}),le(fe,"$denominator",function(){var q=this;return q.real.$denominator().$lcm(q.imag.$denominator())}),le(fe,"$eql?",function(q){var j=this,F=Fe,Ee=Fe;return v(F=v(Ee=ie("Complex")["$==="](q))?j.real.$class()["$=="](j.imag.$class()):Ee)?j["$=="](q):F}),le(fe,"$fdiv",function(q){var j=this;return W(_e("Numeric"),q)||L.$raise(_e("TypeError"),""+q.$class()+" can't be coerced into Complex"),oe(j,q)}),le(fe,"$finite?",function(){var q=this,j=Fe;return v(j=q.real["$finite?"]())?q.imag["$finite?"]():j}),le(fe,"$hash",function(){var q=this;return"Complex:"+q.real+":"+q.imag}),le(fe,"$infinite?",function(){var q=this,j=Fe;return v(j=q.real["$infinite?"]())?j:q.imag["$infinite?"]()}),le(fe,"$inspect",function(){var q=this;return"("+q+")"}),le(fe,"$numerator",function(){var q=this,j=Fe;return j=q.$denominator(),L.$Complex(te(q.real.$numerator(),oe(j,q.real.$denominator())),te(q.imag.$numerator(),oe(j,q.imag.$denominator())))}),le(fe,"$polar",function(){var q=this;return[q.$abs(),q.$arg()]}),le(fe,"$rationalize",function(q){var j=this;return arguments.length>1&&L.$raise(_e("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),je(j.imag,0)&&L.$raise(_e("RangeError"),"can't convert "+j+" into Rational"),j.$real().$rationalize(q)},-1),le(fe,"$real?",xe(!1)),le(fe,"$rect",function(){var q=this;return[q.real,q.imag]}),le(fe,"$to_f",function(){var q=this;return me(q.imag,0)||L.$raise(_e("RangeError"),"can't convert "+q+" into Float"),q.real.$to_f()}),le(fe,"$to_i",function(){var q=this;return me(q.imag,0)||L.$raise(_e("RangeError"),"can't convert "+q+" into Integer"),q.real.$to_i()}),le(fe,"$to_r",function(){var q=this;return me(q.imag,0)||L.$raise(_e("RangeError"),"can't convert "+q+" into Rational"),q.real.$to_r()}),le(fe,"$to_s",function(){var q=this,j=Fe;return j=q.real.$inspect(),j=ne(j,W(_e("Number"),q.imag)&&v(q.imag["$nan?"]())||v(q.imag["$positive?"]())||v(q.imag["$zero?"]())?"+":"-"),j=ne(j,q.imag.$abs().$inspect()),W(_e("Number"),q.imag)&&(v(q.imag["$nan?"]())||v(q.imag["$infinite?"]()))&&(j=ne(j,"*")),ne(j,"i")}),O(ke[0],"I",fe.$new(0,1)),ae(fe,"$from_string",function(q){var j=/[+-]?[\d_]+(\.[\d_]+)?(e\d+)?/;q.match(j);var F,Ee;function re(){return j.test(q)}function U(){var s=q.match(j),n=s[0];return q=q.slice(n.length),n.replace(/_/g,"")}function m(){if(re()){var s=parseFloat(U());if(q[0]==="/")if(q=q.slice(1),re()){var n=parseFloat(U());return L.$Rational(s,n)}else return q="/"+q,s;else return s}else return null}return F=m(),F?(Ee=m(),Ee?L.$Complex(F,Ee):q[0]==="i"?L.$Complex(0,F):L.$Complex(F,0)):q[0]==="i"?L.$Complex(0,1):q[0]==="-"&&q[1]==="i"?L.$Complex(0,-1):q[0]==="+"&&q[1]==="i"?L.$Complex(0,1):L.$Complex(0,0)}),function(ee,q){return Ie(ee,"rectangular","rect")}(e.get_singleton_class(fe)),Ie(fe,"arg","angle"),Ie(fe,"conjugate","conj"),Ie(fe,"divide","/"),Ie(fe,"imaginary","imag"),Ie(fe,"magnitude","abs"),Ie(fe,"phase","arg"),Ie(fe,"quo","/"),Ie(fe,"rectangular","rect"),e.udef(fe,"$negative?"),e.udef(fe,"$positive?"),e.udef(fe,"$step"),Fe}("::",_e("Numeric"),Ne)};Opal.modules["corelib/rational/base"]=function(e){var l=e.module,v=e.def,W=e.klass;e.nil;var L=e.$$$;return e.add_stubs("convert,from_string"),function(ae){var te=l(ae,"Kernel");return v(te,"$Rational",function(ne,P){return P==null&&(P=1),L("Rational").$convert(ne,P)},-2)}("::"),function(ae,te){var le=W(ae,te,"String");return v(le,"$to_r",function(){var P=this;return L("Rational").$from_string(P)})}("::",null)};Opal.modules["corelib/rational"]=function(e){var l=e.klass,v=e.eqeq,W=e.Kernel,L=e.truthy,ae=e.rb_lt,te=e.rb_divide,le=e.defs,ne=e.eqeqeq,P=e.not,oe=e.Opal,me=e.def,Se=e.return_ivar,Le=e.rb_minus,je=e.rb_times,xe=e.rb_plus,O=e.rb_gt,Ie=e.rb_le,We=e.return_self,Ne=e.alias,Fe=e.top,_e=e.nil,ye=e.$$$;return e.add_stubs("require,to_i,==,raise,<,-@,new,gcd,/,nil?,===,reduce,to_r,!,equal?,coerce_to!,freeze,to_f,numerator,denominator,<=>,-,*,__coerced__,+,Rational,>,**,abs,ceil,with_precision,floor,<=,truncate,send"),Fe.$require("corelib/numeric"),Fe.$require("corelib/rational/base"),function(de,ze){var fe=l(de,ze,"Rational"),ke=fe.$$prototype;return ke.num=ke.den=_e,le(fe,"$reduce",function(p,ee){var q=this,j=_e;if(p=p.$to_i(),ee=ee.$to_i(),v(ee,0))W.$raise(ye("ZeroDivisionError"),"divided by 0");else if(L(ae(ee,0)))p=p["$-@"](),ee=ee["$-@"]();else if(v(ee,1))return q.$new(p,ee);return j=p.$gcd(ee),q.$new(te(p,j),te(ee,j))}),le(fe,"$convert",function(p,ee){var q=this;return(L(p["$nil?"]())||L(ee["$nil?"]()))&&W.$raise(ye("TypeError"),"cannot convert nil into Rational"),ne(ye("Integer"),p)&&ne(ye("Integer"),ee)?q.$reduce(p,ee):((ne(ye("Float"),p)||ne(ye("String"),p)||ne(ye("Complex"),p))&&(p=p.$to_r()),(ne(ye("Float"),ee)||ne(ye("String"),ee)||ne(ye("Complex"),ee))&&(ee=ee.$to_r()),L(ee["$equal?"](1))&&P(ye("Integer")["$==="](p))?oe["$coerce_to!"](p,ye("Rational"),"to_r"):ne(ye("Numeric"),p)&&ne(ye("Numeric"),ee)?te(p,ee):q.$reduce(p,ee))}),me(fe,"$initialize",function(p,ee){var q=this;return q.num=p,q.den=ee,q.$freeze()}),me(fe,"$numerator",Se("num")),me(fe,"$denominator",Se("den")),me(fe,"$coerce",function(p){var ee=this,q=_e;return ne(ye("Rational"),q=p)?[p,ee]:ne(ye("Integer"),q)?[p.$to_r(),ee]:ne(ye("Float"),q)?[p,ee.$to_f()]:_e}),me(fe,"$==",function(p){var ee=this,q=_e,j=_e;return ne(ye("Rational"),q=p)?L(j=ee.num["$=="](p.$numerator()))?ee.den["$=="](p.$denominator()):j:ne(ye("Integer"),q)?L(j=ee.num["$=="](p))?ee.den["$=="](1):j:ne(ye("Float"),q)?ee.$to_f()["$=="](p):p["$=="](ee)}),me(fe,"$<=>",function(p){var ee=this,q=_e;return ne(ye("Rational"),q=p)?Le(je(ee.num,p.$denominator()),je(ee.den,p.$numerator()))["$<=>"](0):ne(ye("Integer"),q)?Le(ee.num,je(ee.den,p))["$<=>"](0):ne(ye("Float"),q)?ee.$to_f()["$<=>"](p):ee.$__coerced__("<=>",p)}),me(fe,"$+",function(p){var ee=this,q=_e,j=_e,F=_e;return ne(ye("Rational"),q=p)?(j=xe(je(ee.num,p.$denominator()),je(ee.den,p.$numerator())),F=je(ee.den,p.$denominator()),W.$Rational(j,F)):ne(ye("Integer"),q)?W.$Rational(xe(ee.num,je(p,ee.den)),ee.den):ne(ye("Float"),q)?xe(ee.$to_f(),p):ee.$__coerced__("+",p)}),me(fe,"$-",function(p){var ee=this,q=_e,j=_e,F=_e;return ne(ye("Rational"),q=p)?(j=Le(je(ee.num,p.$denominator()),je(ee.den,p.$numerator())),F=je(ee.den,p.$denominator()),W.$Rational(j,F)):ne(ye("Integer"),q)?W.$Rational(Le(ee.num,je(p,ee.den)),ee.den):ne(ye("Float"),q)?Le(ee.$to_f(),p):ee.$__coerced__("-",p)}),me(fe,"$*",function(p){var ee=this,q=_e,j=_e,F=_e;return ne(ye("Rational"),q=p)?(j=je(ee.num,p.$numerator()),F=je(ee.den,p.$denominator()),W.$Rational(j,F)):ne(ye("Integer"),q)?W.$Rational(je(ee.num,p),ee.den):ne(ye("Float"),q)?je(ee.$to_f(),p):ee.$__coerced__("*",p)}),me(fe,"$/",function(p){var ee=this,q=_e,j=_e,F=_e;return ne(ye("Rational"),q=p)?(j=je(ee.num,p.$denominator()),F=je(ee.den,p.$numerator()),W.$Rational(j,F)):ne(ye("Integer"),q)?v(p,0)?te(ee.$to_f(),0):W.$Rational(ee.num,je(ee.den,p)):ne(ye("Float"),q)?te(ee.$to_f(),p):ee.$__coerced__("/",p)}),me(fe,"$**",function(p){var ee=this,q=_e;return ne(ye("Integer"),q=p)?v(ee,0)&&L(ae(p,0))?ye(ye("Float"),"INFINITY"):L(O(p,0))?W.$Rational(ee.num["$**"](p),ee.den["$**"](p)):L(ae(p,0))?W.$Rational(ee.den["$**"](p["$-@"]()),ee.num["$**"](p["$-@"]())):W.$Rational(1,1):ne(ye("Float"),q)?ee.$to_f()["$**"](p):ne(ye("Rational"),q)?v(p,0)?W.$Rational(1,1):v(p.$denominator(),1)?L(ae(p,0))?W.$Rational(ee.den["$**"](p.$numerator().$abs()),ee.num["$**"](p.$numerator().$abs())):W.$Rational(ee.num["$**"](p.$numerator()),ee.den["$**"](p.$numerator())):v(ee,0)&&L(ae(p,0))?W.$raise(ye("ZeroDivisionError"),"divided by 0"):ee.$to_f()["$**"](p):ee.$__coerced__("**",p)}),me(fe,"$abs",function(){var p=this;return W.$Rational(p.num.$abs(),p.den.$abs())}),me(fe,"$ceil",function(p){var ee=this;return p==null&&(p=0),v(p,0)?te(ee.num["$-@"](),ee.den)["$-@"]().$ceil():ee.$with_precision("ceil",p)},-1),me(fe,"$floor",function(p){var ee=this;return p==null&&(p=0),v(p,0)?te(ee.num["$-@"](),ee.den)["$-@"]().$floor():ee.$with_precision("floor",p)},-1),me(fe,"$hash",function(){var p=this;return"Rational:"+p.num+":"+p.den}),me(fe,"$inspect",function(){var p=this;return"("+p+")"}),me(fe,"$rationalize",function(p){var ee=this;if(arguments.length>1&&W.$raise(ye("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),p==null)return ee;for(var q=p.$abs(),j=Le(ee,q),F=xe(ee,q),Ee=0,re=1,U=1,m=0,s,n,i,o,c;i=j.$ceil(),!Ie(i,F);)o=i-1,s=o*re+Ee,n=o*m+U,c=te(1,Le(F,o)),F=te(1,Le(j,o)),j=c,Ee=re,U=m,re=s,m=n;return W.$Rational(i*re+Ee,i*m+U)},-1),me(fe,"$round",function(p){var ee=this,q=_e,j=_e,F=_e;return p==null&&(p=0),v(p,0)?v(ee.num,0)?0:v(ee.den,1)?ee.num:(q=xe(je(ee.num.$abs(),2),ee.den),j=je(ee.den,2),F=te(q,j).$truncate(),L(ae(ee.num,0))?F["$-@"]():F):ee.$with_precision("round",p)},-1),me(fe,"$to_f",function(){var p=this;return te(p.num,p.den)}),me(fe,"$to_i",function(){var p=this;return p.$truncate()}),me(fe,"$to_r",We),me(fe,"$to_s",function(){var p=this;return""+p.num+"/"+p.den}),me(fe,"$truncate",function(p){var ee=this;return p==null&&(p=0),v(p,0)?L(ae(ee.num,0))?ee.$ceil():ee.$floor():ee.$with_precision("truncate",p)},-1),me(fe,"$with_precision",function(p,ee){var q=this,j=_e,F=_e;return ne(ye("Integer"),ee)||W.$raise(ye("TypeError"),"not an Integer"),j=10["$**"](ee),F=je(q,j),L(ae(ee,1))?te(F.$send(p),j).$to_i():W.$Rational(F.$send(p),j)}),le(fe,"$from_string",function(p){var ee=p.trimLeft(),q=/^[+-]?[\d_]+(\.[\d_]+)?/;ee.match(q);var j,F;function Ee(){return q.test(ee)}function re(){var U=ee.match(q),m=U[0];return ee=ee.slice(m.length),m.replace(/_/g,"")}return Ee()?(j=parseFloat(re()),ee[0]==="/"?(ee=ee.slice(1),Ee()?(F=parseFloat(re()),W.$Rational(j,F)):W.$Rational(j,1)):W.$Rational(j,1)):W.$Rational(0,1)}),Ne(fe,"divide","/"),Ne(fe,"quo","/")}("::",ye("Numeric"))};Opal.modules["corelib/time"]=function(e){var l=e.slice,v=e.deny_frozen_access,W=e.klass,L=e.Kernel,ae=e.Opal,te=e.defs,le=e.eqeqeq,ne=e.def,P=e.truthy,oe=e.rb_gt,me=e.rb_lt,Se=e.send,Le=e.rb_plus,je=e.rb_divide,xe=e.rb_minus,O=e.range,Ie=e.neqeq,We=e.rb_le,Ne=e.eqeq,Fe=e.alias,_e=e.top,ye=[],de=e.nil,ze=e.$$$;return e.add_stubs("require,include,===,raise,coerce_to!,respond_to?,to_str,to_i,_parse_offset,new,<=>,to_f,nil?,>,<,strftime,each,define_method,year,month,day,+,round,/,-,copy_instance_variables,initialize_dup,is_a?,zero?,wday,utc?,mon,yday,hour,min,sec,rjust,ljust,zone,to_s,[],cweek_cyear,jd,to_date,format,isdst,!=,<=,==,ceil,local,gm,asctime,getgm,gmt_offset,inspect,usec,gmtime,gmt?"),_e.$require("corelib/comparable"),function(fe,ke,ie){var p=W(fe,ke,"Time"),ee=[p].concat(ie),q=e.$r(ee);p.$include(ze("Comparable"));var j=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],F=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ee=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],re=["January","February","March","April","May","June","July","August","September","October","November","December"];te(p,"$at",function(s,n){var i;return ze("Time")["$==="](s)?(n!==void 0&&L.$raise(ze("TypeError"),"can't convert Time into an exact number"),i=new Date(s.getTime()),i.timezone=s.timezone,i):(s.$$is_number||(s=ae["$coerce_to!"](s,ze("Integer"),"to_int")),n===void 0?new Date(s*1e3):(n.$$is_number||(n=ae["$coerce_to!"](n,ze("Integer"),"to_int")),new Date(s*1e3+n/1e3)))},-2);function U(m,s,n,i,o,c){if(m.$$is_string?m=parseInt(m,10):m=ae["$coerce_to!"](m,ze("Integer"),"to_int"),s===de)s=1;else if(!s.$$is_number)if(s["$respond_to?"]("to_str"))switch(s=s.$to_str(),s.toLowerCase()){case"jan":s=1;break;case"feb":s=2;break;case"mar":s=3;break;case"apr":s=4;break;case"may":s=5;break;case"jun":s=6;break;case"jul":s=7;break;case"aug":s=8;break;case"sep":s=9;break;case"oct":s=10;break;case"nov":s=11;break;case"dec":s=12;break;default:s=s.$to_i()}else s=ae["$coerce_to!"](s,ze("Integer"),"to_int");return(s<1||s>12)&&L.$raise(ze("ArgumentError"),"month out of range: "+s),s=s-1,n===de?n=1:n.$$is_string?n=parseInt(n,10):n=ae["$coerce_to!"](n,ze("Integer"),"to_int"),(n<1||n>31)&&L.$raise(ze("ArgumentError"),"day out of range: "+n),i===de?i=0:i.$$is_string?i=parseInt(i,10):i=ae["$coerce_to!"](i,ze("Integer"),"to_int"),(i<0||i>24)&&L.$raise(ze("ArgumentError"),"hour out of range: "+i),o===de?o=0:o.$$is_string?o=parseInt(o,10):o=ae["$coerce_to!"](o,ze("Integer"),"to_int"),(o<0||o>59)&&L.$raise(ze("ArgumentError"),"min out of range: "+o),c===de?c=0:c.$$is_number||(c.$$is_string?c=parseInt(c,10):c=ae["$coerce_to!"](c,ze("Integer"),"to_int")),(c<0||c>60)&&L.$raise(ze("ArgumentError"),"sec out of range: "+c),[m,s,n,i,o,c]}return te(p,"$new",function(s,n,i,o,c,x,S){var G=this;n==null&&(n=de),i==null&&(i=de),o==null&&(o=de),c==null&&(c=de),x==null&&(x=de),S==null&&(S=de);var qe,Je,$t,lt;return s===void 0?new Date:(qe=U(s,n,i,o,c,x),s=qe[0],n=qe[1],i=qe[2],o=qe[3],c=qe[4],x=qe[5],S===de?(Je=new Date(s,n,i,o,c,0,x*1e3),s<100&&Je.setFullYear(s),Je):($t=G.$_parse_offset(S),lt=new Date(Date.UTC(s,n,i,o,c,0,x*1e3)),s<100&&lt.setUTCFullYear(s),Je=new Date(lt.getTime()-$t*36e5),Je.timezone=$t,Je))},-1),te(p,"$_parse_offset",function(s){var n;if(s.$$is_string)if(s=="UTC")n=0;else if(/^[+-]\d\d:[0-5]\d$/.test(s)){var i,o,c;i=s[0],o=+(s[1]+s[2]),c=+(s[4]+s[5]),n=(i=="-"?-1:1)*(o+c/60)}else L.$raise(ze("ArgumentError"),'"+HH:MM", "-HH:MM", "UTC" expected for utc_offset: '+s);else s.$$is_number?n=s/3600:L.$raise(ze("ArgumentError"),"Opal doesn't support other types for a timezone argument than Integer and String");return n}),te(p,"$local",function(s,n,i,o,c,x,S,G,qe,Je){n==null&&(n=de),i==null&&(i=de),o==null&&(o=de),c==null&&(c=de),x==null&&(x=de),S==null&&(S=de),G==null&&(G=de),qe==null&&(qe=de),Je==null&&(Je=de);var $t,lt;return arguments.length===10&&($t=l(arguments),s=$t[5],n=$t[4],i=$t[3],o=$t[2],c=$t[1],x=$t[0]),$t=U(s,n,i,o,c,x),s=$t[0],n=$t[1],i=$t[2],o=$t[3],c=$t[4],x=$t[5],lt=new Date(s,n,i,o,c,0,x*1e3),s<100&&lt.setFullYear(s),lt},-2),te(p,"$gm",function(s,n,i,o,c,x,S,G,qe,Je){n==null&&(n=de),i==null&&(i=de),o==null&&(o=de),c==null&&(c=de),x==null&&(x=de),S==null&&(S=de),G==null&&(G=de),qe==null&&(qe=de),Je==null&&(Je=de);var $t,lt;return arguments.length===10&&($t=l(arguments),s=$t[5],n=$t[4],i=$t[3],o=$t[2],c=$t[1],x=$t[0]),$t=U(s,n,i,o,c,x),s=$t[0],n=$t[1],i=$t[2],o=$t[3],c=$t[4],x=$t[5],lt=new Date(Date.UTC(s,n,i,o,c,0,x*1e3)),s<100&&lt.setUTCFullYear(s),lt.timezone=0,lt},-2),te(p,"$now",function(){var s=this;return s.$new()}),ne(p,"$+",function(s){var n=this;le(ze("Time"),s)&&L.$raise(ze("TypeError"),"time + time?"),s.$$is_number||(s=ae["$coerce_to!"](s,ze("Integer"),"to_int"));var i=new Date(n.getTime()+s*1e3);return i.timezone=n.timezone,i}),ne(p,"$-",function(s){var n=this;if(le(ze("Time"),s))return(n.getTime()-s.getTime())/1e3;s.$$is_number||(s=ae["$coerce_to!"](s,ze("Integer"),"to_int"));var i=new Date(n.getTime()-s*1e3);return i.timezone=n.timezone,i}),ne(p,"$<=>",function(s){var n=this,i=de;return le(ze("Time"),s)?n.$to_f()["$<=>"](s.$to_f()):(i=s["$<=>"](n),P(i["$nil?"]())?de:P(oe(i,0))?-1:P(me(i,0))?1:0)}),ne(p,"$==",function(s){var n=this,i=de;return P(i=ze("Time")["$==="](s))?n.$to_f()===s.$to_f():i}),ne(p,"$asctime",function(){var s=this;return s.$strftime("%a %b %e %H:%M:%S %Y")}),Se([["year","getFullYear","getUTCFullYear"],["mon","getMonth","getUTCMonth",1],["wday","getDay","getUTCDay"],["day","getDate","getUTCDate"],["hour","getHours","getUTCHours"],["min","getMinutes","getUTCMinutes"],["sec","getSeconds","getUTCSeconds"]],"each",[],function m(s,n,i,o){var c=m.$$s==null?this:m.$$s;return s==null&&(s=de),n==null&&(n=de),i==null&&(i=de),o==null&&(o=0),Se(c,"define_method",[s],function x(){var S=x.$$s==null?this:x.$$s;return o+(S.timezone!=null?new Date(S.getTime()+S.timezone*36e5)[i]():S[n]())},{$$s:c})},{$$arity:-4,$$s:p}),ne(p,"$yday",function(){var s=this,n=de,i=de,o=de;return n=q("Time").$new(s.$year()).$to_i(),i=q("Time").$new(s.$year(),s.$month(),s.$day()).$to_i(),o=86400,Le(je(xe(i,n),o).$round(),1)}),ne(p,"$isdst",function(){var s=this,n=new Date(s.getFullYear(),0,1),i=new Date(s.getFullYear(),6,1);return s.getTimezoneOffset()<Math.max(n.getTimezoneOffset(),i.getTimezoneOffset())}),ne(p,"$dup",function(){var s=this,n=de;return n=new Date(s.getTime()),n.$copy_instance_variables(s),n.$initialize_dup(s),n}),ne(p,"$eql?",function(s){var n=this,i=de;return P(i=s["$is_a?"](ze("Time")))?n["$<=>"](s)["$zero?"]():i}),Se([["sunday?",0],["monday?",1],["tuesday?",2],["wednesday?",3],["thursday?",4],["friday?",5],["saturday?",6]],"each",[],function m(s,n){var i=m.$$s==null?this:m.$$s;return s==null&&(s=de),n==null&&(n=de),Se(i,"define_method",[s],function o(){var c=o.$$s==null?this:o.$$s;return c.$wday()===n},{$$s:i})},{$$s:p}),ne(p,"$hash",function(){var s=this;return"Time:"+s.getTime()}),ne(p,"$inspect",function(){var s=this;return P(s["$utc?"]())?s.$strftime("%Y-%m-%d %H:%M:%S UTC"):s.$strftime("%Y-%m-%d %H:%M:%S %z")}),ne(p,"$succ",function(){var s=this,n=new Date(s.getTime()+1e3);return n.timezone=s.timezone,n}),ne(p,"$usec",function(){var s=this;return s.getMilliseconds()*1e3}),ne(p,"$zone",function(){var s=this;if(s.timezone===0)return"UTC";if(s.timezone!=null)return de;var n=s.toString(),i;return n.indexOf("(")==-1?i=n.match(/[A-Z]{3,4}/)[0]:i=n.match(/\((.+)\)(?:\s|$)/)[1],i=="GMT"&&/(GMT\W*\d{4})/.test(n)?RegExp.$1:i}),ne(p,"$getgm",function(){var s=this,n=new Date(s.getTime());return n.timezone=0,n}),ne(p,"$gmtime",function(){var s=this;return s.timezone!==0&&(v(s),s.timezone=0),s}),ne(p,"$gmt?",function(){var s=this;return s.timezone===0}),ne(p,"$gmt_offset",function(){var s=this;return s.timezone!=null?s.timezone*60:-s.getTimezoneOffset()*60}),ne(p,"$strftime",function(s){var n=this;return s.replace(/%([\-_#^0]*:{0,2})(\d+)?([EO]*)(.)/g,function(i,o,c,x,S){var G="",qe,Je,$t,lt=o.indexOf("0")!==-1,gt=o.indexOf("-")===-1,_t=o.indexOf("_")!==-1,vt=o.indexOf("^")!==-1,dt=o.indexOf("#")!==-1,mt=(o.match(":")||[]).length;switch(c=parseInt(c,10),lt&&_t&&(o.indexOf("0")<o.indexOf("_")?lt=!1:_t=!1),S){case"Y":G+=n.$year();break;case"C":lt=!_t,G+=Math.round(n.$year()/100);break;case"y":lt=!_t,G+=n.$year()%100;break;case"m":lt=!_t,G+=n.$mon();break;case"B":G+=re[n.$mon()-1];break;case"b":case"h":_t=!lt,G+=Ee[n.$mon()-1];break;case"d":lt=!_t,G+=n.$day();break;case"e":_t=!lt,G+=n.$day();break;case"j":lt=!_t,c=isNaN(c)?3:c,G+=n.$yday();break;case"H":lt=!_t,G+=n.$hour();break;case"k":_t=!lt,G+=n.$hour();break;case"I":lt=!_t,G+=n.$hour()%12||12;break;case"l":_t=!lt,G+=n.$hour()%12||12;break;case"P":G+=n.$hour()>=12?"pm":"am";break;case"p":G+=n.$hour()>=12?"PM":"AM";break;case"M":lt=!_t,G+=n.$min();break;case"S":lt=!_t,G+=n.$sec();break;case"L":lt=!_t,c=isNaN(c)?3:c,G+=n.getMilliseconds();break;case"N":c=isNaN(c)?9:c,G+=n.getMilliseconds().toString().$rjust(3,"0"),G=G.$ljust(c,"0");break;case"z":var bt=n.timezone==null?n.getTimezoneOffset():-n.timezone*60,Oe=Math.floor(Math.abs(bt)/60),be=Math.abs(bt)%60;G+=bt<0?"+":"-",G+=Oe<10?"0":"",G+=Oe,mt>0&&(G+=":"),G+=be<10?"0":"",G+=be,mt>1&&(G+=":00");break;case"Z":G+=n.$zone();break;case"A":G+=j[n.$wday()];break;case"a":G+=F[n.$wday()];break;case"u":G+=n.$wday()+1;break;case"w":G+=n.$wday();break;case"V":G+=n.$cweek_cyear()["$[]"](0).$to_s().$rjust(2,"0");break;case"G":G+=n.$cweek_cyear()["$[]"](1);break;case"g":G+=n.$cweek_cyear()["$[]"](1)["$[]"](O(-2,-1,!1));break;case"s":G+=n.$to_i();break;case"n":G+=`
`;break;case"t":G+="	";break;case"%":G+="%";break;case"c":G+=n.$strftime("%a %b %e %T %Y");break;case"D":case"x":G+=n.$strftime("%m/%d/%y");break;case"F":G+=n.$strftime("%Y-%m-%d");break;case"v":G+=n.$strftime("%e-%^b-%4Y");break;case"r":G+=n.$strftime("%I:%M:%S %p");break;case"R":G+=n.$strftime("%H:%M");break;case"T":case"X":G+=n.$strftime("%H:%M:%S");break;case"J":if(qe=n.$to_date().$jd(),qe<2405160){G+=n.$strftime("%Y-%m-%d");break}else qe<2419614?(Je="M",$t=1867):qe<2424875?(Je="T",$t=1911):qe<2447535?(Je="S",$t=1925):qe<2458605?(Je="H",$t=1988):(Je="R",$t=2018);G+=n.$format("%c%02d",Je,xe(n.$year(),$t)),G+=n.$strftime("-%m-%d");break;default:return i}return vt&&(G=G.toUpperCase()),dt&&(G=G.replace(/[A-Z]/,function(Te){Te.toLowerCase()}).replace(/[a-z]/,function(Te){Te.toUpperCase()})),gt&&(lt||_t)&&(G=G.$rjust(isNaN(c)?2:c,_t?" ":"0")),G})}),ne(p,"$to_a",function(){var s=this;return[s.$sec(),s.$min(),s.$hour(),s.$day(),s.$month(),s.$year(),s.$wday(),s.$yday(),s.$isdst(),s.$zone()]}),ne(p,"$to_f",function(){var s=this;return s.getTime()/1e3}),ne(p,"$to_i",function(){var s=this;return parseInt(s.getTime()/1e3,10)}),ne(p,"$cweek_cyear",function(){var s=this,n=de,i=de,o=de,c=de,x=de,S=de,G=de;return n=ze("Time").$new(s.$year(),1,1),i=n.$wday(),o=s.$year(),P(We(i,4))&&Ie(i,0)?c=xe(i,1):(c=xe(xe(i,7),1),Ne(c,-8)&&(c=-1)),x=je(Le(s.$yday(),c),7).$ceil(),P(We(x,0))?ze("Time").$new(xe(s.$year(),1),12,31).$cweek_cyear():(Ne(x,53)&&(S=ze("Time").$new(s.$year(),12,31),G=S.$wday(),P(We(G,3))&&Ie(G,0)&&(x=1,o=Le(o,1))),[x,o])}),function(m,s){return Fe(m,"mktime","local"),Fe(m,"utc","gm")}(e.get_singleton_class(p)),Fe(p,"ctime","asctime"),Fe(p,"dst?","isdst"),Fe(p,"getutc","getgm"),Fe(p,"gmtoff","gmt_offset"),Fe(p,"mday","day"),Fe(p,"month","mon"),Fe(p,"to_s","inspect"),Fe(p,"tv_sec","to_i"),Fe(p,"tv_usec","usec"),Fe(p,"utc","gmtime"),Fe(p,"utc?","gmt?"),Fe(p,"utc_offset","gmt_offset")}("::",Date,ye)};Opal.modules["corelib/struct"]=function(e){var l=e.klass,v=e.slice,W=e.extract_kwargs,L=e.ensure_kwargs,ae=e.truthy,te=e.neqeq,le=e.eqeq,ne=e.Opal,P=e.send,oe=e.Class,me=e.to_a,Se=e.def,Le=e.defs,je=e.Kernel,xe=e.hash2,O=e.rb_gt,Ie=e.rb_minus,We=e.eqeqeq,Ne=e.rb_lt,Fe=e.rb_ge,_e=e.rb_plus,ye=e.alias,de=e.top,ze=[],fe=e.nil,ke=e.$$$;return e.add_stubs("require,include,!=,upcase,[],==,class,unshift,const_name!,map,coerce_to!,new,each,define_struct_attribute,allocate,initialize,alias_method,module_eval,to_proc,const_set,raise,<<,members,define_method,instance_eval,last,>,length,-,keys,any?,join,[]=,each_with_index,hash,===,<,-@,size,>=,include?,to_sym,instance_of?,__id__,eql?,enum_for,+,name,each_pair,inspect,to_h,args,each_with_object,flatten,to_a,respond_to?,dig"),de.$require("corelib/enumerable"),function(ie,p,ee){var q=l(ie,p,"Struct"),j=[q].concat(ee),F=e.$r(j);q.$include(ke("Enumerable")),Le(q,"$new",function re(U,m,s){var n=re.$$p||fe,i,o,c,x,S=this,G=fe;if(re.$$p=null,i=v(arguments,1),o=W(i),o=L(o),c=i,x=o.$$smap.keyword_init,x==null&&(x=!1),ae(U))if(le(U.$class(),ke("String"))&&te(U["$[]"](0).$upcase(),U["$[]"](0)))c.$unshift(U),U=fe;else try{U=ne["$const_name!"](U)}catch(qe){if(e.rescue(qe,[ke("TypeError"),ke("NameError")]))try{c.$unshift(U),U=fe}finally{e.pop_exception()}else throw qe}return P(c,"map",[],function(Je){return Je==null&&(Je=fe),ne["$coerce_to!"](Je,ke("String"),"to_str")}),G=P(oe,"new",[S],function qe(){var Je=qe.$$s==null?this:qe.$$s;return P(c,"each",[],function $t(lt){var gt=$t.$$s==null?this:$t.$$s;return lt==null&&(lt=fe),gt.$define_struct_attribute(lt)},{$$s:Je}),function($t,lt){return Se($t,"$new",function(_t){var vt,dt,mt=this,bt=fe;return vt=v(arguments),dt=vt,bt=mt.$allocate(),bt.$$data={},P(bt,"initialize",me(dt)),bt},-1),$t.$alias_method("[]","new")}(e.get_singleton_class(Je))},{$$s:S}),ae(n)&&P(G,"module_eval",[],n.$to_proc()),G.$$keyword_init=x,ae(U)&&ke("Struct").$const_set(U,G),G},-2),Le(q,"$define_struct_attribute",function(U){var m=this;return le(m,ke("Struct"))&&je.$raise(ke("ArgumentError"),"you cannot define attributes to the Struct class"),m.$members()["$<<"](U),P(m,"define_method",[U],function s(){var n=s.$$s==null?this:s.$$s;return n.$$data[U]},{$$s:m}),P(m,"define_method",[""+U+"="],function s(n){var i=s.$$s==null?this:s.$$s;return n==null&&(n=fe),i.$$data[U]=n},{$$s:m})}),Le(q,"$members",function(){var U=this,m=fe;return U.members==null&&(U.members=fe),le(U,ke("Struct"))&&je.$raise(ke("ArgumentError"),"the Struct class has no members"),U.members=ae(m=U.members)?m:[]}),Le(q,"$inherited",function(U){var m=this,s=fe;return m.members==null&&(m.members=fe),s=m.members,P(U,"instance_eval",[],function n(){var i=n.$$s==null?this:n.$$s;return i.members=s},{$$s:m})}),Se(q,"$initialize",function(U){var m,s,n=this,i=fe,o=fe,c=fe;return m=v(arguments),s=m,ae(n.$class().$$keyword_init)?(i=ae(o=s.$last())?o:xe([],{}),(ae(O(s.$length(),1))||ae(s.length===1&&!i.$$is_hash))&&je.$raise(ke("ArgumentError"),"wrong number of arguments (given "+s.$length()+", expected 0)"),c=Ie(i.$keys(),n.$class().$members()),ae(c["$any?"]())&&je.$raise(ke("ArgumentError"),"unknown keywords: "+c.$join(", ")),P(n.$class().$members(),"each",[],function x(S){var G,qe=x.$$s==null?this:x.$$s;return S==null&&(S=fe),G=[S,i["$[]"](S)],P(qe,"[]=",G),G[G.length-1]},{$$s:n})):(ae(O(s.$length(),n.$class().$members().$length()))&&je.$raise(ke("ArgumentError"),"struct size differs"),P(n.$class().$members(),"each_with_index",[],function x(S,G){var qe,Je=x.$$s==null?this:x.$$s;return S==null&&(S=fe),G==null&&(G=fe),qe=[S,s["$[]"](G)],P(Je,"[]=",qe),qe[qe.length-1]},{$$s:n}))},-1),Se(q,"$initialize_copy",function(U){var m=this;m.$$data={};var s=Object.keys(U.$$data),n,i,o;for(n=0,i=s.length;n<i;n++)o=s[n],m.$$data[o]=U.$$data[o]}),Le(q,"$keyword_init?",function(){var U=this;return U.$$keyword_init}),Se(q,"$members",function(){var U=this;return U.$class().$members()}),Se(q,"$hash",function(){var U=this;return F("Hash").$new(U.$$data).$hash()}),Se(q,"$[]",function(U){var m=this;return We(ke("Integer"),U)?(ae(Ne(U,m.$class().$members().$size()["$-@"]()))&&je.$raise(ke("IndexError"),"offset "+U+" too small for struct(size:"+m.$class().$members().$size()+")"),ae(Fe(U,m.$class().$members().$size()))&&je.$raise(ke("IndexError"),"offset "+U+" too large for struct(size:"+m.$class().$members().$size()+")"),U=m.$class().$members()["$[]"](U)):We(ke("String"),U)?m.$$data.hasOwnProperty(U)||je.$raise(ke("NameError").$new("no member '"+U+"' in struct",U)):je.$raise(ke("TypeError"),"no implicit conversion of "+U.$class()+" into Integer"),U=ne["$coerce_to!"](U,ke("String"),"to_str"),m.$$data[U]}),Se(q,"$[]=",function(U,m){var s=this;return We(ke("Integer"),U)?(ae(Ne(U,s.$class().$members().$size()["$-@"]()))&&je.$raise(ke("IndexError"),"offset "+U+" too small for struct(size:"+s.$class().$members().$size()+")"),ae(Fe(U,s.$class().$members().$size()))&&je.$raise(ke("IndexError"),"offset "+U+" too large for struct(size:"+s.$class().$members().$size()+")"),U=s.$class().$members()["$[]"](U)):We(ke("String"),U)?ae(s.$class().$members()["$include?"](U.$to_sym()))||je.$raise(ke("NameError").$new("no member '"+U+"' in struct",U)):je.$raise(ke("TypeError"),"no implicit conversion of "+U.$class()+" into Integer"),U=ne["$coerce_to!"](U,ke("String"),"to_str"),s.$$data[U]=m}),Se(q,"$==",function(U){var m=this;if(!ae(U["$instance_of?"](m.$class())))return!1;var s={},n={};function i(o,c){var x,S,G;s[o.$__id__()]=!0,n[c.$__id__()]=!0;for(x in o.$$data)if(S=o.$$data[x],G=c.$$data[x],ke("Struct")["$==="](S)){if((!s.hasOwnProperty(S.$__id__())||!n.hasOwnProperty(G.$__id__()))&&!i(S,G))return!1}else if(!S["$=="](G))return!1;return!0}return i(m,U)}),Se(q,"$eql?",function(U){var m=this;if(!ae(U["$instance_of?"](m.$class())))return!1;var s={},n={};function i(o,c){var x,S,G;s[o.$__id__()]=!0,n[c.$__id__()]=!0;for(x in o.$$data)if(S=o.$$data[x],G=c.$$data[x],ke("Struct")["$==="](S)){if((!s.hasOwnProperty(S.$__id__())||!n.hasOwnProperty(G.$__id__()))&&!i(S,G))return!1}else if(!S["$eql?"](G))return!1;return!0}return i(m,U)}),Se(q,"$each",function re(){var U=re.$$p||fe,m=this;return re.$$p=null,U===fe?P(m,"enum_for",["each"],function s(){var n=s.$$s==null?this:s.$$s;return n.$size()},{$$s:m}):(P(m.$class().$members(),"each",[],function s(n){var i=s.$$s==null?this:s.$$s;return n==null&&(n=fe),e.yield1(U,i["$[]"](n))},{$$s:m}),m)}),Se(q,"$each_pair",function re(){var U=re.$$p||fe,m=this;return re.$$p=null,U===fe?P(m,"enum_for",["each_pair"],function s(){var n=s.$$s==null?this:s.$$s;return n.$size()},{$$s:m}):(P(m.$class().$members(),"each",[],function s(n){var i=s.$$s==null?this:s.$$s;return n==null&&(n=fe),e.yield1(U,[n,i["$[]"](n)])},{$$s:m}),m)}),Se(q,"$length",function(){var U=this;return U.$class().$members().$length()}),Se(q,"$to_a",function(){var U=this;return P(U.$class().$members(),"map",[],function m(s){var n=m.$$s==null?this:m.$$s;return s==null&&(s=fe),n["$[]"](s)},{$$s:U})});var Ee=[];return Se(q,"$inspect",function(){var U=this,m=fe,s=fe;return function(){try{return m="#<struct ",ae(Ee["$include?"](U.$__id__()))?_e(m,":...>"):(Ee["$<<"](U.$__id__()),s=!0,We(ke("Struct"),U)&&ae(U.$class().$name())&&(m=_e(m,""+U.$class()+" ")),m=_e(m,P(U.$each_pair(),"map",[],function(i,o){return i==null&&(i=fe),o==null&&(o=fe),""+i+"="+F("Opal").$inspect(o)}).$join(", ")),m=_e(m,">"),m)}finally{ae(s)&&Ee.pop()}}()}),Se(q,"$to_h",function re(){var U=re.$$p||fe,m=this;return re.$$p=null,U!==fe?P(P(m,"map",[],U.$to_proc()),"to_h",me(m.$args())):P(m.$class().$members(),"each_with_object",[xe([],{})],function s(n,i){var o,c=s.$$s==null?this:s.$$s;return n==null&&(n=fe),i==null&&(i=fe),o=[n,c["$[]"](n)],P(i,"[]=",o),o[o.length-1]},{$$s:m})}),Se(q,"$values_at",function(U){var m,s,n=this;m=v(arguments),s=m,s=P(s,"map",[],function(S){return S==null&&(S=fe),S.$$is_range?S.$to_a():S}).$flatten();for(var i=[],o=0,c=s.length;o<c;o++)s[o].$$is_number||je.$raise(ke("TypeError"),"no implicit conversion of "+s[o].$class()+" into Integer"),i.push(n["$[]"](s[o]));return i},-1),Se(q,"$dig",function(U,m){var s,n,i=this,o=fe;return s=v(arguments,1),n=s,o=ae(U.$$is_string&&i.$$data.hasOwnProperty(U))&&i.$$data[U]||fe,o===fe||n.length===0?o:(ae(o["$respond_to?"]("dig"))||je.$raise(ke("TypeError"),""+o.$class()+" does not have #dig method"),P(o,"dig",me(n)))},-2),ye(q,"size","length"),ye(q,"to_s","inspect"),ye(q,"values","to_a")}("::",null,ze)};Opal.modules["corelib/set"]=function(e){var l=e.freeze,v=e.klass,W=e.slice,L=e.defs,ae=e.hash2,te=e.truthy,le=e.eqeqeq,ne=e.Kernel,P=e.send,oe=e.def,me=e.eqeq,Se=e.rb_lt,Le=e.rb_le,je=e.alias,xe=[],O=e.nil,Ie=e.$$$;return e.add_stubs("include,new,nil?,===,raise,each,add,merge,class,respond_to?,subtract,dup,join,to_a,equal?,instance_of?,==,instance_variable_get,size,is_a?,all?,include?,[]=,enum_for,[],<<,replace,compare_by_identity,name,compare_by_identity?,delete,select,frozen?,freeze,reject,delete_if,to_proc,keep_if,each_key,empty?,eql?,instance_eval,clear,<,<=,any?,!,intersect?,keys,|,proper_subset?,subset?,proper_superset?,superset?,-,select!,collect!"),function(We,Ne,Fe){var _e=v(We,Ne,"Set"),ye=[_e].concat(Fe),de=e.$r(ye),ze=O,fe=_e.$$prototype;fe.hash=O,_e.$include(Ie("Enumerable")),L(_e,"$[]",function(p){var ee,q,j=this;return ee=W(arguments),q=ee,j.$new(q)},-1),oe(_e,"$initialize",function ie(p){var ee=ie.$$p||O,q=this;return ie.$$p=null,p==null&&(p=O),q.hash=ae([],{}),te(p["$nil?"]())?O:(le(Ie("Enumerable"),p)||ne.$raise(Ie("ArgumentError"),"value must be enumerable"),te(ee)?P(p,"each",[],function j(F){var Ee=j.$$s==null?this:j.$$s;return F==null&&(F=O),Ee.$add(e.yield1(ee,F))},{$$s:q}):q.$merge(p))},-1),oe(_e,"$dup",function(){var p=this,ee=O;return ee=p.$class().$new(),ee.$merge(p)}),oe(_e,"$-",function(p){var ee=this;return te(p["$respond_to?"]("each"))||ne.$raise(Ie("ArgumentError"),"value must be enumerable"),ee.$dup().$subtract(p)}),oe(_e,"$inspect",function(){var p=this;return"#<Set: {"+p.$to_a().$join(",")+"}>"}),oe(_e,"$==",function(p){var ee=this;return te(ee["$equal?"](p))?!0:te(p["$instance_of?"](ee.$class()))?ee.hash["$=="](p.$instance_variable_get("@hash")):te(p["$is_a?"](Ie("Set")))&&me(ee.$size(),p.$size())?P(p,"all?",[],function q(j){var F=q.$$s==null?this:q.$$s;return F.hash==null&&(F.hash=O),j==null&&(j=O),F.hash["$include?"](j)},{$$s:ee}):!1}),oe(_e,"$add",function(p){var ee=this;return ee.hash["$[]="](p,!0),ee}),oe(_e,"$classify",function ie(){var p=ie.$$p||O,ee=this,q=O;return ie.$$p=null,p===O?ee.$enum_for("classify"):(q=P(Ie("Hash"),"new",[],function j(F,Ee){var re,U=j.$$s==null?this:j.$$s;return F==null&&(F=O),Ee==null&&(Ee=O),re=[Ee,U.$class().$new()],P(F,"[]=",re),re[re.length-1]},{$$s:ee}),P(ee,"each",[],function(F){return F==null&&(F=O),q["$[]"](e.yield1(p,F)).$add(F)}),q)}),oe(_e,"$collect!",function ie(){var p=ie.$$p||O,ee=this,q=O;return ie.$$p=null,p===O?ee.$enum_for("collect!"):(q=ee.$class().$new(),P(ee,"each",[],function(F){return F==null&&(F=O),q["$<<"](e.yield1(p,F))}),ee.$replace(q))}),oe(_e,"$compare_by_identity",function(){var p=this;return te(p.hash["$respond_to?"]("compare_by_identity"))?(p.hash.$compare_by_identity(),p):p.$raise(de("NotImplementedError"),""+p.$class().$name()+"#compare_by_identity is not implemented")}),oe(_e,"$compare_by_identity?",function(){var p=this,ee=O;return te(ee=p.hash["$respond_to?"]("compare_by_identity?"))?p.hash["$compare_by_identity?"]():ee}),oe(_e,"$delete",function(p){var ee=this;return ee.hash.$delete(p),ee}),oe(_e,"$delete?",function(p){var ee=this;return te(ee["$include?"](p))?(ee.$delete(p),ee):O}),oe(_e,"$delete_if",function ie(){var p=ie.$$p||O,ee=this;return ie.$$p=null,p===O?ee.$enum_for("delete_if"):(P(P(ee,"select",[],function(j){return j==null&&(j=O),e.yield1(p,j)}),"each",[],function q(j){var F=q.$$s==null?this:q.$$s;return F.hash==null&&(F.hash=O),j==null&&(j=O),F.hash.$delete(j)},{$$s:ee}),ee)}),oe(_e,"$freeze",function(){var p=this;return te(p["$frozen?"]())?p:(p.hash.$freeze(),l(p))}),oe(_e,"$keep_if",function ie(){var p=ie.$$p||O,ee=this;return ie.$$p=null,p===O?ee.$enum_for("keep_if"):(P(P(ee,"reject",[],function(j){return j==null&&(j=O),e.yield1(p,j)}),"each",[],function q(j){var F=q.$$s==null?this:q.$$s;return F.hash==null&&(F.hash=O),j==null&&(j=O),F.hash.$delete(j)},{$$s:ee}),ee)}),oe(_e,"$reject!",function ie(){var p=ie.$$p||O,ee=this,q=O;return ie.$$p=null,p===O?ee.$enum_for("reject!"):(q=ee.$size(),P(ee,"delete_if",[],p.$to_proc()),me(ee.$size(),q)?O:ee)}),oe(_e,"$select!",function ie(){var p=ie.$$p||O,ee=this,q=O;return ie.$$p=null,p===O?ee.$enum_for("select!"):(q=ee.$size(),P(ee,"keep_if",[],p.$to_proc()),me(ee.$size(),q)?O:ee)}),oe(_e,"$add?",function(p){var ee=this;return te(ee["$include?"](p))?O:ee.$add(p)}),oe(_e,"$each",function ie(){var p=ie.$$p||O,ee=this;return ie.$$p=null,p===O?ee.$enum_for("each"):(P(ee.hash,"each_key",[],p.$to_proc()),ee)}),oe(_e,"$empty?",function(){var p=this;return p.hash["$empty?"]()}),oe(_e,"$eql?",function(p){var ee=this;return ee.hash["$eql?"](P(p,"instance_eval",[],function q(){var j=q.$$s==null?this:q.$$s;return j.hash==null&&(j.hash=O),j.hash},{$$s:ee}))}),oe(_e,"$clear",function(){var p=this;return p.hash.$clear(),p}),oe(_e,"$include?",function(p){var ee=this;return ee.hash["$include?"](p)}),oe(_e,"$merge",function(p){var ee=this;return P(p,"each",[],function q(j){var F=q.$$s==null?this:q.$$s;return j==null&&(j=O),F.$add(j)},{$$s:ee}),ee}),oe(_e,"$replace",function(p){var ee=this;return ee.$clear(),ee.$merge(p),ee}),oe(_e,"$size",function(){var p=this;return p.hash.$size()}),oe(_e,"$subtract",function(p){var ee=this;return P(p,"each",[],function q(j){var F=q.$$s==null?this:q.$$s;return j==null&&(j=O),F.$delete(j)},{$$s:ee}),ee}),oe(_e,"$|",function(p){var ee=this;return te(p["$respond_to?"]("each"))||ne.$raise(Ie("ArgumentError"),"value must be enumerable"),ee.$dup().$merge(p)});function ke(ie){te(ze=ie["$is_a?"](Ie("Set")))||ne.$raise(Ie("ArgumentError"),"value must be a set")}return oe(_e,"$superset?",function(p){var ee=this;return ke(p),te(Se(ee.$size(),p.$size()))?!1:P(p,"all?",[],function q(j){var F=q.$$s==null?this:q.$$s;return j==null&&(j=O),F["$include?"](j)},{$$s:ee})}),oe(_e,"$proper_superset?",function(p){var ee=this;return ke(p),te(Le(ee.$size(),p.$size()))?!1:P(p,"all?",[],function q(j){var F=q.$$s==null?this:q.$$s;return j==null&&(j=O),F["$include?"](j)},{$$s:ee})}),oe(_e,"$subset?",function(p){var ee=this;return ke(p),te(Se(p.$size(),ee.$size()))?!1:P(ee,"all?",[],function(j){return j==null&&(j=O),p["$include?"](j)})}),oe(_e,"$proper_subset?",function(p){var ee=this;return ke(p),te(Le(p.$size(),ee.$size()))?!1:P(ee,"all?",[],function(j){return j==null&&(j=O),p["$include?"](j)})}),oe(_e,"$intersect?",function(p){var ee=this;return ke(p),te(Se(ee.$size(),p.$size()))?P(ee,"any?",[],function(j){return j==null&&(j=O),p["$include?"](j)}):P(p,"any?",[],function q(j){var F=q.$$s==null?this:q.$$s;return j==null&&(j=O),F["$include?"](j)},{$$s:ee})}),oe(_e,"$disjoint?",function(p){var ee=this;return ee["$intersect?"](p)["$!"]()}),oe(_e,"$to_a",function(){var p=this;return p.hash.$keys()}),je(_e,"+","|"),je(_e,"<","proper_subset?"),je(_e,"<<","add"),je(_e,"<=","subset?"),je(_e,">","proper_superset?"),je(_e,">=","superset?"),je(_e,"difference","-"),je(_e,"filter!","select!"),je(_e,"length","size"),je(_e,"map!","collect!"),je(_e,"member?","include?"),je(_e,"union","|")}("::",null,xe)};Opal.modules["corelib/dir"]=function(e){var l=e.klass,v=e.def,W=e.truthy,L=e.alias,ae=e.nil,te=e.$$$;return e.add_stubs("[],pwd"),function(le,ne,P){var oe=l(le,ne,"Dir");return function(me,Se){return v(me,"$chdir",function Le(je){var xe=Le.$$p||ae,O=ae;return Le.$$p=null,function(){try{return O=e.current_dir,e.current_dir=je,e.yieldX(xe,[])}finally{e.current_dir=O}}()}),v(me,"$pwd",function(){return e.current_dir||"."}),v(me,"$home",function(){var je=ae;return W(je=te("ENV")["$[]"]("HOME"))?je:"."}),L(me,"getwd","pwd")}(e.get_singleton_class(oe))}("::",null)};Opal.modules["corelib/file"]=function(e){var l=e.truthy,v=e.klass,W=e.const_set,L=e.Opal,ae=e.regexp,te=e.rb_plus,le=e.def,ne=e.Kernel,P=e.eqeq,oe=e.rb_lt,me=e.rb_minus,Se=e.range,Le=e.send,je=e.slice,xe=e.alias,O=[],Ie=e.nil,We=e.$$$;return e.add_stubs("respond_to?,to_path,coerce_to!,pwd,split,sub,+,unshift,join,home,raise,start_with?,absolute_path,==,<,dirname,-,basename,empty?,rindex,[],length,nil?,gsub,find,=~,map,each_with_index,flatten,reject,to_proc,end_with?,expand_path,exist?"),function(Ne,Fe,_e){var ye=v(Ne,Fe,"File"),de=[ye].concat(_e),ze=Ie;return W(de[0],"Separator",W(de[0],"SEPARATOR","/")),W(de[0],"ALT_SEPARATOR",Ie),W(de[0],"PATH_SEPARATOR",":"),W(de[0],"FNM_SYSCASE",0),ze=/^[a-zA-Z]:(?:\\|\/)/,function(fe,ke){var ie=[fe].concat(ke),p=e.$r(ie);le(fe,"$absolute_path",function(F,Ee){var re=Ie,U=Ie,m=Ie,s=Ie,n=Ie,i=Ie,o=Ie,c=Ie,x=Ie,S=Ie;Ee==null&&(Ee=Ie),re=p("SEPARATOR"),U=q(),m=[],F=l(F["$respond_to?"]("to_path"))?F.$to_path():F,F=L["$coerce_to!"](F,We("String"),"to_str"),Ee=l(s=Ee)?s:We("Dir").$pwd(),n=F.substr(0,re.length)===re||ze.test(F),i=Ee.substr(0,re.length)===re||ze.test(Ee),l(n)?(o=F.$split(ae(["[",U,"]"])),c=ze.test(F)?"":F.$sub(ae(["^([",U,"]+).*$"]),"\\1"),x=!0):(o=te(Ee.$split(ae(["[",U,"]"])),F.$split(ae(["[",U,"]"]))),c=ze.test(Ee)?"":Ee.$sub(ae(["^([",U,"]+).*$"]),"\\1"),x=i);for(var G,qe=0,Je=o.length;qe<Je;qe++)G=o[qe],!(G===Ie||G===""&&(m.length===0||x)||G==="."&&(m.length===0||x))&&(G===".."?m.pop():m.push(G));return!x&&o[0]!=="."&&m.$unshift("."),S=m.$join(re),l(x)&&(S=te(c,S)),S},-2),le(fe,"$expand_path",function(F,Ee){var re=this,U=Ie,m=Ie,s=Ie,n=Ie,i=Ie;return Ee==null&&(Ee=Ie),U=p("SEPARATOR"),m=q(),l(F[0]==="~"||Ee&&Ee[0]==="~")&&(s=p("Dir").$home(),l(s)||ne.$raise(We("ArgumentError"),"couldn't find HOME environment -- expanding `~'"),n=ze.test(s)?"":s.$sub(ae(["^([",m,"]+).*$"]),"\\1"),l(s["$start_with?"](n))||ne.$raise(We("ArgumentError"),"non-absolute home"),s=te(s,U),i=ae(["^\\~(?:",U,"|$)"]),F=F.$sub(i,s),l(Ee)&&(Ee=Ee.$sub(i,s))),re.$absolute_path(F,Ee)},-2);function ee(j){return l(j["$respond_to?"]("to_path"))&&(j=j.$to_path()),j=L["$coerce_to!"](j,We("String"),"to_str"),j}function q(){return p("ALT_SEPARATOR")===Ie?e.escape_regexp(p("SEPARATOR")):e.escape_regexp(te(p("SEPARATOR"),p("ALT_SEPARATOR")))}return le(fe,"$dirname",function(F,Ee){var re=this,U=Ie;if(Ee==null&&(Ee=1),P(Ee,0))return F;l(oe(Ee,0))&&ne.$raise(We("ArgumentError"),"level can't be negative"),U=q(),F=ee(F);var m=F.match(new RegExp("^["+U+"]")),s;return F=F.replace(new RegExp("["+U+"]+$"),""),F=F.replace(new RegExp("[^"+U+"]+$"),""),F=F.replace(new RegExp("["+U+"]+$"),""),F===""?s=m?"/":".":s=F,Ee==1?s:re.$dirname(s,me(Ee,1))},-2),le(fe,"$basename",function(F,Ee){var re=Ie;return Ee==null&&(Ee=Ie),re=q(),F=ee(F),F.length==0||(Ee!==Ie?Ee=L["$coerce_to!"](Ee,We("String"),"to_str"):Ee=null,F=F.replace(new RegExp("(.)["+re+"]*$"),"$1"),F=F.replace(new RegExp("^(?:.*["+re+"])?([^"+re+"]+)$"),"$1"),Ee===".*"?F=F.replace(/\.[^\.]+$/,""):Ee!==null&&(Ee=e.escape_regexp(Ee),F=F.replace(new RegExp(""+Ee+"$"),""))),F},-2),le(fe,"$extname",function(F){var Ee=this,re=Ie,U=Ie;return F=ee(F),re=Ee.$basename(F),l(re["$empty?"]())||(U=re["$[]"](Se(1,-1,!1)).$rindex("."),l(U["$nil?"]())||P(te(U,1),me(re.$length(),1)))?"":re["$[]"](e.Range.$new(te(U,1),-1,!1))}),le(fe,"$exist?",function(F){return e.modules[F]!=null}),le(fe,"$directory?",function(F){var Ee=Ie;Ee=[];for(var re in e.modules)Ee.push(re);return F=F.$gsub(ae(["(^.",p("SEPARATOR"),"+|",p("SEPARATOR"),"+$)"])),Le(Ee,"find",[],function(m){return m==null&&(m=Ie),m["$=~"](ae(["^",F]))})}),le(fe,"$join",function(F){var Ee,re,U=Ie;return Ee=je(arguments),re=Ee,l(re["$empty?"]())?"":(U="",re=Le(re.$flatten().$each_with_index(),"map",[],function(s,n){return s==null&&(s=Ie),n==null&&(n=Ie),P(n,0)&&l(s["$empty?"]())||P(re.$length(),te(n,1))&&l(s["$empty?"]())?p("SEPARATOR"):s}),re=Le(re,"reject",[],"empty?".$to_proc()),Le(re,"each_with_index",[],function(s,n){var i=Ie;return s==null&&(s=Ie),n==null&&(n=Ie),i=re["$[]"](te(n,1)),l(i["$nil?"]())?U=""+U+s:(l(s["$end_with?"](p("SEPARATOR")))&&l(i["$start_with?"](p("SEPARATOR")))&&(s=s.$sub(ae([p("SEPARATOR"),"+$"]),"")),U=l(s["$end_with?"](p("SEPARATOR")))||l(i["$start_with?"](p("SEPARATOR")))?""+U+s:""+U+s+p("SEPARATOR"))}),U)},-1),le(fe,"$split",function(F){return F.$split(p("SEPARATOR"))}),xe(fe,"realpath","expand_path"),xe(fe,"exists?","exist?")}(e.get_singleton_class(ye),de)}("::",We("IO"),O)};Opal.modules["corelib/process/base"]=function(e){var l=e.klass,v=e.slice,W=e.defs,L=e.return_val,ae=e.nil;return function(te,le){var ne=l(te,le,"Signal");return W(ne,"$trap",function(oe){return v(arguments),ae},-1)}("::",null),function(te,le){var ne=l(te,le,"GC");return W(ne,"$start",L(ae))}("::",null)};Opal.modules["corelib/process"]=function(e){var l=e.module,v=e.defs,W=e.truthy,L=e.return_val,ae=e.Kernel,te=e.nil,le=e.$$$;return e.add_stubs("const_set,size,<<,__register_clock__,to_f,now,new,[],raise"),function(ne){var P=l(ne,"Process"),oe=te;if(P.__clocks__=[],v(P,"$__register_clock__",function(Le,je){var xe=this;return xe.__clocks__==null&&(xe.__clocks__=te),xe.$const_set(Le,xe.__clocks__.$size()),xe.__clocks__["$<<"](je)}),P.$__register_clock__("CLOCK_REALTIME",function(){return Date.now()}),oe=!1,e.global.performance)oe=function(){return performance.now()};else if(e.global.process&&or.hrtime){var me=or.hrtime();oe=function(){var Se=or.hrtime(me),Le=Se[1]/1e3|0;return Se[0]*1e3+Le/1e3}}return W(oe)&&P.$__register_clock__("CLOCK_MONOTONIC",oe),v(P,"$pid",L(0)),v(P,"$times",function(){var Le=te;return Le=le("Time").$now().$to_f(),le(le("Benchmark"),"Tms").$new(Le,Le,Le,Le,Le)}),v(P,"$clock_gettime",function(Le,je){var xe=this,O=te;xe.__clocks__==null&&(xe.__clocks__=te),je==null&&(je="float_second"),W(O=xe.__clocks__["$[]"](Le))||ae.$raise(le(le("Errno"),"EINVAL"),"clock_gettime("+Le+") "+xe.__clocks__["$[]"](Le));var Ie=O();switch(je){case"float_second":return Ie/1e3;case"float_millisecond":return Ie/1;case"float_microsecond":return Ie*1e3;case"second":return Ie/1e3|0;case"millisecond":return Ie/1|0;case"microsecond":return Ie*1e3|0;case"nanosecond":return Ie*1e6|0;default:ae.$raise(le("ArgumentError"),"unexpected unit: "+je)}},-2)}("::")};Opal.modules["corelib/random/formatter"]=function(e){var l=e.klass,v=e.module,W=e.def,L=e.range,ae=e.send,te=e.rb_divide,le=e.Kernel,ne=e.Opal,P=[],oe=e.nil,me=e.$$$;return e.add_stubs("_verify_count,bytes,encode,strict_encode64,random_bytes,urlsafe_encode64,split,hex,[]=,[],map,to_proc,join,times,<<,|,ord,/,abs,random_float,raise,coerce_to!,flatten,new,random_number,length,include,extend"),function(Se,Le,je){var xe=l(Se,Le,"Random"),O=[xe].concat(je);return function(Ie,We){var Ne=v(Ie,"Formatter"),Fe=[Ne].concat(We),_e=e.$r(Fe);return W(Ne,"$hex",function(de){var ze=this;de==null&&(de=oe),de=me("Random").$_verify_count(de);for(var fe=ze.$bytes(de),ke="",ie=0;ie<de;ie++)ke+=fe.charCodeAt(ie).toString(16).padStart(2,"0");return ke.$encode("US-ASCII")},-1),W(Ne,"$random_bytes",function(de){var ze=this;return de==null&&(de=oe),ze.$bytes(de)},-1),W(Ne,"$base64",function(de){var ze=this;return de==null&&(de=oe),me("Base64").$strict_encode64(ze.$random_bytes(de)).$encode("US-ASCII")},-1),W(Ne,"$urlsafe_base64",function(de,ze){var fe=this;return de==null&&(de=oe),ze==null&&(ze=!1),me("Base64").$urlsafe_encode64(fe.$random_bytes(de),ze).$encode("US-ASCII")},-1),W(Ne,"$uuid",function(){var de=this,ze=oe;return ze=de.$hex(16).$split(""),ze["$[]="](12,"4"),ze["$[]="](16,(parseInt(ze["$[]"](16),16)&3|8).toString(16)),ze=[ze["$[]"](L(0,8,!0)),ze["$[]"](L(8,12,!0)),ze["$[]"](L(12,16,!0)),ze["$[]"](L(16,20,!0)),ze["$[]"](L(20,32,!0))],ze=ae(ze,"map",[],"join".$to_proc()),ze.$join("-")}),W(Ne,"$random_float",function(){var de=this,ze=oe,fe=oe;return ze=de.$bytes(4),fe=0,ae(4,"times",[],function(ie){return ie==null&&(ie=oe),fe=fe["$<<"](8),fe=fe["$|"](ze["$[]"](ie).$ord())}),te(fe.$abs(),2147483647)}),W(Ne,"$random_number",function(de){var ze=this;function fe(){return ze.$random_float()}function ke(p){return Math.floor(fe()*p)}function ie(){var p=de.begin,ee=de.end;if(p===oe||ee===oe)return oe;var q=ee-p;return q<0?oe:q===0?p:(ee%1===0&&p%1===0&&!de.excl&&q++,ke(q)+p)}return de==null?fe():de.$$is_range?ie():de.$$is_number?(de<=0&&le.$raise(me("ArgumentError"),"invalid argument - "+de),de%1===0?ke(de):fe()*de):(de=ne["$coerce_to!"](de,me("Integer"),"to_int"),de<=0&&le.$raise(me("ArgumentError"),"invalid argument - "+de),ke(de))},-1),W(Ne,"$alphanumeric",function(de){var ze=this,fe=oe;return de==null&&(de=oe),de=_e("Random").$_verify_count(de),fe=ae([L("0","9",!1),L("a","z",!1),L("A","Z",!1)],"map",[],"to_a".$to_proc()).$flatten(),ae(me("Array"),"new",[de],function ke(ie){var p=ke.$$s==null?this:ke.$$s;return fe["$[]"](p.$random_number(fe.$length()))},{$$s:ze}).$join()},-1)}(xe,O),xe.$include(me(me("Random"),"Formatter")),xe.$extend(me(me("Random"),"Formatter"))}("::",null,P)};Opal.modules["corelib/random/mersenne_twister"]=function(e){var l=e.klass,v=e.const_set,W=e.send,L=e.nil,ae=e.$$$,te=L;return e.add_stubs("generator="),te=function(){var le=624,ne=397,P=2567483615,oe=2147483648,me=2147483647,Se=function(Fe,_e){return Fe&oe|_e&me},Le=function(Fe,_e){return Se(Fe,_e)>>>1^(_e&1?P:0)};function je(Fe){var _e={left:0,next:le,state:new Array(le)};return xe(_e,Fe),_e}function xe(Fe,_e){var ye;for(Fe.state[0]=_e>>>0,ye=1;ye<le;ye++)Fe.state[ye]=1812433253*(Fe.state[ye-1]^Fe.state[ye-1]>>30>>>0)+ye,Fe.state[ye]&=4294967295;Fe.left=1,Fe.next=le}function O(Fe){var _e=0,ye=Fe.state,de;for(Fe.left=le,Fe.next=0,de=le-ne+1;--de;_e++)ye[_e]=ye[_e+ne]^Le(ye[_e+0],ye[_e+1]);for(de=ne;--de;_e++)ye[_e]=ye[_e+(ne-le)]^Le(ye[_e+0],ye[_e+1]);ye[_e]=ye[_e+(ne-le)]^Le(ye[_e+0],ye[0])}function Ie(Fe){var _e;return--Fe.left<=0&&O(Fe),_e=Fe.state[Fe.next++],_e^=_e>>>11,_e^=_e<<7&2636928640,_e^=_e<<15&4022730752,_e^=_e>>>18,_e>>>0}function We(Fe,_e){return Fe>>>=5,_e>>>=6,(Fe*67108864+_e)*(1/9007199254740992)}function Ne(Fe){var _e=Ie(Fe),ye=Ie(Fe);return We(_e,ye)}return{genrand_real:Ne,init:je}}(),function(le,ne){var P=l(le,ne,"Random"),oe,me=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1;return v(P,"MERSENNE_TWISTER_GENERATOR",{new_seed:function(){return Math.round(Math.random()*me)},reseed:function(Se){return te.init(Se)},rand:function(Se){return te.genrand_real(Se)}}),oe=[ae(P,"MERSENNE_TWISTER_GENERATOR")],W(P,"generator=",oe),oe[oe.length-1]}("::",null)};Opal.modules["corelib/random"]=function(e){var l=e.truthy,v=e.klass,W=e.Kernel,L=e.defs,ae=e.Opal,te=e.def,le=e.eqeqeq,ne=e.send,P=e.top,oe=e.nil,me=e.$$$;return e.add_stubs("require,attr_reader,to_int,raise,new_seed,coerce_to!,reseed,rand,seed,bytes,===,==,state,_verify_count,encode,join,new,chr,random_number,random_float,const_defined?,const_set"),P.$require("corelib/random/formatter"),function(Se,Le){var je=v(Se,Le,"Random");return je.$attr_reader("seed","state"),L(je,"$_verify_count",function(O){return l(O)||(O=16),typeof O!="number"&&(O=O.$to_int()),O<0&&W.$raise(me("ArgumentError"),"negative string size (or size too big)"),O=Math.floor(O),O}),te(je,"$initialize",function(O){var Ie=this;return O==null&&(O=me("Random").$new_seed()),O=ae["$coerce_to!"](O,me("Integer"),"to_int"),Ie.state=O,Ie.$reseed(O)},-1),te(je,"$reseed",function(O){var Ie=this;return Ie.seed=O,Ie.$rng=e.$$rand.reseed(O)}),L(je,"$new_seed",function(){return e.$$rand.new_seed()}),L(je,"$rand",function(O){var Ie=this;return me(Ie,"DEFAULT").$rand(O)},-1),L(je,"$srand",function(O){var Ie=this,We=oe;return O==null&&(O=me("Random").$new_seed()),O=ae["$coerce_to!"](O,me("Integer"),"to_int"),We=me(Ie,"DEFAULT").$seed(),me(Ie,"DEFAULT").$reseed(O),We},-1),L(je,"$urandom",function(O){return me("SecureRandom").$bytes(O)}),te(je,"$==",function(O){var Ie=this,We=oe;return le(me("Random"),O)?l(We=Ie.$seed()["$=="](O.$seed()))?Ie.$state()["$=="](O.$state()):We:!1}),te(je,"$bytes",function(O){var Ie=this;return O=me("Random").$_verify_count(O),ne(me("Array"),"new",[O],function We(){var Ne=We.$$s==null?this:We.$$s;return Ne.$rand(255).$chr()},{$$s:Ie}).$join().$encode("ASCII-8BIT")}),L(je,"$bytes",function(O){var Ie=this;return me(Ie,"DEFAULT").$bytes(O)}),te(je,"$rand",function(O){var Ie=this;return Ie.$random_number(O)},-1),te(je,"$random_float",function(){var O=this;return O.state++,e.$$rand.rand(O.$rng)}),L(je,"$random_float",function(){var O=this;return me(O,"DEFAULT").$random_float()}),L(je,"$generator=",function(O){var Ie=this;return e.$$rand=O,l(Ie["$const_defined?"]("DEFAULT"))?me(Ie,"DEFAULT").$reseed():Ie.$const_set("DEFAULT",Ie.$new(Ie.$new_seed()))})}("::",null),P.$require("corelib/random/mersenne_twister")};Opal.modules["corelib/unsupported"]=function(e){var l=e.Kernel,v=e.klass,W=e.send,L=e.slice,ae=e.module,te=e.def,le=e.return_val,ne=e.alias,P=e.defs,oe=e.top,me=[],Se=e.nil,Le=e.$$$;e.add_stubs("raise,warn,each,define_method,%,public,private_method_defined?,private_class_method,instance_method,instance_methods,method_defined?,private_methods");var je={};function xe(Ie){switch(e.config.unsupported_features_severity){case"error":l.$raise(Le("NotImplementedError"),Ie);break;case"warning":O(Ie);break}}function O(Ie){je[Ie]||(je[Ie]=!0,oe.$warn(Ie))}return function(Ie,We){var Ne=v(Ie,We,"String"),Fe="String#%s not supported. Mutable String methods are not supported in Opal.";return W(["<<","capitalize!","chomp!","chop!","downcase!","gsub!","lstrip!","next!","reverse!","slice!","squeeze!","strip!","sub!","succ!","swapcase!","tr!","tr_s!","upcase!","prepend","[]=","clear","encode!","unicode_normalize!"],"each",[],function _e(ye){var de=_e.$$s==null?this:_e.$$s;return ye==null&&(ye=Se),W(de,"define_method",[ye],function(fe){return L(arguments),l.$raise(Le("NotImplementedError"),Fe["$%"](ye))},-1)},{$$s:Ne})}("::",null),function(Ie){var We=ae(Ie,"Kernel"),Ne="Object tainting is not supported by Opal";return te(We,"$taint",function(){var _e=this;return xe(Ne),_e}),te(We,"$untaint",function(){var _e=this;return xe(Ne),_e}),te(We,"$tainted?",function(){return xe(Ne),!1})}("::"),function(Ie,We){var Ne=v(Ie,We,"Module");return te(Ne,"$public",function(_e){var ye,de,ze=this;return ye=L(arguments),de=ye,de.length===0?(ze.$$module_function=!1,Se):de.length===1?de[0]:de},-1),te(Ne,"$private_class_method",function(_e){var ye,de;return ye=L(arguments),de=ye,de.length===1?de[0]:de},-1),te(Ne,"$private_method_defined?",le(!1)),te(Ne,"$private_constant",function(_e){return L(arguments),Se},-1),ne(Ne,"nesting","public"),ne(Ne,"private","public"),ne(Ne,"protected","public"),ne(Ne,"protected_method_defined?","private_method_defined?"),ne(Ne,"public_class_method","private_class_method"),ne(Ne,"public_instance_method","instance_method"),ne(Ne,"public_instance_methods","instance_methods"),ne(Ne,"public_method_defined?","method_defined?")}("::",null),function(Ie){var We=ae(Ie,"Kernel");return te(We,"$private_methods",function(Fe){return L(arguments),[]},-1),ne(We,"protected_methods","private_methods"),ne(We,"private_instance_methods","private_methods"),ne(We,"protected_instance_methods","private_methods")}("::"),function(Ie,We){var Ne=ae(Ie,"Kernel"),Fe=[Ne].concat(We),_e=e.$r(Fe);return te(Ne,"$eval",function(de){return L(arguments),l.$raise(Le("NotImplementedError"),"To use Kernel#eval, you must first require 'opal-parser'. "+("See https://github.com/opal/opal/blob/"+_e("RUBY_ENGINE_VERSION")+"/docs/opal_parser.md for details."))},-1)}("::",me),P(oe,"$public",function(We){var Ne,Fe;return Ne=L(arguments),Fe=Ne,Fe.length===1?Fe[0]:Fe},-1),P(oe,"$private",function(We){var Ne,Fe;return Ne=L(arguments),Fe=Ne,Fe.length===1?Fe[0]:Fe},-1)};Opal.queue(function(e){var l=e.Object;return e.nil,e.add_stubs("require,autoload"),l.$require("opal/base"),l.$require("opal/mini"),l.$require("corelib/kernel/format"),l.$require("corelib/string/encoding"),l.$autoload("Math","corelib/math"),l.$require("corelib/complex/base"),l.$autoload("Complex","corelib/complex"),l.$require("corelib/rational/base"),l.$autoload("Rational","corelib/rational"),l.$require("corelib/time"),l.$autoload("Struct","corelib/struct"),l.$autoload("Set","corelib/set"),l.$autoload("Dir","corelib/dir"),l.$autoload("File","corelib/file"),l.$require("corelib/process/base"),l.$autoload("Process","corelib/process"),l.$autoload("Random","corelib/random"),l.$require("corelib/unsupported")});function Oi(e){Opal.modules["asciidoctor/js/opal_ext/browser/file"]=function(t){var g=t.klass,u=t.defs,$=[];return t.nil,t.add_stubs("new"),function(E,a,k){var pe=g(E,a,"File"),N=[pe].concat(k),ve=t.$r(N);return u(pe,"$read",function(Ge){var he="",Ue=-1;try{var Ae=new XMLHttpRequest;Ae.open("GET",Ge,!1),Ae.addEventListener("load",function(){Ue=this.status,(Ue===0||Ue===200)&&(he=this.responseText)}),Ae.overrideMimeType("text/plain"),Ae.send()}catch(Be){throw ve("IOError").$new("Error reading file or directory: "+Ge+"; reason: "+Be.message)}if(Ue===404||Ue===0&&!he)throw ve("IOError").$new("No such file or directory: "+Ge);return he})}($[0],null,$)},Opal.modules["asciidoctor/js/opal_ext/browser"]=function(t){var g=t.const_set,u=t.top,$=[];t.nil,t.add_stubs("require");var E,a,k,pe;if(typeof e=="object"&&typeof e.runtime=="object"){var N=e.runtime;E=N.platform,a=N.engine,k=N.framework,pe=N.ioModule}return pe=pe||"xmlhttprequest",E=E||"browser",a=a||"",k=k||"",g($[0],"JAVASCRIPT_IO_MODULE",pe),g($[0],"JAVASCRIPT_PLATFORM",E),g($[0],"JAVASCRIPT_ENGINE",a),g($[0],"JAVASCRIPT_FRAMEWORK",k),u.$require("asciidoctor/js/opal_ext/browser/file")},Opal.modules["asciidoctor/js/asciidoctor_ext/browser/abstract_node"]=function(t){var g=t.module,u=t.klass,$=t.hash2,E=t.truthy,a=t.def,k=[],pe=t.nil,N=t.$$$;return t.add_stubs("web_path,path_resolver,uriish?,[],attr?,start_with?,descends_from?,base_dir,join,prepare_source_string,read,fetch,warn,logger,normalize_system_path,read_asset"),function(ve,w){var Ge=g(ve,"Asciidoctor"),he=[Ge].concat(w);return function(Ue,Ae,Be){var st=u(Ue,Ae,"AbstractNode"),Me=[st].concat(Be),et=t.$r(Me),Pe=st.$$prototype;return Pe.document=pe,a(st,"$read_contents",function(it,C){var Xe=this,y=pe,Ze=pe,rt=pe;if(C==null&&(C=$([],{})),y=Xe.document,E(et("Helpers")["$uriish?"](it))||E(Ze=C["$[]"]("start"))&&E(et("Helpers")["$uriish?"](Ze))&&E(it=y.$path_resolver().$web_path(it,Ze)))if(E(y.$path_resolver()["$descends_from?"](it,y.$base_dir()))||E(it["$start_with?"]("chrome://"))||E(y["$attr?"]("allow-uri-read")))try{return E(C["$[]"]("normalize"))?et("Helpers").$prepare_source_string(N("File").$read(it)).$join(et("LF")):N("File").$read(it)}catch(H){if(t.rescue(H,[et("StandardError")]))try{return E(C.$fetch("warn_on_failure",!0))&&Xe.$logger().$warn("could not retrieve contents of "+(E(rt=C["$[]"]("label"))?rt:"asset")+" at URI: "+it),pe}finally{t.pop_exception()}else throw H}else return E(C.$fetch("warn_on_failure",!0))&&Xe.$logger().$warn("cannot retrieve contents of "+(E(rt=C["$[]"]("label"))?rt:"asset")+" at URI: "+it+" (allow-uri-read attribute not enabled)"),pe;else return it=Xe.$normalize_system_path(it,C["$[]"]("start"),pe,$(["target_name"],{target_name:E(rt=C["$[]"]("label"))?rt:"asset"})),Xe.$read_asset(it,$(["normalize","warn_on_failure","label"],{normalize:C["$[]"]("normalize"),warn_on_failure:C.$fetch("warn_on_failure",!0),label:C["$[]"]("label")}))},-2),a(st,"$generate_data_uri_from_uri",function(it,C){var Xe=this,y="",Ze="",rt=-1;try{var H=new XMLHttpRequest;H.open("GET",it,!1),H.overrideMimeType("text/plain; charset=x-user-defined"),H.addEventListener("load",function(){if(rt=this.status,rt===0||rt===200){for(var T="",De=this.responseText,ue=0,we=De.length;ue<we;++ue){var ge=De.charCodeAt(ue),Z=ge&255;T+=String.fromCharCode(Z)}Ze=btoa(T),y=this.getResponseHeader("content-type")}}),H.send(null),y||(it.endsWith(".jpeg")||it.endsWith(".jpg")||it.endsWith(".jpe")?y="image/jpg":it.endsWith(".png")?y="image/png":it.endsWith(".svg")?y="image/svg+xml":it.endsWith(".bmp")?y="image/bmp":(it.endsWith(".tif")||it.endsWith(".tiff"))&&(y="image/tiff"))}catch{rt=0}return rt===404||rt===0&&(!Ze||!y)?(Xe.$logger().$warn("could not retrieve image data from URI: "+it),it):"data:"+y+";base64,"+Ze},-2)}(he[0],null,he)}(k[0],k)},Opal.modules["asciidoctor/js/asciidoctor_ext/browser/open_uri"]=function(t){var g=t.module,u=t.slice,$=t.send,E=t.to_a,a=t.defs,k=[],pe=t.nil;return t.add_stubs("new,path"),function(N,ve){var w=g(N,"OpenURI"),Ge=[w].concat(ve),he=t.$r(Ge);return a(he("OpenURI"),"$open_uri",function Ue(Ae,Be){var st,Me,et=Ue.$$p||pe,Pe=this,Ve=pe;return Ue.$$p=null,st=u(arguments,1),Me=st,Ve=$(he("File"),"new",[Pe.$path()].concat(E(Me))),et!==pe?t.yield1(et,Ve):Ve},-2)}(k[0],k)},Opal.modules["asciidoctor/js/asciidoctor_ext/browser/path_resolver"]=function(t){var g=t.module,u=t.klass,$=t.truthy,E=t.def,a=[],k=t.nil;return t.add_stubs("absolute_path?,start_with?"),function(pe,N){var ve=g(pe,"Asciidoctor"),w=[ve].concat(N);return function(Ge,he){var Ue=u(Ge,he,"PathResolver");return E(Ue,"$root?",function(Be){var st=this,Me=k;return $(Me=st["$absolute_path?"](Be))?Me:Be["$start_with?"]("file://","http://","https://","chrome://")})}(w[0],null)}(a[0],a)},Opal.modules["asciidoctor/js/asciidoctor_ext/browser/reader"]=function(t){var g=t.module,u=t.klass,$=t.truthy,E=t.eqeq,a=t.not,k=t.def,pe=[],N=t.nil;return t.add_stubs("posixify,new,base_dir,start_with?,uriish?,key?,attributes,descends_from?,replace_next_line,absolute_path?,==,empty?,!,slice,length"),function(ve,w){var Ge=g(ve,"Asciidoctor"),he=[Ge].concat(w),Ue=t.$r(he);return function(Ae,Be,st){var Me=u(Ae,Be,"PreprocessorReader"),et=[Me].concat(st),Pe=t.$r(et),Ve=Me.$$prototype;return Ve.path_resolver=Ve.document=Ve.include_stack=Ve.dir=N,k(Me,"$resolve_include_path",function(C,Xe,y){var Ze,rt=this,H=N,T=N,De=N,ue=N,we=N,ge=N,Z=N,$e=N;if(H=(rt.path_resolver=$(T=rt.path_resolver)?T:Pe("PathResolver").$new("\\")).$posixify(C),Ze=["file",rt.document.$base_dir()],Ze[0],De=Ze[1],$(H["$start_with?"]("file://")))ue=we=H;else if($(Pe("Helpers")["$uriish?"](H))){if(!($(rt.path_resolver["$descends_from?"](H,De))||$(rt.document.$attributes()["$key?"]("allow-uri-read"))))return rt.$replace_next_line("link:"+C+"["+Xe+"]");ue=we=H}else if($(rt.path_resolver["$absolute_path?"](H)))ue=we="file://"+($(H["$start_with?"]("/"))?"":"/")+H;else if(E(ge=$(Z=rt.include_stack["$empty?"]())?De:rt.dir,"."))ue=we=H;else if($(ge["$start_with?"]("file://"))||a(Pe("Helpers")["$uriish?"](ge)))ue=""+ge+"/"+H,$(Z)?we=H:E(De,".")||a($e=rt.path_resolver["$descends_from?"](ue,De))?we=ue:we=ue.$slice($e,ue.$length());else if($(Z))ue=""+ge+"/"+(we=H);else if($($e=rt.path_resolver["$descends_from?"](ge,De))||$(rt.document.$attributes()["$key?"]("allow-uri-read")))ue=""+ge+"/"+H,we=$($e)?ue.$slice($e,ue.$length()):H;else return rt.$replace_next_line("link:"+C+"["+Xe+"]");return[ue,"file",we]})}(he[0],Ue("Reader"),he)}(pe[0],pe)},Opal.modules["asciidoctor/js/asciidoctor_ext/browser"]=function(t){var g=t.eqeq,u=t.top,$=[],E=t.$r($),a=t.nil;return t.add_stubs("==,require"),g(E("JAVASCRIPT_IO_MODULE"),"xmlhttprequest")?(u.$require("asciidoctor/js/asciidoctor_ext/browser/abstract_node"),u.$require("asciidoctor/js/asciidoctor_ext/browser/open_uri"),u.$require("asciidoctor/js/asciidoctor_ext/browser/path_resolver"),u.$require("asciidoctor/js/asciidoctor_ext/browser/reader")):a},Opal.modules.set=Opal.return_val(Opal.nil),Opal.modules["asciidoctor/js/opal_ext/kernel"]=function(t){var g=t.module,u=t.slice,$=t.send,E=t.to_a,a=t.def,k=t.return_val,pe=[],N=t.nil;return t.add_stubs("new"),function(ve,w){var Ge=g(ve,"Kernel"),he=[Ge].concat(w),Ue=t.$r(he);return a(Ge,"$open",function Ae(Be,st){var Me,et,Pe=Ae.$$p||N,Ve=N;return Ae.$$p=null,Me=u(arguments,1),et=Me,Ve=$(Ue("File"),"new",[Be].concat(E(et))),Pe!==N?t.yield1(Pe,Ve):Ve},-2),a(Ge,"$__dir__",k(""))}(pe[0],pe)},Opal.modules["asciidoctor/js/opal_ext/file"]=function(t){var g=t.klass,u=t.def,$=t.truthy,E=t.gvars,a=t.return_val,k=t.defs,pe=[],N=t.nil;return t.add_stubs("attr_reader,delete,gsub,read,size,to_enum,chomp,each_line,readlines,split"),function(ve,w,Ge){var he=g(ve,w,"File"),Ue=[he].concat(Ge),Ae=t.$r(Ue),Be=he.$$prototype;return Be.eof=Be.path=N,he.$attr_reader("eof"),he.$attr_reader("lineno"),he.$attr_reader("path"),u(he,"$initialize",function(Me,et){var Pe=this,Ve=N;return et==null&&(et="r"),Pe.path=Me,Pe.contents=N,Pe.eof=!1,Pe.lineno=0,et=et.$delete("b"),Ve=/:(.*)/,et=et.$gsub(Ve,""),Pe.flags=et},-2),u(he,"$read",function(){var Me=this,et=N;return $(Me.eof)?"":(et=Ae("File").$read(Me.path),Me.eof=!0,Me.lineno=et.$size(),et)}),u(he,"$each_line",function st(Me){var et=st.$$p||N,Pe=this,Ve=N;if(E["/"]==null&&(E["/"]=N),st.$$p=null,Me==null&&(Me=E["/"]),$(Pe.eof))return et!==N?Pe:[].$to_enum();if(et!==N){Ve=Ae("File").$read(Pe.path),Pe.eof=!1,Pe.lineno=0;for(var it=Ve.$chomp(),C=Ve.length!=it.length,Xe=it.split(Me),y=0,Ze=Xe.length;y<Ze;y++)Pe.lineno+=1,y<Ze-1||C?t.yield1(et,Xe[y]+Me):t.yield1(et,Xe[y]);return Pe.eof=!0,Pe}else return Pe.$read().$each_line()},-1),u(he,"$readlines",function(){var Me=this;return Ae("File").$readlines(Me.path)}),function(st,Me){var et=[st].concat(Me),Pe=t.$r(et);return u(st,"$readlines",function(it,C){var Xe=N;return E["/"]==null&&(E["/"]=N),C==null&&(C=E["/"]),Xe=Pe("File").$read(it),Xe.$split(C)},-2),u(st,"$file?",a(!0)),u(st,"$readable?",a(!0)),u(st,"$read",a(""))}(t.get_singleton_class(he),Ue)}(pe[0],null,pe),function(ve,w,Ge){var he=g(ve,w,"IO"),Ue=[he].concat(Ge),Ae=t.$r(Ue);return k(he,"$read",function(st){return Ae("File").$read(st)})}(pe[0],null,pe)},Opal.modules["asciidoctor/js/opal_ext/match_data"]=function(t){var g=t.klass,u=t.send,$=t.def,E=[],a=t.nil;return t.add_stubs("[]="),function(k,pe){var N=g(k,pe,"MatchData"),ve=N.$$prototype;return ve.matches=a,$(N,"$[]=",function(Ge,he){var Ue,Ae=this;return Ue=[Ge,he],u(Ae.matches,"[]=",Ue),Ue[Ue.length-1]})}(E[0],null)},Opal.modules["asciidoctor/js/opal_ext/string"]=function(t){var g=t.klass,u=t.truthy,$=t.rb_lt,E=t.def,a=t.alias,k=t.rb_ge,pe=t.eqeq,N=t.rb_minus,ve=[],w=t.nil;return t.add_stubs("method_defined?,<,length,bytes,to_s,byteslice,limit_bytesize,>=,==,-,_original_byteslice,unpack,_original_unpack"),function(Ge,he){var Ue=g(Ge,he,"String");return u(Ue["$method_defined?"]("limit_bytesize"))||E(Ue,"$limit_bytesize",function(Be){var st=this,Me=w;return u($(Be,st.$bytes().$length()))?(Me=st.$byteslice(0,Be),Me.$to_s()):st.$to_s()}),u(Ue["$method_defined?"]("limit"))||a(Ue,"limit","limit_bytesize"),a(Ue,"_original_byteslice","byteslice"),E(Ue,"$byteslice",function(Be,st){var Me=this;return st==null&&(st=1),pe(Be,3)&&u(k(st,Be))&&u(Me.charCodeAt()===65279)?Me.substr(1).$byteslice(0,N(st,3)):Me.$_original_byteslice(Be,st)},-2),a(Ue,"_original_unpack","unpack"),E(Ue,"$unpack",function(Be){var st=this;if(pe(Be,"C3")){if(u(st.charCodeAt()===65279))return[239,187,191];for(var Me=[],et=0;et<3;et++)et<st.length?Me.push(st.charCodeAt(et)):Me.push(w);return Me}else return st.$_original_unpack(Be)})}(ve[0],null)},Opal.modules["asciidoctor/js/opal_ext/uri"]=function(t){var g=t.module,u=t.defs,$=t.return_self,E=t.def,a=[];return t.nil,t.add_stubs("extend"),function(k,pe){var N=g(k,"URI"),ve=[N].concat(pe),w=t.$r(ve);return u(N,"$parse",function(he){return he.$extend(w("URI"))}),E(N,"$path",$)}(a[0],a)},Opal.modules["asciidoctor/js/opal_ext/base64"]=function(t){var g=t.module,u=t.defs,$=t.ensure_kwargs,E=t.truthy,a=[],k=t.nil;return t.add_stubs("delete"),function(pe){var N=g(pe,"Base64"),ve,w;return ve=t.global.btoa||function(Ge){var he;return Ge instanceof Ur?he=Ge:he=Ur.from(Ge.toString(),"binary"),he.toString("base64")},w=t.global.atob||function(Ge){return Ur.from(Ge,"base64").toString("binary")},u(N,"$decode64",function(he){return w(he.replace(/\r?\n/g,""))}),u(N,"$encode64",function(he){return ve(he).replace(/(.{60})/g,`$1
`).replace(/([^\n])$/g,`$1
`)}),u(N,"$strict_decode64",function(he){return w(he)}),u(N,"$strict_encode64",function(he){return ve(he)}),u(N,"$urlsafe_decode64",function(he){return w(he.replace(/\-/g,"+").replace(/_/g,"/"))}),u(N,"$urlsafe_encode64",function(he,Ue){var Ae,Be=k;return Ue=$(Ue),Ae=Ue.$$smap.padding,Ae==null&&(Ae=!0),Be=ve(he).replace(/\+/g,"-").replace(/\//g,"_"),E(Ae)||(Be=Be.$delete("=")),Be},-2)}(a[0])},Opal.modules["asciidoctor/js/opal_ext/number"]=function(t){var g=t.klass,u=t.truthy,$=t.rb_gt,E=t.def,a=[],k=t.$r(a);return t.nil,t.add_stubs("coerce_to!,>"),function(pe,N,ve){var w=g(pe,N,"Number"),Ge=[w].concat(ve),he=t.$r(Ge);return E(w,"$round",function(Ae){var Be=this;return Ae=he("Opal")["$coerce_to!"](Ae,he("Integer"),"to_int"),u($(Ae,0))?Number(Be.toFixed(Ae)):Math.round(Be)},-1)}(a[0],k("Numeric"),a)},Opal.modules["asciidoctor/js/opal_ext"]=function(t){var g=t.top;t.nil,t.add_stubs("require"),g.$require("asciidoctor/js/opal_ext/kernel"),g.$require("asciidoctor/js/opal_ext/file"),g.$require("asciidoctor/js/opal_ext/match_data"),g.$require("asciidoctor/js/opal_ext/string"),g.$require("asciidoctor/js/opal_ext/uri"),g.$require("asciidoctor/js/opal_ext/base64"),g.$require("asciidoctor/js/opal_ext/number"),t.config.unsupported_features_severity="ignore",g.$require("asciidoctor/js/opal_ext/browser")},Opal.modules["asciidoctor/js/rx"]=function(t){var g=t.module,u=t.const_set,$=t.send,E=t.gvars,a=t.truthy,k=t.defs,pe=t.rb_plus,N=[],ve=t.nil;return t.add_stubs("gsub,+,unpack_hex_range"),function(w,Ge){var he=g(w,"Asciidoctor"),Ue=[he].concat(Ge),Ae=t.$r(Ue);return u(Ue[0],"HEX_RANGE_RX",/([A-F0-9]{4})(?:-([A-F0-9]{4}))?/),k(he,"$unpack_hex_range",function(st){return $(st,"gsub",[Ae("HEX_RANGE_RX")],function(){var et,Pe=ve;return"\\u"+((et=E["~"])===ve?ve:et["$[]"](1))+(a(Pe=(et=E["~"])===ve?ve:et["$[]"](2))?"-\\u"+((et=E["~"])===ve?ve:et["$[]"](2)):Pe)})}),u(Ue[0],"P_L",pe("A-Za-z",he.$unpack_hex_range("00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D037F03860388-038A038C038E-03A103A3-03F503F7-0481048A-052F0531-055605590561-058705D0-05EA05F0-05F20620-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280840-085808A0-08B20904-0939093D09500958-09610971-09800985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10CF10CF20D05-0D0C0D0E-0D100D12-0D3A0D3D0D4E0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC-0EDF0F000F40-0F470F49-0F6C0F88-0F8C1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510C710CD10D0-10FA10FC-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA16F1-16F81700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191E1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1BBA-1BE51C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11CF51CF61D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209C21022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2CF22CF32D00-2D252D272D2D2D30-2D672D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31BA31F0-31FF3400-4DB54E00-9FCCA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A66EA67F-A69DA6A0-A6E5A717-A71FA722-A788A78B-A78EA790-A7ADA7B0A7B1A7F7-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFA9E0-A9E4A9E6-A9EFA9FA-A9FEAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA7E-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDAAE0-AAEAAAF2-AAF4AB01-AB06AB09-AB0EAB11-AB16AB20-AB26AB28-AB2EAB30-AB5AAB5C-AB5FAB64AB65ABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC"))),u(Ue[0],"P_Nl",he.$unpack_hex_range("16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF")),u(Ue[0],"P_Nd",pe("0-9",he.$unpack_hex_range("0660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0DE6-0DEF0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19D91A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9A9F0-A9F9AA50-AA59ABF0-ABF9FF10-FF19"))),u(Ue[0],"P_Pc",he.$unpack_hex_range("005F203F20402054FE33FE34FE4D-FE4FFF3F")),u(Ue[0],"CC_ALPHA",""+Ae("P_L")+Ae("P_Nl")),u(Ue[0],"CG_ALPHA","["+Ae("CC_ALPHA")+"]"),u(Ue[0],"CC_ALNUM",""+Ae("CC_ALPHA")+Ae("P_Nd")),u(Ue[0],"CG_ALNUM","["+Ae("CC_ALNUM")+"]"),u(Ue[0],"CC_WORD",""+Ae("CC_ALNUM")+Ae("P_Pc")),u(Ue[0],"CG_WORD","["+Ae("CC_WORD")+"]"),u(Ue[0],"CG_BLANK","[ \\t]"),u(Ue[0],"CC_EOL","(?=\\n|$)"),u(Ue[0],"CG_GRAPH","[^\\s\\x00-\\x1F\\x7F]"),u(Ue[0],"CC_ALL","[\\s\\S]"),u(Ue[0],"CC_ANY","[^\\n]")}(N[0],N)},Opal.modules.strscan=function(t){var g=t.klass,u=t.def,$=t.truthy,E=t.eqeqeq,a=t.Opal,k=t.return_ivar,pe=t.send,N=t.alias,ve=[],w=t.nil;return t.add_stubs("attr_reader,anchor,empty?,===,to_s,coerce_to!,scan_until,length,size,rest,pos=,beginning_of_line?,get_byte,private"),function(Ge,he,Ue){var Ae=g(Ge,he,"StringScanner"),Be=[Ae].concat(Ue),st=t.$r(Be),Me=Ae.$$prototype;return Me.pos=Me.string=Me.working=Me.matched=Me.prev_pos=Me.match=w,Ae.$attr_reader("pos","matched"),u(Ae,"$initialize",function(Pe){var Ve=this;return Ve.string=Pe,Ve.pos=0,Ve.matched=w,Ve.working=Pe,Ve.match=[]}),Ae.$attr_reader("string"),u(Ae,"$beginning_of_line?",function(){var Pe=this;return Pe.pos===0||Pe.string.charAt(Pe.pos-1)===`
`}),u(Ae,"$scan",function(Pe){var Ve=this;Pe=Ve.$anchor(Pe);var it=Pe.exec(Ve.working);return it==null?Ve.matched=w:(Ve.prev_pos=Ve.pos,Ve.pos+=it[0].length,Ve.working=Ve.working.substring(it[0].length),Ve.matched=it[0],Ve.match=it,it[0])}),u(Ae,"$scan_until",function(Pe){var Ve=this;Pe=Ve.$anchor(Pe);for(var it=Ve.working,C=0;it.length!=C;++C){var Xe=Pe.exec(it.substr(C));if(Xe!==null){var y=C+Xe[0].length,Ze=it.substr(0,y);return Ve.matched=Xe[0],Ve.match=Xe,Ve.prev_pos=Ve.pos+C,Ve.pos+=y,Ve.working=it.substr(y),Ze}}return Ve.matched=w}),u(Ae,"$[]",function(Pe){var Ve=this,it=w;if($(Ve.match["$empty?"]()))return w;E(st("Symbol"),it=Pe)?Pe=Pe.$to_s():E(st("String"),it)||(Pe=a["$coerce_to!"](Pe,st("Integer"),"to_int"));var C=Ve.match;return Pe<0&&(Pe+=C.length),Pe<0||Pe>=C.length||C[Pe]==null?w:C[Pe]}),u(Ae,"$check",function(Pe){var Ve=this;Pe=Ve.$anchor(Pe);var it=Pe.exec(Ve.working);return it==null?Ve.matched=w:Ve.matched=it[0]}),u(Ae,"$check_until",function(Pe){var Ve=this,it=Ve.prev_pos,C=Ve.pos,Xe=Ve.working,y=Ve.$scan_until(Pe);return Ve.prev_pos=it,Ve.pos=C,Ve.working=Xe,y}),u(Ae,"$peek",function(Pe){var Ve=this;return Ve.working.substring(0,Pe)}),u(Ae,"$eos?",function(){var Pe=this;return Pe.working.length===0}),u(Ae,"$exist?",function(Pe){var Ve=this,it=Pe.exec(Ve.working);return it==null?w:it.index==0?0:it.index+1}),u(Ae,"$skip",function(Pe){var Ve=this;Pe=Ve.$anchor(Pe);var it=Pe.exec(Ve.working);if(it==null)return Ve.match=[],Ve.matched=w;var C=it[0],Xe=C.length;return Ve.matched=C,Ve.match=it,Ve.prev_pos=Ve.pos,Ve.pos+=Xe,Ve.working=Ve.working.substring(Xe),Xe}),u(Ae,"$skip_until",function(Pe){var Ve=this,it=Ve.$scan_until(Pe);return it===w?w:(Ve.matched=it.substr(-1),it.length)}),u(Ae,"$get_byte",function(){var Pe=this,Ve=w;return Pe.pos<Pe.string.length?(Pe.prev_pos=Pe.pos,Pe.pos+=1,Ve=Pe.matched=Pe.working.substring(0,1),Pe.working=Pe.working.substring(1)):Pe.matched=w,Ve}),u(Ae,"$match?",function(Pe){var Ve=this;Pe=Ve.$anchor(Pe);var it=Pe.exec(Ve.working);return it==null?w:(Ve.prev_pos=Ve.pos,it[0].length)}),u(Ae,"$pos=",function(Pe){var Ve=this;return Pe<0&&(Pe+=Ve.string.$length()),Ve.pos=Pe,Ve.working=Ve.string.slice(Pe)}),u(Ae,"$matched_size",function(){var Pe=this;return Pe.matched===w?w:Pe.matched.length}),u(Ae,"$post_match",function(){var Pe=this;return Pe.matched===w?w:Pe.string.substr(Pe.pos)}),u(Ae,"$pre_match",function(){var Pe=this;return Pe.matched===w?w:Pe.string.substr(0,Pe.prev_pos)}),u(Ae,"$reset",function(){var Pe=this;return Pe.working=Pe.string,Pe.matched=w,Pe.pos=0}),u(Ae,"$rest",k("working")),u(Ae,"$rest?",function(){var Pe=this;return Pe.working.length!==0}),u(Ae,"$rest_size",function(){var Pe=this;return Pe.$rest().$size()}),u(Ae,"$terminate",function(){var Pe,Ve=this;return Ve.match=w,Pe=[Ve.string.$length()],pe(Ve,"pos=",Pe),Pe[Pe.length-1]}),u(Ae,"$unscan",function(){var Pe=this;return Pe.pos=Pe.prev_pos,Pe.prev_pos=w,Pe.match=w,Pe}),N(Ae,"bol?","beginning_of_line?"),N(Ae,"getch","get_byte"),Ae.$private(),u(Ae,"$anchor",function(Pe){var Ve=Pe.toString().match(/\/([^\/]+)$/);return Ve=Ve?Ve[1]:void 0,new RegExp("^(?:"+Pe.source+")",Ve)})}(ve[0],null,ve)},Opal.modules["asciidoctor/js"]=function(t){var g=t.top;return t.nil,t.add_stubs("require"),g.$require("asciidoctor/js/opal_ext"),g.$require("asciidoctor/js/rx"),g.$require("strscan")},Opal.modules["asciidoctor/core_ext/nil_or_empty"]=function(t){var g=t.klass,u=t.truthy,$=t.alias,E=[],a=t.nil;return t.add_stubs("method_defined?,nil?,empty?"),function(k,pe){var N=g(k,pe,"NilClass");return u(N["$method_defined?"]("nil_or_empty?"))?a:$(N,"nil_or_empty?","nil?")}(E[0],null),function(k,pe){var N=g(k,pe,"String");return u(N["$method_defined?"]("nil_or_empty?"))?a:$(N,"nil_or_empty?","empty?")}(E[0],null),function(k,pe){var N=g(k,pe,"Array");return u(N["$method_defined?"]("nil_or_empty?"))?a:$(N,"nil_or_empty?","empty?")}(E[0],null),function(k,pe){var N=g(k,pe,"Hash");return u(N["$method_defined?"]("nil_or_empty?"))?a:$(N,"nil_or_empty?","empty?")}(E[0],null),function(k,pe){var N=g(k,pe,"Numeric");return u(N["$method_defined?"]("nil_or_empty?"))?a:$(N,"nil_or_empty?","nil?")}(E[0],null)},Opal.modules["asciidoctor/core_ext/hash/merge"]=function(t){var g=t.eqeq,u=t.send,$=t.slice,E=t.truthy,a=t.rb_lt,k=t.rb_gt,pe=t.send2,N=t.find_super,ve=t.def,w=t.top,Ge=[],he=t.$r(Ge),Ue=t.nil;return t.add_stubs("==,arity,instance_method,send,new,<,length,dup,>,inject,merge,[]"),g(he("Hash").$instance_method("merge").$arity(),1)?he("Hash").$send("prepend",u(he("Module"),"new",[],function Ae(){var Be=Ae.$$s==null?this:Ae.$$s;return ve(Be,"$merge",function st(Me){var et,Pe;st.$$p;var Ve=this,it=Ue;return st.$$p=null,et=$(arguments),Pe=et,E(a(it=Pe.$length(),1))?Ve.$dup():E(k(it,1))?u(Pe,"inject",[Ve],function(Xe,y){return Xe==null&&(Xe=Ue),y==null&&(y=Ue),Xe.$merge(y)}):pe(Ve,N(Ve,"merge",st,!1,!0),"merge",[Pe["$[]"](0)],null)},-1)},{$$s:w})):Ue},Opal.modules["asciidoctor/core_ext/match_data/names"]=function(t){var g=t.truthy,u=t.klass,$=t.def,E=[],a=t.$r(E),k=t.nil;return t.add_stubs("method_defined?"),g(a("MatchData")["$method_defined?"]("names"))?k:function(pe,N){var ve=u(pe,N,"MatchData");return $(ve,"$names",function(){return[]})}(E[0],null)},Opal.modules["asciidoctor/core_ext"]=function(t){var g=t.top;return t.nil,g.$require("asciidoctor/core_ext.rb/../core_ext/nil_or_empty"),g.$require("asciidoctor/core_ext.rb/../core_ext/hash/merge"),g.$require("asciidoctor/core_ext.rb/../core_ext/match_data/names")},Opal.modules["asciidoctor/helpers"]=function(t){var g=t.module,u=t.truthy,$=t.eqeq,E=t.gvars,a=t.def,k=t.send,pe=t.neqeq,N=t.const_set,ve=t.hash2,w=t.to_ary,Ge=t.rb_times,he=t.eqeqeq,Ue=t.rb_plus,Ae=t.Class,Be=t.Object,st=[],Me=t.nil,et=t.$$$;return t.add_stubs("module_function,require,include?,include,==,path,message,raise,warn,logger,chomp,empty?,slice,unpack,[],[]=,byteslice,bytesize,map,rstrip,encode,encoding,nil_or_empty?,!=,tap,each_line,<<,!,start_with?,match?,gsub,rindex,index,basename,extname,length,directory?,dirname,mkdir_p,mkdir,private_constant,join,divmod,*,===,+,to_s,to_i,succ,class_for_name,const_get"),function(Pe,Ve){var it=g(Pe,"Asciidoctor"),C=[it].concat(Ve);return function(Xe,y){var Ze=g(Xe,"Helpers"),rt=[Ze].concat(y),H=t.$r(rt);return Ze.$module_function(),a(Ze,"$require_library",function(De,ue,we){var ge=this,Z=Me;E["!"]==null&&(E["!"]=Me),ue==null&&(ue=!0),we==null&&(we="abort");try{return ge.$require(De)}catch($e){if(t.rescue($e,[et("LoadError")]))try{if(u(ge["$include?"](H("Logging")))||ge.$include(H("Logging")),u(ue))switch($(ue,!0)&&(ue=De),we){case"abort":Z=$(E["!"].$path(),ue)?"":" (reason: "+(u(E["!"].$path())?"cannot load '"+E["!"].$path()+"'":E["!"].$message())+")",ge.$raise(et("LoadError"),"asciidoctor: FAILED: required gem '"+ue+"' is not available"+Z+". Processing aborted.");break;case"warn":Z=$(E["!"].$path(),ue)?"":" (reason: "+(u(E["!"].$path())?"cannot load '"+E["!"].$path()+"'":E["!"].$message())+")",ge.$logger().$warn("optional gem '"+ue+"' is not available"+Z+". Functionality disabled.");break;default:}else switch(we){case"abort":ge.$raise(et("LoadError"),"asciidoctor: FAILED: "+E["!"].$message().$chomp(".")+". Processing aborted.");break;case"warn":ge.$logger().$warn(""+E["!"].$message().$chomp(".")+". Functionality disabled.");break;default:}return Me}finally{t.pop_exception()}else throw $e}},-2),a(Ze,"$prepare_source_array",function(De,ue){var we=Me,ge=Me,Z=Me;return ue==null&&(ue=!0),u(De["$empty?"]())?[]:$(we=(ge=(Z=De["$[]"](0)).$unpack("C3")).$slice(0,2),H("BOM_BYTES_UTF_16LE"))?(De["$[]="](0,Z.$byteslice(2,Z.$bytesize())),u(ue)?k(De,"map",[],function(Y){return Y==null&&(Y=Me),Y.$encode(H("UTF_8"),et(et("Encoding"),"UTF_16LE")).$rstrip()}):k(De,"map",[],function(Y){return Y==null&&(Y=Me),Y.$encode(H("UTF_8"),et(et("Encoding"),"UTF_16LE")).$chomp()})):$(we,H("BOM_BYTES_UTF_16BE"))?(De["$[]="](0,Z.$byteslice(2,Z.$bytesize())),u(ue)?k(De,"map",[],function(Y){return Y==null&&(Y=Me),Y.$encode(H("UTF_8"),et(et("Encoding"),"UTF_16BE")).$rstrip()}):k(De,"map",[],function(Y){return Y==null&&(Y=Me),Y.$encode(H("UTF_8"),et(et("Encoding"),"UTF_16BE")).$chomp()})):($(ge,H("BOM_BYTES_UTF_8"))&&De["$[]="](0,Z.$byteslice(3,Z.$bytesize())),$(Z.$encoding(),H("UTF_8"))?u(ue)?k(De,"map",[],function(Y){return Y==null&&(Y=Me),Y.$rstrip()}):k(De,"map",[],function(Y){return Y==null&&(Y=Me),Y.$chomp()}):u(ue)?k(De,"map",[],function(Y){return Y==null&&(Y=Me),Y.$encode(H("UTF_8")).$rstrip()}):k(De,"map",[],function(Y){return Y==null&&(Y=Me),Y.$encode(H("UTF_8")).$chomp()}))},-2),a(Ze,"$prepare_source_string",function(De,ue){var we=Me,ge=Me;return ue==null&&(ue=!0),u(De["$nil_or_empty?"]())?[]:($(we=(ge=De.$unpack("C3")).$slice(0,2),H("BOM_BYTES_UTF_16LE"))?De=De.$byteslice(2,De.$bytesize()).$encode(H("UTF_8"),et(et("Encoding"),"UTF_16LE")):$(we,H("BOM_BYTES_UTF_16BE"))?De=De.$byteslice(2,De.$bytesize()).$encode(H("UTF_8"),et(et("Encoding"),"UTF_16BE")):$(ge,H("BOM_BYTES_UTF_8"))?(De=De.$byteslice(3,De.$bytesize()),$(De.$encoding(),H("UTF_8"))||(De=De.$encode(H("UTF_8")))):pe(De.$encoding(),H("UTF_8"))&&(De=De.$encode(H("UTF_8"))),u(ue)?k([],"tap",[],function($e){return $e==null&&($e=Me),k(De,"each_line",[],function(z){return z==null&&(z=Me),$e["$<<"](z.$rstrip())})}):k([],"tap",[],function($e){return $e==null&&($e=Me),k(De,"each_line",[],function(z){return z==null&&(z=Me),$e["$<<"](z.$chomp())})}))},-2),$(et("RUBY_ENGINE"),"jruby")?a(Ze,"$uriish?",function(De){var ue=Me,we=Me;return u(ue=u(we=De["$include?"](":"))?De["$start_with?"]("uri:classloader:")["$!"]():we)?H("UriSniffRx")["$match?"](De):ue}):a(Ze,"$uriish?",function(De){var ue=Me;return u(ue=De["$include?"](":"))?H("UriSniffRx")["$match?"](De):ue}),a(Ze,"$encode_uri_component",function(De){return encodeURIComponent(De).replace(/%20|[!'()*]/g,function(ue){return ue==="%20"?"+":"%"+ue.charCodeAt(0).toString(16)})}),a(Ze,"$encode_spaces_in_uri",function(De){return u(De["$include?"](" "))?De.$gsub(" ","%20"):De}),a(Ze,"$rootname",function(De){var ue=Me;return u(ue=De.$rindex("."))?u(De.$index("/",ue))?De:De.$slice(0,ue):De}),a(Ze,"$basename",function(De,ue){var we=this;return ue==null&&(ue=Me),u(ue)?et("File").$basename(De,$(ue,!0)?we.$extname(De):ue):et("File").$basename(De)},-2),a(Ze,"$extname?",function(De){var ue=Me,we=Me;return u(ue=we=De.$rindex("."))?De.$index("/",we)["$!"]():ue}),u(et(et("File"),"ALT_SEPARATOR"))?a(Ze,"$extname",function(De,ue){var we=Me;return ue==null&&(ue=""),u(we=De.$rindex("."))?u(De.$index("/",we))||u(De.$index(et(et("File"),"ALT_SEPARATOR"),we))?ue:De.$slice(we,De.$length()):ue},-2):a(Ze,"$extname",function(De,ue){var we=Me;return ue==null&&(ue=""),u(we=De.$rindex("."))?u(De.$index("/",we))?ue:De.$slice(we,De.$length()):ue},-2),a(Ze,"$mkdir_p",function(De){var ue=this,we=Me;if(u(et("File")["$directory?"](De)))return Me;$(we=et("File").$dirname(De),".")||ue.$mkdir_p(we);try{return et("Dir").$mkdir(De)}catch(ge){if(t.rescue(ge,[et("SystemCallError")]))try{return u(et("File")["$directory?"](De))?Me:ue.$raise()}finally{t.pop_exception()}else throw ge}}),N(rt[0],"ROMAN_NUMERALS",ve(["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],{M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1})),Ze.$private_constant("ROMAN_NUMERALS"),a(Ze,"$int_to_roman",function(De){return k(H("ROMAN_NUMERALS"),"map",[],function(we,ge){var Z,$e,Y=Me;return we==null&&(we=Me),ge==null&&(ge=Me),$e=De.$divmod(ge),Z=w($e),Y=Z[0]==null?Me:Z[0],De=Z[1]==null?Me:Z[1],Ge(we,Y)}).$join()}),a(Ze,"$nextval",function(De){var ue=Me;return he(et("Integer"),De)?Ue(De,1):$((ue=De.$to_i()).$to_s(),De.$to_s())?Ue(ue,1):De.$succ()}),a(Ze,"$resolve_class",function(De){var ue=this;return he(Ae,De)?De:he(et("String"),De)?ue.$class_for_name(De):Me}),a(Ze,"$class_for_name",function(De){var ue=this,we=Me;try{return he(Ae,we=Be.$const_get(De,!1))||ue.$raise(),we}catch(ge){if(t.rescue(ge,[H("StandardError")]))try{return ue.$raise(et("NameError"),"Could not resolve class for name: "+De)}finally{t.pop_exception()}else throw ge}})}(C[0],C)}(st[0],st)},Opal.modules.logger=function(t){var g=t.klass,u=t.module,$=t.const_set,E=t.send,a=t.def,k=t.eqeqeq,pe=t.rb_plus,N=t.truthy,ve=t.rb_le,w=t.rb_lt,Ge=[],he=t.nil,Ue=t.$$$;return t.add_stubs("include,to_h,map,constants,const_get,to_s,format,chr,strftime,message_as_string,===,+,message,class,join,backtrace,inspect,attr_reader,attr_accessor,new,key,upcase,raise,add,to_proc,<=,<,write,call,[],now"),function(Ae,Be,st){var Me=g(Ae,Be,"Logger"),et=[Me].concat(st),Pe=t.$r(et),Ve=Me.$$prototype;return Ve.level=Ve.progname=Ve.pipe=Ve.formatter=he,function(it,C){var Xe=u(it,"Severity"),y=[Xe].concat(C);return $(y[0],"DEBUG",0),$(y[0],"INFO",1),$(y[0],"WARN",2),$(y[0],"ERROR",3),$(y[0],"FATAL",4),$(y[0],"UNKNOWN",5)}(et[0],et),Me.$include(Pe("Severity")),$(et[0],"SEVERITY_LABELS",E(Pe("Severity").$constants(),"map",[],function(C){return C==null&&(C=he),[Pe("Severity").$const_get(C),C.$to_s()]}).$to_h()),function(it,C,Xe){var y=g(it,C,"Formatter"),Ze=[y].concat(Xe),rt=t.$r(Ze);return $(Ze[0],"MESSAGE_FORMAT",`%s, [%s] %5s -- %s: %s
`),$(Ze[0],"DATE_TIME_FORMAT","%Y-%m-%dT%H:%M:%S.%6N"),a(y,"$call",function(T,De,ue,we){var ge=this;return ge.$format(rt("MESSAGE_FORMAT"),T.$chr(),De.$strftime(rt("DATE_TIME_FORMAT")),T,ue,ge.$message_as_string(we))}),a(y,"$message_as_string",function(T){var De=he,ue=he;return k(Ue("String"),De=T)?T:k(Ue("Exception"),De)?pe(""+T.$message()+" ("+T.$class()+`)
`,(N(ue=T.$backtrace())?ue:[]).$join(`
`)):T.$inspect()})}(et[0],null,et),Me.$attr_reader("level"),Me.$attr_accessor("progname"),Me.$attr_accessor("formatter"),a(Me,"$initialize",function(C){var Xe=this;return Xe.pipe=C,Xe.level=Pe("DEBUG"),Xe.formatter=Pe("Formatter").$new()}),a(Me,"$level=",function(C){var Xe=this,y=he;return k(Ue("Integer"),C)?Xe.level=C:N(y=Pe("SEVERITY_LABELS").$key(C.$to_s().$upcase()))?Xe.level=y:Xe.$raise(Pe("ArgumentError"),"invalid log level: "+C)}),a(Me,"$info",function it(C){var Xe=it.$$p||he,y=this;return it.$$p=null,C==null&&(C=he),E(y,"add",[Pe("INFO"),he,C],Xe.$to_proc())},-1),a(Me,"$debug",function it(C){var Xe=it.$$p||he,y=this;return it.$$p=null,C==null&&(C=he),E(y,"add",[Pe("DEBUG"),he,C],Xe.$to_proc())},-1),a(Me,"$warn",function it(C){var Xe=it.$$p||he,y=this;return it.$$p=null,C==null&&(C=he),E(y,"add",[Pe("WARN"),he,C],Xe.$to_proc())},-1),a(Me,"$error",function it(C){var Xe=it.$$p||he,y=this;return it.$$p=null,C==null&&(C=he),E(y,"add",[Pe("ERROR"),he,C],Xe.$to_proc())},-1),a(Me,"$fatal",function it(C){var Xe=it.$$p||he,y=this;return it.$$p=null,C==null&&(C=he),E(y,"add",[Pe("FATAL"),he,C],Xe.$to_proc())},-1),a(Me,"$unknown",function it(C){var Xe=it.$$p||he,y=this;return it.$$p=null,C==null&&(C=he),E(y,"add",[Pe("UNKNOWN"),he,C],Xe.$to_proc())},-1),a(Me,"$info?",function(){var C=this;return ve(C.level,Pe("INFO"))}),a(Me,"$debug?",function(){var C=this;return ve(C.level,Pe("DEBUG"))}),a(Me,"$warn?",function(){var C=this;return ve(C.level,Pe("WARN"))}),a(Me,"$error?",function(){var C=this;return ve(C.level,Pe("ERROR"))}),a(Me,"$fatal?",function(){var C=this;return ve(C.level,Pe("FATAL"))}),a(Me,"$add",function it(C,Xe,y){var Ze=it.$$p||he,rt=this,H=he;return it.$$p=null,Xe==null&&(Xe=he),y==null&&(y=he),N(w(C=N(H=C)?H:Pe("UNKNOWN"),rt.level))||(y=N(H=y)?H:rt.progname,N(Xe)||(Ze!==he?Xe=t.yieldX(Ze,[]):(Xe=y,y=rt.progname)),rt.pipe.$write(rt.formatter.$call(N(H=Pe("SEVERITY_LABELS")["$[]"](C))?H:"ANY",Ue("Time").$now(),y,Xe))),!0},-2)}(Ge[0],null,Ge)},Opal.modules["asciidoctor/logging"]=function(t){var g=t.module,u=t.klass,$=t.slice,E=t.send2,a=t.find_super,k=t.to_a,pe=t.send,N=t.def,ve=t.truthy,w=t.rb_gt,Ge=t.const_set,he=t.hash2,Ue=t.eqeqeq,Ae=t.gvars,Be=t.alias,st=t.defs,Me=t.top,et=[],Pe=t.nil,Ve=t.$$$;return t.add_stubs("require,attr_reader,progname=,formatter=,new,level=,>,[],===,inspect,to_h,map,constants,const_get,<<,clear,empty?,max,attr_accessor,memoize_logger,private,logger,extend,private_class_method,merge"),Me.$require("logger"),function(it,C){var Xe=g(it,"Asciidoctor"),y=[Xe].concat(C);return function(Ze,rt,H){var T=u(Ze,rt,"Logger"),De=[T].concat(H),ue=t.$r(De),we=T.$$prototype;return we.max_severity=Pe,T.$attr_reader("max_severity"),N(T,"$initialize",function ge(Z){var $e,Y,z,R=ge.$$p||Pe,V=this;return ge.$$p=null,$e=$(arguments),Y=$e,E(V,a(V,"initialize",ge,!1,!0),"initialize",k(Y),R),V["$progname="]("asciidoctor"),V["$formatter="](ue("BasicFormatter").$new()),z=[ue("WARN")],pe(V,"level=",z),z[z.length-1]},-1),N(T,"$add",function ge(Z,$e,Y){var z=ge.$$p||Pe,R=this,V=Pe;return ge.$$p=null,$e==null&&($e=Pe),Y==null&&(Y=Pe),ve(w(Z=ve(V=Z)?V:ue("UNKNOWN"),R.max_severity=ve(V=R.max_severity)?V:Z))&&(R.max_severity=Z),E(R,a(R,"add",ge,!1,!0),"add",[Z,$e,Y],z)},-2),function(ge,Z,$e){var Y=u(ge,Z,"BasicFormatter"),z=[Y].concat($e),R=t.$r(z);return Ge(z[0],"SEVERITY_LABEL_SUBSTITUTES",he(["WARN","FATAL"],{WARN:"WARNING",FATAL:"FAILED"})),N(Y,"$call",function(K,J,M,_){var r=Pe;return""+M+": "+(ve(r=R("SEVERITY_LABEL_SUBSTITUTES")["$[]"](K))?r:K)+": "+(Ue(Ve("String"),_)?_:_.$inspect())+R("LF")})}(De[0],ue("Formatter"),De),function(ge){var Z=g(ge,"AutoFormattingMessage");return N(Z,"$inspect",function(){var Y=this,z=Pe;return ve(z=Y["$[]"]("source_location"))?""+z+": "+Y["$[]"]("text"):Y["$[]"]("text")})}(De[0])}(y[0],Ve("Logger"),y),function(Ze,rt,H){var T=u(Ze,rt,"MemoryLogger"),De=[T].concat(H),ue=t.$r(De),we=T.$$prototype;return we.messages=Pe,Ge(De[0],"SEVERITY_SYMBOL_BY_VALUE",pe(ue("Severity").$constants(!1),"map",[],function(Z){return Z==null&&(Z=Pe),[ue("Severity").$const_get(Z),Z]}).$to_h()),T.$attr_reader("messages"),N(T,"$initialize",function(){var Z=this;return Z["$level="](ue("WARN")),Z.messages=[]}),N(T,"$add",function ge(Z,$e,Y){var z=ge.$$p||Pe,R=this,V=Pe;return ge.$$p=null,$e==null&&($e=Pe),Y==null&&(Y=Pe),$e=ve(V=$e)?V:z!==Pe?t.yieldX(z,[]):Y,R.messages["$<<"](he(["severity","message"],{severity:ue("SEVERITY_SYMBOL_BY_VALUE")["$[]"](ve(V=Z)?V:ue("UNKNOWN")),message:$e})),!0},-2),N(T,"$clear",function(){var Z=this;return Z.messages.$clear()}),N(T,"$empty?",function(){var Z=this;return Z.messages["$empty?"]()}),N(T,"$max_severity",function(){var Z=this;return ve(Z["$empty?"]())?Pe:pe(Z.messages,"map",[],function(Y){return Y==null&&(Y=Pe),ue("Severity").$const_get(Y["$[]"]("severity"))}).$max()})}(y[0],Ve("Logger"),y),function(Ze,rt,H){var T=u(Ze,rt,"NullLogger"),De=[T].concat(H),ue=t.$r(De),we=T.$$prototype;return we.max_severity=Pe,T.$attr_reader("max_severity"),N(T,"$initialize",function(){var Z,$e=this;return Z=[ue("WARN")],pe($e,"level=",Z),Z[Z.length-1]}),N(T,"$add",function(Z,$e,Y){var z=this,R=Pe;return ve(w(Z=ve(R=Z)?R:ue("UNKNOWN"),z.max_severity=ve(R=z.max_severity)?R:Z))&&(z.max_severity=Z),!0},-2)}(y[0],Ve("Logger"),y),function(Ze,rt){var H=g(Ze,"LoggerManager"),T=[H].concat(rt),De=t.$r(T);return H.logger_class=De("Logger"),function(ue,we){return ue.$attr_accessor("logger_class"),N(ue,"$logger",function(Z){var $e=this,Y=Pe;return $e.logger==null&&($e.logger=Pe),$e.logger_class==null&&($e.logger_class=Pe),Ae.stderr==null&&(Ae.stderr=Pe),Z==null&&(Z=Ae.stderr),$e.$memoize_logger(),$e.logger=ve(Y=$e.logger)?Y:$e.logger_class.$new(Z)},-1),N(ue,"$logger=",function(Z){var $e=this,Y=Pe;return $e.logger_class==null&&($e.logger_class=Pe),Ae.stderr==null&&(Ae.stderr=Pe),$e.logger=ve(Y=Z)?Y:$e.logger_class.$new(Ae.stderr)}),ue.$private(),N(ue,"$memoize_logger",function(){var Z=this;return function($e,Y){return Be($e,"logger","logger"),$e.$attr_reader("logger")}(t.get_singleton_class(Z))})}(t.get_singleton_class(H))}(y[0],y),function(Ze,rt){var H=g(Ze,"Logging"),T=[H].concat(rt),De=t.$r(T);return st(H,"$included",function(we){return we.$extend(De("Logging"))}),H.$private_class_method("included"),N(H,"$logger",function(){return De("LoggerManager").$logger()}),N(H,"$message_with_context",function(we,ge){return ge==null&&(ge=he([],{})),he(["text"],{text:we}).$merge(ge).$extend(Ve(De("Logger"),"AutoFormattingMessage"))},-2)}(y[0],y)}(et[0],et)},Opal.modules["asciidoctor/rx"]=function(t){var g=t.module,u=t.const_set,$=t.regexp,E=t.hash2,a=t.send,k=t.truthy,pe=t.hash,N=[],ve=t.nil,w=t.$$$;return t.add_stubs("join,to_a,new,[]=,empty?,escape"),function(Ge,he){var Ue=g(Ge,"Asciidoctor"),Ae=[Ue].concat(he),Be=t.$r(Ae);return g(Ae[0],"Rx"),u(Ae[0],"AuthorInfoLineRx",$(["^(",Be("CG_WORD"),"[",Be("CC_WORD"),"\\-'.]*)(?: +(",Be("CG_WORD"),"[",Be("CC_WORD"),"\\-'.]*))?(?: +(",Be("CG_WORD"),"[",Be("CC_WORD"),"\\-'.]*))?(?: +<([^>]+)>)?$"])),u(Ae[0],"AuthorDelimiterRx",/;(?: |$)/),u(Ae[0],"RevisionInfoLineRx",$(["^(?:[^\\d{]*(",Be("CC_ANY"),"*?),)? *(?!:)(",Be("CC_ANY"),"*?)(?: *(?!^),?: *(",Be("CC_ANY"),"*))?$"])),u(Ae[0],"ManpageTitleVolnumRx",$(["^(",Be("CC_ANY"),"+?) *\\( *(",Be("CC_ANY"),"+?) *\\)$"])),u(Ae[0],"ManpageNamePurposeRx",$(["^(",Be("CC_ANY"),"+?) +- +(",Be("CC_ANY"),"+)$"])),u(Ae[0],"ConditionalDirectiveRx",$(["^(\\\\)?(ifdef|ifndef|ifeval|endif)::(\\S*?(?:([,+])\\S*?)?)\\[(",Be("CC_ANY"),"+)?\\]$"])),u(Ae[0],"EvalExpressionRx",$(["^(",Be("CC_ANY"),"+?) *([=!><]=|[><]) *(",Be("CC_ANY"),"+)$"])),u(Ae[0],"IncludeDirectiveRx",$(["^(\\\\)?include::([^\\s\\[](?:[^\\[]*[^\\s\\[])?)\\[(",Be("CC_ANY"),"+)?\\]$"])),u(Ae[0],"TagDirectiveRx",/\b(?:tag|(e)nd)::(\S+?)\[\](?=$|[ \r])/m),u(Ae[0],"AttributeEntryRx",$(["^:(!?",Be("CG_WORD"),"[^:]*):(?:[ \\t]+(",Be("CC_ANY"),"*))?$"])),u(Ae[0],"InvalidAttributeNameCharsRx",$(["[^",Be("CC_WORD"),"-]"])),u(Ae[0],"AttributeEntryPassMacroRx",$(["^pass:([a-z]+(?:,[a-z-]+)*)?\\[(",Be("CC_ALL"),"*)\\]$"])),u(Ae[0],"AttributeReferenceRx",$(["(\\\\)?\\{(",Be("CG_WORD"),"[",Be("CC_WORD"),"-]*|(set|counter2?):",Be("CC_ANY"),"+?)(\\\\)?\\}"])),u(Ae[0],"BlockAnchorRx",$(["^\\[\\[(?:|([",Be("CC_ALPHA"),"_:][",Be("CC_WORD"),"\\-:.]*)(?:, *(",Be("CC_ANY"),"+))?)\\]\\]$"])),u(Ae[0],"BlockAttributeListRx",$(["^\\[(|[",Be("CC_WORD"),`.#%{,"']`,Be("CC_ANY"),"*)\\]$"])),u(Ae[0],"BlockAttributeLineRx",$(["^\\[(?:|[",Be("CC_WORD"),`.#%{,"']`,Be("CC_ANY"),"*|\\[(?:|[",Be("CC_ALPHA"),"_:][",Be("CC_WORD"),"\\-:.]*(?:, *",Be("CC_ANY"),"+)?)\\])\\]$"])),u(Ae[0],"BlockTitleRx",$(["^\\.(\\.?[^ \\t.]",Be("CC_ANY"),"*)$"])),u(Ae[0],"AdmonitionParagraphRx",$(["^(",Be("ADMONITION_STYLES").$to_a().$join("|"),"):[ \\t]+"])),u(Ae[0],"LiteralParagraphRx",$(["^([ \\t]+",Be("CC_ANY"),"*)$"])),u(Ae[0],"AtxSectionTitleRx",$(["^(=={0,5})[ \\t]+(",Be("CC_ANY"),"+?)(?:[ \\t]+\\1)?$"])),u(Ae[0],"ExtAtxSectionTitleRx",$(["^(=={0,5}|#\\#{0,5})[ \\t]+(",Be("CC_ANY"),"+?)(?:[ \\t]+\\1)?$"])),u(Ae[0],"SetextSectionTitleRx",$(["^((?!\\.)",Be("CC_ANY"),"*?",Be("CG_ALNUM"),Be("CC_ANY"),"*)$"])),u(Ae[0],"InlineSectionAnchorRx",$([" (\\\\)?\\[\\[([",Be("CC_ALPHA"),"_:][",Be("CC_WORD"),"\\-:.]*)(?:, *(",Be("CC_ANY"),"+))?\\]\\]$"])),u(Ae[0],"InvalidSectionIdCharsRx",$(["<[^>]+>|&(?:[a-z][a-z]+\\d{0,2}|#\\d\\d\\d{0,4}|#x[\\da-f][\\da-f][\\da-f]{0,3});|[^ ",Be("CC_WORD"),"\\-.]+?"])),u(Ae[0],"SectionLevelStyleRx",/^sect\d$/),u(Ae[0],"AnyListRx",$(["^(?:[ \\t]*(?:-|\\*\\**|\\.\\.*|\\u2022|\\d+\\.|[a-zA-Z]\\.|[IVXivx]+\\))[ \\t]|(?!//[^/])[ \\t]*[^ \\t]",Be("CC_ANY"),"*?(?::::{0,2}|;;)(?:$|[ \\t])|<(?:\\d+|\\.)>[ \\t])"])),u(Ae[0],"UnorderedListRx",$(["^[ \\t]*(-|\\*\\**|\\u2022)[ \\t]+(",Be("CC_ANY"),"*)$"])),u(Ae[0],"OrderedListRx",$(["^[ \\t]*(\\.\\.*|\\d+\\.|[a-zA-Z]\\.|[IVXivx]+\\))[ \\t]+(",Be("CC_ANY"),"*)$"])),u(Ae[0],"OrderedListMarkerRxMap",E(["arabic","loweralpha","lowerroman","upperalpha","upperroman"],{arabic:/\d+\./,loweralpha:/[a-z]\./,lowerroman:/[ivx]+\)/,upperalpha:/[A-Z]\./,upperroman:/[IVX]+\)/})),u(Ae[0],"DescriptionListRx",$(["^(?!//[^/])[ \\t]*([^ \\t]",Be("CC_ANY"),"*?)(:::{0,2}|;;)(?:$|[ \\t]+(",Be("CC_ANY"),"*)$)"])),u(Ae[0],"DescriptionListSiblingRx",E(["::",":::","::::",";;"],{"::":$(["^(?!//[^/])[ \\t]*([^ \\t]",Be("CC_ANY"),"*?[^:]|[^ \\t:])(::)(?:$|[ \\t]+(",Be("CC_ANY"),"*)$)"]),":::":$(["^(?!//[^/])[ \\t]*([^ \\t]",Be("CC_ANY"),"*?[^:]|[^ \\t:])(:::)(?:$|[ \\t]+(",Be("CC_ANY"),"*)$)"]),"::::":$(["^(?!//[^/])[ \\t]*([^ \\t]",Be("CC_ANY"),"*?[^:]|[^ \\t:])(::::)(?:$|[ \\t]+(",Be("CC_ANY"),"*)$)"]),";;":$(["^(?!//[^/])[ \\t]*([^ \\t]",Be("CC_ANY"),"*?)(;;)(?:$|[ \\t]+(",Be("CC_ANY"),"*)$)"])})),u(Ae[0],"CalloutListRx",$(["^<(\\d+|\\.)>[ \\t]+(",Be("CC_ANY"),"*)$"])),u(Ae[0],"CalloutExtractRx",/((?:\/\/|#|--|;;) ?)?(\\)?<!?(|--)(\d+|\.)\3>(?=(?: ?\\?<!?\3(?:\d+|\.)\3>)*$)/),u(Ae[0],"CalloutExtractRxt","(\\\\)?<()(\\d+|\\.)>(?=(?: ?\\\\?<(?:\\d+|\\.)>)*$)"),u(Ae[0],"CalloutExtractRxMap",a(w("Hash"),"new",[],function(Me,et){var Pe;return Me==null&&(Me=ve),et==null&&(et=ve),Pe=[et,$(["(",k(et["$empty?"]())?"":""+w("Regexp").$escape(et)+" ?",")?",Be("CalloutExtractRxt")])],a(Me,"[]=",Pe),Pe[Pe.length-1]})),u(Ae[0],"CalloutScanRx",$(["\\\\?<!?(|--)(\\d+|\\.)\\1>(?=(?: ?\\\\?<!?\\1(?:\\d+|\\.)\\1>)*",Be("CC_EOL"),")"])),u(Ae[0],"CalloutSourceRx",$(["((?://|#|--|;;) ?)?(\\\\)?&lt;!?(|--)(\\d+|\\.)\\3&gt;(?=(?: ?\\\\?&lt;!?\\3(?:\\d+|\\.)\\3&gt;)*",Be("CC_EOL"),")"])),u(Ae[0],"CalloutSourceRxt","(\\\\)?&lt;()(\\d+|\\.)&gt;(?=(?: ?\\\\?&lt;(?:\\d+|\\.)&gt;)*"+Be("CC_EOL")+")"),u(Ae[0],"CalloutSourceRxMap",a(w("Hash"),"new",[],function(Me,et){var Pe;return Me==null&&(Me=ve),et==null&&(et=ve),Pe=[et,$(["(",k(et["$empty?"]())?"":""+w("Regexp").$escape(et)+" ?",")?",Be("CalloutSourceRxt")])],a(Me,"[]=",Pe),Pe[Pe.length-1]})),u(Ae[0],"ListRxMap",E(["ulist","olist","dlist","colist"],{ulist:Be("UnorderedListRx"),olist:Be("OrderedListRx"),dlist:Be("DescriptionListRx"),colist:Be("CalloutListRx")})),u(Ae[0],"ColumnSpecRx",/^(?:(\d+)\*)?([<^>](?:\.[<^>]?)?|(?:[<^>]?\.)?[<^>])?(\d+%?|~)?([a-z])?$/),u(Ae[0],"CellSpecStartRx",/^[ \t]*(?:(\d+(?:\.\d*)?|(?:\d*\.)?\d+)([*+]))?([<^>](?:\.[<^>]?)?|(?:[<^>]?\.)?[<^>])?([a-z])?$/),u(Ae[0],"CellSpecEndRx",/[ \t]+(?:(\d+(?:\.\d*)?|(?:\d*\.)?\d+)([*+]))?([<^>](?:\.[<^>]?)?|(?:[<^>]?\.)?[<^>])?([a-z])?$/),u(Ae[0],"CustomBlockMacroRx",$(["^(",Be("CG_WORD"),"[",Be("CC_WORD"),"-]*)::(|\\S|\\S",Be("CC_ANY"),"*?\\S)\\[(",Be("CC_ANY"),"+)?\\]$"])),u(Ae[0],"BlockMediaMacroRx",$(["^(image|video|audio)::(\\S|\\S",Be("CC_ANY"),"*?\\S)\\[(",Be("CC_ANY"),"+)?\\]$"])),u(Ae[0],"BlockTocMacroRx",$(["^toc::\\[(",Be("CC_ANY"),"+)?\\]$"])),u(Ae[0],"InlineAnchorRx",$(["(\\\\)?(?:\\[\\[([",Be("CC_ALPHA"),"_:][",Be("CC_WORD"),"\\-:.]*)(?:, *(",Be("CC_ANY"),"+?))?\\]\\]|anchor:([",Be("CC_ALPHA"),"_:][",Be("CC_WORD"),"\\-:.]*)\\[(?:\\]|(",Be("CC_ANY"),"*?[^\\\\])\\]))"])),u(Ae[0],"InlineAnchorScanRx",$(["(?:^|[^\\\\\\[])\\[\\[([",Be("CC_ALPHA"),"_:][",Be("CC_WORD"),"\\-:.]*)(?:, *(",Be("CC_ANY"),"+?))?\\]\\]|(?:^|[^\\\\])anchor:([",Be("CC_ALPHA"),"_:][",Be("CC_WORD"),"\\-:.]*)\\[(?:\\]|(",Be("CC_ANY"),"*?[^\\\\])\\])"])),u(Ae[0],"LeadingInlineAnchorRx",$(["^\\[\\[([",Be("CC_ALPHA"),"_:][",Be("CC_WORD"),"\\-:.]*)(?:, *(",Be("CC_ANY"),"+?))?\\]\\]"])),u(Ae[0],"InlineBiblioAnchorRx",$(["^\\[\\[\\[([",Be("CC_ALPHA"),"_:][",Be("CC_WORD"),"\\-:.]*)(?:, *(",Be("CC_ANY"),"+?))?\\]\\]\\]"])),u(Ae[0],"InlineEmailRx",$(["([\\\\>:/])?",Be("CG_WORD"),"(?:&amp;|[",Be("CC_WORD"),"\\-.%+])*@",Be("CG_ALNUM"),"[",Be("CC_ALNUM"),"_\\-.]*\\.[a-zA-Z]{2,5}\\b"])),u(Ae[0],"InlineFootnoteMacroRx",$(["\\\\?footnote(?:(ref):|:([",Be("CC_WORD"),"-]+)?)\\[(?:|(",Be("CC_ALL"),"*?[^\\\\]))\\](?!</a>)"],"m")),u(Ae[0],"InlineImageMacroRx",$(["\\\\?i(?:mage|con):([^:\\s\\[](?:[^\\n\\[]*[^\\s\\[])?)\\[(|",Be("CC_ALL"),"*?[^\\\\])\\]"],"m")),u(Ae[0],"InlineIndextermMacroRx",$(["\\\\?(?:(indexterm2?):\\[(",Be("CC_ALL"),"*?[^\\\\])\\]|\\(\\((",Be("CC_ALL"),"+?)\\)\\)(?!\\)))"],"m")),u(Ae[0],"InlineKbdBtnMacroRx",$(["(\\\\)?(kbd|btn):\\[(",Be("CC_ALL"),"*?[^\\\\])\\]"],"m")),u(Ae[0],"InlineLinkRx",$(["(^|link:|",Be("CG_BLANK"),`|&lt;|[>\\(\\)\\[\\];"'])(\\\\?(?:https?|file|ftp|irc)://)(?:([^\\s\\[\\]]+)\\[(|`,Be("CC_ALL"),"*?[^\\\\])\\]|([^\\s\\[\\]<]*([^\\s,.?!\\[\\]<\\)])))"],"m")),u(Ae[0],"InlineLinkMacroRx",$(["\\\\?(?:link|(mailto)):(|[^:\\s\\[][^\\s\\[]*)\\[(|",Be("CC_ALL"),"*?[^\\\\])\\]"],"m")),u(Ae[0],"MacroNameRx",$(["^",Be("CG_WORD"),"[",Be("CC_WORD"),"-]*$"])),u(Ae[0],"InlineStemMacroRx",$(["\\\\?(stem|(?:latex|ascii)math):([a-z]+(?:,[a-z-]+)*)?\\[(",Be("CC_ALL"),"*?[^\\\\])\\]"],"m")),u(Ae[0],"InlineMenuMacroRx",$(["\\\\?menu:(",Be("CG_WORD"),"|[",Be("CC_WORD"),"&][^\\n\\[]*[^\\s\\[])\\[ *(?:|(",Be("CC_ALL"),"*?[^\\\\]))\\]"],"m")),u(Ae[0],"InlineMenuRx",$(['\\\\?"([',Be("CC_WORD"),'&][^"]*?[ \\n]+&gt;[ \\n]+[^"]*)"'])),u(Ae[0],"InlinePassRx",pe(!1,["+","-]",$(["((?:^|[^",Be("CC_WORD"),";:\\\\])(?=(\\[)|\\+)|\\\\(?=\\[)|(?=\\\\\\+))(?:\\2(x-|[^\\]]+ x-)\\]|(?:\\[([^\\]]+)\\])?(?=(\\\\)?\\+))(\\5?(\\+|`)(\\S|\\S",Be("CC_ALL"),"*?\\S)\\7)(?!",Be("CG_WORD"),")"],"m")],!0,["`",ve,$(["(^|[^`",Be("CC_WORD"),"])(?:(\\Z)()|\\[([^\\]]+)\\](?=(\\\\))?)?(\\5?(`)([^`\\s]|[^`\\s]",Be("CC_ALL"),"*?\\S)\\7)(?![`",Be("CC_WORD"),"])"],"m")])),u(Ae[0],"InlinePassMacroRx",$(["(?:(?:(\\\\?)\\[([^\\]]+)\\])?(\\\\{0,2})(\\+\\+\\+?|\\$\\$)(",Be("CC_ALL"),"*?)\\4|(\\\\?)pass:([a-z]+(?:,[a-z-]+)*)?\\[(|",Be("CC_ALL"),"*?[^\\\\])\\])"],"m")),u(Ae[0],"InlineXrefMacroRx",$(["\\\\?(?:&lt;&lt;([",Be("CC_WORD"),"#/.:{]",Be("CC_ALL"),"*?)&gt;&gt;|xref:([",Be("CC_WORD"),"#/.:{]",Be("CC_ALL"),"*?)\\[(?:\\]|(",Be("CC_ALL"),"*?[^\\\\])\\]))"],"m")),u(Ae[0],"HardLineBreakRx",$(["^(",Be("CC_ANY"),"*) \\+$"],"m")),u(Ae[0],"MarkdownThematicBreakRx",/^ {0,3}([-*_])( *)\1\2\1$/),u(Ae[0],"ExtLayoutBreakRx",/^(?:'{3,}|<{3,}|([-*_])( *)\1\2\1)$/),u(Ae[0],"BlankLineRx",/\n{2,}/),u(Ae[0],"EscapedSpaceRx",/\\([ \t\n])/),u(Ae[0],"ReplaceableTextRx",/[&']|--|\.\.\.|\([CRT]M?\)/),u(Ae[0],"SpaceDelimiterRx",/([^\\])[ \t\n]+/),u(Ae[0],"SubModifierSniffRx",/[+-]/),u(Ae[0],"TrailingDigitsRx",/\d+$/),u(Ae[0],"UriSniffRx",$(["^",Be("CG_ALPHA"),"[",Be("CC_ALNUM"),".+-]+:/{0,2}"])),u(Ae[0],"XmlSanitizeRx",/<[^>]+>/)}(N[0],N)},Opal.modules["asciidoctor/substitutors"]=function(t){var g=t.module,u=t.const_set,$=t.hash2,E=t.hash,a=t.rb_plus,k=t.regexp,pe=t.not,N=t.truthy,ve=t.send,w=t.def,Ge=t.alias,he=t.gvars,Ue=t.eqeq,Ae=t.to_ary,Be=t.neqeq,st=t.to_a,Me=t.eqeqeq,et=t.rb_gt,Pe=t.slice,Ve=t.rb_minus,it=t.rb_lt,C=t.rb_times,Xe=[],y=t.nil,Ze=t.$$$;return t.add_stubs("freeze,+,keys,!,empty?,===,[],join,include?,extract_passthroughs,each,sub_specialchars,sub_quotes,sub_attributes,sub_replacements,sub_macros,highlight_source,sub_callouts,sub_post_replacements,warn,logger,restore_passthroughs,clear,split,apply_subs,gsub,match?,compat_mode,convert_quoted_text,attributes,==,shift,store_attribute,!=,attribute_undefined,counter,key?,downcase,attribute_missing,info,squeeze,delete,reject,start_with?,do_replacement,inline_macros?,extensions,inline_macros,regexp,instance,slice,length,names,config,merge,[]=,normalize_text,parse_attributes,process_method,expand_subs,text=,text,convert,class,strip,index,min,compact,>,end_with?,map,chop,new,pop,rstrip,register,tr,basename,parse,lstrip,split_simple_csv,-,partition,extract_attributes_from_text,sub,encode_uri_component,style,extname?,rindex,catalog,info?,fetch,outfilesuffix,natural_xrefs,resolve_id,find,footnotes,id,<,size,<<,attr?,attr,to_s,read_next_id,callouts,highlight?,syntax_highlighter,sub_source,extract_callouts,name,to_i,to_sym,resolve_lines_to_highlight,highlight,nil_or_empty?,restore_callouts,count,to_a,|,sort,*,parse_quoted_text_attributes,resolve_pass_subs,basebackend?,error,chr,drop,&,resolve_subs,resolve_block_subs,parse_into,private,shorthand_property_syntax,each_char"),function(rt,H){var T=g(rt,"Asciidoctor"),De=[T].concat(H);return function(ue,we){var ge=g(ue,"Substitutors"),Z=[ge].concat(we),$e=t.$r(Z);return u(Z[0],"SpecialCharsRx",/[<&>]/),u(Z[0],"SpecialCharsTr",$([">","<","&"],{">":"&gt;","<":"&lt;","&":"&amp;"})),u(Z[0],"QuotedTextSniffRx",E(!1,/[*_`#^~]/,!0,/[*'_+#^~]/)),u(Z[0],"BASIC_SUBS",["specialcharacters"]).$freeze(),u(Z[0],"HEADER_SUBS",["specialcharacters","attributes"]).$freeze(),u(Z[0],"NO_SUBS",[]).$freeze(),u(Z[0],"NORMAL_SUBS",["specialcharacters","quotes","attributes","replacements","macros","post_replacements"]).$freeze(),u(Z[0],"REFTEXT_SUBS",["specialcharacters","quotes","replacements"]).$freeze(),u(Z[0],"VERBATIM_SUBS",["specialcharacters","callouts"]).$freeze(),u(Z[0],"SUB_GROUPS",$(["none","normal","verbatim","specialchars"],{none:$e("NO_SUBS"),normal:$e("NORMAL_SUBS"),verbatim:$e("VERBATIM_SUBS"),specialchars:$e("BASIC_SUBS")})),u(Z[0],"SUB_HINTS",$(["a","m","n","p","q","r","c","v"],{a:"attributes",m:"macros",n:"normal",p:"post_replacements",q:"quotes",r:"replacements",c:"specialcharacters",v:"verbatim"})),u(Z[0],"SUB_OPTIONS",$(["block","inline"],{block:a(a($e("SUB_GROUPS").$keys(),$e("NORMAL_SUBS")),["callouts"]),inline:a($e("SUB_GROUPS").$keys(),$e("NORMAL_SUBS"))})),u(Z[0],"CAN",""),u(Z[0],"DEL",""),u(Z[0],"PASS_START",""),u(Z[0],"PASS_END",""),u(Z[0],"PassSlotRx",k([$e("PASS_START"),"(\\d+)",$e("PASS_END")])),u(Z[0],"HighlightedPassSlotRx",k(["<span\\b[^>]*>",$e("PASS_START"),"</span>[^\\d]*(\\d+)[^\\d]*<span\\b[^>]*>",$e("PASS_END"),"</span>"])),u(Z[0],"RS","\\"),u(Z[0],"R_SB","]"),u(Z[0],"ESC_R_SB","\\]"),u(Z[0],"PLUS","+"),w(ge,"$apply_subs",function(z,R){var V=this,K=y,J=y,M=y,_=y;return V.passthroughs==null&&(V.passthroughs=y),V.passthroughs_locked==null&&(V.passthroughs_locked=y),R==null&&(R=$e("NORMAL_SUBS")),N(z["$empty?"]())||pe(R)?z:(N(K=Ze("Array")["$==="](z))&&(z=N(z["$[]"](1))?z.$join($e("LF")):z["$[]"](0)),N(R["$include?"]("macros"))&&(z=V.$extract_passthroughs(z),N(V.passthroughs["$empty?"]())||(J=V.passthroughs,V.passthroughs_locked=N(M=V.passthroughs_locked)?M:_=!0)),ve(R,"each",[],function r(f){var A=r.$$s==null?this:r.$$s;switch(f==null&&(f=y),f){case"specialcharacters":return z=A.$sub_specialchars(z);case"quotes":return z=A.$sub_quotes(z);case"attributes":return N(z["$include?"]($e("ATTR_REF_HEAD")))?z=A.$sub_attributes(z):y;case"replacements":return z=A.$sub_replacements(z);case"macros":return z=A.$sub_macros(z);case"highlight":return z=A.$highlight_source(z,R["$include?"]("callouts"));case"callouts":return N(R["$include?"]("highlight"))?y:z=A.$sub_callouts(z);case"post_replacements":return z=A.$sub_post_replacements(z);default:return A.$logger().$warn("unknown substitution type "+f)}},{$$s:V}),N(J)&&(z=V.$restore_passthroughs(z),N(_)&&(J.$clear(),V.passthroughs_locked=y)),N(K)?z.$split($e("LF"),-1):z)},-2),w(ge,"$apply_normal_subs",function(z){var R=this;return R.$apply_subs(z,$e("NORMAL_SUBS"))}),w(ge,"$apply_header_subs",function(z){var R=this;return R.$apply_subs(z,$e("HEADER_SUBS"))}),Ge(ge,"apply_title_subs","apply_subs"),w(ge,"$apply_reftext_subs",function(z){var R=this;return R.$apply_subs(z,$e("REFTEXT_SUBS"))}),w(ge,"$sub_specialchars",function(z){return N(z["$include?"](">"))||N(z["$include?"]("&"))||N(z["$include?"]("<"))?z.$gsub($e("SpecialCharsRx"),$e("SpecialCharsTr")):z}),Ge(ge,"sub_specialcharacters","sub_specialchars"),w(ge,"$sub_quotes",function(z){var R=this,V=y;return R.document==null&&(R.document=y),N($e("QuotedTextSniffRx")["$[]"](V=R.document.$compat_mode())["$match?"](z))&&ve($e("QUOTE_SUBS")["$[]"](V),"each",[],function K(J,M,_){var r=K.$$s==null?this:K.$$s;return J==null&&(J=y),M==null&&(M=y),_==null&&(_=y),z=ve(z,"gsub",[_],function f(){var A=f.$$s==null?this:f.$$s;return he["~"]==null&&(he["~"]=y),A.$convert_quoted_text(he["~"],J,M)},{$$s:r})},{$$s:R}),z}),w(ge,"$sub_attributes",function(z,R){var V=this,K=y,J=y,M=y,_=y,r=y,f=y,A=y,b=y;return V.document==null&&(V.document=y),R==null&&(R=$([],{})),K=V.document.$attributes(),J=M=_=r=f=A=y,z=ve(z,"gsub",[$e("AttributeReferenceRx")],function d(){var B,D,Q=d.$$s==null?this:d.$$s,X=y,ce=y,Re=y,Ye=y,Qe=y,ot=y;if(Q.document==null&&(Q.document=y),Ue((B=he["~"])===y?y:B["$[]"](1),$e("RS"))||Ue((B=he["~"])===y?y:B["$[]"](4),$e("RS")))return"{"+((B=he["~"])===y?y:B["$[]"](2))+"}";if(N((B=he["~"])===y?y:B["$[]"](3)))switch((X=((B=he["~"])===y?y:B["$[]"](2)).$split(":",3)).$shift()){case"set":return D=$e("Parser").$store_attribute(X["$[]"](0),N(ce=X["$[]"](1))?ce:"",Q.document),B=Ae(D),B[0]==null||B[0],Re=B[1]==null?y:B[1],N(Re)||Be(f=N(ce=f)?ce:N(Ye=K["$[]"]("attribute-undefined"))?Ye:$e("Compliance").$attribute_undefined(),"drop-line")?J=r=$e("DEL"):J=M=$e("CAN");case"counter2":return ve(Q.document,"counter",st(X)),J=r=$e("DEL");default:return ve(Q.document,"counter",st(X))}else{if(N(K["$key?"](Qe=((B=he["~"])===y?y:B["$[]"](2)).$downcase())))return K["$[]"](Qe);if(N(Re=$e("INTRINSIC_ATTRIBUTES")["$[]"](Qe)))return Re;switch(A=N(ce=A)?ce:N(Ye=N(ot=R["$[]"]("attribute_missing"))?ot:K["$[]"]("attribute-missing"))?Ye:$e("Compliance").$attribute_missing()){case"drop":return J=r=$e("DEL");case"drop-line":return Ue(_=N(ce=_)?ce:N(Ye=R["$[]"]("drop_line_severity"))?Ye:"info","info")&&ve(Q.$logger(),"info",[],function(){return"dropping line containing reference to missing attribute: "+Qe}),J=M=$e("CAN");case"warn":return Q.$logger().$warn("skipping reference to missing attribute: "+Qe),(B=he["~"])===y?y:B["$[]"](0);default:return(B=he["~"])===y?y:B["$[]"](0)}}},{$$s:V}),N(J)?N(r)?(b=z.$squeeze($e("DEL")).$split($e("LF"),-1),N(M)?ve(b,"reject",[],function(B){var D=y,Q=y,X=y;return B==null&&(B=y),N(D=N(Q=N(X=B["$=="]($e("DEL")))?X:B["$=="]($e("CAN")))?Q:B["$start_with?"]($e("CAN")))?D:B["$include?"]($e("CAN"))}).$join($e("LF")).$delete($e("DEL")):ve(b,"reject",[],function(B){return B==null&&(B=y),B["$=="]($e("DEL"))}).$join($e("LF")).$delete($e("DEL"))):N(z["$include?"]($e("LF")))?ve(z.$split($e("LF"),-1),"reject",[],function(B){var D=y,Q=y;return B==null&&(B=y),N(D=N(Q=B["$=="]($e("CAN")))?Q:B["$start_with?"]($e("CAN")))?D:B["$include?"]($e("CAN"))}).$join($e("LF")):"":z},-2),w(ge,"$sub_replacements",function(z){var R=this;return N($e("ReplaceableTextRx")["$match?"](z))&&ve($e("REPLACEMENTS"),"each",[],function V(K,J,M){var _=V.$$s==null?this:V.$$s;return K==null&&(K=y),J==null&&(J=y),M==null&&(M=y),z=ve(z,"gsub",[K],function r(){var f=r.$$s==null?this:r.$$s;return he["~"]==null&&(he["~"]=y),f.$do_replacement(he["~"],J,M)},{$$s:_})},{$$s:R}),z}),w(ge,"$sub_macros",function(z){var R=this,V=y,K=y,J=y,M=y,_=y,r=y,f=y,A=y;return R.document==null&&(R.document=y),R.parent==null&&(R.parent=y),R.context==null&&(R.context=y),V=z["$include?"]("["),K=z["$include?"](":"),J=N(M=V)?K:M,_=N(M=J)?z["$include?"](":["):M,r=(f=R.document).$attributes(),N(A=f.$extensions())&&N(A["$inline_macros?"]())&&ve(A.$inline_macros(),"each",[],function b(d){var B=b.$$s==null?this:b.$$s;return d==null&&(d=y),z=ve(z,"gsub",[d.$instance().$regexp()],function D(){var Q,X,ce=D.$$s==null?this:D.$$s,Re=y,Ye=y,Qe=y,ot=y,tt=y,at=y,ct=y,ft=y,ut=y;return he["~"]==null&&(he["~"]=y),N((Re=(Q=he["~"])===y?y:Q["$[]"](0))["$start_with?"]($e("RS")))?((Q=he["~"])===y?y:Q["$[]"](0)).$slice(1,((Q=he["~"])===y?y:Q["$[]"](0)).$length()):(N(he["~"].$names()["$empty?"]())?(Q=[(X=he["~"])===y?y:X["$[]"](1),(X=he["~"])===y?y:X["$[]"](2)],Ye=Q[0],Qe=Q[1]):(Q=[function(){try{return he["~"]["$[]"]("target")}catch(pt){if(t.rescue(pt,[$e("StandardError")]))try{return y}finally{t.pop_exception()}else throw pt}}(),function(){try{return he["~"]["$[]"]("content")}catch(pt){if(t.rescue(pt,[$e("StandardError")]))try{return y}finally{t.pop_exception()}else throw pt}}()],Ye=Q[0],Qe=Q[1]),ot=N(tt=(at=d.$config())["$[]"]("default_attrs"))?tt.$merge():$([],{}),N(Qe)&&(N(Qe["$empty?"]())?Ue(at["$[]"]("content_model"),"attributes")||ot["$[]="]("text",Qe):(Qe=ce.$normalize_text(Qe,!0,!0),Ue(at["$[]"]("content_model"),"attributes")?ce.$parse_attributes(Qe,N(M=N(ct=at["$[]"]("positional_attrs"))?ct:at["$[]"]("pos_attrs"))?M:[],$(["into"],{into:ot})):ot["$[]="]("text",Qe)),Ye=N(M=Ye)?M:Ue(at["$[]"]("format"),"short")?Qe:Ye),Me($e("Inline"),ft=d.$process_method()["$[]"](ce,Ye,ot))?(N(ut=ft.$attributes().$delete("subs"))&&N(ut=ce.$expand_subs(ut,"custom inline macro"))&&ft["$text="](ce.$apply_subs(ft.$text(),ut)),ft.$convert()):N(ft)?(ve(ce.$logger(),"info",[],function(){return"expected substitution value for custom inline macro to be of type Inline; got "+ft.$class()+": "+Re}),ft):"")},{$$s:B})},{$$s:R}),N(r["$key?"]("experimental"))&&(N(_)&&(N(z["$include?"]("kbd:"))||N(z["$include?"]("btn:")))&&(z=ve(z,"gsub",[$e("InlineKbdBtnMacroRx")],function b(){var d,B=b.$$s==null?this:b.$$s,D=y,Q=y,X=y;return N((d=he["~"])===y?y:d["$[]"](1))?((d=he["~"])===y?y:d["$[]"](0)).$slice(1,((d=he["~"])===y?y:d["$[]"](0)).$length()):Ue((d=he["~"])===y?y:d["$[]"](2),"kbd")?(N((D=((d=he["~"])===y?y:d["$[]"](3)).$strip())["$include?"]($e("R_SB")))&&(D=D.$gsub($e("ESC_R_SB"),$e("R_SB"))),N(et(D.$length(),1))&&N(Q=N(Q=D.$index(",",1))?[Q,D.$index("+",1)].$compact().$min():D.$index("+",1))?(X=D.$slice(Q,1),N(D["$end_with?"](X))?(D=ve(D.$chop().$split(X,-1),"map",[],function(Re){return Re==null&&(Re=y),Re.$strip()}),D["$[]="](-1,a(D["$[]"](-1),X))):D=ve(D.$split(X),"map",[],function(Re){return Re==null&&(Re=y),Re.$strip()})):D=[D],$e("Inline").$new(B,"kbd",y,$(["attributes"],{attributes:$(["keys"],{keys:D})})).$convert()):$e("Inline").$new(B,"button",B.$normalize_text((d=he["~"])===y?y:d["$[]"](3),!0,!0)).$convert()},{$$s:R})),N(J)&&N(z["$include?"]("menu:"))&&(z=ve(z,"gsub",[$e("InlineMenuMacroRx")],function b(){var d,B=b.$$s==null?this:b.$$s,D=y,Q=y,X=y,ce=y,Re=y;return N(((d=he["~"])===y?y:d["$[]"](0))["$start_with?"]($e("RS")))?((d=he["~"])===y?y:d["$[]"](0)).$slice(1,((d=he["~"])===y?y:d["$[]"](0)).$length()):(D=(d=he["~"])===y?y:d["$[]"](1),N(Q=(d=he["~"])===y?y:d["$[]"](2))?(N(Q["$include?"]($e("R_SB")))&&(Q=Q.$gsub($e("ESC_R_SB"),$e("R_SB"))),N(X=N(Q["$include?"]("&gt;"))?"&gt;":N(Q["$include?"](","))?",":y)?(ce=ve(Q.$split(X),"map",[],function(Qe){return Qe==null&&(Qe=y),Qe.$strip()}),Re=ce.$pop()):(d=[[],Q.$rstrip()],ce=d[0],Re=d[1])):(d=[[],y],ce=d[0],Re=d[1]),$e("Inline").$new(B,"menu",y,$(["attributes"],{attributes:$(["menu","submenus","menuitem"],{menu:D,submenus:ce,menuitem:Re})})).$convert())},{$$s:R})),N(z["$include?"]('"'))&&N(z["$include?"]("&gt;"))&&(z=ve(z,"gsub",[$e("InlineMenuRx")],function b(){var d,B,D,Q=b.$$s==null?this:b.$$s,X=y,ce=y,Re=y;return N(((d=he["~"])===y?y:d["$[]"](0))["$start_with?"]($e("RS")))?((d=he["~"])===y?y:d["$[]"](0)).$slice(1,((d=he["~"])===y?y:d["$[]"](0)).$length()):(B=ve(((D=he["~"])===y?y:D["$[]"](1)).$split("&gt;"),"map",[],function(Qe){return Qe==null&&(Qe=y),Qe.$strip()}),d=Ae(B),X=d[0]==null?y:d[0],ce=Pe(d,1),Re=ce.$pop(),$e("Inline").$new(Q,"menu",y,$(["attributes"],{attributes:$(["menu","submenus","menuitem"],{menu:X,submenus:ce,menuitem:Re})})).$convert())},{$$s:R}))),N(J)&&(N(z["$include?"]("image:"))||N(z["$include?"]("icon:")))&&(z=ve(z,"gsub",[$e("InlineImageMacroRx")],function b(){var d,B=b.$$s==null?this:b.$$s,D=y,Q=y,X=y,ce=y;return N(((d=he["~"])===y?y:d["$[]"](0))["$start_with?"]($e("RS")))?((d=he["~"])===y?y:d["$[]"](0)).$slice(1,((d=he["~"])===y?y:d["$[]"](0)).$length()):(N(((d=he["~"])===y?y:d["$[]"](0))["$start_with?"]("icon:"))?(d=["icon",["size"]],D=d[0],Q=d[1]):(d=["image",["alt","width","height"]],D=d[0],Q=d[1]),X=(d=he["~"])===y?y:d["$[]"](1),ce=B.$parse_attributes((d=he["~"])===y?y:d["$[]"](2),Q,$(["unescape_input"],{unescape_input:!0})),Ue(D,"icon")||(f.$register("images",X),ce["$[]="]("imagesdir",r["$[]"]("imagesdir"))),N(M=ce["$[]"]("alt"))||ce["$[]="]("alt",(d=["default-alt",$e("Helpers").$basename(X,!0).$tr("_-"," ")],ve(ce,"[]=",d),d[d.length-1])),$e("Inline").$new(B,"image",y,$(["type","target","attributes"],{type:D,target:X,attributes:ce})).$convert())},{$$s:R})),(N(z["$include?"]("(("))&&N(z["$include?"]("))"))||N(_)&&N(z["$include?"]("dexterm")))&&(z=ve(z,"gsub",[$e("InlineIndextermMacroRx")],function b(){var d,B,D=b.$$s==null?this:b.$$s,Q=y,X=y,ce=y,Re=y,Ye=y,Qe=y,ot=y,tt=y,at=y,ct=y,ft=y,ut=y,pt=y,ht=y;switch((d=he["~"])===y?y:d["$[]"](1)){case"indexterm":return N(((d=he["~"])===y?y:d["$[]"](0))["$start_with?"]($e("RS")))?((d=he["~"])===y?y:d["$[]"](0)).$slice(1,((d=he["~"])===y?y:d["$[]"](0)).$length()):(N((Q=D.$normalize_text((d=he["~"])===y?y:d["$[]"](2),!0,!0))["$include?"]("="))?N(X=(ce=$e("AttributeList").$new(Q,D).$parse())["$[]"](1))?(ce["$[]="]("terms",[X]),N(Re=ce["$[]"]("see-also"))&&ce["$[]="]("see-also",N(Re["$include?"](","))?ve(Re.$split(","),"map",[],function(yt){return yt==null&&(yt=y),yt.$lstrip()}):[Re])):ce=$(["terms"],{terms:Q}):ce=$(["terms"],{terms:D.$split_simple_csv(Q)}),$e("Inline").$new(D,"indexterm",y,$(["attributes"],{attributes:ce})).$convert());case"indexterm2":return N(((d=he["~"])===y?y:d["$[]"](0))["$start_with?"]($e("RS")))?((d=he["~"])===y?y:d["$[]"](0)).$slice(1,((d=he["~"])===y?y:d["$[]"](0)).$length()):(N((Ye=D.$normalize_text((d=he["~"])===y?y:d["$[]"](2),!0,!0))["$include?"]("="))&&(Ye=N(Qe=N(ot=(ce=$e("AttributeList").$new(Ye,D).$parse())["$[]"](1))?ot:ce=y)?Qe:Ye,N(ce)&&N(Re=ce["$[]"]("see-also"))&&ce["$[]="]("see-also",N(Re["$include?"](","))?ve(Re.$split(","),"map",[],function(yt){return yt==null&&(yt=y),yt.$lstrip()}):[Re])),$e("Inline").$new(D,"indexterm",Ye,$(["attributes","type"],{attributes:ce,type:"visible"})).$convert());default:if(tt=(d=he["~"])===y?y:d["$[]"](3),N(((d=he["~"])===y?y:d["$[]"](0))["$start_with?"]($e("RS"))))if(N(tt["$start_with?"]("("))&&N(tt["$end_with?"](")")))tt=tt.$slice(1,Ve(tt.$length(),2)),d=[!0,"(",")"],at=d[0],ct=d[1],ft=d[2];else return((d=he["~"])===y?y:d["$[]"](0)).$slice(1,((d=he["~"])===y?y:d["$[]"](0)).$length());else at=!0,N(tt["$start_with?"]("("))?N(tt["$end_with?"](")"))?(d=[tt.$slice(1,Ve(tt.$length(),2)),!1],tt=d[0],at=d[1]):(d=[tt.$slice(1,tt.$length()),"(",""],tt=d[0],ct=d[1],ft=d[2]):N(tt["$end_with?"](")"))&&(d=[tt.$chop(),"",")"],tt=d[0],ct=d[1],ft=d[2]);return N(at)?(N((Ye=D.$normalize_text(tt,!0))["$include?"](";&"))&&(N(Ye["$include?"](" &gt;&gt; "))?(B=Ye.$partition(" &gt;&gt; "),d=Ae(B),Ye=d[0]==null?y:d[0],d[1]==null||d[1],ut=d[2]==null?y:d[2],ce=$(["see"],{see:ut})):N(Ye["$include?"](" &amp;&gt; "))&&(B=Ye.$split(" &amp;&gt; "),d=Ae(B),Ye=d[0]==null?y:d[0],Re=Pe(d,1),ce=$(["see-also"],{"see-also":Re}))),pt=$e("Inline").$new(D,"indexterm",Ye,$(["attributes","type"],{attributes:ce,type:"visible"})).$convert()):(ce=$([],{}),N((ht=D.$normalize_text(tt,!0))["$include?"](";&"))&&(N(ht["$include?"](" &gt;&gt; "))?(B=ht.$partition(" &gt;&gt; "),d=Ae(B),ht=d[0]==null?y:d[0],d[1]==null||d[1],ut=d[2]==null?y:d[2],ce["$[]="]("see",ut)):N(ht["$include?"](" &amp;&gt; "))&&(B=ht.$split(" &amp;&gt; "),d=Ae(B),ht=d[0]==null?y:d[0],Re=Pe(d,1),ce["$[]="]("see-also",Re))),ce["$[]="]("terms",D.$split_simple_csv(ht)),pt=$e("Inline").$new(D,"indexterm",y,$(["attributes"],{attributes:ce})).$convert()),N(ct)?""+ct+pt+ft:pt}},{$$s:R})),N(K)&&N(z["$include?"]("://"))&&(z=ve(z,"gsub",[$e("InlineLinkRx")],function b(){var d,B,D=b.$$s==null?this:b.$$s,Q=y,X=y,ce=y,Re=y,Ye=y,Qe=y,ot=y,tt=y,at=y;if(N((Q=a((d=he["~"])===y?y:d["$[]"](2),N(M=(d=he["~"])===y?y:d["$[]"](3))?M:(d=he["~"])===y?y:d["$[]"](5)))["$start_with?"]($e("RS"))))return a(((d=he["~"])===y?y:d["$[]"](0)).$slice(0,X=((d=he["~"])===y?y:d["$[]"](1)).$length()),((d=he["~"])===y?y:d["$[]"](0)).$slice(a(X,1),((d=he["~"])===y?y:d["$[]"](0)).$length()));if(d=[(B=he["~"])===y?y:B["$[]"](1),""],ce=d[0],Re=d[1],N((d=he["~"])===y?y:d["$[]"](4)))Ue(ce,"link:")&&(ce=""),N((Ye=(d=he["~"])===y?y:d["$[]"](4))["$empty?"]())&&(Ye=y);else{switch(ce){case"link:":case'"':case"'":return(d=he["~"])===y?y:d["$[]"](0)}switch((d=he["~"])===y?y:d["$[]"](6)){case";":if(N(ce["$start_with?"]("&lt;"))&&N(Q["$end_with?"]("&gt;"))?(ce=ce.$slice(4,ce.$length()),Q=Q.$slice(0,Ve(Q.$length(),4))):N((Q=Q.$chop())["$end_with?"](")"))?(Q=Q.$chop(),Re=");"):Re=";",N(Q["$end_with?"]("://")))return(d=he["~"])===y?y:d["$[]"](0);break;case":":if(N((Q=Q.$chop())["$end_with?"](")"))?(Q=Q.$chop(),Re="):"):Re=":",N(Q["$end_with?"]("://")))return(d=he["~"])===y?y:d["$[]"](0);break}}return d=[y,$(["type"],{type:"link"})],Qe=d[0],ot=d[1],N(Ye)?(N(Ye["$include?"]($e("R_SB")))&&(tt=Ye=Ye.$gsub($e("ESC_R_SB"),$e("R_SB"))),pe(f.$compat_mode())&&N(Ye["$include?"]("="))&&(B=D.$extract_attributes_from_text(Ye,""),d=Ae(B),Ye=d[0]==null?y:d[0],Qe=d[1]==null?y:d[1],tt=Ye,ot["$[]="]("id",Qe["$[]"]("id"))),N(Ye["$end_with?"]("^"))&&(tt=Ye=Ye.$chop(),N(Qe)?N(M=Qe["$[]"]("window"))||Qe["$[]="]("window","_blank"):Qe=$(["window"],{window:"_blank"})),N(tt)&&N(tt["$empty?"]())&&(Ye=N(r["$key?"]("hide-uri-scheme"))?Q.$sub($e("UriSniffRx"),""):Q,at=!0)):(Ye=N(r["$key?"]("hide-uri-scheme"))?Q.$sub($e("UriSniffRx"),""):Q,at=!0),N(at)&&(N(Qe)?Qe["$[]="]("role",N(Qe["$key?"]("role"))?"bare "+Qe["$[]"]("role"):"bare"):Qe=$(["role"],{role:"bare"})),f.$register("links",(d=["target",Q],ve(ot,"[]=",d),d[d.length-1])),N(Qe)&&ot["$[]="]("attributes",Qe),""+ce+$e("Inline").$new(D,"anchor",Ye,ot).$convert()+Re},{$$s:R})),N(J)&&(N(z["$include?"]("link:"))||N(z["$include?"]("ilto:")))&&(z=ve(z,"gsub",[$e("InlineLinkMacroRx")],function b(){var d,B,D=b.$$s==null?this:b.$$s,Q=y,X=y,ce=y,Re=y,Ye=y,Qe=y;return N(((d=he["~"])===y?y:d["$[]"](0))["$start_with?"]($e("RS")))?((d=he["~"])===y?y:d["$[]"](0)).$slice(1,((d=he["~"])===y?y:d["$[]"](0)).$length()):(N(Q=(d=he["~"])===y?y:d["$[]"](1))?X=a("mailto:",ce=(d=he["~"])===y?y:d["$[]"](2)):X=(d=he["~"])===y?y:d["$[]"](2),d=[y,$(["type"],{type:"link"})],Re=d[0],Ye=d[1],N((Qe=(d=he["~"])===y?y:d["$[]"](3))["$empty?"]())||(N(Qe["$include?"]($e("R_SB")))&&(Qe=Qe.$gsub($e("ESC_R_SB"),$e("R_SB"))),N(Q)?pe(f.$compat_mode())&&N(Qe["$include?"](","))&&(B=D.$extract_attributes_from_text(Qe,""),d=Ae(B),Qe=d[0]==null?y:d[0],Re=d[1]==null?y:d[1],Ye["$[]="]("id",Re["$[]"]("id")),N(Re["$key?"](2))&&(N(Re["$key?"](3))?X=""+X+"?subject="+$e("Helpers").$encode_uri_component(Re["$[]"](2))+"&amp;body="+$e("Helpers").$encode_uri_component(Re["$[]"](3)):X=""+X+"?subject="+$e("Helpers").$encode_uri_component(Re["$[]"](2)))):pe(f.$compat_mode())&&N(Qe["$include?"]("="))&&(B=D.$extract_attributes_from_text(Qe,""),d=Ae(B),Qe=d[0]==null?y:d[0],Re=d[1]==null?y:d[1],Ye["$[]="]("id",Re["$[]"]("id"))),N(Qe["$end_with?"]("^"))&&(Qe=Qe.$chop(),N(Re)?N(M=Re["$[]"]("window"))||Re["$[]="]("window","_blank"):Re=$(["window"],{window:"_blank"}))),N(Qe["$empty?"]())&&(N(Q)?Qe=ce:(N(r["$key?"]("hide-uri-scheme"))?N((Qe=X.$sub($e("UriSniffRx"),""))["$empty?"]())&&(Qe=X):Qe=X,N(Re)?Re["$[]="]("role",N(Re["$key?"]("role"))?"bare "+Re["$[]"]("role"):"bare"):Re=$(["role"],{role:"bare"}))),f.$register("links",(d=["target",X],ve(Ye,"[]=",d),d[d.length-1])),N(Re)&&Ye["$[]="]("attributes",Re),$e("Inline").$new(D,"anchor",Qe,Ye).$convert())},{$$s:R})),N(z["$include?"]("@"))&&(z=ve(z,"gsub",[$e("InlineEmailRx")],function b(){var d,B=b.$$s==null?this:b.$$s,D=y,Q=y;return N((d=he["~"])===y?y:d["$[]"](1))?Ue((d=he["~"])===y?y:d["$[]"](1),$e("RS"))?((d=he["~"])===y?y:d["$[]"](0)).$slice(1,((d=he["~"])===y?y:d["$[]"](0)).$length()):(d=he["~"])===y?y:d["$[]"](0):(D=a("mailto:",Q=(d=he["~"])===y?y:d["$[]"](0)),f.$register("links",D),$e("Inline").$new(B,"anchor",Q,$(["type","target"],{type:"link",target:D})).$convert())},{$$s:R})),N(V)&&Ue(R.context,"list_item")&&Ue(R.parent.$style(),"bibliography")&&(z=ve(z,"sub",[$e("InlineBiblioAnchorRx")],function b(){var d,B=b.$$s==null?this:b.$$s;return $e("Inline").$new(B,"anchor",(d=he["~"])===y?y:d["$[]"](2),$(["type","id"],{type:"bibref",id:(d=he["~"])===y?y:d["$[]"](1)})).$convert()},{$$s:R})),(N(V)&&N(z["$include?"]("[["))||N(J)&&N(z["$include?"]("or:")))&&(z=ve(z,"gsub",[$e("InlineAnchorRx")],function b(){var d,B=b.$$s==null?this:b.$$s,D=y,Q=y;return N((d=he["~"])===y?y:d["$[]"](1))?((d=he["~"])===y?y:d["$[]"](0)).$slice(1,((d=he["~"])===y?y:d["$[]"](0)).$length()):(N(D=(d=he["~"])===y?y:d["$[]"](2))?Q=(d=he["~"])===y?y:d["$[]"](3):(D=(d=he["~"])===y?y:d["$[]"](4),N(Q=(d=he["~"])===y?y:d["$[]"](5))&&N(Q["$include?"]($e("R_SB")))&&(Q=Q.$gsub($e("ESC_R_SB"),$e("R_SB")))),$e("Inline").$new(B,"anchor",Q,$(["type","id"],{type:"ref",id:D})).$convert())},{$$s:R})),(N(z["$include?"]("&"))&&N(z["$include?"](";&l"))||N(J)&&N(z["$include?"]("xref:")))&&(z=ve(z,"gsub",[$e("InlineXrefMacroRx")],function b(){var d,B,D=b.$$s==null?this:b.$$s,Q=y,X=y,ce=y,Re=y,Ye=y,Qe=y,ot=y,tt=y,at=y,ct=y;return N(((d=he["~"])===y?y:d["$[]"](0))["$start_with?"]($e("RS")))?((d=he["~"])===y?y:d["$[]"](0)).$slice(1,((d=he["~"])===y?y:d["$[]"](0)).$length()):(Q=$([],{}),N(X=(d=he["~"])===y?y:d["$[]"](1))?N(X["$include?"](","))&&(B=X.$partition(","),d=Ae(B),X=d[0]==null?y:d[0],d[1]==null||d[1],ce=d[2]==null?y:d[2],N((ce=ce.$lstrip())["$empty?"]())&&(ce=y)):(Re=!0,X=(d=he["~"])===y?y:d["$[]"](2),N(ce=(d=he["~"])===y?y:d["$[]"](3))&&(N(ce["$include?"]($e("R_SB")))&&(ce=ce.$gsub($e("ESC_R_SB"),$e("R_SB"))),pe(f.$compat_mode())&&N(ce["$include?"]("="))&&(B=D.$extract_attributes_from_text(ce),d=Ae(B),ce=d[0]==null?y:d[0],Q=d[1]==null?y:d[1]))),N(f.$compat_mode())?Ye=X:N(Qe=X.$index("#"))&&Be(X["$[]"](Ve(Qe,1)),"&")?N(et(Qe,0))?(N(et(ot=Ve(Ve(X.$length(),1),Qe),0))?(d=[X.$slice(0,Qe),X.$slice(a(Qe,1),ot)],tt=d[0],Ye=d[1]):tt=X.$chop(),N(Re)?N(tt["$end_with?"](".adoc"))?at=tt=tt.$slice(0,Ve(tt.$length(),5)):pe($e("Helpers")["$extname?"](tt))&&(at=tt):N(ve(tt,"end_with?",st($e("ASCIIDOC_EXTENSIONS").$keys())))?at=tt=tt.$slice(0,tt.$rindex(".")):at=tt):(d=[X,X.$slice(1,X.$length())],ct=d[0],Ye=d[1]):N(Re)?N(X["$end_with?"](".adoc"))?at=tt=X.$slice(0,Ve(X.$length(),5)):N($e("Helpers")["$extname?"](X))?tt=X:Ye=X:Ye=X,N(ct)?(X=Ye,N(D.$logger()["$info?"]())&&pe(f.$catalog()["$[]"]("refs")["$[]"](X))&&D.$logger().$info("possible invalid reference: "+X)):N(tt)?N(at)&&(Ue(f.$attributes()["$[]"]("docname"),tt)||N(f.$catalog()["$[]"]("includes")["$[]"](tt)))?N(Ye)?(d=[Ye,y,"#"+Ye],X=d[0],tt=d[1],ct=d[2],N(D.$logger()["$info?"]())&&pe(f.$catalog()["$[]"]("refs")["$[]"](X))&&D.$logger().$info("possible invalid reference: "+X)):(d=[y,y,"#"],X=d[0],tt=d[1],ct=d[2]):(d=[tt,""+(N(M=f.$attributes()["$[]"]("relfileprefix"))?M:"")+tt+(N(at)?f.$attributes().$fetch("relfilesuffix",f.$outfilesuffix()):"")],X=d[0],tt=d[1],N(Ye)?(d=[""+X+"#"+Ye,""+tt+"#"+Ye],X=d[0],ct=d[1]):ct=tt):N(f.$compat_mode())||pe($e("Compliance").$natural_xrefs())?(d=[Ye,"#"+Ye],X=d[0],ct=d[1],N(D.$logger()["$info?"]())&&pe(f.$catalog()["$[]"]("refs")["$[]"](X))&&D.$logger().$info("possible invalid reference: "+X)):N(f.$catalog()["$[]"]("refs")["$[]"](Ye))?(d=[Ye,"#"+Ye],X=d[0],ct=d[1]):(N(Ye["$include?"](" "))||Be(Ye.$downcase(),Ye))&&N(X=f.$resolve_id(Ye))?(d=[X,"#"+X],Ye=d[0],ct=d[1]):(d=[Ye,"#"+Ye],X=d[0],ct=d[1],N(D.$logger()["$info?"]())&&D.$logger().$info("possible invalid reference: "+X)),Q["$[]="]("path",tt),Q["$[]="]("fragment",Ye),Q["$[]="]("refid",X),$e("Inline").$new(D,"anchor",ce,$(["type","target","attributes"],{type:"xref",target:ct,attributes:Q})).$convert())},{$$s:R})),N(J)&&N(z["$include?"]("tnote"))&&(z=ve(z,"gsub",[$e("InlineFootnoteMacroRx")],function b(){var d,B,D,Q=b.$$s==null?this:b.$$s,X=y,ce=y,Re=y,Ye=y,Qe=y,ot=y;if(N(((d=he["~"])===y?y:d["$[]"](0))["$start_with?"]($e("RS"))))return((d=he["~"])===y?y:d["$[]"](0)).$slice(1,((d=he["~"])===y?y:d["$[]"](0)).$length());if(N((d=he["~"])===y?y:d["$[]"](1)))if(N((d=he["~"])===y?y:d["$[]"](3)))B=((D=he["~"])===y?y:D["$[]"](3)).$split(",",2),d=Ae(B),X=d[0]==null?y:d[0],ce=d[1]==null?y:d[1],N(f.$compat_mode())||Q.$logger().$warn("found deprecated footnoteref macro: "+((d=he["~"])===y?y:d["$[]"](0))+"; use footnote macro with target instead");else return(d=he["~"])===y?y:d["$[]"](0);else X=(d=he["~"])===y?y:d["$[]"](2),ce=(d=he["~"])===y?y:d["$[]"](3);if(N(X))N(Re=ve(f.$footnotes(),"find",[],function(at){return at==null&&(at=y),at.$id()["$=="](X)}))?(d=[Re.$index(),Re.$text()],Ye=d[0],ce=d[1],d=["xref",X,y],Qe=d[0],ot=d[1],X=d[2]):N(ce)?(ce=Q.$restore_passthroughs(Q.$normalize_text(ce,!0,!0)),Ye=f.$counter("footnote-number"),f.$register("footnotes",Ze($e("Document"),"Footnote").$new(Ye,X,ce)),d=["ref",y],Qe=d[0],ot=d[1]):(Q.$logger().$warn("invalid footnote reference: "+X),d=["xref",X,X,y],Qe=d[0],ot=d[1],ce=d[2],X=d[3]);else if(N(ce))ce=Q.$restore_passthroughs(Q.$normalize_text(ce,!0,!0)),Ye=f.$counter("footnote-number"),f.$register("footnotes",Ze($e("Document"),"Footnote").$new(Ye,X,ce)),Qe=ot=y;else return(d=he["~"])===y?y:d["$[]"](0);return $e("Inline").$new(Q,"footnote",ce,$(["attributes","id","target","type"],{attributes:$(["index"],{index:Ye}),id:X,target:ot,type:Qe})).$convert()},{$$s:R})),z}),w(ge,"$sub_post_replacements",function(z){var R=this,V=y,K=y;return R.document==null&&(R.document=y),R.attributes==null&&(R.attributes=y),N(R.attributes["$[]"]("hardbreaks-option"))||N(R.document.$attributes()["$[]"]("hardbreaks-option"))?(V=z.$split($e("LF"),-1),N(it(V.$size(),2))?z:(K=V.$pop(),ve(V,"map",[],function J(M){var _=J.$$s==null?this:J.$$s;return M==null&&(M=y),$e("Inline").$new(_,"break",N(M["$end_with?"]($e("HARD_LINE_BREAK")))?M.$slice(0,Ve(M.$length(),2)):M,$(["type"],{type:"line"})).$convert()},{$$s:R})["$<<"](K).$join($e("LF")))):N(z["$include?"]($e("PLUS")))&&N(z["$include?"]($e("HARD_LINE_BREAK")))?ve(z,"gsub",[$e("HardLineBreakRx")],function J(){var M,_=J.$$s==null?this:J.$$s;return $e("Inline").$new(_,"break",(M=he["~"])===y?y:M["$[]"](1),$(["type"],{type:"line"})).$convert()},{$$s:R}):z}),w(ge,"$sub_source",function(z,R){var V=this;return N(R)?V.$sub_callouts(V.$sub_specialchars(z)):V.$sub_specialchars(z)}),w(ge,"$sub_callouts",function(z){var R=this,V=y,K=y;return V=N(R["$attr?"]("line-comment"))?$e("CalloutSourceRxMap")["$[]"](R.$attr("line-comment")):$e("CalloutSourceRx"),K=0,ve(z,"gsub",[V],function J(){var M,_=J.$$s==null?this:J.$$s,r=y;return _.document==null&&(_.document=y),N((M=he["~"])===y?y:M["$[]"](2))?((M=he["~"])===y?y:M["$[]"](0)).$sub($e("RS"),""):$e("Inline").$new(_,"callout",Ue((M=he["~"])===y?y:M["$[]"](4),".")?(K=a(K,1)).$to_s():(M=he["~"])===y?y:M["$[]"](4),$(["id","attributes"],{id:_.document.$callouts().$read_next_id(),attributes:$(["guard"],{guard:N(r=(M=he["~"])===y?y:M["$[]"](1))?r:Ue((M=he["~"])===y?y:M["$[]"](3),"--")?["\x3C!--","-->"]:y})})).$convert()},{$$s:R})}),w(ge,"$highlight_source",function(z,R){var V,K,J=this,M=y,_=y,r=y,f=y,A=y,b=y,d=y,B=y,D=y,Q=y;return J.document==null&&(J.document=y),J.passthroughs==null&&(J.passthroughs=y),N(M=J.document.$syntax_highlighter())&&N(M["$highlight?"]())?(N(R)&&(K=J.$extract_callouts(z),V=Ae(K),z=V[0]==null?y:V[0],_=V[1]==null?y:V[1]),r=J.document.$attributes(),f=M.$name(),N(b=N(J["$attr?"]("linenums"))?(N(d=r["$[]"](""+f+"-linenums-mode"))?d:"table").$to_sym():y)&&N(it(A=J.$attr("start",1).$to_i(),1))&&(A=1),N(J["$attr?"]("highlight"))&&(B=J.$resolve_lines_to_highlight(z,J.$attr("highlight"),A)),K=M.$highlight(J,z,J.$attr("language"),$(["callouts","css_mode","highlight_lines","number_lines","start_line_number","style"],{callouts:_,css_mode:(N(d=r["$[]"](""+f+"-css"))?d:"class").$to_sym(),highlight_lines:B,number_lines:b,start_line_number:A,style:r["$[]"](""+f+"-style")})),V=Ae(K),D=V[0]==null?y:V[0],Q=V[1]==null?y:V[1],N(J.passthroughs["$empty?"]())||(D=D.$gsub($e("HighlightedPassSlotRx"),""+$e("PASS_START")+"\\1"+$e("PASS_END"))),N(_["$nil_or_empty?"]())?D:J.$restore_callouts(D,_,Q)):J.$sub_source(z,R)}),w(ge,"$resolve_lines_to_highlight",function(z,R,V){var K=y,J=y;return V==null&&(V=y),K=[],N(R["$include?"](" "))&&(R=R.$delete(" ")),ve(N(R["$include?"](","))?R.$split(","):R.$split(";"),"map",[],function(_){var r,f,A=y,b=y,d=y,B=y,D=y;return _==null&&(_=y),N(_["$start_with?"]("!"))&&(_=_.$slice(1,_.$length()),A=!0),N(b=N(_["$include?"](".."))?"..":N(_["$include?"]("-"))?"-":y)?(f=_.$partition(b),r=Ae(f),d=r[0]==null?y:r[0],r[1]==null||r[1],B=r[2]==null?y:r[2],(N(B["$empty?"]())||N(it(B=B.$to_i(),0)))&&(B=a(z.$count($e("LF")),1)),N(A)?K=Ve(K,t.Range.$new(d.$to_i(),B,!1).$to_a()):K=K["$|"](t.Range.$new(d.$to_i(),B,!1).$to_a())):N(A)?K.$delete(_.$to_i()):pe(K["$include?"](D=_.$to_i()))?K["$<<"](D):y}),Ue(J=N(V)?Ve(V,1):0,0)||(K=ve(K,"map",[],function(_){return _==null&&(_=y),Ve(_,J)})),K.$sort()},-3),w(ge,"$extract_passthroughs",function(z){var R,V,K=this,J=y,M=y,_=y,r=y,f=y;return K.document==null&&(K.document=y),K.passthroughs==null&&(K.passthroughs=y),J=K.document.$compat_mode(),M=K.passthroughs,(N(z["$include?"]("++"))||N(z["$include?"]("$$"))||N(z["$include?"]("ss:")))&&(z=ve(z,"gsub",[$e("InlinePassMacroRx")],function A(){var b,d=A.$$s==null?this:A.$$s,B=y,D=y,Q=y,X=y,ce=y,Re=y,Ye=y,Qe=y,ot=y;if(N(B=(b=he["~"])===y?y:b["$[]"](4))){if(N(J)&&Ue(B,"++"))return(N((b=he["~"])===y?y:b["$[]"](2))?""+((b=he["~"])===y?y:b["$[]"](1))+"["+((b=he["~"])===y?y:b["$[]"](2))+"]"+((b=he["~"])===y?y:b["$[]"](3)):""+((b=he["~"])===y?y:b["$[]"](1))+((b=he["~"])===y?y:b["$[]"](3)))+"++"+d.$extract_passthroughs((b=he["~"])===y?y:b["$[]"](5))+"++";if(N(D=(b=he["~"])===y?y:b["$[]"](2))){if(N(et(Q=((b=he["~"])===y?y:b["$[]"](3)).$length(),0)))return""+((b=he["~"])===y?y:b["$[]"](1))+"["+D+"]"+C($e("RS"),Ve(Q,1))+B+((b=he["~"])===y?y:b["$[]"](5))+B;Ue((b=he["~"])===y?y:b["$[]"](1),$e("RS"))?X="["+D+"]":Ue(B,"++")?Ue(D,"x-")?(ce=!0,Re=$([],{})):N(D["$end_with?"](" x-"))?(ce=!0,Re=d.$parse_quoted_text_attributes(D.$slice(0,Ve(D.$length(),3)))):Re=d.$parse_quoted_text_attributes(D):Re=d.$parse_quoted_text_attributes(D)}else if(N(et(Q=((b=he["~"])===y?y:b["$[]"](3)).$length(),0)))return""+C($e("RS"),Ve(Q,1))+B+((b=he["~"])===y?y:b["$[]"](5))+B;Ye=Ue(B,"+++")?[]:$e("BASIC_SUBS"),N(Re)?N(ce)?M["$[]="](Qe=M.$size(),$(["text","subs","type","attributes"],{text:(b=he["~"])===y?y:b["$[]"](5),subs:$e("NORMAL_SUBS"),type:"monospaced",attributes:Re})):M["$[]="](Qe=M.$size(),$(["text","subs","type","attributes"],{text:(b=he["~"])===y?y:b["$[]"](5),subs:Ye,type:"unquoted",attributes:Re})):M["$[]="](Qe=M.$size(),$(["text","subs"],{text:(b=he["~"])===y?y:b["$[]"](5),subs:Ye}))}else{if(Ue((b=he["~"])===y?y:b["$[]"](6),$e("RS")))return((b=he["~"])===y?y:b["$[]"](0)).$slice(1,((b=he["~"])===y?y:b["$[]"](0)).$length());N(Ye=(b=he["~"])===y?y:b["$[]"](7))?M["$[]="](Qe=M.$size(),$(["text","subs"],{text:d.$normalize_text((b=he["~"])===y?y:b["$[]"](8),y,!0),subs:d.$resolve_pass_subs(Ye)})):M["$[]="](Qe=M.$size(),$(["text"],{text:d.$normalize_text((b=he["~"])===y?y:b["$[]"](8),y,!0)}))}return""+(N(ot=X)?ot:"")+$e("PASS_START")+Qe+$e("PASS_END")},{$$s:K})),V=$e("InlinePassRx")["$[]"](J),R=Ae(V),_=R[0]==null?y:R[0],r=R[1]==null?y:R[1],f=R[2]==null?y:R[2],(N(z["$include?"](_))||N(r)&&N(z["$include?"](r)))&&(z=ve(z,"gsub",[f],function A(){var b,d=A.$$s==null?this:A.$$s,B=y,D=y,Q=y,X=y,ce=y,Re=y,Ye=y,Qe=y,ot=y,tt=y,at=y,ct=y;if(B=(b=he["~"])===y?y:b["$[]"](1),D=N(Q=(b=he["~"])===y?y:b["$[]"](4))?Q:(b=he["~"])===y?y:b["$[]"](3),N((b=he["~"])===y?y:b["$[]"](5))&&(X=!0),ce=(b=he["~"])===y?y:b["$[]"](6),Re=(b=he["~"])===y?y:b["$[]"](7),Ye=(b=he["~"])===y?y:b["$[]"](8),N(J)?Qe=!0:N(D)&&(Ue(D,"x-")||N(D["$end_with?"](" x-")))&&(Qe=ot=!0),N(D)){if(N(X))return""+B+"["+D+"]"+ce.$slice(1,ce.$length());if(Ue(B,$e("RS"))){if(N(ot)&&Ue(Re,"`"))return""+B+"["+D+"]"+ce;B="["+D+"]"}else N(ot)?tt=Ue(D,"x-")?$([],{}):d.$parse_quoted_text_attributes(D.$slice(0,Ve(D.$length(),3))):tt=d.$parse_quoted_text_attributes(D)}else{if(N(X))return""+B+ce.$slice(1,ce.$length());if(N(J)&&Ue(B,$e("RS")))return ce}return N(J)?M["$[]="](at=M.$size(),$(["text","subs","attributes","type"],{text:Ye,subs:$e("BASIC_SUBS"),attributes:tt,type:"monospaced"})):N(tt)?N(Qe)?(ct=Ue(Re,"`")?$e("BASIC_SUBS"):$e("NORMAL_SUBS"),M["$[]="](at=M.$size(),$(["text","subs","attributes","type"],{text:Ye,subs:ct,attributes:tt,type:"monospaced"}))):M["$[]="](at=M.$size(),$(["text","subs","attributes","type"],{text:Ye,subs:$e("BASIC_SUBS"),attributes:tt,type:"unquoted"})):M["$[]="](at=M.$size(),$(["text","subs"],{text:Ye,subs:$e("BASIC_SUBS")})),""+B+$e("PASS_START")+at+$e("PASS_END")},{$$s:K})),N(z["$include?"](":"))&&(N(z["$include?"]("stem:"))||N(z["$include?"]("math:")))&&(z=ve(z,"gsub",[$e("InlineStemMacroRx")],function A(){var b,d=A.$$s==null?this:A.$$s,B=y,D=y,Q=y,X=y;return d.document==null&&(d.document=y),N(((b=he["~"])===y?y:b["$[]"](0))["$start_with?"]($e("RS")))?((b=he["~"])===y?y:b["$[]"](0)).$slice(1,((b=he["~"])===y?y:b["$[]"](0)).$length()):(Ue(B=((b=he["~"])===y?y:b["$[]"](1)).$to_sym(),"stem")&&(B=$e("STEM_TYPE_ALIASES")["$[]"](d.document.$attributes()["$[]"]("stem")).$to_sym()),D=(b=he["~"])===y?y:b["$[]"](2),Q=d.$normalize_text((b=he["~"])===y?y:b["$[]"](3),y,!0),Ue(B,"latexmath")&&N(Q["$start_with?"]("$"))&&N(Q["$end_with?"]("$"))&&(Q=Q.$slice(1,Ve(Q.$length(),2))),D=N(D)?d.$resolve_pass_subs(D):N(d.document["$basebackend?"]("html"))?$e("BASIC_SUBS"):y,M["$[]="](X=M.$size(),$(["text","subs","type"],{text:Q,subs:D,type:B})),""+$e("PASS_START")+X+$e("PASS_END"))},{$$s:K})),z}),w(ge,"$restore_passthroughs",function(z){var R=this,V=y;return R.passthroughs==null&&(R.passthroughs=y),V=R.passthroughs,ve(z,"gsub",[$e("PassSlotRx")],function K(){var J,M=K.$$s==null?this:K.$$s,_=y,r=y,f=y,A=y,b=y;return N(_=V["$[]"](((J=he["~"])===y?y:J["$[]"](1)).$to_i()))?(r=M.$apply_subs(_["$[]"]("text"),_["$[]"]("subs")),N(f=_["$[]"]("type"))&&(N(A=_["$[]"]("attributes"))&&(b=A["$[]"]("id")),r=$e("Inline").$new(M,"quoted",r,$(["type","id","attributes"],{type:f,id:b,attributes:A})).$convert()),N(r["$include?"]($e("PASS_START")))?M.$restore_passthroughs(r):r):(M.$logger().$error("unresolved passthrough detected: "+z),"??pass??")},{$$s:R})}),w(ge,"$resolve_subs",function(z,R,V,K){var J=this,M=y,_=y,r=y,f=y;return R==null&&(R="block"),V==null&&(V=y),K==null&&(K=y),N(z["$nil_or_empty?"]())||(M=y,N(z["$include?"](" "))&&(z=z.$delete(" ")),_=$e("SubModifierSniffRx")["$match?"](z),ve(z.$split(","),"each",[],function(b){var d=y,B=y,D=y,Q=y,X=y,ce=y;if(b==null&&(b=y),d=y,N(_)&&(Ue(B=b.$chr(),"+")?(d="append",b=b.$slice(1,b.$length())):Ue(B,"-")?(d="remove",b=b.$slice(1,b.$length())):N(b["$end_with?"]("+"))&&(d="prepend",b=b.$chop())),b=b.$to_sym(),Ue(R,"inline")&&(Ue(b,"verbatim")||Ue(b,"v"))?D=$e("BASIC_SUBS"):N($e("SUB_GROUPS")["$key?"](b))?D=$e("SUB_GROUPS")["$[]"](b):Ue(R,"inline")&&Ue(b.$length(),1)&&N($e("SUB_HINTS")["$key?"](b))?(Q=$e("SUB_HINTS")["$[]"](b),N(X=$e("SUB_GROUPS")["$[]"](Q))?D=X:D=[Q]):D=[b],N(d))switch(M=N(ce=M)?ce:N(V)?V.$drop(0):[],d){case"append":return M=a(M,D);case"prepend":return M=a(D,M);case"remove":return M=Ve(M,D);default:return y}else return M=N(ce=M)?ce:[],M=a(M,D)}),!N(M))?y:(r=M["$&"]($e("SUB_OPTIONS")["$[]"](R)),N(Ve(M,r)["$empty?"]())||(f=Ve(M,r),J.$logger().$warn("invalid substitution type"+(N(et(f.$size(),1))?"s":"")+(N(K)?" for ":"")+K+": "+f.$join(", "))),r)},-2),w(ge,"$resolve_block_subs",function(z,R,V){var K=this;return K.$resolve_subs(z,"block",R,V)}),w(ge,"$resolve_pass_subs",function(z){var R=this;return R.$resolve_subs(z,"inline",y,"passthrough macro")}),w(ge,"$expand_subs",function(z,R){var V=this,K=y,J=y,M=y;return R==null&&(R=y),Me(Ze("Symbol"),K=z)?Ue(z,"none")?y:N(J=$e("SUB_GROUPS")["$[]"](z))?J:[z]:Me(Ze("Array"),K)?(M=[],ve(z,"each",[],function(r){var f=y;return r==null&&(r=y),Ue(r,"none")?y:N(f=$e("SUB_GROUPS")["$[]"](r))?M=a(M,f):M["$<<"](r)}),N(M["$empty?"]())?y:M):V.$resolve_subs(z,"inline",y,R)},-2),w(ge,"$commit_subs",function(){var z=this,R=y,V=y,K=y,J=y,M=y;if(z.default_subs==null&&(z.default_subs=y),z.content_model==null&&(z.content_model=y),z.context==null&&(z.context=y),z.subs==null&&(z.subs=y),z.attributes==null&&(z.attributes=y),z.document==null&&(z.document=y),z.style==null&&(z.style=y),!N(R=z.default_subs))switch(z.content_model){case"simple":R=$e("NORMAL_SUBS");break;case"verbatim":R=Ue(z.context,"verse")?$e("NORMAL_SUBS"):$e("VERBATIM_SUBS");break;case"raw":R=Ue(z.context,"stem")?$e("BASIC_SUBS"):$e("NO_SUBS");break;default:return z.subs}return N(V=z.attributes["$[]"]("subs"))?z.subs=N(K=z.$resolve_block_subs(V,R,z.context))?K:[]:z.subs=R.$drop(0),Ue(z.context,"listing")&&Ue(z.style,"source")&&N(M=z.document.$syntax_highlighter())&&N(M["$highlight?"]())&&N(J=z.subs.$index("specialcharacters"))&&z.subs["$[]="](J,"highlight"),y}),w(ge,"$parse_attributes",function(z,R,V){var K=this,J=y,M=y;return K.document==null&&(K.document=y),R==null&&(R=[]),V==null&&(V=$([],{})),N(N(z)?z["$empty?"]():!0)?$([],{}):(N(V["$[]"]("unescape_input"))&&(z=K.$normalize_text(z,!0,!0)),N(V["$[]"]("sub_input"))&&N(z["$include?"]($e("ATTR_REF_HEAD")))&&(z=K.document.$sub_attributes(z)),N(V["$[]"]("sub_result"))&&(J=K),N(M=V["$[]"]("into"))?$e("AttributeList").$new(z,J).$parse_into(M,R):$e("AttributeList").$new(z,J).$parse(R))},-2),ge.$private(),w(ge,"$extract_attributes_from_text",function(z,R){var V=this,K=y,J=y,M=y;return R==null&&(R=y),K=N(z["$include?"]($e("LF")))?z.$tr($e("LF")," "):z,N(J=(M=$e("AttributeList").$new(K,V).$parse())["$[]"](1))?Ue(J,K)?[z,M.$clear()]:[J,M]:[R,M]},-2),w(ge,"$extract_callouts",function(z){var R=this,V=y,K=y,J=y,M=y,_=y;return V=$([],{}),K=J=0,M=y,_=N(R["$attr?"]("line-comment"))?$e("CalloutExtractRxMap")["$[]"](R.$attr("line-comment")):$e("CalloutExtractRx"),z=ve(z.$split($e("LF"),-1),"map",[],function(f){return f==null&&(f=y),J=a(J,1),ve(f,"gsub",[_],function(){var b,d=y;return N((b=he["~"])===y?y:b["$[]"](2))?((b=he["~"])===y?y:b["$[]"](0)).$sub($e("RS"),""):((N(d=V["$[]"](J))?d:(b=[J,[]],ve(V,"[]=",b),b[b.length-1]))["$<<"]([N(d=(b=he["~"])===y?y:b["$[]"](1))?d:Ue((b=he["~"])===y?y:b["$[]"](3),"--")?["\x3C!--","-->"]:y,Ue((b=he["~"])===y?y:b["$[]"](4),".")?(K=a(K,1)).$to_s():(b=he["~"])===y?y:b["$[]"](4)]),M=J,"")})}).$join($e("LF")),N(M)?Ue(M,J)&&(z=""+z+$e("LF")):V=y,[z,V]}),w(ge,"$restore_callouts",function(z,R,V){var K=this,J=y,M=y;return V==null&&(V=y),N(V)?(J=z.$slice(0,V),z=z.$slice(V,z.$length())):J="",M=0,a(J,ve(z.$split($e("LF"),-1),"map",[],function _(r){var f,A,b=_.$$s==null?this:_.$$s,d=y,B=y,D=y;return b.document==null&&(b.document=y),r==null&&(r=y),N(d=R.$delete(M=a(M,1)))?Ue(d.$size(),1)?(A=d["$[]"](0),f=Ae(A),B=f[0]==null?y:f[0],D=f[1]==null?y:f[1],""+r+$e("Inline").$new(b,"callout",D,$(["id","attributes"],{id:b.document.$callouts().$read_next_id(),attributes:$(["guard"],{guard:B})})).$convert()):""+r+ve(d,"map",[],function Q(X,ce){var Re=Q.$$s==null?this:Q.$$s;return Re.document==null&&(Re.document=y),X==null&&(X=y),ce==null&&(ce=y),$e("Inline").$new(Re,"callout",ce,$(["id","attributes"],{id:Re.document.$callouts().$read_next_id(),attributes:$(["guard"],{guard:X})})).$convert()},{$$s:b}).$join(" "):r},{$$s:K}).$join($e("LF")))},-3),w(ge,"$convert_quoted_text",function(z,R,V){var K=this,J=y,M=y,_=y,r=y,f=y;if(N(z["$[]"](0)["$start_with?"]($e("RS"))))if(Ue(V,"constrained")&&N(J=z["$[]"](2)))M="["+J+"]";else return z["$[]"](0).$slice(1,z["$[]"](0).$length());return Ue(V,"constrained")?N(M)?""+M+$e("Inline").$new(K,"quoted",z["$[]"](3),$(["type"],{type:R})).$convert():(N(_=z["$[]"](2))&&(r=(f=K.$parse_quoted_text_attributes(_))["$[]"]("id"),Ue(R,"mark")&&(R="unquoted")),""+z["$[]"](1)+$e("Inline").$new(K,"quoted",z["$[]"](3),$(["type","id","attributes"],{type:R,id:r,attributes:f})).$convert()):(N(_=z["$[]"](1))&&(r=(f=K.$parse_quoted_text_attributes(_))["$[]"]("id"),Ue(R,"mark")&&(R="unquoted")),$e("Inline").$new(K,"quoted",z["$[]"](2),$(["type","id","attributes"],{type:R,id:r,attributes:f})).$convert())}),w(ge,"$do_replacement",function(z,R,V){var K=y;if(N((K=z["$[]"](0))["$include?"]($e("RS"))))return K.$sub($e("RS"),"");switch(V){case"none":return R;case"bounding":return a(a(z["$[]"](1),R),z["$[]"](2));default:return a(z["$[]"](1),R)}}),w(ge,"$parse_quoted_text_attributes",function(z){var R,V,K=this,J=y,M=y,_=y,r=y,f=y;return N(z["$include?"]($e("ATTR_REF_HEAD")))&&(z=K.$sub_attributes(z)),N(z["$include?"](","))&&(z=z.$slice(0,z.$index(","))),N((z=z.$strip())["$empty?"]())?$([],{}):N(z["$start_with?"](".","#"))&&N($e("Compliance").$shorthand_property_syntax())?(V=z.$partition("#"),R=Ae(V),J=R[0]==null?y:R[0],R[1]==null||R[1],M=R[2]==null?y:R[2],_=$([],{}),N(M["$empty?"]())?N(et(J.$length(),1))&&_["$[]="]("role",J.$tr("."," ").$lstrip()):(V=M.$partition("."),R=Ae(V),r=R[0]==null?y:R[0],R[1]==null||R[1],f=R[2]==null?y:R[2],N(r["$empty?"]())||_["$[]="]("id",r),N(f["$empty?"]())?N(et(J.$length(),1))&&_["$[]="]("role",J.$tr("."," ").$lstrip()):N(et(J.$length(),1))?_["$[]="]("role",a(a(J,"."),f).$tr("."," ").$lstrip()):_["$[]="]("role",f.$tr("."," "))),_):$(["role"],{role:z})}),w(ge,"$normalize_text",function(z,R,V){return R==null&&(R=y),V==null&&(V=y),N(z["$empty?"]())||(N(R)&&(z=z.$strip().$tr($e("LF")," ")),N(V)&&N(z["$include?"]($e("R_SB")))&&(z=z.$gsub($e("ESC_R_SB"),$e("R_SB")))),z},-2),w(ge,"$split_simple_csv",function(z){var R=y,V=y,K=y;return N(z["$empty?"]())?[]:N(z["$include?"]('"'))?(R=[],V="",K=y,ve(z,"each_char",[],function(M){switch(M==null&&(M=y),M){case",":return N(K)?V=a(V,M):(R["$<<"](V.$strip()),V="");case'"':return K=K["$!"]();default:return V=a(V,M)}}),R["$<<"](V.$strip())):ve(z.$split(","),"map",[],function(M){return M==null&&(M=y),M.$strip()})})}(De[0],De)}(Xe[0],Xe)},Opal.modules["asciidoctor/version"]=function(t){var g=t.module,u=t.const_set,$=[];return t.nil,function(E,a){var k=g(E,"Asciidoctor"),pe=[k].concat(a);return u(pe[0],"VERSION","2.0.20")}($[0],$)},Opal.modules["asciidoctor/abstract_node"]=function(t){var g=t.module,u=t.klass,$=t.hash2,E=t.eqeq,a=t.truthy,k=t.def,pe=t.send,N=t.rb_minus,ve=t.eqeqeq,w=t.rb_lt,Ge=t.not,he=t.to_ary,Ue=[],Ae=t.nil,Be=t.$$$;return t.add_stubs("include,attr_reader,attr_accessor,==,document,to_s,[],merge,raise,converter,attributes,key?,[]=,delete,tap,new,each_key,end_with?,<<,slice,-,length,update,split,include?,===,join,empty?,apply_reftext_subs,attr?,attr,extname?,image_uri,<,safe,normalize_web_path,uriish?,encode_spaces_in_uri,generate_data_uri_from_uri,generate_data_uri,extname,normalize_system_path,readable?,strict_encode64,binread,warn,logger,require_library,!,open_uri,content_type,read,base_dir,root?,path_resolver,system_path,web_path,!=,prepare_source_string,fetch,read_asset"),function(st,Me){var et=g(st,"Asciidoctor"),Pe=[et].concat(Me);return function(Ve,it,C){var Xe=u(Ve,it,"AbstractNode"),y=[Xe].concat(C),Ze=t.$r(y),rt=Xe.$$prototype;return rt.document=rt.attributes=rt.parent=Ae,Xe.$include(Ze("Logging")),Xe.$include(Ze("Substitutors")),Xe.$attr_reader("attributes"),Xe.$attr_reader("context"),Xe.$attr_reader("document"),Xe.$attr_accessor("id"),Xe.$attr_reader("node_name"),Xe.$attr_reader("parent"),k(Xe,"$initialize",function(T,De,ue){var we=this,ge=Ae;return ue==null&&(ue=$([],{})),E(De,"document")?we.document=we:a(T)&&(we.document=(we.parent=T).$document()),we.node_name=(we.context=De).$to_s(),we.attributes=a(ge=ue["$[]"]("attributes"))?ge.$merge():$([],{}),we.passthroughs=[]},-3),k(Xe,"$block?",function(){var T=this;return T.$raise(Be("NotImplementedError"))}),k(Xe,"$inline?",function(){var T=this;return T.$raise(Be("NotImplementedError"))}),k(Xe,"$converter",function(){var T=this;return T.document.$converter()}),k(Xe,"$parent=",function(T){var De,ue=this;return De=[T,T.$document()],ue.parent=De[0],ue.document=De[1],De}),k(Xe,"$attr",function(T,De,ue){var we=this,ge=Ae,Z=Ae,$e=Ae,Y=Ae;return De==null&&(De=Ae),ue==null&&(ue=Ae),a(ge=we.attributes["$[]"](T.$to_s()))?ge:a(Z=a($e=a(Y=ue)?we.parent:Y)?we.document.$attributes()["$[]"]((E(ue,!0)?T:ue).$to_s()):$e)?Z:De},-2),k(Xe,"$attr?",function(T,De,ue){var we=this,ge=Ae;return De==null&&(De=Ae),ue==null&&(ue=Ae),a(De)?De["$=="](a(ge=we.attributes["$[]"](T.$to_s()))?ge:a(ue)&&a(we.parent)?we.document.$attributes()["$[]"]((E(ue,!0)?T:ue).$to_s()):Ae):a(ge=we.attributes["$key?"](T.$to_s()))?ge:a(ue)&&a(we.parent)?we.document.$attributes()["$key?"]((E(ue,!0)?T:ue).$to_s()):!1},-2),k(Xe,"$set_attr",function(T,De,ue){var we=this;return De==null&&(De=""),ue==null&&(ue=!0),E(ue,!1)&&a(we.attributes["$key?"](T))?!1:(we.attributes["$[]="](T,De),!0)},-2),k(Xe,"$remove_attr",function(T){var De=this;return De.attributes.$delete(T)}),k(Xe,"$option?",function(T){var De=this;return!!a(De.attributes["$[]"](""+T+"-option"))}),k(Xe,"$set_option",function(T){var De=this;return De.attributes["$[]="](""+T+"-option",""),Ae}),k(Xe,"$enabled_options",function(){var T=this;return pe(Be("Set").$new(),"tap",[],function De(ue){var we=De.$$s==null?this:De.$$s;return we.attributes==null&&(we.attributes=Ae),ue==null&&(ue=Ae),pe(we.attributes,"each_key",[],function(Z){return Z==null&&(Z=Ae),a(Z.$to_s()["$end_with?"]("-option"))?ue["$<<"](Z.$slice(0,N(Z.$length(),7))):Ae})},{$$s:T})}),k(Xe,"$update_attributes",function(T){var De=this;return De.attributes.$update(T)}),k(Xe,"$role",function(){var T=this;return T.attributes["$[]"]("role")}),k(Xe,"$roles",function(){var T=this,De=Ae;return a(De=T.attributes["$[]"]("role"))?De.$split():[]}),k(Xe,"$role?",function(T){var De=this;return T==null&&(T=Ae),a(T)?T["$=="](De.attributes["$[]"]("role")):De.attributes["$key?"]("role")},-1),k(Xe,"$has_role?",function(T){var De=this,ue=Ae;return a(ue=De.attributes["$[]"]("role"))?(" "+ue+" ")["$include?"](" "+T+" "):!1}),k(Xe,"$role=",function(T){var De,ue=this;return De=["role",ve(Be("Array"),T)?T.$join(" "):T],pe(ue.attributes,"[]=",De),De[De.length-1]}),k(Xe,"$add_role",function(T){var De=this,ue=Ae;return a(ue=De.attributes["$[]"]("role"))?a((" "+ue+" ")["$include?"](" "+T+" "))?!1:(De.attributes["$[]="]("role",""+ue+" "+T),!0):(De.attributes["$[]="]("role",T),!0)}),k(Xe,"$remove_role",function(T){var De=this,ue=Ae;return a(ue=De.attributes["$[]"]("role"))&&a((ue=ue.$split()).$delete(T))?(a(ue["$empty?"]())?De.attributes.$delete("role"):De.attributes["$[]="]("role",ue.$join(" ")),!0):!1}),k(Xe,"$reftext",function(){var T=this,De=Ae;return a(De=T.attributes["$[]"]("reftext"))?T.$apply_reftext_subs(De):Ae}),k(Xe,"$reftext?",function(){var T=this;return T.attributes["$key?"]("reftext")}),k(Xe,"$icon_uri",function(T){var De=this,ue=Ae;return a(De["$attr?"]("icon"))?(ue=De.$attr("icon"),a(Ze("Helpers")["$extname?"](ue))||(ue=""+ue+"."+De.document.$attr("icontype","png"))):ue=""+T+"."+De.document.$attr("icontype","png"),De.$image_uri(ue,"iconsdir")}),k(Xe,"$image_uri",function(T,De){var ue=this,we=Ae,ge=Ae;return De==null&&(De="imagesdir"),a(w((we=ue.document).$safe(),Be(Ze("SafeMode"),"SECURE")))&&a(we["$attr?"]("data-uri"))?a(Ze("Helpers")["$uriish?"](T))&&a(T=Ze("Helpers").$encode_spaces_in_uri(T))||a(De)&&a(ge=we.$attr(De))&&a(Ze("Helpers")["$uriish?"](ge))&&a(T=ue.$normalize_web_path(T,ge,!1))?a(we["$attr?"]("allow-uri-read"))?ue.$generate_data_uri_from_uri(T,we["$attr?"]("cache-uri")):T:ue.$generate_data_uri(T,De):ue.$normalize_web_path(T,a(De)?we.$attr(De):Ae)},-2),k(Xe,"$media_uri",function(T,De){var ue=this;return De==null&&(De="imagesdir"),ue.$normalize_web_path(T,a(De)?ue.document.$attr(De):Ae)},-2),k(Xe,"$generate_data_uri",function(T,De){var ue=this,we=Ae,ge=Ae,Z=Ae;return De==null&&(De=Ae),a(we=Ze("Helpers").$extname(T,Ae))?ge=E(we,".svg")?"image/svg+xml":"image/"+we.$slice(1,we.$length()):ge="application/octet-stream",a(De)?Z=ue.$normalize_system_path(T,ue.document.$attr(De),Ae,$(["target_name"],{target_name:"image"})):Z=ue.$normalize_system_path(T),a(Be("File")["$readable?"](Z))?"data:"+ge+";base64,"+Be("Base64").$strict_encode64(Be("File").$binread(Z)):(ue.$logger().$warn("image to embed not found or not readable: "+Z),"data:"+ge+";base64,")},-2),k(Xe,"$generate_data_uri_from_uri",function(T,De){var ue,we,ge=this,Z=Ae,$e=Ae;De==null&&(De=!1),a(De)?Ze("Helpers").$require_library("open-uri/cached","open-uri-cached"):Ge(Ze("RUBY_ENGINE_OPAL"))&&Be("OpenURI");try{return we=pe(Be("OpenURI"),"open_uri",[T,Ze("URI_READ_MODE")],function(z){return z==null&&(z=Ae),[z.$content_type(),z.$read()]}),ue=he(we),Z=ue[0]==null?Ae:ue[0],$e=ue[1]==null?Ae:ue[1],"data:"+Z+";base64,"+Be("Base64").$strict_encode64($e)}catch(Y){if(t.rescue(Y,[Ze("StandardError")]))try{return ge.$logger().$warn("could not retrieve image data from URI: "+T),T}finally{t.pop_exception()}else throw Y}},-2),k(Xe,"$normalize_asset_path",function(T,De,ue){var we=this;return De==null&&(De="path"),ue==null&&(ue=!0),we.$normalize_system_path(T,we.document.$base_dir(),Ae,$(["target_name","recover"],{target_name:De,recover:ue}))},-2),k(Xe,"$normalize_system_path",function(T,De,ue,we){var ge=this,Z=Ae,$e=Ae;return De==null&&(De=Ae),ue==null&&(ue=Ae),we==null&&(we=$([],{})),a(w((Z=ge.document).$safe(),Be(Ze("SafeMode"),"SAFE")))?a(De)?a(Z.$path_resolver()["$root?"](De))||(De=Be("File").$join(Z.$base_dir(),De)):De=Z.$base_dir():(De=a($e=De)?$e:Z.$base_dir(),ue=a($e=ue)?$e:Z.$base_dir()),Z.$path_resolver().$system_path(T,De,ue,we)},-2),k(Xe,"$normalize_web_path",function(T,De,ue){var we=this;return De==null&&(De=Ae),ue==null&&(ue=!0),a(ue)&&a(Ze("Helpers")["$uriish?"](T))?Ze("Helpers").$encode_spaces_in_uri(T):we.document.$path_resolver().$web_path(T,De)},-2),k(Xe,"$read_asset",function(T,De){var ue=this,we=Ae;return De==null&&(De=$([],{})),ve(Be("Hash"),De)||(De=$(["warn_on_failure"],{warn_on_failure:De["$!="](!1)})),a(Be("File")["$readable?"](T))?a(De["$[]"]("normalize"))?Ze("Helpers").$prepare_source_string(Be("File").$read(T,$(["mode"],{mode:Ze("FILE_READ_MODE")}))).$join(Ze("LF")):Be("File").$read(T,$(["mode"],{mode:Ze("FILE_READ_MODE")})):(a(De["$[]"]("warn_on_failure"))&&ue.$logger().$warn(""+(a(we=ue.$attr("docfile"))?we:"<stdin>")+": "+(a(we=De["$[]"]("label"))?we:"file")+" does not exist or cannot be read: "+T),Ae)},-2),k(Xe,"$read_contents",function(T,De){var ue=this,we=Ae,ge=Ae,Z=Ae,$e=Ae;if(De==null&&(De=$([],{})),we=ue.document,a(Ze("Helpers")["$uriish?"](T))||a(ge=De["$[]"]("start"))&&a(Ze("Helpers")["$uriish?"](ge))&&a(T=we.$path_resolver().$web_path(T,ge)))if(a(we["$attr?"]("allow-uri-read"))){a(we["$attr?"]("cache-uri"))&&Ze("Helpers").$require_library("open-uri/cached","open-uri-cached");try{a(De["$[]"]("normalize"))?Z=Ze("Helpers").$prepare_source_string(pe(Be("OpenURI"),"open_uri",[T,Ze("URI_READ_MODE")],function(z){return z==null&&(z=Ae),z.$read()})).$join(Ze("LF")):Z=pe(Be("OpenURI"),"open_uri",[T,Ze("URI_READ_MODE")],function(z){return z==null&&(z=Ae),z.$read()})}catch(Y){if(t.rescue(Y,[Ze("StandardError")]))try{a(De.$fetch("warn_on_failure",!0))&&ue.$logger().$warn("could not retrieve contents of "+(a($e=De["$[]"]("label"))?$e:"asset")+" at URI: "+T)}finally{t.pop_exception()}else throw Y}}else a(De.$fetch("warn_on_failure",!0))&&ue.$logger().$warn("cannot retrieve contents of "+(a($e=De["$[]"]("label"))?$e:"asset")+" at URI: "+T+" (allow-uri-read attribute not enabled)");else T=ue.$normalize_system_path(T,De["$[]"]("start"),Ae,$(["target_name"],{target_name:a($e=De["$[]"]("label"))?$e:"asset"})),Z=ue.$read_asset(T,$(["normalize","warn_on_failure","label"],{normalize:De["$[]"]("normalize"),warn_on_failure:De.$fetch("warn_on_failure",!0),label:De["$[]"]("label")}));return a(Z)&&a(De["$[]"]("warn_if_empty"))&&a(Z["$empty?"]())&&ue.$logger().$warn("contents of "+(a($e=De["$[]"]("label"))?$e:"asset")+" is empty: "+T),Z},-2),k(Xe,"$is_uri?",function(T){return Ze("Helpers")["$uriish?"](T)})}(Pe[0],null,Pe)}(Ue[0],Ue)},Opal.modules["asciidoctor/abstract_block"]=function(t){var g=t.module,u=t.klass,$=t.hash2,E=t.send2,a=t.find_super,k=t.eqeq,pe=t.eqeqeq,N=t.def,ve=t.return_val,w=t.truthy,Ge=t.alias,he=t.send,Ue=t.rb_plus,Ae=t.not,Be=t.neqeq,st=[],Me=t.nil,et=t.$$$;return t.add_stubs("attr_reader,attr_writer,attr_accessor,==,===,level,file,lineno,playback_attributes,convert,converter,join,map,to_s,parent,parent=,<<,empty?,Integer,find_by_internal,to_proc,find_by,context,[],items,+,find_index,include?,next_adjacent_block,blocks,select,sub_specialchars,match?,sub_replacements,title,apply_title_subs,delete,!,reftext,nil_or_empty?,sub_placeholder,sub_quotes,compat_mode,attributes,chomp,increment_and_store_counter,index=,numbered,sectname,numeral=,counter,caption=,numeral,int_to_roman,each,assign_numeral,reindex_sections,protected,has_role?,raise,header?,!=,flatten,head,rows,merge,body,foot,style,inner_document"),function(Pe,Ve){var it=g(Pe,"Asciidoctor"),C=[it].concat(Ve),Xe=t.$r(C);return function(y,Ze,rt){var H=u(y,Ze,"AbstractBlock"),T=[H].concat(rt),De=t.$r(T),ue=H.$$prototype;return ue.source_location=ue.document=ue.attributes=ue.blocks=ue.numeral=ue.context=ue.parent=ue.caption=ue.style=ue.converted_title=ue.title=ue.subs=ue.next_section_index=ue.next_section_ordinal=ue.id=ue.header=Me,H.$attr_reader("blocks"),H.$attr_writer("caption"),H.$attr_accessor("content_model"),H.$attr_accessor("level"),H.$attr_accessor("numeral"),H.$attr_accessor("source_location"),H.$attr_accessor("style"),H.$attr_reader("subs"),N(H,"$initialize",function we(ge,Z,$e){var Y=we.$$p||Me,z=this;return we.$$p=null,$e==null&&($e=$([],{})),E(z,a(z,"initialize",we,!1,!0),"initialize",[ge,Z,$e],Y),z.content_model="compound",z.blocks=[],z.subs=[],z.id=z.title=z.caption=z.numeral=z.style=z.default_subs=z.source_location=Me,k(Z,"document")||k(Z,"section")?(z.level=z.next_section_index=0,z.next_section_ordinal=1):pe(De("AbstractBlock"),ge)?z.level=ge.$level():z.level=Me},-3),N(H,"$block?",ve(!0)),N(H,"$inline?",ve(!1)),N(H,"$file",function(){var ge=this,Z=Me;return w(Z=ge.source_location)?ge.source_location.$file():Z}),N(H,"$lineno",function(){var ge=this,Z=Me;return w(Z=ge.source_location)?ge.source_location.$lineno():Z}),N(H,"$convert",function(){var ge=this;return ge.document.$playback_attributes(ge.attributes),ge.$converter().$convert(ge)}),Ge(H,"render","convert"),N(H,"$content",function(){var ge=this;return he(ge.blocks,"map",[],function($e){return $e==null&&($e=Me),$e.$convert()}).$join(De("LF"))}),N(H,"$context=",function(ge){var Z=this;return Z.node_name=(Z.context=ge).$to_s()}),N(H,"$<<",function(ge){var Z=this;return k(ge.$parent(),Z)||ge["$parent="](Z),Z.blocks["$<<"](ge),Z}),Ge(H,"append","<<"),N(H,"$blocks?",function(){var ge=this;return!w(ge.blocks["$empty?"]())}),N(H,"$sections?",ve(!1)),N(H,"$number",function(){var ge=this;try{return ge.$Integer(ge.numeral)}catch(Z){if(t.rescue(Z,[De("StandardError")]))try{return ge.numeral}finally{t.pop_exception()}else throw Z}}),N(H,"$number=",function(ge){var Z=this;return Z.numeral=ge.$to_s()}),N(H,"$find_by",function we(ge){var Z=we.$$p||Me,$e=this,Y=Me;we.$$p=null,ge==null&&(ge=$([],{}));try{return he($e,"find_by_internal",[ge,Y=[]],Z.$to_proc())}catch(z){if(t.rescue(z,[et("StopIteration")]))try{return Y}finally{t.pop_exception()}else throw z}},-1),Ge(H,"query","find_by"),N(H,"$next_adjacent_block",function(){var ge=this,Z=Me,$e=Me;return k(ge.context,"document")?Me:k((Z=ge.parent).$context(),"dlist")&&k(ge.context,"list_item")?w($e=Z.$items()["$[]"](Ue(he(Z.$items(),"find_index",[],function Y(z,R){var V=Y.$$s==null?this:Y.$$s,K=Me;return z==null&&(z=Me),R==null&&(R=Me),w(K=z["$include?"](V))?K:R["$=="](V)},{$$s:ge}),1)))?$e:Z.$next_adjacent_block():w($e=Z.$blocks()["$[]"](Ue(Z.$blocks().$find_index(ge),1)))?$e:Z.$next_adjacent_block()}),N(H,"$sections",function(){var ge=this;return he(ge.blocks,"select",[],function($e){return $e==null&&($e=Me),$e.$context()["$=="]("section")})}),N(H,"$alt",function(){var ge=this,Z=Me;return w(Z=ge.attributes["$[]"]("alt"))?k(Z,ge.attributes["$[]"]("default-alt"))?ge.$sub_specialchars(Z):(Z=ge.$sub_specialchars(Z),w(De("ReplaceableTextRx")["$match?"](Z))?ge.$sub_replacements(Z):Z):""}),N(H,"$caption",function(){var ge=this;return k(ge.context,"admonition")?ge.attributes["$[]"]("textlabel"):ge.caption}),N(H,"$captioned_title",function(){var ge=this;return""+ge.caption+ge.$title()}),N(H,"$list_marker_keyword",function(ge){var Z=this,$e=Me;return ge==null&&(ge=Me),De("ORDERED_LIST_KEYWORDS")["$[]"](w($e=ge)?$e:Z.style)},-1),N(H,"$title",function(){var ge=this,Z=Me,$e=Me;return ge.converted_title=w(Z=ge.converted_title)?Z:w($e=ge.title)?ge.$apply_title_subs(ge.title):$e}),N(H,"$title?",function(){var ge=this;return!!w(ge.title)}),N(H,"$title=",function(ge){var Z=this;return Z.converted_title=Me,Z.title=ge}),N(H,"$sub?",function(ge){var Z=this;return Z.subs["$include?"](ge)}),N(H,"$remove_sub",function(ge){var Z=this;return Z.subs.$delete(ge),Me}),N(H,"$xreftext",function(ge){var Z=this,$e=Me,Y=Me,z=Me,R=Me;if(ge==null&&(ge=Me),w($e=Z.$reftext())&&Ae($e["$empty?"]()))return $e;if(w(ge)&&w(Z.title)&&Ae(Z.caption["$nil_or_empty?"]()))switch(ge){case"full":return Y=Z.$sub_placeholder(Z.$sub_quotes(w(Z.document.$compat_mode())?"``%s''":'"`%s`"'),Z.$title()),w(Z.numeral)&&w(R=De("CAPTION_ATTRIBUTE_NAMES")["$[]"](Z.context))&&w(z=Z.document.$attributes()["$[]"](R))?""+z+" "+Z.numeral+", "+Y:""+Z.caption.$chomp(". ")+", "+Y;case"short":return w(Z.numeral)&&w(R=De("CAPTION_ATTRIBUTE_NAMES")["$[]"](Z.context))&&w(z=Z.document.$attributes()["$[]"](R))?""+z+" "+Z.numeral:Z.caption.$chomp(". ");default:return Z.$title()}else return Z.$title()},-1),N(H,"$assign_caption",function(ge,Z){var $e=this,Y=Me,z=Me,R=Me;return Z==null&&(Z=$e.context),w($e.caption)||Ae($e.title)||w($e.caption=w(Y=ge)?Y:$e.document.$attributes()["$[]"]("caption"))||w(R=De("CAPTION_ATTRIBUTE_NAMES")["$[]"](Z))&&w(z=$e.document.$attributes()["$[]"](R))&&($e.caption=""+z+" "+($e.numeral=$e.document.$increment_and_store_counter(""+Z+"-number",$e))+". "),Me},-2),N(H,"$assign_numeral",function(ge){var Z,$e=this,Y=Me,z=Me,R=Me;return $e.next_section_index=Ue((Z=[$e.next_section_index],he(ge,"index=",Z),Z[Z.length-1]),1),w(Y=ge.$numbered())&&(k(z=ge.$sectname(),"appendix")?(ge["$numeral="]($e.document.$counter("appendix-number","A")),ge["$caption="](w(R=$e.document.$attributes()["$[]"]("appendix-caption"))?""+R+" "+ge.$numeral()+": ":""+ge.$numeral()+". ")):k(z,"chapter")||k(Y,"chapter")?ge["$numeral="]($e.document.$counter("chapter-number",1).$to_s()):(ge["$numeral="](k(z,"part")?De("Helpers").$int_to_roman($e.next_section_ordinal):$e.next_section_ordinal.$to_s()),$e.next_section_ordinal=Ue($e.next_section_ordinal,1))),Me}),N(H,"$reindex_sections",function(){var ge=this;return ge.next_section_index=0,ge.next_section_ordinal=1,he(ge.blocks,"each",[],function Z($e){var Y=Z.$$s==null?this:Z.$$s;return $e==null&&($e=Me),k($e.$context(),"section")?(Y.$assign_numeral($e),$e.$reindex_sections()):Me},{$$s:ge})}),H.$protected(),N(H,"$find_by_internal",function we(ge,Z){var $e=we.$$p||Me,Y=this,z=Me,R=Me,V=Me,K=Me,J=Me,M=Me;if(we.$$p=null,ge==null&&(ge=$([],{})),Z==null&&(Z=[]),(w(K=w(J=ge["$[]"]("context"))?Me:!0)||k(J,Y.context))&&(Ae(V=ge["$[]"]("style"))||k(V,Y.style))&&(Ae(R=ge["$[]"]("role"))||w(Y["$has_role?"](R)))&&(Ae(z=ge["$[]"]("id"))||k(z,Y.id)))if($e!==Me)if(w(M=t.yield1($e,Y)))switch(M){case"prune":return Z["$<<"](Y),w(z)&&Y.$raise(et("StopIteration")),Z;case"reject":return w(z)&&Y.$raise(et("StopIteration")),Z;case"stop":Y.$raise(et("StopIteration"));break;default:Z["$<<"](Y),w(z)&&Y.$raise(et("StopIteration"))}else w(z)&&Y.$raise(et("StopIteration"));else Z["$<<"](Y),w(z)&&Y.$raise(et("StopIteration"));switch(Y.context){case"document":k(J,"document")||(w(Y["$header?"]())&&(w(K)||k(J,"section"))&&he(Y.header,"find_by_internal",[ge,Z],$e.$to_proc()),he(Y.blocks,"each",[],function(r){return r==null&&(r=Me),k(J,"section")&&Be(r.$context(),"section")?Me:he(r,"find_by_internal",[ge,Z],$e.$to_proc())}));break;case"dlist":(w(K)||Be(J,"section"))&&he(Y.blocks.$flatten(),"each",[],function(r){return r==null&&(r=Me),w(r)?he(r,"find_by_internal",[ge,Z],$e.$to_proc()):Me});break;case"table":w(ge["$[]"]("traverse_documents"))?(he(Y.$rows().$head(),"each",[],function(r){return r==null&&(r=Me),he(r,"each",[],function(A){return A==null&&(A=Me),he(A,"find_by_internal",[ge,Z],$e.$to_proc())})}),k(J,"inner_document")&&(ge=ge.$merge($(["context"],{context:"document"}))),he(Ue(Y.$rows().$body(),Y.$rows().$foot()),"each",[],function(r){return r==null&&(r=Me),he(r,"each",[],function(A){return A==null&&(A=Me),he(A,"find_by_internal",[ge,Z],$e.$to_proc()),k(A.$style(),"asciidoc")?he(A.$inner_document(),"find_by_internal",[ge,Z],$e.$to_proc()):Me})})):he(Ue(Ue(Y.$rows().$head(),Y.$rows().$body()),Y.$rows().$foot()),"each",[],function(r){return r==null&&(r=Me),he(r,"each",[],function(A){return A==null&&(A=Me),he(A,"find_by_internal",[ge,Z],$e.$to_proc())})});break;default:he(Y.blocks,"each",[],function(r){return r==null&&(r=Me),k(J,"section")&&Be(r.$context(),"section")?Me:he(r,"find_by_internal",[ge,Z],$e.$to_proc())})}return Z},-1)}(C[0],Xe("AbstractNode"),C)}(st[0],st)},Opal.modules["asciidoctor/attribute_list"]=function(t){var g=t.module,u=t.klass,$=t.const_set,E=t.hash,a=t.regexp,k=t.hash2,pe=t.def,N=t.truthy,ve=t.rb_plus,w=t.send,Ge=t.defs,he=t.eqeqeq,Ue=t.eqeq,Ae=t.rb_times,Be=[],st=t.nil,Me=t.$$$;return t.add_stubs("new,[],update,parse,parse_attribute,eos?,skip_delimiter,+,rekey,each_with_index,[]=,private,skip_blank,===,peek,parse_attribute_value,get_byte,start_with?,scan_name,end_with?,rstrip,string,==,unscan,scan_to_delimiter,*,include?,delete,each,split,empty?,apply_subs,scan_to_quote,gsub,skip,scan"),function(et,Pe){var Ve=g(et,"Asciidoctor"),it=[Ve].concat(Pe);return function(C,Xe,y){var Ze=u(C,Xe,"AttributeList"),rt=[Ze].concat(y),H=t.$r(rt),T=Ze.$$prototype;return T.attributes=T.scanner=T.delimiter=T.block=T.delimiter_skip_pattern=T.delimiter_boundary_pattern=st,$(rt[0],"APOS","'"),$(rt[0],"BACKSLASH","\\"),$(rt[0],"QUOT",'"'),$(rt[0],"BoundaryRx",E(H("QUOT"),/.*?[^\\](?=")/,H("APOS"),/.*?[^\\](?=')/,",",/.*?(?=[ \t]*(,|$))/)),$(rt[0],"EscapedQuotes",E(H("QUOT"),'\\"',H("APOS"),"\\'")),$(rt[0],"NameRx",a([H("CG_WORD"),"[",H("CC_WORD"),"\\-.]*"])),$(rt[0],"BlankRx",/[ \t]+/),$(rt[0],"SkipRx",k([","],{",":/[ \t]*(,|$)/})),pe(Ze,"$initialize",function(ue,we,ge){var Z=this;return we==null&&(we=st),ge==null&&(ge=","),Z.scanner=Me("StringScanner").$new(ue),Z.block=we,Z.delimiter=ge,Z.delimiter_skip_pattern=H("SkipRx")["$[]"](ge),Z.delimiter_boundary_pattern=H("BoundaryRx")["$[]"](ge),Z.attributes=st},-2),pe(Ze,"$parse_into",function(ue,we){var ge=this;return we==null&&(we=[]),ue.$update(ge.$parse(we))},-2),pe(Ze,"$parse",function(ue){var we=this,ge=st;if(ue==null&&(ue=[]),N(we.attributes))return we.attributes;for(we.attributes=k([],{}),ge=0;N(we.$parse_attribute(ge,ue))&&!N(we.scanner["$eos?"]());)we.$skip_delimiter(),ge=ve(ge,1);return we.attributes},-1),pe(Ze,"$rekey",function(ue){var we=this;return H("AttributeList").$rekey(we.attributes,ue)}),Ge(Ze,"$rekey",function(ue,we){return w(we,"each_with_index",[],function(Z,$e){var Y,z=st;return Z==null&&(Z=st),$e==null&&($e=st),N(Z)&&N(z=ue["$[]"](ve($e,1)))?(Y=[Z,z],w(ue,"[]=",Y),Y[Y.length-1]):st}),ue}),Ze.$private(),pe(Ze,"$parse_attribute",function(ue,we){var ge=this,Z=st,$e=st,Y=st,z=st,R=st,V=st,K=st,J=st,M=st,_=st;if(Z=!0,ge.$skip_blank(),he(H("QUOT"),$e=ge.scanner.$peek(1)))Y=ge.$parse_attribute_value(ge.scanner.$get_byte());else if(he(H("APOS"),$e))Y=ge.$parse_attribute_value(ge.scanner.$get_byte()),N(Y["$start_with?"](H("APOS")))||(z=!0);else if(R=N(V=N(K=Y=ge.$scan_name())?ge.$skip_blank():K)?V:0,N(ge.scanner["$eos?"]())){if(!(N(Y)||N(ge.scanner.$string().$rstrip()["$end_with?"](ge.delimiter))))return st;Z=st}else if(Ue(J=ge.scanner.$get_byte(),ge.delimiter))ge.scanner.$unscan();else if(N(Y))if(Ue(J,"=")){if(ge.$skip_blank(),he(H("QUOT"),V=J=ge.scanner.$get_byte()))M=ge.$parse_attribute_value(J);else if(he(H("APOS"),V))M=ge.$parse_attribute_value(J),N(M["$start_with?"](H("APOS")))||(z=!0);else if(he(ge.delimiter,V))M="",ge.scanner.$unscan();else if(he(st,V))M="";else if(M=""+J+ge.$scan_to_delimiter(),Ue(M,"None"))return!0}else Y=""+Y+Ae(" ",R)+J+ge.$scan_to_delimiter();else Y=""+J+ge.$scan_to_delimiter();if(N(M))switch(Y){case"options":case"opts":N(M["$include?"](","))?(N(M["$include?"](" "))&&(M=M.$delete(" ")),w(M.$split(","),"each",[],function r(f){var A,b=r.$$s==null?this:r.$$s;return b.attributes==null&&(b.attributes=st),f==null&&(f=st),N(f["$empty?"]())?st:(A=[""+f+"-option",""],w(b.attributes,"[]=",A),A[A.length-1])},{$$s:ge})):N(M["$empty?"]())||ge.attributes["$[]="](""+M+"-option","");break;default:if(N(z)&&N(ge.block))switch(Y){case"title":case"reftext":ge.attributes["$[]="](Y,M);break;default:ge.attributes["$[]="](Y,ge.block.$apply_subs(M))}else ge.attributes["$[]="](Y,M)}else N(z)&&N(ge.block)&&(Y=ge.block.$apply_subs(Y)),N(_=we["$[]"](ue))&&N(Y)&&ge.attributes["$[]="](_,Y),ge.attributes["$[]="](ve(ue,1),Y);return Z}),pe(Ze,"$parse_attribute_value",function(ue){var we=this,ge=st;return Ue(we.scanner.$peek(1),ue)?(we.scanner.$get_byte(),""):N(ge=we.$scan_to_quote(ue))?(we.scanner.$get_byte(),N(ge["$include?"](H("BACKSLASH")))?ge.$gsub(H("EscapedQuotes")["$[]"](ue),ue):ge):""+ue+we.$scan_to_delimiter()}),pe(Ze,"$skip_blank",function(){var ue=this;return ue.scanner.$skip(H("BlankRx"))}),pe(Ze,"$skip_delimiter",function(){var ue=this;return ue.scanner.$skip(ue.delimiter_skip_pattern)}),pe(Ze,"$scan_name",function(){var ue=this;return ue.scanner.$scan(H("NameRx"))}),pe(Ze,"$scan_to_delimiter",function(){var ue=this;return ue.scanner.$scan(ue.delimiter_boundary_pattern)}),pe(Ze,"$scan_to_quote",function(ue){var we=this;return we.scanner.$scan(H("BoundaryRx")["$[]"](ue))})}(it[0],null,it)}(Be[0],Be)},Opal.modules["asciidoctor/block"]=function(t){var g=t.module,u=t.klass,$=t.const_set,E=t.hash2,a=t.alias,k=t.send2,pe=t.find_super,N=t.truthy,ve=t.eqeqeq,w=t.def,Ge=t.rb_lt,he=t.eqeq,Ue=[],Ae=t.nil,Be=t.$$$;return t.add_stubs("default=,context,attr_accessor,[],key?,===,drop,delete,[]=,to_s,commit_subs,nil_or_empty?,prepare_source_string,apply_subs,join,<,size,empty?,rstrip,shift,pop,==,warn,logger,class,object_id,inspect"),function(st,Me){var et=g(st,"Asciidoctor"),Pe=[et].concat(Me),Ve=t.$r(Pe);return function(it,C,Xe){var y=u(it,C,"Block"),Ze=[y].concat(Xe),rt=t.$r(Ze),H=y.$$prototype;return H.attributes=H.content_model=H.lines=H.subs=H.blocks=H.context=H.style=Ae,$(Ze[0],"DEFAULT_CONTENT_MODEL",E(["audio","image","listing","literal","stem","open","page_break","pass","thematic_break","video"],{audio:"empty",image:"empty",listing:"verbatim",literal:"verbatim",stem:"raw",open:"compound",page_break:"empty",pass:"raw",thematic_break:"empty",video:"empty"}))["$default="]("simple"),a(y,"blockname","context"),y.$attr_accessor("lines"),w(y,"$initialize",function T(De,ue,we){var ge=T.$$p||Ae,Z=this,$e=Ae,Y=Ae,z=Ae;return T.$$p=null,we==null&&(we=E([],{})),k(Z,pe(Z,"initialize",T,!1,!0),"initialize",[De,ue,we],ge),Z.content_model=N($e=we["$[]"]("content_model"))?$e:rt("DEFAULT_CONTENT_MODEL")["$[]"](ue),N(we["$key?"]("subs"))?N(Y=we["$[]"]("subs"))?(ve("default",$e=Y)?Z.default_subs=we["$[]"]("default_subs"):ve(Be("Array"),$e)?(Z.default_subs=Y.$drop(0),Z.attributes.$delete("subs")):(Z.default_subs=Ae,Z.attributes["$[]="]("subs",Y.$to_s())),Z.$commit_subs()):(Z.default_subs=[],Z.attributes.$delete("subs")):Z.default_subs=Ae,N((z=we["$[]"]("source"))["$nil_or_empty?"]())?Z.lines=[]:ve(Be("String"),z)?Z.lines=rt("Helpers").$prepare_source_string(z):Z.lines=z.$drop(0)},-3),w(y,"$content",function T(){var De=T.$$p||Ae,ue=this,we=Ae,ge=Ae,Z=Ae,$e=Ae;switch(T.$$p=null,ue.content_model){case"compound":return k(ue,pe(ue,"content",T,!1,!0),"content",[],De);case"simple":return ue.$apply_subs(ue.lines.$join(rt("LF")),ue.subs);case"verbatim":case"raw":if(we=ue.$apply_subs(ue.lines,ue.subs),N(Ge(we.$size(),2)))return N(ge=we["$[]"](0))?ge:"";for(;N(N(ge=Z=we["$[]"](0))?Z.$rstrip()["$empty?"]():ge);)we.$shift();for(;N(N(ge=$e=we["$[]"](-1))?$e.$rstrip()["$empty?"]():ge);)we.$pop();return we.$join(rt("LF"));default:return he(ue.content_model,"empty")||ue.$logger().$warn("unknown content model '"+ue.content_model+"' for block: "+ue),Ae}}),w(y,"$source",function(){var De=this;return De.lines.$join(rt("LF"))}),w(y,"$to_s",function(){var De=this,ue=Ae;return ue=he(De.content_model,"compound")?"blocks: "+De.blocks.$size():"lines: "+De.lines.$size(),"#<"+De.$class()+"@"+De.$object_id()+" {context: "+De.context.$inspect()+", content_model: "+De.content_model.$inspect()+", style: "+De.style.$inspect()+", "+ue+"}>"})}(Pe[0],Ve("AbstractBlock"),Pe)}(Ue[0],Ue)},Opal.modules["asciidoctor/callouts"]=function(t){var g=t.module,u=t.klass,$=t.def,E=t.hash2,a=t.rb_plus,k=t.truthy,pe=t.rb_le,N=t.rb_minus,ve=t.send,w=t.eqeq,Ge=t.rb_lt,he=[],Ue=t.nil;return t.add_stubs("next_list,<<,current_list,to_i,generate_next_callout_id,+,<=,size,[],-,chop,join,map,==,<,private,generate_callout_id"),function(Ae,Be){var st=g(Ae,"Asciidoctor"),Me=[st].concat(Be);return function(et,Pe){var Ve=u(et,Pe,"Callouts"),it=Ve.$$prototype;return it.co_index=it.lists=it.list_index=Ue,$(Ve,"$initialize",function(){var Xe=this;return Xe.lists=[],Xe.list_index=0,Xe.$next_list()}),$(Ve,"$register",function(Xe){var y=this,Ze=Ue;return y.$current_list()["$<<"](E(["ordinal","id"],{ordinal:Xe.$to_i(),id:Ze=y.$generate_next_callout_id()})),y.co_index=a(y.co_index,1),Ze}),$(Ve,"$read_next_id",function(){var Xe=this,y=Ue,Ze=Ue;return y=Ue,Ze=Xe.$current_list(),k(pe(Xe.co_index,Ze.$size()))&&(y=Ze["$[]"](N(Xe.co_index,1))["$[]"]("id")),Xe.co_index=a(Xe.co_index,1),y}),$(Ve,"$callout_ids",function(Xe){var y=this;return ve(y.$current_list(),"map",[],function(rt){return rt==null&&(rt=Ue),w(rt["$[]"]("ordinal"),Xe)?""+rt["$[]"]("id")+" ":""}).$join().$chop()}),$(Ve,"$current_list",function(){var Xe=this;return Xe.lists["$[]"](N(Xe.list_index,1))}),$(Ve,"$next_list",function(){var Xe=this;return Xe.list_index=a(Xe.list_index,1),k(Ge(Xe.lists.$size(),Xe.list_index))&&Xe.lists["$<<"]([]),Xe.co_index=1,Ue}),$(Ve,"$rewind",function(){var Xe=this;return Xe.list_index=1,Xe.co_index=1,Ue}),Ve.$private(),$(Ve,"$generate_next_callout_id",function(){var Xe=this;return Xe.$generate_callout_id(Xe.list_index,Xe.co_index)}),$(Ve,"$generate_callout_id",function(Xe,y){return"CO"+Xe+"-"+y})}(Me[0],null)}(he[0],he)},Opal.modules["asciidoctor/converter/composite"]=function(t){var g=t.module,u=t.klass,$=t.slice,E=t.extract_kwargs,a=t.ensure_kwargs,k=t.send,pe=t.truthy,N=t.def,ve=t.thrower,w=[],Ge=t.nil,he=t.$$$;return t.add_stubs("attr_reader,each,respond_to?,composed,init_backend_traits,backend_traits,new,[]=,find_converter,convert,converter_for,node_name,[],handles?,raise"),function(Ue,Ae){var Be=g(Ue,"Asciidoctor"),st=[Be].concat(Ae),Me=t.$r(st);return function(et,Pe){var Ve=u(et,Pe,"CompositeConverter"),it=Ve.$$prototype;return it.converter_cache=it.converters=Ge,Ve.$attr_reader("converters"),N(Ve,"$initialize",function(Xe,y,Ze){var rt,H,T,De,ue=this;return rt=$(arguments,1),H=E(rt),H=a(H),T=rt,De=H.$$smap.backend_traits_source,De==null&&(De=Ge),ue.backend=Xe,k(ue.converters=T,"each",[],function we(ge){var Z=we.$$s==null?this:we.$$s;return ge==null&&(ge=Ge),pe(ge["$respond_to?"]("composed"))?ge.$composed(Z):Ge},{$$s:ue}),pe(De)&&ue.$init_backend_traits(De.$backend_traits()),ue.converter_cache=k(he("Hash"),"new",[],function we(ge,Z){var $e,Y=we.$$s==null?this:we.$$s;return ge==null&&(ge=Ge),Z==null&&(Z=Ge),$e=[Z,Y.$find_converter(Z)],k(ge,"[]=",$e),$e[$e.length-1]},{$$s:ue})},-2),N(Ve,"$convert",function(Xe,y,Ze){var rt=this,H=Ge;return y==null&&(y=Ge),Ze==null&&(Ze=Ge),rt.$converter_for(y=pe(H=y)?H:Xe.$node_name()).$convert(Xe,y,Ze)},-2),N(Ve,"$converter_for",function(Xe){var y=this;return y.converter_cache["$[]"](Xe)}),N(Ve,"$find_converter",function(Xe){try{var y=ve("return"),Ze=this;return k(Ze.converters,"each",[],function(H){if(H==null&&(H=Ge),pe(H["$handles?"](Xe)))y.$throw(H);else return Ge},{$$ret:y}),Ze.$raise("Could not find a converter to handle transform: "+Xe)}catch(rt){if(rt===y)return rt.$v;throw rt}})}(Me("Converter"),he(Me("Converter"),"Base"))}(w[0],w)},Opal.modules["asciidoctor/converter"]=function(t){var g=t.module,u=t.hash2,$=t.def,E=t.return_val,a=t.truthy,k=t.eqeq,pe=t.defs,N=t.send,ve=t.alias,w=t.slice,Ge=t.to_a,he=t.extract_kwargs,Ue=t.ensure_kwargs,Ae=t.eqeqeq,Be=t.Class,st=t.klass,Me=t.class_variable_set,et=t.class_variable_get,Pe=t.rb_plus,Ve=t.gvars,it=[],C=t.nil,Xe=t.$$$;return t.add_stubs("autoload,attr_reader,raise,class,[],sub,slice,length,==,[]=,backend_traits,derive_backend_traits,register,map,to_s,new,create,default,each,default=,registry,for,===,supports_templates?,merge,private,include,delete,clear,send,extend,private_class_method,node_name,+,name,receiver,warn,logger,respond_to?,content"),function(y,Ze){var rt=g(y,"Asciidoctor"),H=[rt].concat(Ze);return function(T,De){var ue=g(T,"Converter"),we=[ue].concat(De),ge=t.$r(we);return ue.$autoload("CompositeConverter","asciidoctor/converter/composite"),ue.$attr_reader("backend"),$(ue,"$initialize",function($e,Y){var z=this;return Y==null&&(Y=u([],{})),z.backend=$e},-2),$(ue,"$convert",function($e,Y,z){var R=this;return R.backend==null&&(R.backend=C),R.$raise(Xe("NotImplementedError"),""+R.$class()+" (backend: "+R.backend+") must implement the #convert method")},-2),$(ue,"$handles?",E(!0)),pe(ue,"$derive_backend_traits",function($e,Y){var z=C,R=C,V=C;return Y==null&&(Y=C),a($e)?(a(z=ge("DEFAULT_EXTENSIONS")["$[]"](Y=a(R=Y)?R:$e.$sub(ge("TrailingDigitsRx"),"")))?V=z.$slice(1,z.$length()):z="."+(V=Y),k(V,"html")?u(["basebackend","filetype","htmlsyntax","outfilesuffix"],{basebackend:Y,filetype:V,htmlsyntax:"html",outfilesuffix:z}):u(["basebackend","filetype","outfilesuffix"],{basebackend:Y,filetype:V,outfilesuffix:z})):u([],{})},-2),function(Z,$e){var Y=g(Z,"BackendTraits"),z=[Y].concat($e),R=t.$r(z);return $(Y,"$basebackend",function(K){var J,M=this;return K==null&&(K=C),a(K)?(J=["basebackend",K],N(M.$backend_traits(K),"[]=",J),J[J.length-1]):M.$backend_traits()["$[]"]("basebackend")},-1),$(Y,"$filetype",function(K){var J,M=this;return K==null&&(K=C),a(K)?(J=["filetype",K],N(M.$backend_traits(),"[]=",J),J[J.length-1]):M.$backend_traits()["$[]"]("filetype")},-1),$(Y,"$htmlsyntax",function(K){var J,M=this;return K==null&&(K=C),a(K)?(J=["htmlsyntax",K],N(M.$backend_traits(),"[]=",J),J[J.length-1]):M.$backend_traits()["$[]"]("htmlsyntax")},-1),$(Y,"$outfilesuffix",function(K){var J,M=this;return K==null&&(K=C),a(K)?(J=["outfilesuffix",K],N(M.$backend_traits(),"[]=",J),J[J.length-1]):M.$backend_traits()["$[]"]("outfilesuffix")},-1),$(Y,"$supports_templates",function(K){var J,M=this;return K==null&&(K=!0),J=["supports_templates",K],N(M.$backend_traits(),"[]=",J),J[J.length-1]},-1),$(Y,"$supports_templates?",function(){var K=this;return K.$backend_traits()["$[]"]("supports_templates")}),$(Y,"$init_backend_traits",function(K){var J=this,M=C;return K==null&&(K=C),J.backend_traits=a(M=K)?M:u([],{})},-1),$(Y,"$backend_traits",function(K){var J=this,M=C;return J.backend_traits==null&&(J.backend_traits=C),J.backend==null&&(J.backend=C),K==null&&(K=C),J.backend_traits=a(M=J.backend_traits)?M:R("Converter").$derive_backend_traits(J.backend,K)},-1),ve(Y,"backend_info","backend_traits"),pe(Y,"$derive_backend_traits",function(K,J){return J==null&&(J=C),R("Converter").$derive_backend_traits(K,J)},-2)}(we[0],we),function(Z,$e){var Y=g(Z,"Config"),z=[Y].concat($e),R=t.$r(z);return $(Y,"$register_for",function(K){var J,M,_=this;return J=w(arguments),M=J,N(R("Converter"),"register",[_].concat(Ge(N(M,"map",[],function(f){return f==null&&(f=C),f.$to_s()}))))},-1)}(we[0],we),function(Z,$e){var Y=g(Z,"Factory"),z=[Y].concat($e),R=t.$r(z);return pe(Y,"$new",function(K,J){var M,_,r,f;return M=w(arguments),_=he(M),_=Ue(_),M.length>0&&(r=M.shift()),r==null&&(r=C),f=_.$$smap.proxy_default,f==null&&(f=!0),a(f)?R("DefaultFactoryProxy").$new(r):R("CustomFactory").$new(r)},-1),pe(Y,"$default",function(K){return w(arguments),R("Converter")},-1),pe(Y,"$create",function(K,J){var M=this;return J==null&&(J=u([],{})),M.$default().$create(K,J)},-2),$(Y,"$register",function(K,J){var M,_,r=this;return M=w(arguments,1),_=M,N(_,"each",[],function f(A){var b,d=f.$$s==null?this:f.$$s;return A==null&&(A=C),k(A,"*")?(b=[K],N(d.$registry(),"default=",b),b[b.length-1]):(b=[A,K],N(d.$registry(),"[]=",b),b[b.length-1])},{$$s:r})},-2),$(Y,"$for",function(K){var J=this;return J.$registry()["$[]"](K)}),$(Y,"$create",function(K,J){var M=this,_=C,r=C,f=C;return J==null&&(J=u([],{})),a(_=M.$for(K))?(Ae(Be,_)&&(_=_.$new(K,J)),a(r=J["$[]"]("template_dirs"))&&Ae(R("BackendTraits"),_)&&a(_["$supports_templates?"]())?R("CompositeConverter").$new(K,R("TemplateConverter").$new(K,r,J),_,u(["backend_traits_source"],{backend_traits_source:_})):_):a(r=J["$[]"]("template_dirs"))?a(f=J["$[]"]("delegate_backend"))&&a(_=M.$for(f))?(Ae(Be,_)&&(_=_.$new(f,J)),R("CompositeConverter").$new(K,R("TemplateConverter").$new(K,r,J),_,u(["backend_traits_source"],{backend_traits_source:_}))):R("TemplateConverter").$new(K,r,J):C},-2),$(Y,"$converters",function(){var K=this;return K.$registry().$merge()}),Y.$private(),$(Y,"$registry",function(){var K=this;return K.$raise(Xe("NotImplementedError"),""+R("Factory")+" subclass "+K.$class()+" must implement the #registry method")})}(we[0],we),function(Z,$e,Y){var z=st(Z,$e,"CustomFactory"),R=[z].concat(Y),V=t.$r(R);return z.$include(V("Factory")),$(z,"$initialize",function(J){var M=this;return J==null&&(J=C),a(J)?(J["$default="](J.$delete("*")),M.registry=J):M.registry=u([],{})},-1),$(z,"$unregister_all",function(){var J,M=this;return J=[C],N(M.$registry().$clear(),"default=",J),J[J.length-1]}),z.$private(),z.$attr_reader("registry")}(we[0],null,we),function(Z,$e){var Y=g(Z,"DefaultFactory"),z=[Y].concat($e),R=t.$r(z);return Y.$include(R("Factory")),Y.$private(),Me(z[0],"@@registry",u([],{})),$(Y,"$registry",function(){return et(z[0],"@@registry",!1)}),C}(we[0],we),function(Z,$e,Y){var z=st(Z,$e,"DefaultFactoryProxy"),R=[z].concat(Y),V=t.$r(R);return z.$include(V("DefaultFactory")),C}(we[0],ge("CustomFactory"),we),pe(ue,"$included",function($e){return $e.$send("include",ge("BackendTraits")),$e.$extend(ge("Config"))}),ue.$private_class_method("included"),function(Z,$e,Y){var z=st(Z,$e,"Base"),R=[z].concat(Y),V=t.$r(R),K=z.$$prototype;return K.backend=C,z.$include(V("Logging")),z.$include(V("Converter")),$(z,"$convert",function(M,_,r){var f=this,A=C;Ve["!"]==null&&(Ve["!"]=C),_==null&&(_=M.$node_name()),r==null&&(r=C);try{return a(r)?f.$send(Pe("convert_",_),M,r):f.$send(Pe("convert_",_),M)}catch(b){if(t.rescue(b,[V("StandardError")]))try{return Ae(Xe("NoMethodError"),A=Ve["!"])&&k(A.$receiver(),f)&&k(A.$name().$to_s(),_)||f.$raise(),f.$logger().$warn("missing convert handler for "+A.$name()+" node in "+f.backend+" backend ("+f.$class()+")"),C}finally{t.pop_exception()}else throw b}},-2),$(z,"$handles?",function(M){var _=this;return _["$respond_to?"]("convert_"+M)}),$(z,"$content_only",function(M){return M.$content()}),$(z,"$skip",E(C))}(we[0],null,we),ue.$extend(ge("DefaultFactory"))}(H[0],H)}(it[0],it)},Opal.modules["asciidoctor/document"]=function(t){var g=t.module,u=t.klass,$=t.const_set,E=t.send,a=t.alias,k=t.truthy,pe=t.def,N=t.hash2,ve=t.not,w=t.to_ary,Ge=t.return_ivar,he=t.send2,Ue=t.find_super,Ae=t.rb_minus,Be=t.eqeq,st=t.eqeqeq,Me=t.hash,et=t.rb_ge,Pe=t.rb_plus,Ve=t.neqeq,it=t.thrower,C=t.rb_gt,Xe=t.rb_lt,y=t.gvars,Ze=t.to_a,rt=[],H=t.nil,T=t.$$$;return t.add_stubs("new,target,attr_reader,nil?,<<,[],[]=,main,include?,strip,squeeze,gsub,!,empty?,rpartition,attr_accessor,catalog,delete,base_dir,options,merge,instance_variable_get,attributes,safe,compat_mode,outfilesuffix,sourcemap,path_resolver,converter,extensions,syntax_highlighter,each,end_with?,start_with?,slice,-,length,chop,==,downcase,===,extname,value_for_name,key?,freeze,attribute_undefined,attribute_missing,update,&,keys,name_for_value,expand_path,pwd,to_s,>=,+,abs,to_i,delete_if,update_doctype_attributes,cursor,parse,restore_attributes,update_backend_attributes,fetch,fill_datetime_attributes,activate,groups,create,to_proc,preprocessors?,preprocessors,process_method,tree_processors?,tree_processors,!=,counter,nil_or_empty?,attribute_locked?,nextval,value,save_to,increment_and_store_counter,register,tap,xreftext,>,source,source_lines,doctitle,sectname=,title=,first_section,title,reftext,<,find,context,header?,assign_numeral,clear_playback_attributes,save_attributes,name,negate,rewind,replace,apply_attribute_value_subs,delete?,start,doctype,content_model,warn,logger,content,convert,postprocessors?,postprocessors,record,write,respond_to?,chomp,class,write_alternate_pages,map,split,resolve_docinfo_subs,normalize_system_path,read_asset,apply_subs,docinfo_processors?,join,concat,compact,docinfo_processors,object_id,inspect,size,private,=~,resolve_pass_subs,apply_header_subs,limit_bytesize,bytesize,valid_encoding?,byteslice,resolve_subs,utc,at,Integer,now,index,strftime,year,utc_offset,partition,create_converter,basebackend,filetype,htmlsyntax,derive_backend_traits,raise"),function(De,ue){var we=g(De,"Asciidoctor"),ge=[we].concat(ue),Z=t.$r(ge);return function($e,Y,z){var R=u($e,Y,"Document"),V=[R].concat(z),K=t.$r(V),J=R.$$prototype;return J.attributes=J.safe=J.sourcemap=J.reader=J.base_dir=J.parsed=J.parent_document=J.extensions=J.options=J.counters=J.catalog=J.reftexts=J.next_section_index=J.header=J.blocks=J.header_attributes=J.attributes_modified=J.backend=J.attribute_overrides=J.timings=J.converter=J.outfilesuffix=J.docinfo_processor_extensions=J.document=J.max_attribute_value_size=J.id=J.doctype=H,$(V[0],"ImageReference",E(T("Struct"),"new",["target","imagesdir"],function M(){var _=M.$$s==null?this:M.$$s;return a(_,"to_s","target")},{$$s:R})),$(V[0],"Footnote",T("Struct").$new("index","id","text")),function(M,_){var r=u(M,_,"AttributeEntry");return r.$attr_reader("name","value","negate"),pe(r,"$initialize",function(A,b,d){var B=this;return d==null&&(d=H),B.name=A,B.value=b,B.negate=k(d["$nil?"]())?b["$nil?"]():d},-3),pe(r,"$save_to",function(A){var b,d=this,B=H;return(k(B=A["$[]"]("attribute_entries"))?B:(b=["attribute_entries",[]],E(A,"[]=",b),b[b.length-1]))["$<<"](d),d})}(V[0],null),function(M,_,r){var f=u(M,_,"Title"),A=[f].concat(r),b=t.$r(A),d=f.$$prototype;return d.subtitle=H,f.$attr_reader("main"),a(f,"title","main"),f.$attr_reader("subtitle"),f.$attr_reader("combined"),pe(f,"$initialize",function(D,Q){var X,ce,Re=this,Ye=H,Qe=H;return Q==null&&(Q=N([],{})),k(Re.sanitized=Q["$[]"]("sanitize"))&&k(D["$include?"]("<"))&&(D=D.$gsub(b("XmlSanitizeRx"),"").$squeeze(" ").$strip()),k((Ye=k(Qe=Q["$[]"]("separator"))?Qe:":")["$empty?"]())||ve(D["$include?"](Ye=""+Ye+" "))?(Re.main=D,Re.subtitle=H):(ce=D.$rpartition(Ye),X=w(ce),Re.main=X[0]==null?H:X[0],X[1]==null||X[1],Re.subtitle=X[2]==null?H:X[2]),Re.combined=D},-2),pe(f,"$sanitized?",Ge("sanitized")),pe(f,"$subtitle?",function(){var D=this;return!!k(D.subtitle)}),pe(f,"$to_s",Ge("combined"))}(V[0],null,V),$(V[0],"Author",T("Struct").$new("name","firstname","middlename","lastname","initials","email")),R.$attr_reader("safe"),R.$attr_reader("compat_mode"),R.$attr_reader("backend"),R.$attr_reader("doctype"),R.$attr_accessor("sourcemap"),R.$attr_reader("catalog"),a(R,"references","catalog"),R.$attr_reader("counters"),R.$attr_reader("header"),R.$attr_reader("base_dir"),R.$attr_reader("options"),R.$attr_reader("outfilesuffix"),R.$attr_reader("parent_document"),R.$attr_reader("reader"),R.$attr_reader("path_resolver"),R.$attr_reader("converter"),R.$attr_reader("syntax_highlighter"),R.$attr_reader("extensions"),pe(R,"$initialize",function M(_,r){var f,A,b,d;M.$$p;var B=this,D=H,Q=H,X=H,ce=H,Re=H,Ye=H,Qe=H,ot=H,tt=H,at=H,ct=H,ft=H,ut=H,pt=H,ht=H,kt=H,yt=H,Tt=H;return M.$$p=null,_==null&&(_=H),r==null&&(r=N([],{})),he(B,Ue(B,"initialize",M,!1,!0),"initialize",[B,"document"],null),k(D=r.$delete("parent"))?(B.parent_document=D,k(Q=r["$[]"]("base_dir"))||r["$[]="]("base_dir",D.$base_dir()),k(D.$options()["$[]"]("catalog_assets"))&&r["$[]="]("catalog_assets",!0),k(D.$options()["$[]"]("to_dir"))&&r["$[]="]("to_dir",D.$options()["$[]"]("to_dir")),B.catalog=D.$catalog().$merge(N(["footnotes"],{footnotes:[]})),B.attribute_overrides=X=D.$instance_variable_get("@attribute_overrides").$merge(D.$attributes()),X.$delete("compat-mode"),ce=X.$delete("doctype"),X.$delete("notitle"),X.$delete("showtitle"),X.$delete("toc"),B.attributes["$[]="]("toc-placement",k(Q=X.$delete("toc-placement"))?Q:"auto"),X.$delete("toc-position"),B.safe=D.$safe(),k(B.compat_mode=D.$compat_mode())&&B.attributes["$[]="]("compat-mode",""),B.outfilesuffix=D.$outfilesuffix(),B.sourcemap=D.$sourcemap(),B.timings=H,B.path_resolver=D.$path_resolver(),B.converter=D.$converter(),Re=H,B.extensions=D.$extensions(),B.syntax_highlighter=D.$syntax_highlighter()):(B.parent_document=H,B.catalog=N(["ids","refs","footnotes","links","images","callouts","includes"],{ids:N([],{}),refs:N([],{}),footnotes:[],links:[],images:[],callouts:K("Callouts").$new(),includes:N([],{})}),B.attribute_overrides=X=N([],{}),E(k(Q=r["$[]"]("attributes"))?Q:N([],{}),"each",[],function(wt,At){var It;return wt==null&&(wt=H),At==null&&(At=H),k(wt["$end_with?"]("@"))?k(wt["$start_with?"]("!"))?(It=[wt.$slice(1,Ae(wt.$length(),2)),!1],wt=It[0],At=It[1]):k(wt["$end_with?"]("!@"))?(It=[wt.$slice(0,Ae(wt.$length(),2)),!1],wt=It[0],At=It[1]):(It=[wt.$chop(),""+At+"@"],wt=It[0],At=It[1]):k(wt["$start_with?"]("!"))?(It=[wt.$slice(1,wt.$length()),Be(At,"@")?!1:H],wt=It[0],At=It[1]):k(wt["$end_with?"]("!"))&&(It=[wt.$chop(),Be(At,"@")?!1:H],wt=It[0],At=It[1]),It=[wt.$downcase(),At],E(X,"[]=",It),It[It.length-1]}),st(T("String"),Ye=r["$[]"]("to_file"))&&X["$[]="]("outfilesuffix",K("Helpers").$extname(Ye)),ve(Qe=r["$[]"]("safe"))?B.safe=T(K("SafeMode"),"SECURE"):st(T("Integer"),Qe)?B.safe=Qe:B.safe=function(){try{return K("SafeMode").$value_for_name(Qe)}catch(Ct){if(t.rescue(Ct,[K("StandardError")]))try{return T(K("SafeMode"),"SECURE")}finally{t.pop_exception()}else throw Ct}}(),ot=r.$delete("input_mtime"),B.compat_mode=X["$key?"]("compat-mode"),B.sourcemap=r["$[]"]("sourcemap"),B.timings=r.$delete("timings"),B.path_resolver=K("PathResolver").$new(),Re=k((f=T("::","Asciidoctor","skip_raise"))&&T(f,"Extensions","skip_raise")?"constant":H)||k(r["$key?"]("extensions"))?T(T("Asciidoctor"),"Extensions"):H,B.extensions=H,k(r["$key?"]("header_footer"))&&ve(r["$key?"]("standalone"))&&r["$[]="]("standalone",r["$[]"]("header_footer"))),B.parsed=B.reftexts=B.header=B.header_attributes=H,B.counters=N([],{}),B.attributes_modified=T("Set").$new(),B.docinfo_processor_extensions=N([],{}),tt=r["$[]"]("standalone"),(B.options=r).$freeze(),at=B.attributes,k(D)||(at["$[]="]("attribute-undefined",K("Compliance").$attribute_undefined()),at["$[]="]("attribute-missing",K("Compliance").$attribute_missing()),at.$update(K("DEFAULT_ATTRIBUTES"))),k(tt)?(X["$[]="]("embedded",H),at["$[]="]("copycss",""),at["$[]="]("iconfont-remote",""),at["$[]="]("stylesheet",""),at["$[]="]("webfonts","")):(X["$[]="]("embedded",""),k(X["$key?"]("showtitle"))&&Be(X.$keys()["$&"](["notitle","showtitle"])["$[]"](-1),"showtitle")?X["$[]="]("notitle",Me(H,"",!1,"@","@",!1)["$[]"](X["$[]"]("showtitle"))):k(X["$key?"]("notitle"))?X["$[]="]("showtitle",Me(H,"",!1,"@","@",!1)["$[]"](X["$[]"]("notitle"))):at["$[]="]("notitle","")),X["$[]="]("asciidoctor",""),X["$[]="]("asciidoctor-version",T(T("Asciidoctor"),"VERSION")),X["$[]="]("safe-mode-name",ct=K("SafeMode").$name_for_value(B.safe)),X["$[]="]("safe-mode-"+ct,""),X["$[]="]("safe-mode-level",B.safe),k(Q=X["$[]"]("max-include-depth"))||X["$[]="]("max-include-depth",64),k(Q=X["$[]"]("allow-uri-read"))||X["$[]="]("allow-uri-read",H),k(X["$key?"]("numbered"))&&X["$[]="]("sectnums",X.$delete("numbered")),k(X["$key?"]("hardbreaks"))&&X["$[]="]("hardbreaks-option",X.$delete("hardbreaks")),k(ft=r["$[]"]("base_dir"))?B.base_dir=(A=["docdir",T("File").$expand_path(ft)],E(X,"[]=",A),A[A.length-1]):k(X["$[]"]("docdir"))?B.base_dir=X["$[]"]("docdir"):B.base_dir=(A=["docdir",T("Dir").$pwd()],E(X,"[]=",A),A[A.length-1]),k(ut=r["$[]"]("backend"))&&X["$[]="]("backend",ut.$to_s()),k(pt=r["$[]"]("doctype"))&&X["$[]="]("doctype",pt.$to_s()),k(et(B.safe,T(K("SafeMode"),"SERVER")))?(k(Q=X["$[]"]("copycss"))||X["$[]="]("copycss",H),k(Q=X["$[]"]("source-highlighter"))||X["$[]="]("source-highlighter",H),k(Q=X["$[]"]("backend"))||X["$[]="]("backend",K("DEFAULT_BACKEND")),ve(D)&&k(X["$key?"]("docfile"))&&X["$[]="]("docfile",X["$[]"]("docfile")["$[]"](t.Range.$new(Pe(X["$[]"]("docdir").$length(),1),-1,!1))),X["$[]="]("docdir",""),k(Q=X["$[]"]("user-home"))||X["$[]="]("user-home","."),k(et(B.safe,T(K("SafeMode"),"SECURE")))&&(k(X["$key?"]("max-attribute-value-size"))||X["$[]="]("max-attribute-value-size",4096),k(X["$key?"]("linkcss"))||X["$[]="]("linkcss",""),k(Q=X["$[]"]("icons"))||X["$[]="]("icons",H))):k(Q=X["$[]"]("user-home"))||X["$[]="]("user-home",K("USER_HOME")),B.max_attribute_value_size=k(ht=k(Q=X["$[]"]("max-attribute-value-size"))?Q:(A=["max-attribute-value-size",H],E(X,"[]=",A),A[A.length-1]))?ht.$to_i().$abs():H,E(X,"delete_if",[],function(wt,At){var It,Bt=H;return wt==null&&(wt=H),At==null&&(At=H),k(At)?(st(T("String"),At)&&k(At["$end_with?"]("@"))&&(It=[At.$chop(),!0],At=It[0],Bt=It[1]),at["$[]="](wt,At)):(at.$delete(wt),Bt=At["$=="](!1)),Bt}),k(D)?(B.backend=at["$[]"]("backend"),Be(B.doctype=(A=["doctype",ce],E(at,"[]=",A),A[A.length-1]),K("DEFAULT_DOCTYPE"))||B.$update_doctype_attributes(K("DEFAULT_DOCTYPE")),B.reader=K("Reader").$new(_,r["$[]"]("cursor")),k(B.sourcemap)&&(B.source_location=B.reader.$cursor()),K("Parser").$parse(B.reader,B),B.$restore_attributes(),B.parsed=!0):(B.backend=H,Be(kt=k(Q=at["$[]"]("backend"))?Q:K("DEFAULT_BACKEND"),"manpage")?B.doctype=(A=["doctype",(b=["doctype","manpage"],E(X,"[]=",b),b[b.length-1])],E(at,"[]=",A),A[A.length-1]):B.doctype=k(Q=at["$[]"]("doctype"))?Q:(A=["doctype",K("DEFAULT_DOCTYPE")],E(at,"[]=",A),A[A.length-1]),B.$update_backend_attributes(kt,!0),k(Q=at["$[]"]("stylesdir"))||at["$[]="]("stylesdir","."),k(Q=at["$[]"]("iconsdir"))||at["$[]="]("iconsdir",""+at.$fetch("imagesdir","./images")+"/icons"),B.$fill_datetime_attributes(at,ot),k(Re)&&(k(yt=r["$[]"]("extension_registry"))?(st(T(K("Extensions"),"Registry"),yt)||k((d=T("::","AsciidoctorJ","skip_raise"))&&(b=T(d,"Extensions","skip_raise"))&&(A=T(b,"ExtensionRegistry","skip_raise"))?"constant":H)&&st(T(T(T("AsciidoctorJ"),"Extensions"),"ExtensionRegistry"),yt))&&(B.extensions=yt.$activate(B)):k((Tt=r["$[]"]("extensions"))["$nil?"]())?k(K("Extensions").$groups()["$empty?"]())||(B.extensions=T(K("Extensions"),"Registry").$new().$activate(B)):st(T("Proc"),Tt)&&(B.extensions=E(K("Extensions"),"create",[],Tt.$to_proc()).$activate(B))),B.reader=K("PreprocessorReader").$new(B,_,T(K("Reader"),"Cursor").$new(at["$[]"]("docfile"),B.base_dir),N(["normalize"],{normalize:!0})),k(B.sourcemap)?B.source_location=B.reader.$cursor():H)},-1),pe(R,"$parse",function(_){var r=this,f=H,A=H;return _==null&&(_=H),k(r.parsed)?r:(f=r,k(_)&&(r.reader=K("PreprocessorReader").$new(f,_,T(K("Reader"),"Cursor").$new(r.attributes["$[]"]("docfile"),r.base_dir),N(["normalize"],{normalize:!0})),k(r.sourcemap)&&(r.source_location=r.reader.$cursor())),k(A=k(r.parent_document)?H:r.extensions)&&k(A["$preprocessors?"]())&&E(A.$preprocessors(),"each",[],function b(d){var B=b.$$s==null?this:b.$$s,D=H;return B.reader==null&&(B.reader=H),d==null&&(d=H),B.reader=k(D=d.$process_method()["$[]"](f,B.reader))?D:B.reader},{$$s:r}),K("Parser").$parse(r.reader,f,N(["header_only"],{header_only:r.options["$[]"]("parse_header_only")})),r.$restore_attributes(),k(A)&&k(A["$tree_processors?"]())&&E(A.$tree_processors(),"each",[],function(d){var B=H;return d==null&&(d=H),k(B=d.$process_method()["$[]"](f))&&st(K("Document"),B)&&Ve(B,f)?f=B:H}),r.parsed=!0,f)},-1),pe(R,"$parsed?",Ge("parsed")),pe(R,"$counter",function(_,r){var f,A=this,b=H,d=H,B=H;return r==null&&(r=H),k(A.parent_document)?A.parent_document.$counter(_,r):(k(d=A["$attribute_locked?"](_))&&k(b=A.counters["$[]"](_))||ve((b=A.attributes["$[]"](_))["$nil_or_empty?"]())?B=(f=[_,K("Helpers").$nextval(b)],E(A.counters,"[]=",f),f[f.length-1]):k(r)?B=(f=[_,Be(r,r.$to_i().$to_s())?r.$to_i():r],E(A.counters,"[]=",f),f[f.length-1]):B=(f=[_,1],E(A.counters,"[]=",f),f[f.length-1]),k(d)||A.attributes["$[]="](_,B),B)},-2),pe(R,"$increment_and_store_counter",function(_,r){var f=this;return K("AttributeEntry").$new(_,f.$counter(_)).$save_to(r.$attributes()).$value()}),a(R,"counter_increment","increment_and_store_counter"),pe(R,"$register",function(_,r){var f=this,A=H,b=H,d=H;switch(_){case"ids":return f.$register("refs",[A=r["$[]"](0),K("Inline").$new(f,"anchor",r["$[]"](1),N(["type","id"],{type:"ref",id:A}))]);case"refs":return b=f.catalog["$[]"]("refs"),k(b["$[]"](r["$[]"](0)))||b["$[]="](r["$[]"](0),d=r["$[]"](1)),d;case"footnotes":return f.catalog["$[]"](_)["$<<"](r);default:return k(f.options["$[]"]("catalog_assets"))?f.catalog["$[]"](_)["$<<"](Be(_,"images")?K("ImageReference").$new(r,f.attributes["$[]"]("imagesdir")):r):H}}),pe(R,"$resolve_id",function(_){var r=this,f=H,A=H;return k(r.reftexts)?r.reftexts["$[]"](_):k(r.parsed)?E(r.reftexts=N([],{}),"tap",[],function b(d){var B=b.$$s==null?this:b.$$s;return B.catalog==null&&(B.catalog=H),d==null&&(d=H),E(B.catalog["$[]"]("refs"),"each",[],function(Q,X){var ce,Re=H;return Q==null&&(Q=H),X==null&&(X=H),k(Re=d["$[]"](X.$xreftext()))?Re:(ce=[X.$xreftext(),Q],E(d,"[]=",ce),ce[ce.length-1])})},{$$s:r})["$[]"](_):(f=H,r.reftexts=A=N([],{}),function(){try{var b=it("break");return E(r.catalog["$[]"]("refs"),"each",[],function(B,D){var Q,X=H,ce=H;return B==null&&(B=H),D==null&&(D=H),Be(X=D.$xreftext(),_)&&(f=B,b.$throw()),k(ce=A["$[]"](X))?ce:(Q=[X,B],E(A,"[]=",Q),Q[Q.length-1])})}catch(d){if(d===b)return d.$v;throw d}}(),r.reftexts=H,f)}),pe(R,"$sections?",function(){var _=this;return C(_.next_section_index,0)}),pe(R,"$footnotes?",function(){var _=this;return!k(_.catalog["$[]"]("footnotes")["$empty?"]())}),pe(R,"$footnotes",function(){var _=this;return _.catalog["$[]"]("footnotes")}),pe(R,"$callouts",function(){var _=this;return _.catalog["$[]"]("callouts")}),pe(R,"$nested?",function(){var _=this;return!!k(_.parent_document)}),pe(R,"$embedded?",function(){var _=this;return _.attributes["$key?"]("embedded")}),pe(R,"$extensions?",function(){var _=this;return!!k(_.extensions)}),pe(R,"$source",function(){var _=this;return k(_.reader)?_.reader.$source():H}),pe(R,"$source_lines",function(){var _=this;return k(_.reader)?_.reader.$source_lines():H}),pe(R,"$basebackend?",function(_){var r=this;return r.attributes["$[]"]("basebackend")["$=="](_)}),pe(R,"$title",function(){var _=this;return _.$doctitle()}),pe(R,"$title=",function(_){var r,f=this,A=H;return k(A=f.header)||(A=f.header=K("Section").$new(f,0))["$sectname="]("header"),r=[_],E(A,"title=",r),r[r.length-1]}),pe(R,"$doctitle",function(_){var r=this,f=H,A=H,b=H,d=H;if(_==null&&(_=N([],{})),!k(f=r.attributes["$[]"]("title"))){if(k(A=r.$first_section()))f=A.$title();else if(ve(k(b=_["$[]"]("use_fallback"))?f=r.attributes["$[]"]("untitled-label"):b))return H}return k(d=_["$[]"]("partition"))?K("Title").$new(f,_.$merge(N(["separator"],{separator:Be(d,!0)?r.attributes["$[]"]("title-separator"):d}))):k(_["$[]"]("sanitize"))&&k(f["$include?"]("<"))?f.$gsub(K("XmlSanitizeRx"),"").$squeeze(" ").$strip():f},-1),a(R,"name","doctitle"),pe(R,"$xreftext",function(_){var r=this,f=H;return k(f=r.$reftext())&&ve(f["$empty?"]())?f:r.$title()},-1),pe(R,"$author",function(){var _=this;return _.attributes["$[]"]("author")}),pe(R,"$authors",function(){var _=this,r=H,f=H,A=H,b=H,d=H;if(k((r=_.attributes)["$key?"]("author"))){if(f=[K("Author").$new(r["$[]"]("author"),r["$[]"]("firstname"),r["$[]"]("middlename"),r["$[]"]("lastname"),r["$[]"]("authorinitials"),r["$[]"]("email"))],k(C(A=k(b=r["$[]"]("authorcount"))?b:0,1)))for(d=1;k(Xe(d,A));)d=Pe(d,1),f["$<<"](K("Author").$new(r["$[]"]("author_"+d),r["$[]"]("firstname_"+d),r["$[]"]("middlename_"+d),r["$[]"]("lastname_"+d),r["$[]"]("authorinitials_"+d),r["$[]"]("email_"+d)));return f}else return[]}),pe(R,"$revdate",function(){var _=this;return _.attributes["$[]"]("revdate")}),pe(R,"$notitle",function(){var _=this;return _.attributes["$key?"]("notitle")}),pe(R,"$noheader",function(){var _=this;return _.attributes["$key?"]("noheader")}),pe(R,"$nofooter",function(){var _=this;return _.attributes["$key?"]("nofooter")}),pe(R,"$first_section",function(){var _=this,r=H;return k(r=_.header)?r:E(_.blocks,"find",[],function(A){return A==null&&(A=H),A.$context()["$=="]("section")})}),pe(R,"$header?",function(){var _=this;return!!k(_.header)}),a(R,"has_header?","header?"),pe(R,"$<<",function M(_){var r=M.$$p||H,f=this;return M.$$p=null,Be(_.$context(),"section")&&f.$assign_numeral(_),he(f,Ue(f,"<<",M,!1,!0),"<<",[_],r)}),pe(R,"$finalize_header",function(_,r){var f=this;return r==null&&(r=!0),f.$clear_playback_attributes(_),f.$save_attributes(),k(r)||_["$[]="]("invalid-header",!0),_},-2),pe(R,"$playback_attributes",function(_){var r=this;return k(_["$key?"]("attribute_entries"))?E(_["$[]"]("attribute_entries"),"each",[],function f(A){var b=f.$$s==null?this:f.$$s,d=H;return b.attributes==null&&(b.attributes=H),A==null&&(A=H),d=A.$name(),k(A.$negate())?(b.attributes.$delete(d),Be(d,"compat-mode")?b.compat_mode=!1:H):(b.attributes["$[]="](d,A.$value()),Be(d,"compat-mode")?b.compat_mode=!0:H)},{$$s:r}):H}),pe(R,"$restore_attributes",function(){var _=this;return k(_.parent_document)||_.catalog["$[]"]("callouts").$rewind(),_.attributes.$replace(_.header_attributes)}),pe(R,"$set_attribute",function(_,r){var f=this,A=H;if(r==null&&(r=""),k(f["$attribute_locked?"](_)))return H;if(k(r["$empty?"]())||(r=f.$apply_attribute_value_subs(r)),k(f.header_attributes))f.attributes["$[]="](_,r);else{switch(_){case"backend":f.$update_backend_attributes(r,k(A=f.attributes_modified["$delete?"]("htmlsyntax"))?r["$=="](f.backend):A);break;case"doctype":f.$update_doctype_attributes(r);break;default:f.attributes["$[]="](_,r)}f.attributes_modified["$<<"](_)}return r},-2),pe(R,"$delete_attribute",function(_){var r=this;return k(r["$attribute_locked?"](_))?!1:(r.attributes.$delete(_),r.attributes_modified["$<<"](_),!0)}),pe(R,"$attribute_locked?",function(_){var r=this;return r.attribute_overrides["$key?"](_)}),pe(R,"$set_header_attribute",function(_,r,f){var A=this,b=H,d=H;return r==null&&(r=""),f==null&&(f=!0),b=k(d=A.header_attributes)?d:A.attributes,Be(f,!1)&&k(b["$key?"](_))?!1:(b["$[]="](_,r),!0)},-2),pe(R,"$convert",function(_){var r,f=this,A=H,b=H,d=H,B=H,D=H;return _==null&&(_=N([],{})),k(f.timings)&&f.timings.$start("convert"),k(f.parsed)||f.$parse(),k(et(f.safe,T(K("SafeMode"),"SERVER")))||k(_["$empty?"]())||(k((r=["outfile",_["$[]"]("outfile")],E(f.attributes,"[]=",r),r[r.length-1]))||f.attributes.$delete("outfile"),k((r=["outdir",_["$[]"]("outdir")],E(f.attributes,"[]=",r),r[r.length-1]))||f.attributes.$delete("outdir")),Be(f.$doctype(),"inline")?k(A=k(b=f.blocks["$[]"](0))?b:f.header)&&(Be(A.$content_model(),"compound")||Be(A.$content_model(),"empty")?f.$logger().$warn("no inline candidate; use the inline doctype to convert a single paragragh, verbatim, or raw block"):d=A.$content()):(k(_["$key?"]("standalone"))?B=k(_["$[]"]("standalone"))?"document":"embedded":k(_["$key?"]("header_footer"))?B=k(_["$[]"]("header_footer"))?"document":"embedded":B=k(f.options["$[]"]("standalone"))?"document":"embedded",d=f.converter.$convert(f,B)),k(f.parent_document)||k(D=f.extensions)&&k(D["$postprocessors?"]())&&E(D.$postprocessors(),"each",[],function Q(X){var ce=Q.$$s==null?this:Q.$$s;return X==null&&(X=H),d=X.$process_method()["$[]"](ce,d)},{$$s:f}),k(f.timings)&&f.timings.$record("convert"),d},-1),a(R,"render","convert"),pe(R,"$write",function(_,r){var f=this;return k(f.timings)&&f.timings.$start("write"),st(K("Writer"),f.converter)?f.converter.$write(_,r):(k(r["$respond_to?"]("write"))?k(_["$nil_or_empty?"]())||(r.$write(_.$chomp()),r.$write(K("LF"))):T("File").$write(r,_,N(["mode"],{mode:K("FILE_WRITE_MODE")})),Be(f.backend,"manpage")&&st(T("String"),r)&&k(f.converter.$class()["$respond_to?"]("write_alternate_pages"))&&f.converter.$class().$write_alternate_pages(f.attributes["$[]"]("mannames"),f.attributes["$[]"]("manvolnum"),r)),k(f.timings)&&f.timings.$record("write"),H}),pe(R,"$content",function M(){var _=M.$$p||H,r=this;return M.$$p=null,r.attributes.$delete("title"),he(r,Ue(r,"content",M,!1,!0),"content",[],_)}),pe(R,"$docinfo",function(_,r){var f,A=this,b=H,d=H,B=H,D=H,Q=H,X=H,ce=H,Re=H,Ye=H,Qe=H;return _==null&&(_="head"),r==null&&(r=H),k(Xe(A.$safe(),T(K("SafeMode"),"SECURE")))&&(Be(_,"head")||(b="-"+_),r=k(d=r)?d:A.outfilesuffix,k((B=A.attributes["$[]"]("docinfo"))["$nil_or_empty?"]())?k(A.attributes["$key?"]("docinfo2"))?B=["private","shared"]:k(A.attributes["$key?"]("docinfo1"))?B=["shared"]:B=k(B)?["private"]:H:B=E(B.$split(","),"map",[],function(tt){return tt==null&&(tt=H),tt.$strip()}),k(B)&&(D=[],f=["docinfo"+b+r,A.attributes["$[]"]("docinfodir"),A.$resolve_docinfo_subs()],Q=f[0],X=f[1],ce=f[2],k(B["$&"](["shared","shared-"+_])["$empty?"]())||(Re=A.$normalize_system_path(Q,X),k(Ye=A.$read_asset(Re,N(["normalize"],{normalize:!0})))&&D["$<<"](A.$apply_subs(Ye,ce))),k(A.attributes["$[]"]("docname")["$nil_or_empty?"]())||k(B["$&"](["private","private-"+_])["$empty?"]())||(Re=A.$normalize_system_path(""+A.attributes["$[]"]("docname")+"-"+Q,X),k(Qe=A.$read_asset(Re,N(["normalize"],{normalize:!0})))&&D["$<<"](A.$apply_subs(Qe,ce))))),k(A.extensions)&&k(A["$docinfo_processors?"](_))?(k(d=D)?d:[]).$concat(E(A.docinfo_processor_extensions["$[]"](_),"map",[],function ot(tt){var at=ot.$$s==null?this:ot.$$s;return tt==null&&(tt=H),tt.$process_method()["$[]"](at)},{$$s:A}).$compact()).$join(K("LF")):k(D)?D.$join(K("LF")):""},-1),pe(R,"$docinfo_processors?",function(_){var r,f=this;return _==null&&(_="head"),k(f.docinfo_processor_extensions["$key?"](_))?f.docinfo_processor_extensions["$[]"](_)["$!="](!1):k(f.extensions)&&k(f.document.$extensions()["$docinfo_processors?"](_))?(r=[_,f.document.$extensions().$docinfo_processors(_)],E(f.docinfo_processor_extensions,"[]=",r),r[r.length-1])["$!"]()["$!"]():(r=[_,!1],E(f.docinfo_processor_extensions,"[]=",r),r[r.length-1])},-1),pe(R,"$to_s",function(){var _=this,r=H;return"#<"+_.$class()+"@"+_.$object_id()+" {doctype: "+_.$doctype().$inspect()+", doctitle: "+(k(r=_.header)?_.header.$title():r).$inspect()+", blocks: "+_.blocks.$size()+"}>"}),R.$private(),pe(R,"$apply_attribute_value_subs",function(_){var r,f=this;return k(K("AttributeEntryPassMacroRx")["$=~"](_))?(_=(r=y["~"])===H?H:r["$[]"](2),k((r=y["~"])===H?H:r["$[]"](1))&&(_=f.$apply_subs(_,f.$resolve_pass_subs((r=y["~"])===H?H:r["$[]"](1))))):_=f.$apply_header_subs(_),k(f.max_attribute_value_size)?f.$limit_bytesize(_,f.max_attribute_value_size):_}),pe(R,"$limit_bytesize",function(_,r){if(k(C(_.$bytesize(),r)))for(;!k((_=_.$byteslice(0,r))["$valid_encoding?"]());)r=Ae(r,1);return _}),pe(R,"$resolve_docinfo_subs",function(){var _=this;return k(_.attributes["$key?"]("docinfosubs"))?_.$resolve_subs(_.attributes["$[]"]("docinfosubs"),"block",H,"docinfo"):["attributes"]}),pe(R,"$create_converter",function(_,r){var f=this,A=H,b=H,d=H,B=H,D=H;return A=N(["document","htmlsyntax"],{document:f,htmlsyntax:f.attributes["$[]"]("htmlsyntax")}),k(b=k(d=(B=f.options)["$[]"]("template_dirs"))?d:B["$[]"]("template_dir"))&&(A["$[]="]("template_dirs",[].concat(Ze(b))),A["$[]="]("template_cache",B.$fetch("template_cache",!0)),A["$[]="]("template_engine",B["$[]"]("template_engine")),A["$[]="]("template_engine_options",B["$[]"]("template_engine_options")),A["$[]="]("eruby",B["$[]"]("eruby")),A["$[]="]("safe",f.safe),k(r)&&A["$[]="]("delegate_backend",r)),k(D=B["$[]"]("converter"))?T(K("Converter"),"CustomFactory").$new(Me(_,D)).$create(_,A):B.$fetch("converter_factory",K("Converter")).$create(_,A)}),pe(R,"$clear_playback_attributes",function(_){return _.$delete("attribute_entries")}),pe(R,"$save_attributes",function(){var _=this,r=H,f=H,A=H,b=H,d=H,B=H,D=H,Q=H,X=H,ce=H,Re=H,Ye=H,Qe=H,ot=H;if(k((f=_.attributes)["$key?"]("doctitle"))||ve(r=_.$doctitle())||f["$[]="]("doctitle",r),_.id=k(A=_.id)?A:f["$[]"]("css-signature"),k(b=k(f.$delete("toc2"))?"left":f["$[]"]("toc"))&&(d=k(B=f.$fetch("toc-placement","macro"))&&Ve(B,"auto")?B:f["$[]"]("toc-position"),!(k(b["$empty?"]())&&k(d["$nil_or_empty?"]())))){switch(D="left",Q="toc2",X=k(d["$nil_or_empty?"]())?k(b["$empty?"]())?D:b:d,f["$[]="]("toc",""),f["$[]="]("toc-placement","auto"),X){case"left":case"<":case"&lt;":f["$[]="]("toc-position","left");break;case"right":case">":case"&gt;":f["$[]="]("toc-position","right");break;case"top":case"^":f["$[]="]("toc-position","top");break;case"bottom":case"v":f["$[]="]("toc-position","bottom");break;case"preamble":case"macro":f["$[]="]("toc-position","content"),f["$[]="]("toc-placement",X),Q=H;break;default:f.$delete("toc-position"),Q=H}k(Q)&&(k(A=f["$[]"]("toc-class"))||f["$[]="]("toc-class",Q))}if(k(ce=f["$[]"]("icons"))&&ve(f["$key?"]("icontype")))switch(ce){case"":case"font":break;default:f["$[]="]("icons",""),Be(ce,"image")||f["$[]="]("icontype",ce)}return k(_.compat_mode=f["$key?"]("compat-mode"))&&k(f["$key?"]("language"))&&f["$[]="]("source-language",f["$[]"]("language")),k(_.parent_document)||(Be(Re=f["$[]"]("basebackend"),"html")?k(Ye=f["$[]"]("source-highlighter"))&&ve(f["$[]"](""+Ye+"-unavailable"))&&(k(Qe=_.options["$[]"]("syntax_highlighter_factory"))?_.syntax_highlighter=Qe.$create(Ye,_.backend,N(["document"],{document:_})):k(ot=_.options["$[]"]("syntax_highlighters"))?_.syntax_highlighter=T(K("SyntaxHighlighter"),"DefaultFactoryProxy").$new(ot).$create(Ye,_.backend,N(["document"],{document:_})):_.syntax_highlighter=K("SyntaxHighlighter").$create(Ye,_.backend,N(["document"],{document:_}))):Be(Re,"docbook")&&(k(_["$attribute_locked?"]("toc"))||k(_.attributes_modified["$include?"]("toc"))||f["$[]="]("toc",""),k(_["$attribute_locked?"]("sectnums"))||k(_.attributes_modified["$include?"]("sectnums"))||f["$[]="]("sectnums","")),_.outfilesuffix=f["$[]"]("outfilesuffix"),E(K("FLEXIBLE_ATTRIBUTES"),"each",[],function tt(at){var ct=tt.$$s==null?this:tt.$$s;return ct.attribute_overrides==null&&(ct.attribute_overrides=H),at==null&&(at=H),k(ct.attribute_overrides["$key?"](at))&&k(ct.attribute_overrides["$[]"](at))?ct.attribute_overrides.$delete(at):H},{$$s:_})),_.header_attributes=f.$merge()}),pe(R,"$fill_datetime_attributes",function(_,r){var f,A=this,b=H,d=H,B=H,D=H,Q=H,X=H,ce=H,Re=H;return b=k(T("ENV")["$key?"]("SOURCE_DATE_EPOCH"))?d=T("Time").$at(A.$Integer(T("ENV")["$[]"]("SOURCE_DATE_EPOCH"))).$utc():T("Time").$now(),k(B=_["$[]"]("localdate"))?k(D=_["$[]"]("localyear"))||_["$[]="]("localyear",Be(B.$index("-"),4)?B.$slice(0,4):H):(B=(f=["localdate",b.$strftime("%F")],E(_,"[]=",f),f[f.length-1]),k(D=_["$[]"]("localyear"))||_["$[]="]("localyear",b.$year().$to_s())),Q=k(D=_["$[]"]("localtime"))?D:(f=["localtime",b.$strftime("%T "+(Be(b.$utc_offset(),0)?"UTC":"%z"))],E(_,"[]=",f),f[f.length-1]),k(D=_["$[]"]("localdatetime"))||_["$[]="]("localdatetime",""+B+" "+Q),r=k(D=k(X=d)?X:r)?D:b,k(ce=_["$[]"]("docdate"))?k(D=_["$[]"]("docyear"))||_["$[]="]("docyear",Be(ce.$index("-"),4)?ce.$slice(0,4):H):(ce=(f=["docdate",r.$strftime("%F")],E(_,"[]=",f),f[f.length-1]),k(D=_["$[]"]("docyear"))||_["$[]="]("docyear",r.$year().$to_s())),Re=k(D=_["$[]"]("doctime"))?D:(f=["doctime",r.$strftime("%T "+(Be(r.$utc_offset(),0)?"UTC":"%z"))],E(_,"[]=",f),f[f.length-1]),k(D=_["$[]"]("docdatetime"))||_["$[]="]("docdatetime",""+ce+" "+Re),H}),pe(R,"$update_backend_attributes",function(_,r){var f,A,b=this,d=H,B=H,D=H,Q=H,X=H,ce=H,Re=H,Ye=H,Qe=H,ot=H,tt=H,at=H,ct=H,ft=H;return r==null&&(r=H),k(r)||Ve(_,b.backend)?(d=b.backend,B=(D=b.attributes)["$[]"]("basebackend"),Q=b.doctype,k(_["$include?"](":"))&&(A=_.$partition(":"),f=w(A),X=f[0]==null?H:f[0],f[1]==null||f[1],_=f[2]==null?H:f[2]),k(_["$start_with?"]("xhtml"))?(D["$[]="]("htmlsyntax","xml"),_=_.$slice(1,_.$length())):k(_["$start_with?"]("html"))&&(k(ce=D["$[]"]("htmlsyntax"))||D["$[]="]("htmlsyntax","html")),_=k(ce=K("BACKEND_ALIASES")["$[]"](_))?ce:_,k(X)&&(f=[X,_],_=f[0],Re=f[1]),k(Q)?(k(d)&&(D.$delete("backend-"+d),D.$delete("backend-"+d+"-doctype-"+Q)),D["$[]="]("backend-"+_+"-doctype-"+Q,""),D["$[]="]("doctype-"+Q,"")):k(d)&&D.$delete("backend-"+d),D["$[]="]("backend-"+_,""),b.backend=(f=["backend",_],E(D,"[]=",f),f[f.length-1]),st(T(K("Converter"),"BackendTraits"),Ye=b.$create_converter(_,Re))?(Qe=Ye.$basebackend(),ot=Ye.$filetype(),k(tt=Ye.$htmlsyntax())&&D["$[]="]("htmlsyntax",tt),k(r)?k(ce=D["$[]"]("outfilesuffix"))||D["$[]="]("outfilesuffix",Ye.$outfilesuffix()):k(b["$attribute_locked?"]("outfilesuffix"))||D["$[]="]("outfilesuffix",Ye.$outfilesuffix())):k(Ye)?(at=K("Converter").$derive_backend_traits(_),Qe=at["$[]"]("basebackend"),ot=at["$[]"]("filetype"),k(r)?k(ce=D["$[]"]("outfilesuffix"))||D["$[]="]("outfilesuffix",at["$[]"]("outfilesuffix")):k(b["$attribute_locked?"]("outfilesuffix"))||D["$[]="]("outfilesuffix",at["$[]"]("outfilesuffix"))):b.$raise(T("NotImplementedError"),"asciidoctor: FAILED: missing converter for backend '"+_+"'. Processing aborted."),b.converter=Ye,k(ct=D["$[]"]("filetype"))&&D.$delete("filetype-"+ct),D["$[]="]("filetype",ot),D["$[]="]("filetype-"+ot,""),k(ft=K("DEFAULT_PAGE_WIDTHS")["$[]"](Qe))?D["$[]="]("pagewidth",ft):D.$delete("pagewidth"),Ve(Qe,B)&&(k(Q)?(k(B)&&(D.$delete("basebackend-"+B),D.$delete("basebackend-"+B+"-doctype-"+Q)),D["$[]="]("basebackend-"+Qe+"-doctype-"+Q,"")):k(B)&&D.$delete("basebackend-"+B),D["$[]="]("basebackend-"+Qe,""),D["$[]="]("basebackend",Qe)),_):H},-2),pe(R,"$update_doctype_attributes",function(_){var r,f=this,A=H,b=H,d=H,B=H;return k(_)&&Ve(_,f.doctype)?(r=[f.backend,(A=f.attributes)["$[]"]("basebackend"),f.doctype],b=r[0],d=r[1],B=r[2],k(B)?(A.$delete("doctype-"+B),k(b)&&(A.$delete("backend-"+b+"-doctype-"+B),A["$[]="]("backend-"+b+"-doctype-"+_,"")),k(d)&&(A.$delete("basebackend-"+d+"-doctype-"+B),A["$[]="]("basebackend-"+d+"-doctype-"+_,""))):(k(b)&&A["$[]="]("backend-"+b+"-doctype-"+_,""),k(d)&&A["$[]="]("basebackend-"+d+"-doctype-"+_,"")),A["$[]="]("doctype-"+_,""),f.doctype=(r=["doctype",_],E(A,"[]=",r),r[r.length-1])):H})}(ge[0],Z("AbstractBlock"),ge)}(rt[0],rt)},Opal.modules["asciidoctor/inline"]=function(t){var g=t.module,u=t.klass,$=t.hash2,E=t.send2,a=t.find_super,k=t.def,pe=t.return_val,N=t.alias,ve=t.truthy,w=[],Ge=t.nil;return t.add_stubs("attr_accessor,attr_reader,[],convert,converter,attr,==,apply_reftext_subs,reftext"),function(he,Ue){var Ae=g(he,"Asciidoctor"),Be=[Ae].concat(Ue),st=t.$r(Be);return function(Me,et){var Pe=u(Me,et,"Inline"),Ve=Pe.$$prototype;return Ve.text=Ve.type=Ge,Pe.$attr_accessor("text"),Pe.$attr_reader("type"),Pe.$attr_accessor("target"),k(Pe,"$initialize",function it(C,Xe,y,Ze){it.$$p;var rt=this;return it.$$p=null,y==null&&(y=Ge),Ze==null&&(Ze=$([],{})),E(rt,a(rt,"initialize",it,!1,!0),"initialize",[C,Xe,Ze],null),rt.node_name="inline_"+Xe,rt.text=y,rt.id=Ze["$[]"]("id"),rt.type=Ze["$[]"]("type"),rt.target=Ze["$[]"]("target")},-3),k(Pe,"$block?",pe(!1)),k(Pe,"$inline?",pe(!0)),k(Pe,"$convert",function(){var C=this;return C.$converter().$convert(C)}),N(Pe,"render","convert"),k(Pe,"$alt",function(){var C=this,Xe=Ge;return ve(Xe=C.$attr("alt"))?Xe:""}),k(Pe,"$reftext?",function(){var C=this,Xe=Ge,y=Ge;return ve(Xe=C.text)?ve(y=C.type["$=="]("ref"))?y:C.type["$=="]("bibref"):Xe}),k(Pe,"$reftext",function(){var C=this,Xe=Ge;return ve(Xe=C.text)?C.$apply_reftext_subs(Xe):Ge}),k(Pe,"$xreftext",function(C){var Xe=this;return Xe.$reftext()},-1)}(Be[0],st("AbstractNode"))}(w[0],w)},Opal.modules["asciidoctor/list"]=function(t){var g=t.module,u=t.klass,$=t.alias,E=t.hash2,a=t.send2,k=t.find_super,pe=t.def,N=t.truthy,ve=t.eqeq,w=[],Ge=t.nil;return t.add_stubs("blocks,blocks?,==,next_list,callouts,convert,class,object_id,inspect,size,items,parent,attr_accessor,level,drop,nil_or_empty?,apply_subs,attr_writer,empty?,===,[],outline?,!,simple?,source,shift,context"),function(he,Ue){var Ae=g(he,"Asciidoctor"),Be=[Ae].concat(Ue),st=t.$r(Be);return function(Me,et){var Pe=u(Me,et,"List"),Ve=Pe.$$prototype;return Ve.context=Ve.document=Ve.style=Ge,$(Pe,"items","blocks"),$(Pe,"content","blocks"),$(Pe,"items?","blocks?"),pe(Pe,"$initialize",function it(C,Xe,y){var Ze=it.$$p||Ge,rt=this;return it.$$p=null,y==null&&(y=E([],{})),a(rt,k(rt,"initialize",it,!1,!0),"initialize",[C,Xe,y],Ze)},-3),pe(Pe,"$outline?",function(){var C=this,Xe=Ge;return N(Xe=C.context["$=="]("ulist"))?Xe:C.context["$=="]("olist")}),pe(Pe,"$convert",function it(){var C=it.$$p||Ge,Xe=this,y=Ge;return it.$$p=null,ve(Xe.context,"colist")?(y=a(Xe,k(Xe,"convert",it,!1,!0),"convert",[],C),Xe.document.$callouts().$next_list(),y):a(Xe,k(Xe,"convert",it,!1,!0),"convert",[],C)}),$(Pe,"render","convert"),pe(Pe,"$to_s",function(){var C=this;return"#<"+C.$class()+"@"+C.$object_id()+" {context: "+C.context.$inspect()+", style: "+C.style.$inspect()+", items: "+C.$items().$size()+"}>"})}(Be[0],st("AbstractBlock")),function(Me,et,Pe){var Ve=u(Me,et,"ListItem"),it=[Ve].concat(Pe),C=t.$r(it),Xe=Ve.$$prototype;return Xe.text=Xe.subs=Xe.blocks=Ge,$(Ve,"list","parent"),Ve.$attr_accessor("marker"),pe(Ve,"$initialize",function y(Ze,rt){y.$$p;var H=this;return y.$$p=null,rt==null&&(rt=Ge),a(H,k(H,"initialize",y,!1,!0),"initialize",[Ze,"list_item"],null),H.text=rt,H.level=Ze.$level(),H.subs=C("NORMAL_SUBS").$drop(0)},-2),pe(Ve,"$text?",function(){var Ze=this;return!N(Ze.text["$nil_or_empty?"]())}),pe(Ve,"$text",function(){var Ze=this,rt=Ge;return N(rt=Ze.text)?Ze.$apply_subs(Ze.text,Ze.subs):rt}),Ve.$attr_writer("text"),pe(Ve,"$simple?",function(){var Ze=this,rt=Ge,H=Ge,T=Ge,De=Ge;return N(rt=Ze.blocks["$empty?"]())?rt:N(H=N(T=Ze.blocks.$size()["$=="](1))?C("List")["$==="](De=Ze.blocks["$[]"](0)):T)?De["$outline?"]():H}),pe(Ve,"$compound?",function(){var Ze=this;return Ze["$simple?"]()["$!"]()}),pe(Ve,"$fold_first",function(){var Ze=this;return Ze.text=N(Ze.text["$nil_or_empty?"]())?Ze.blocks.$shift().$source():""+Ze.text+C("LF")+Ze.blocks.$shift().$source(),Ge}),pe(Ve,"$to_s",function(){var Ze=this,rt=Ge;return"#<"+Ze.$class()+"@"+Ze.$object_id()+" {list_context: "+Ze.$parent().$context().$inspect()+", text: "+Ze.text.$inspect()+", blocks: "+(N(rt=Ze.blocks)?rt:[]).$size()+"}>"})}(Be[0],st("AbstractBlock"),Be)}(w[0],w)},Opal.modules["asciidoctor/parser"]=function(t){var g=t.module,u=t.klass,$=t.const_set,E=t.send,a=t.truthy,k=t.hash2,pe=t.to_ary,N=t.defs,ve=t.eqeq,w=t.not,Ge=t.gvars,he=t.neqeq,Ue=t.rb_plus,Ae=t.rb_lt,Be=t.rb_gt,st=t.to_a,Me=t.eqeqeq,et=t.rb_minus,Pe=t.rb_times,Ve=t.thrower,it=[],C=t.nil,Xe=t.$$$;return t.add_stubs("include,new,proc,start_with?,match?,is_delimited_block?,private_class_method,parse_document_header,[],has_more_lines?,next_section,assign_numeral,<<,blocks,skip_blank_lines,parse_block_metadata_lines,attributes,is_next_line_doctitle?,[]=,finalize_header,nil_or_empty?,title=,sourcemap,cursor,parse_section_title,id=,include?,sub_specialchars,sub_attributes,source_location=,header,attribute_locked?,id,clear,delete,instance_variable_get,parse_header_metadata,==,!,register,process_authors,update,doctype,parse_manpage_header,=~,downcase,error,logger,message_with_context,cursor_at_line,backend,save,is_next_line_section?,initialize_section,join,map,read_lines_until,lstrip,split,title,restore_save,discard_save,header?,empty?,context,!=,attr?,attr,key?,document,+,level,special,sectname,to_i,<,>,warn,next_block,blocks?,style,style=,parent=,content_model,content_model=,lines,subs,size,context=,shift,unwrap_standalone_preamble,source_location,merge,fetch,parse_block_metadata_line,extensions,block_macros?,mark,read_line,terminator,to_s,masq,to_sym,registered_for_block?,debug?,debug,cursor_at_mark,strict_verbatim_paragraphs,unshift_line,markdown_syntax,keys,chr,uniform?,length,end_with?,parse_attributes,attribute_missing,tr,basename,assign_caption,registered_for_block_macro?,config,process_method,replace,parse_callout_list,callouts,===,parse_list,parse_description_list,underline_style_section_titles,is_section_title?,peek_line,atx_section_title?,generate_id,level=,read_paragraph_lines,adjust_indentation!,map!,slice,pop,build_block,apply_subs,chop,catalog_inline_anchors,rekey,index,strip,-,parse_table,each,raise,title?,update_attributes,commit_subs,sub?,catalog_callouts,source,remove_sub,block_terminates_paragraph,to_proc,nil?,parse_blocks,parse_list_item,items,scan,gsub,count,advance,dup,match,callout_ids,next_list,catalog_inline_anchor,marker=,catalog_inline_biblio_anchor,set_option,text=,resolve_ordered_list_marker,read_lines_for_list_item,skip_line_comments,unshift_lines,fold_first,text?,is_sibling_list_item?,concat,find,casecmp,sectname=,special=,numbered=,numbered,lineno,peek_lines,setext_section_title?,abs,cursor_at_prev_line,process_attribute_entries,next_line_empty?,apply_header_subs,rstrip,each_with_index,compact,to_h,squeeze,to_a,parse_style_attribute,process_attribute_entry,skip_comment_lines,store_attribute,sanitize_attribute_name,set_attribute,save_to,delete_attribute,ord,int_to_roman,resolve_list_marker,parse_colspecs,create_columns,has_header_option=,format,starts_with_delimiter?,close_open_cell,parse_cellspec,delimiter,match_delimiter,pre_match,post_match,buffer_has_unclosed_quotes?,skip_past_delimiter,buffer=,buffer,skip_past_escaped_delimiter,keep_cell_open,push_cellspec,close_cell,cell_open?,columns,assign_column_widths,partition_header_footer,upto,partition,shorthand_property_syntax,each_char,yield_buffered_attribute,any?,*,each_byte,%"),function(y,Ze){var rt=g(y,"Asciidoctor"),H=[rt].concat(Ze);return function(T,De,ue){var we=u(T,De,"Parser"),ge=[we].concat(ue),Z=t.$r(ge);return we.$include(Z("Logging")),$(ge[0],"BlockMatchData",Z("Struct").$new("context","masq","tip","terminator")),$(ge[0],"TAB","	"),$(ge[0],"TabIndentRx",/^\t+/),$(ge[0],"StartOfBlockProc",E(we,"proc",[],function $e(Y){var z=$e.$$s==null?this:$e.$$s,R=C,V=C;return Y==null&&(Y=C),a(R=a(V=Y["$start_with?"]("["))?Z("BlockAttributeLineRx")["$match?"](Y):V)?R:z["$is_delimited_block?"](Y)},{$$s:we})),$(ge[0],"StartOfListProc",E(we,"proc",[],function(Y){return Y==null&&(Y=C),Z("AnyListRx")["$match?"](Y)})),$(ge[0],"StartOfBlockOrListProc",E(we,"proc",[],function $e(Y){var z=$e.$$s==null?this:$e.$$s,R=C,V=C,K=C;return Y==null&&(Y=C),a(R=a(V=z["$is_delimited_block?"](Y))?V:a(K=Y["$start_with?"]("["))?Z("BlockAttributeLineRx")["$match?"](Y):K)?R:Z("AnyListRx")["$match?"](Y)},{$$s:we})),$(ge[0],"NoOp",C),$(ge[0],"AuthorKeys",["author","authorinitials","firstname","middlename","lastname","email"]),$(ge[0],"TableCellHorzAlignments",k(["<",">","^"],{"<":"left",">":"right","^":"center"})),$(ge[0],"TableCellVertAlignments",k(["<",">","^"],{"<":"top",">":"bottom","^":"middle"})),$(ge[0],"TableCellStyles",k(["d","s","e","m","h","l","a"],{d:"none",s:"strong",e:"emphasis",m:"monospaced",h:"header",l:"literal",a:"asciidoc"})),we.$private_class_method("new"),N(we,"$parse",function(Y,z,R){var V,K,J=this,M=C,_=C,r=C;if(R==null&&(R=k([],{})),M=J.$parse_document_header(Y,z,_=R["$[]"]("header_only")),!a(_))for(;a(Y["$has_more_lines?"]());)K=J.$next_section(Y,z,M),V=pe(K),r=V[0]==null?C:V[0],M=V[1]==null?C:V[1],a(r)&&(z.$assign_numeral(r),z.$blocks()["$<<"](r));return z},-3),N(we,"$parse_document_header",function(Y,z,R){var V,K,J,M=this,_=C,r=C,f=C,A=C,b=C,d=C,B=C,D=C,Q=C,X=C,ce=C,Re=C,Ye=C,Qe=C,ot=C;return R==null&&(R=!1),_=a(Y.$skip_blank_lines())?M.$parse_block_metadata_lines(Y,z):k([],{}),r=z.$attributes(),a(f=M["$is_next_line_doctitle?"](Y,_,r["$[]"]("leveloffset")))&&a(_["$[]"]("title"))?(r["$[]="]("authorcount",0),z.$finalize_header(_,!1)):(a((A=r["$[]"]("doctitle"))["$nil_or_empty?"]())||z["$title="](b=A),a(f)?(a(z.$sourcemap())&&(d=Y.$cursor()),K=M.$parse_section_title(Y,z),V=pe(K),J=[V[0]==null?C:V[0]],E(z,"id=",J),J[J.length-1],V[1]==null||V[1],B=V[2]==null?C:V[2],V[3]==null||V[3],D=V[4]==null?C:V[4],a(b)?B=C:(z["$title="](B),a((V=["doctitle",b=z.$sub_specialchars(B)],E(r,"[]=",V),V[V.length-1])["$include?"](Z("ATTR_REF_HEAD")))&&r["$[]="]("doctitle",b=z.$sub_attributes(b,k(["attribute_missing"],{attribute_missing:"skip"})))),a(d)&&z.$header()["$source_location="](d),a(D)||a(z["$attribute_locked?"]("compat-mode"))||r["$[]="]("compat-mode",""),a(Q=_["$[]"]("separator"))&&(a(z["$attribute_locked?"]("title-separator"))||r["$[]="]("title-separator",Q)),a(X=_["$[]"]("id"))?z["$id="](X):X=z.$id(),a(ce=_["$[]"]("role"))&&r["$[]="]("role",ce),a(Re=_["$[]"]("reftext"))&&r["$[]="]("reftext",Re),_.$clear(),(Ye=z.$instance_variable_get("@attributes_modified")).$delete("doctitle"),M.$parse_header_metadata(Y,z,C),a(Ye["$include?"]("doctitle"))?a((A=r["$[]"]("doctitle"))["$nil_or_empty?"]())||ve(A,b)?r["$[]="]("doctitle",b):z["$title="](A):w(B)&&Ye["$<<"]("doctitle"),a(X)&&z.$register("refs",[X,z])):a(Qe=r["$[]"]("author"))?(ot=M.$process_authors(Qe,!0,!1),a(r["$[]"]("authorinitials"))&&ot.$delete("authorinitials"),r.$update(ot)):a(Qe=r["$[]"]("authors"))?(ot=M.$process_authors(Qe,!0),r.$update(ot)):r["$[]="]("authorcount",0),ve(z.$doctype(),"manpage")&&M.$parse_manpage_header(Y,z,_,R),z.$finalize_header(_))},-3),N(we,"$parse_manpage_header",function(Y,z,R,V){var K,J=this,M=C,_=C,r=C,f=C,A=C,b=C,d=C,B=C,D=C,Q=C,X=C,ce=C;return V==null&&(V=!1),a(Z("ManpageTitleVolnumRx")["$=~"]((M=z.$attributes())["$[]"]("doctitle")))?(M["$[]="]("manvolnum",_=(K=Ge["~"])===C?C:K["$[]"](2)),M["$[]="]("mantitle",(a((r=(K=Ge["~"])===C?C:K["$[]"](1))["$include?"](Z("ATTR_REF_HEAD")))?z.$sub_attributes(r):r).$downcase())):(J.$logger().$error(J.$message_with_context("non-conforming manpage title",k(["source_location"],{source_location:Y.$cursor_at_line(1)}))),M["$[]="]("mantitle",a(f=a(A=M["$[]"]("doctitle"))?A:M["$[]"]("docname"))?f:"command"),M["$[]="]("manvolnum",_="1")),a(b=M["$[]"]("manname"))&&a(M["$[]"]("manpurpose"))?(a(f=M["$[]"]("manname-title"))||M["$[]="]("manname-title","Name"),M["$[]="]("mannames",[b]),ve(z.$backend(),"manpage")&&(M["$[]="]("docname",b),M["$[]="]("outfilesuffix","."+_))):a(V)||(Y.$skip_blank_lines(),Y.$save(),R.$update(J.$parse_block_metadata_lines(Y,z)),a(d=J["$is_next_line_section?"](Y,k([],{})))?ve(d,1)?(B=J.$initialize_section(Y,z,k([],{})),D=E(Y.$read_lines_until(k(["break_on_blank_lines","skip_line_comments"],{break_on_blank_lines:!0,skip_line_comments:!0})),"map",[],function(Ye){return Ye==null&&(Ye=C),Ye.$lstrip()}).$join(" "),a(Z("ManpageNamePurposeRx")["$=~"](D))?(a((b=(K=Ge["~"])===C?C:K["$[]"](1))["$include?"](Z("ATTR_REF_HEAD")))&&(b=z.$sub_attributes(b)),a(b["$include?"](","))?b=(Q=E(b.$split(","),"map",[],function(Ye){return Ye==null&&(Ye=C),Ye.$lstrip()}))["$[]"](0):Q=[b],a((X=(K=Ge["~"])===C?C:K["$[]"](2))["$include?"](Z("ATTR_REF_HEAD")))&&(X=z.$sub_attributes(X)),a(f=M["$[]"]("manname-title"))||M["$[]="]("manname-title",B.$title()),a(B.$id())&&M["$[]="]("manname-id",B.$id()),M["$[]="]("manname",b),M["$[]="]("mannames",Q),M["$[]="]("manpurpose",X),ve(z.$backend(),"manpage")&&(M["$[]="]("docname",b),M["$[]="]("outfilesuffix","."+_))):ce="non-conforming name section body"):ce="name section must be at level 1":ce="name section expected",a(ce)?(Y.$restore_save(),J.$logger().$error(J.$message_with_context(ce,k(["source_location"],{source_location:Y.$cursor()}))),M["$[]="]("manname",b=a(f=M["$[]"]("docname"))?f:"command"),M["$[]="]("mannames",[b]),ve(z.$backend(),"manpage")&&(M["$[]="]("docname",b),M["$[]="]("outfilesuffix","."+_))):Y.$discard_save()),C},-4),N(we,"$next_section",function(Y,z,R){var V,K,J=this,M=C,_=C,r=C,f=C,A=C,b=C,d=C,B=C,D=C,Q=C,X=C,ce=C,Re=C,Ye=C,Qe=C,ot=C,tt=C,at=C,ct=C,ft=C;for(R==null&&(R=k([],{})),M=_=r=!1,ve(z.$context(),"document")&&a(z.$blocks()["$empty?"]())&&(a(f=z["$header?"]())||a(R.$delete("invalid-header"))||w(J["$is_next_line_section?"](Y,R)))?(A=(b=z).$doctype()["$=="]("book"),(a(f)||a(A)&&he(R["$[]"](1),"abstract"))&&(M=_=Z("Block").$new(z,"preamble",k(["content_model"],{content_model:"compound"})),a(A)&&a(z["$attr?"]("preface-title"))&&M["$title="](z.$attr("preface-title")),z.$blocks()["$<<"](M)),d=z,B=0,a(z.$attributes()["$key?"]("fragment"))?D=-1:a(A)?(V=[1,0],D=V[0],Q=V[1]):D=1):(A=(b=z.$document()).$doctype()["$=="]("book"),d=J.$initialize_section(Y,z,R),R=a(X=R["$[]"]("title"))?k(["title"],{title:X}):k([],{}),D=Ue(B=d.$level(),1),ve(B,0)?r=A:ve(B,1)&&a(d.$special())&&(ve(ce=d.$sectname(),"appendix")||ve(ce,"preface")||ve(ce,"abstract")||(D=C))),Y.$skip_blank_lines();a(Y["$has_more_lines?"]());){if(J.$parse_block_metadata_lines(Y,b,R),a(Re=J["$is_next_line_section?"](Y,R)))if(a(b["$attr?"]("leveloffset"))&&(Re=Ue(Re,b.$attr("leveloffset").$to_i()),a(Ae(Re,0))&&(Re=0)),a(Be(Re,B)))a(D)?ve(Re,D)||a(Q)&&ve(Re,Q)||a(Ae(D,0))||(Ye=a(Q)?"expected levels "+Q+" or "+D:"expected level "+D,J.$logger().$warn(J.$message_with_context("section title out of sequence: "+Ye+", got level "+Re,k(["source_location"],{source_location:Y.$cursor()})))):J.$logger().$error(J.$message_with_context(""+ce+" sections do not support nested sections",k(["source_location"],{source_location:Y.$cursor()}))),K=J.$next_section(Y,d,R),V=pe(K),Qe=V[0]==null?C:V[0],R=V[1]==null?C:V[1],d.$assign_numeral(Qe),d.$blocks()["$<<"](Qe);else if(ve(Re,0)&&ve(d,b))a(A)||J.$logger().$error(J.$message_with_context("level 0 sections can only be used when doctype is book",k(["source_location"],{source_location:Y.$cursor()}))),K=J.$next_section(Y,d,R),V=pe(K),Qe=V[0]==null?C:V[0],R=V[1]==null?C:V[1],d.$assign_numeral(Qe),d.$blocks()["$<<"](Qe);else break;else ot=Y.$cursor(),a(tt=J.$next_block(Y,a(at=_)?at:d,R,k(["parse_metadata"],{parse_metadata:!1})))&&(a(r)&&(w(d["$blocks?"]())?he(tt.$style(),"partintro")?ve(tt.$style(),"open")&&ve(tt.$context(),"open")?tt["$style="]("partintro"):(tt["$parent="](_=Z("Block").$new(d,"open",k(["content_model"],{content_model:"compound"}))),_["$style="]("partintro"),d.$blocks()["$<<"](_)):ve(tt.$content_model(),"simple")&&(tt["$content_model="]("compound"),tt["$<<"](Z("Block").$new(tt,"paragraph",k(["source","subs"],{source:tt.$lines(),subs:tt.$subs()}))),tt.$lines().$clear(),tt.$subs().$clear()):ve(d.$blocks().$size(),1)&&(ct=d.$blocks()["$[]"](0),w(_)&&ve(ct.$content_model(),"compound")?J.$logger().$error(J.$message_with_context("illegal block content outside of partintro block",k(["source_location"],{source_location:ot}))):he(ct.$content_model(),"compound")&&(tt["$parent="](_=Z("Block").$new(d,"open",k(["content_model"],{content_model:"compound"}))),ve(ct.$style(),(V=["partintro"],E(_,"style=",V),V[V.length-1]))&&(ct["$context="]("paragraph"),ct["$style="](C)),d.$blocks().$shift(),_["$<<"](ct),d.$blocks()["$<<"](_)))),(a(at=_)?at:d).$blocks()["$<<"](tt),R.$clear());if(!a(at=Y.$skip_blank_lines()))break}if(a(r))a(d["$blocks?"]())&&ve(d.$blocks()["$[]"](-1).$context(),"section")||J.$logger().$error(J.$message_with_context("invalid part, must have at least one section (e.g., chapter, appendix, etc.)",k(["source_location"],{source_location:Y.$cursor()})));else if(a(M))if(a(M["$blocks?"]()))if(a(A)||a(b.$blocks()["$[]"](1))||w(Z("Compliance").$unwrap_standalone_preamble()))a(b.$sourcemap())&&M["$source_location="](M.$blocks()["$[]"](0).$source_location());else for(b.$blocks().$shift();a(ft=M.$blocks().$shift());)b["$<<"](ft);else b.$blocks().$shift();return[ve(d,z)?C:d,R.$merge()]},-3),N(we,"$next_block",function(Y,z,R,V){var K,J,M=this,_=C,r=C,f=C,A=C,b=C,d=C,B=C,D=C,Q=C,X=C,ce=C,Re=C,Ye=C,Qe=C,ot=C,tt=C,at=C,ct=C,ft=C,ut=C,pt=C,ht=C,kt=C,yt=C,Tt=C,Ct=C,wt=C,At=C,It=C,Bt=C,Ot=C,Kt=C,qt=C,xt=C,Rt=C,Dt=C,Et=C,Ft=C,Gt=C,Mt=C,zt=C,Xt=C,Pt=C,jt=C,kr=C,Ar=C,tn=C,Sr=C,rn=C;if(Ge["~"]==null&&(Ge["~"]=C),R==null&&(R=k([],{})),V==null&&(V=k([],{})),!a(_=Y.$skip_blank_lines()))return C;if(a(r=V["$[]"]("text_only"))&&a(Be(_,0))&&(V.$delete("text_only"),r=C),f=z.$document(),a(V.$fetch("parse_metadata",!0))){for(;a(M.$parse_block_metadata_line(Y,f,R,V));)if(Y.$shift(),!a(A=Y.$skip_blank_lines()))return C}if(a(b=f.$extensions())&&(K=[b["$blocks?"](),b["$block_macros?"]()],d=K[0],B=K[1]),Y.$mark(),K=[Y.$read_line(),f.$attributes(),R["$[]"](1)],D=K[0],Q=K[1],X=K[2],ce=Re=Ye=Qe=C,a(ot=M["$is_delimited_block?"](D,!0))&&(Re=Ye=ot.$context(),Qe=ot.$terminator(),a(X)?ve(X,Re.$to_s())||(a(ot.$masq()["$include?"](X))?Re=X.$to_sym():a(ot.$masq()["$include?"]("admonition"))&&a(Z("ADMONITION_STYLES")["$include?"](X))?Re="admonition":a(d)&&a(b["$registered_for_block?"](X,Re))?Re=X.$to_sym():(a(M.$logger()["$debug?"]())&&M.$logger().$debug(M.$message_with_context("unknown style for "+Re+" block: "+X,k(["source_location"],{source_location:Y.$cursor_at_mark()}))),X=Re.$to_s())):X=(K=["style",Re.$to_s()],E(R,"[]=",K),K[K.length-1])),!a(ot))for(;a(!0);){if(a(X)&&a(Z("Compliance").$strict_verbatim_paragraphs())&&a(Z("VERBATIM_STYLES")["$include?"](X))){Re=X.$to_sym(),Y.$unshift_line(D);break}if(a(r))tt=D["$start_with?"](" ",Z("TAB"));else if(at=Z("Compliance").$markdown_syntax(),a(D["$start_with?"](" "))){if(K=[!0," "],tt=K[0],ct=K[1],a(at)&&a(E(D.$lstrip(),"start_with?",st(Z("MARKDOWN_THEMATIC_BREAK_CHARS").$keys())))&&a(Z("MarkdownThematicBreakRx")["$match?"](D))){ce=Z("Block").$new(z,"thematic_break",k(["content_model"],{content_model:"empty"}));break}}else if(a(D["$start_with?"](Z("TAB"))))K=[!0,Z("TAB")],tt=K[0],ct=K[1];else if(K=[!1,D.$chr()],tt=K[0],ct=K[1],ft=a(at)?Z("HYBRID_LAYOUT_BREAK_CHARS"):Z("LAYOUT_BREAK_CHARS"),a(ft["$key?"](ct))&&a(a(at)?Z("ExtLayoutBreakRx")["$match?"](D):a(A=M["$uniform?"](D,ct,ut=D.$length()))?Be(ut,2):A)){ce=Z("Block").$new(z,ft["$[]"](ct),k(["content_model"],{content_model:"empty"}));break}else if(a(D["$end_with?"]("]"))&&a(D["$include?"]("::"))){if((ve(ct,"i")||a(D["$start_with?"]("video:","audio:")))&&a(Z("BlockMediaMacroRx")["$=~"](D))){if(K=[((J=Ge["~"])===C?C:J["$[]"](1)).$to_sym(),(J=Ge["~"])===C?C:J["$[]"](2),(J=Ge["~"])===C?C:J["$[]"](3)],pt=K[0],ht=K[1],kt=K[2],ce=Z("Block").$new(z,pt,k(["content_model"],{content_model:"empty"})),a(kt)){switch(pt){case"video":yt=["poster","width","height"];break;case"audio":yt=[];break;default:yt=["alt","width","height"]}ce.$parse_attributes(kt,yt,k(["sub_input","into"],{sub_input:!0,into:R}))}if(a(R["$key?"]("style"))&&R.$delete("style"),a(ht["$include?"](Z("ATTR_REF_HEAD")))){if(a((Tt=ce.$sub_attributes(ht))["$empty?"]())&&ve(a(A=Q["$[]"]("attribute-missing"))?A:Z("Compliance").$attribute_missing(),"drop-line")&&a(ce.$sub_attributes(Ue(ht," "),k(["attribute_missing","drop_line_severity"],{attribute_missing:"drop-line",drop_line_severity:"ignore"}))["$empty?"]()))return R.$clear(),C;ht=Tt}ve(pt,"image")&&(f.$register("images",ht),R["$[]="]("imagesdir",Q["$[]"]("imagesdir")),a(A=R["$[]"]("alt"))||R["$[]="]("alt",a(Ct=X)?Ct:(K=["default-alt",Z("Helpers").$basename(ht,!0).$tr("_-"," ")],E(R,"[]=",K),K[K.length-1])),a((wt=R.$delete("scaledwidth"))["$nil_or_empty?"]())||R["$[]="]("scaledwidth",a(Z("TrailingDigitsRx")["$match?"](wt))?""+wt+"%":wt),a(R["$[]"]("title"))&&(ce["$title="](At=R.$delete("title")),ce.$assign_caption(R.$delete("caption"),"figure"))),R["$[]="]("target",ht);break}else if(ve(ct,"t")&&a(D["$start_with?"]("toc:"))&&a(Z("BlockTocMacroRx")["$=~"](D))){ce=Z("Block").$new(z,"toc",k(["content_model"],{content_model:"empty"})),a((K=Ge["~"])===C?C:K["$[]"](1))&&ce.$parse_attributes((K=Ge["~"])===C?C:K["$[]"](1),[],k(["into"],{into:R}));break}else if(a(a(B)?a(A=a(Ct=Z("CustomBlockMacroRx")["$=~"](D))?It=b["$registered_for_block_macro?"]((K=Ge["~"])===C?C:K["$[]"](1)):Ct)?A:Bt=M.$logger()["$debug?"]():a(A=M.$logger()["$debug?"]())?Bt=Z("CustomBlockMacroRx")["$=~"](D):A))if(a(Bt))M.$logger().$debug(M.$message_with_context("unknown name for block macro: "+((K=Ge["~"])===C?C:K["$[]"](1)),k(["source_location"],{source_location:Y.$cursor_at_mark()})));else{if(Ot=(K=Ge["~"])===C?C:K["$[]"](3),a((ht=(K=Ge["~"])===C?C:K["$[]"](2))["$include?"](Z("ATTR_REF_HEAD")))){if(a((Tt=z.$sub_attributes(ht))["$empty?"]())&&ve(a(A=Q["$[]"]("attribute-missing"))?A:Z("Compliance").$attribute_missing(),"drop-line")&&a(z.$sub_attributes(Ue(ht," "),k(["attribute_missing","drop_line_severity"],{attribute_missing:"drop-line",drop_line_severity:"ignore"}))["$empty?"]()))return R.$clear(),C;ht=Tt}if(ve((Kt=It.$config())["$[]"]("content_model"),"attributes")?a(Ot)&&f.$parse_attributes(Ot,a(A=a(Ct=Kt["$[]"]("positional_attrs"))?Ct:Kt["$[]"]("pos_attrs"))?A:[],k(["sub_input","into"],{sub_input:!0,into:R})):R["$[]="]("text",a(A=Ot)?A:""),a(qt=Kt["$[]"]("default_attrs"))&&E(R,"update",[qt],function(Wt,vr){return vr==null&&(vr=C),vr}),a(ce=It.$process_method()["$[]"](z,ht,R))&&he(ce,z)){R.$replace(ce.$attributes());break}else return R.$clear(),C}}if(w(tt)&&ve(ct=a(A=ct)?A:D.$chr(),"<")&&a(Z("CalloutListRx")["$=~"](D))){Y.$unshift_line(D),ce=M.$parse_callout_list(Y,Ge["~"],z,f.$callouts()),R["$[]="]("style","arabic");break}else if(a(Z("UnorderedListRx")["$match?"](D))){Y.$unshift_line(D),w(X)&&Me(Z("Section"),z)&&ve(z.$sectname(),"bibliography")&&R["$[]="]("style",X="bibliography"),ce=M.$parse_list(Y,"ulist",z,X);break}else if(a(Z("OrderedListRx")["$match?"](D))){Y.$unshift_line(D),ce=M.$parse_list(Y,"olist",z,X),a(ce.$style())&&R["$[]="]("style",ce.$style());break}else if((a(D["$include?"]("::"))||a(D["$include?"](";;")))&&a(Z("DescriptionListRx")["$=~"](D))){Y.$unshift_line(D),ce=M.$parse_description_list(Y,Ge["~"],z);break}else if((ve(X,"float")||ve(X,"discrete"))&&a(a(Z("Compliance").$underline_style_section_titles())?M["$is_section_title?"](D,Y.$peek_line()):a(A=tt["$!"]())?M["$atx_section_title?"](D):A)){Y.$unshift_line(D),J=M.$parse_section_title(Y,f,R["$[]"]("id")),K=pe(J),xt=K[0]==null?C:K[0],Rt=K[1]==null?C:K[1],At=K[2]==null?C:K[2],Dt=K[3]==null?C:K[3],a(Rt)&&R["$[]="]("reftext",Rt),ce=Z("Block").$new(z,"floating_title",k(["content_model"],{content_model:"empty"})),ce["$title="](At),R.$delete("title"),ce["$id="](a(A=xt)?A:a(Q["$key?"]("sectids"))?Z("Section").$generate_id(ce.$title(),f):C),ce["$level="](Dt);break}else if(a(X)&&he(X,"normal"))if(a(Z("PARAGRAPH_STYLES")["$include?"](X))){Re=X.$to_sym(),Ye="paragraph",Y.$unshift_line(D);break}else if(a(Z("ADMONITION_STYLES")["$include?"](X))){Re="admonition",Ye="paragraph",Y.$unshift_line(D);break}else if(a(d)&&a(b["$registered_for_block?"](X,"paragraph"))){Re=X.$to_sym(),Ye="paragraph",Y.$unshift_line(D);break}else a(M.$logger()["$debug?"]())&&M.$logger().$debug(M.$message_with_context("unknown style for paragraph: "+X,k(["source_location"],{source_location:Y.$cursor_at_mark()}))),X=C;if(Y.$unshift_line(D),a(tt)&&w(X))Et=M.$read_paragraph_lines(Y,Ft=ve(_,0)?V["$[]"]("list_type"):C,k(["skip_line_comments"],{skip_line_comments:r})),M["$adjust_indentation!"](Et),a(r)||ve(Ft,"dlist")?ce=Z("Block").$new(z,"paragraph",k(["content_model","source","attributes"],{content_model:"simple",source:Et,attributes:R})):ce=Z("Block").$new(z,"literal",k(["content_model","source","attributes"],{content_model:"verbatim",source:Et,attributes:R}));else{if(Et=M.$read_paragraph_lines(Y,a(A=_["$=="](0))?V["$[]"]("list_type"):A,k(["skip_line_comments"],{skip_line_comments:!0})),a(r))a(tt)&&ve(X,"normal")&&M["$adjust_indentation!"](Et),ce=Z("Block").$new(z,"paragraph",k(["content_model","source","attributes"],{content_model:"simple",source:Et,attributes:R}));else if(a(Z("ADMONITION_STYLE_HEADS")["$include?"](ct))&&a(D["$include?"](":"))&&a(Z("AdmonitionParagraphRx")["$=~"](D)))Et["$[]="](0,(K=Ge["~"])===C?C:K.$post_match()),R["$[]="]("name",Gt=(K=["style",(J=Ge["~"])===C?C:J["$[]"](1)],E(R,"[]=",K),K[K.length-1]).$downcase()),R["$[]="]("textlabel",a(A=R.$delete("caption"))?A:Q["$[]"](""+Gt+"-caption")),ce=Z("Block").$new(z,"admonition",k(["content_model","source","attributes"],{content_model:"simple",source:Et,attributes:R}));else if(a(at)&&ve(ct,">")&&a(D["$start_with?"]("> "))){if(E(Et,"map!",[],function(Wt){return Wt==null&&(Wt=C),ve(Wt,">")?Wt.$slice(1,Wt.$length()):a(Wt["$start_with?"]("> "))?Wt.$slice(2,Wt.$length()):Wt}),a(Et["$[]"](-1)["$start_with?"]("-- "))&&(Mt=(Mt=Et.$pop()).$slice(3,Mt.$length()),!a(Et["$empty?"]())))for(;a(Et["$[]"](-1)["$empty?"]());)Et.$pop();R["$[]="]("style","quote"),ce=M.$build_block("quote","compound",!1,z,Z("Reader").$new(Et),R),a(Mt)&&(J=ce.$apply_subs(Mt).$split(", ",2),K=pe(J),zt=K[0]==null?C:K[0],Xt=K[1]==null?C:K[1],a(zt)&&R["$[]="]("attribution",zt),a(Xt)&&R["$[]="]("citetitle",Xt))}else if(ve(ct,'"')&&a(Be(Et.$size(),1))&&a(Et["$[]"](-1)["$start_with?"]("-- "))&&a(Et["$[]"](-2)["$end_with?"]('"'))){for(Et["$[]="](0,D.$slice(1,D.$length())),Mt=(Mt=Et.$pop()).$slice(3,Mt.$length());a(Et["$[]"](-1)["$empty?"]());)Et.$pop();Et["$<<"](Et.$pop().$chop()),R["$[]="]("style","quote"),ce=Z("Block").$new(z,"quote",k(["content_model","source","attributes"],{content_model:"simple",source:Et,attributes:R})),J=ce.$apply_subs(Mt).$split(", ",2),K=pe(J),zt=K[0]==null?C:K[0],Xt=K[1]==null?C:K[1],a(zt)&&R["$[]="]("attribution",zt),a(Xt)&&R["$[]="]("citetitle",Xt)}else a(tt)&&ve(X,"normal")&&M["$adjust_indentation!"](Et),ce=Z("Block").$new(z,"paragraph",k(["content_model","source","attributes"],{content_model:"simple",source:Et,attributes:R}));M.$catalog_inline_anchors(Et.$join(Z("LF")),ce,f,Y)}break}if(!a(ce))switch(Re){case"listing":case"source":(ve(Re,"source")||w(R["$[]"](1))&&a(Pt=a(Ct=R["$[]"](2))?Ct:Q["$[]"]("source-language")))&&(a(Pt)?(R["$[]="]("style","source"),R["$[]="]("language",Pt),Z("AttributeList").$rekey(R,[C,C,"linenums"])):(Z("AttributeList").$rekey(R,[C,"language","linenums"]),a(R["$key?"]("language"))||a(Q["$key?"]("source-language"))&&R["$[]="]("language",Q["$[]"]("source-language"))),a(R["$key?"]("linenums"))||(a(R["$[]"]("linenums-option"))||a(Q["$[]"]("source-linenums-option")))&&R["$[]="]("linenums",""),a(R["$key?"]("indent"))||a(Q["$key?"]("source-indent"))&&R["$[]="]("indent",Q["$[]"]("source-indent"))),ce=M.$build_block("listing","verbatim",Qe,z,Y,R);break;case"fenced_code":R["$[]="]("style","source"),a(Be(ut=D.$length(),3))&&(a(jt=(Pt=D.$slice(3,ut)).$index(","))?a(Be(jt,0))?(Pt=Pt.$slice(0,jt).$strip(),a(Ae(jt,et(ut,4)))&&R["$[]="]("linenums","")):a(Be(ut,4))&&R["$[]="]("linenums",""):Pt=Pt.$lstrip()),a(Pt["$nil_or_empty?"]())?a(Q["$key?"]("source-language"))&&R["$[]="]("language",Q["$[]"]("source-language")):R["$[]="]("language",Pt),a(R["$key?"]("linenums"))||(a(R["$[]"]("linenums-option"))||a(Q["$[]"]("source-linenums-option")))&&R["$[]="]("linenums",""),a(R["$key?"]("indent"))||a(Q["$key?"]("source-indent"))&&R["$[]="]("indent",Q["$[]"]("source-indent")),Qe=Qe.$slice(0,3),ce=M.$build_block("listing","verbatim",Qe,z,Y,R);break;case"table":kr=Y.$cursor(),Ar=Z("Reader").$new(Y.$read_lines_until(k(["terminator","skip_line_comments","context","cursor"],{terminator:Qe,skip_line_comments:!0,context:"table",cursor:"at_mark"})),kr),a(Qe["$start_with?"]("|","!"))||a(Ct=R["$[]"]("format"))||R["$[]="]("format",a(Qe["$start_with?"](","))?"csv":"dsv"),ce=M.$parse_table(Ar,z,R);break;case"sidebar":ce=M.$build_block(Re,"compound",Qe,z,Y,R);break;case"admonition":R["$[]="]("name",Gt=X.$downcase()),R["$[]="]("textlabel",a(Ct=R.$delete("caption"))?Ct:Q["$[]"](""+Gt+"-caption")),ce=M.$build_block(Re,"compound",Qe,z,Y,R);break;case"open":case"abstract":case"partintro":ce=M.$build_block("open","compound",Qe,z,Y,R);break;case"literal":ce=M.$build_block(Re,"verbatim",Qe,z,Y,R);break;case"example":a(R["$[]"]("collapsible-option"))&&R["$[]="]("caption",""),ce=M.$build_block(Re,"compound",Qe,z,Y,R);break;case"quote":case"verse":Z("AttributeList").$rekey(R,[C,"attribution","citetitle"]),ce=M.$build_block(Re,ve(Re,"verse")?"verbatim":"compound",Qe,z,Y,R);break;case"stem":case"latexmath":case"asciimath":ve(Re,"stem")&&R["$[]="]("style",Z("STEM_TYPE_ALIASES")["$[]"](a(Ct=R["$[]"](2))?Ct:Q["$[]"]("stem"))),ce=M.$build_block("stem","raw",Qe,z,Y,R);break;case"pass":ce=M.$build_block(Re,"raw",Qe,z,Y,R);break;case"comment":return M.$build_block(Re,"skip",Qe,z,Y,R),R.$clear(),C;default:if(a(d)&&a(It=b["$registered_for_block?"](Re,Ye))){if(ve(tn=(Kt=It.$config())["$[]"]("content_model"),"skip")||(a((Sr=a(Ct=Kt["$[]"]("positional_attrs"))?Ct:Kt["$[]"]("pos_attrs"))["$nil_or_empty?"]())||Z("AttributeList").$rekey(R,Ue([C],Sr)),a(qt=Kt["$[]"]("default_attrs"))&&E(qt,"each",[],function(Wt,vr){var Dr;return Wt==null&&(Wt=C),vr==null&&(vr=C),a(Ct=R["$[]"](Wt))?Ct:(Dr=[Wt,vr],E(R,"[]=",Dr),Dr[Dr.length-1])}),R["$[]="]("cloaked-context",Ye)),!a(ce=M.$build_block(Re,tn,Qe,z,Y,R,k(["extension"],{extension:It}))))return R.$clear(),C}else M.$raise("Unsupported block type "+Re+" at "+Y.$cursor())}return a(f.$sourcemap())&&ce["$source_location="](Y.$cursor_at_mark()),a(R["$[]"]("title"))&&(ce["$title="](At=R.$delete("title")),a(Z("CAPTION_ATTRIBUTE_NAMES")["$[]"](ce.$context()))&&ce.$assign_caption(R.$delete("caption"))),ce["$style="](R["$[]"]("style")),a(rn=a(A=ce.$id())?A:(K=[R["$[]"]("id")],E(ce,"id=",K),K[K.length-1]))&&(a(a(At)?At["$include?"](Z("ATTR_REF_HEAD")):ce["$title?"]())&&ce.$title(),a(f.$register("refs",[rn,ce]))||M.$logger().$warn(M.$message_with_context("id assigned to block already in use: "+rn,k(["source_location"],{source_location:Y.$cursor_at_mark()})))),a(R["$empty?"]())||ce.$update_attributes(R),ce.$commit_subs(),a(ce["$sub?"]("callouts"))&&(a(M.$catalog_callouts(ce.$source(),f))||ce.$remove_sub("callouts")),ce},-3),N(we,"$read_paragraph_lines",function(Y,z,R){var V=C;return R==null&&(R=k([],{})),R["$[]="]("break_on_blank_lines",!0),R["$[]="]("break_on_list_continuation",!0),R["$[]="]("preserve_last_line",!0),V=a(z)?a(Z("Compliance").$block_terminates_paragraph())?Z("StartOfBlockOrListProc"):Z("StartOfListProc"):a(Z("Compliance").$block_terminates_paragraph())?Z("StartOfBlockProc"):Z("NoOp"),E(Y,"read_lines_until",[R],V.$to_proc())},-3),N(we,"$is_delimited_block?",function(Y,z){var R,V,K=this,J=C,M=C,_=C,r=C,f=C;if(z==null&&(z=C),!(a(Be(J=Y.$length(),1))&&a(Z("DELIMITED_BLOCK_HEADS")["$[]"](Y.$slice(0,2)))))return C;if(ve(J,2))M=Y,_=2;else if(a(Ae(J,5))?(M=Y,_=J):M=Y.$slice(0,_=4),a(Z("Compliance").$markdown_syntax())&&a(M["$start_with?"]("`"))){if(ve(_,4)){if(ve(M,"````")||he(M=M.$chop(),"```"))return C;Y=M,J=_=3}else if(he(M,"```"))return C}else if(ve(_,3))return C;return V=Z("DELIMITED_BLOCKS")["$[]"](M),R=pe(V),r=R[0]==null?C:R[0],f=R[1]==null?C:R[1],a(r)&&(ve(J,_)||a(K["$uniform?"](Y.$slice(1,J),Z("DELIMITED_BLOCK_TAILS")["$[]"](M),et(J,1))))?a(z)?Z("BlockMatchData").$new(r,f,M,Y):!0:C},-2),N(we,"$build_block",function(Y,z,R,V,K,J,M){var _,r=this,f=C,A=C,b=C,d=C,B=C,D=C,Q=C,X=C,ce=C,Re=C,Ye=C;switch(M==null&&(M=k([],{})),z){case"skip":_=[!0,"simple"],f=_[0],A=_[1];break;case"raw":_=[!1,"simple"],f=_[0],A=_[1];break;default:_=[!1,z],f=_[0],A=_[1]}switch(a(R["$nil?"]())?(ve(A,"verbatim")?b=K.$read_lines_until(k(["break_on_blank_lines","break_on_list_continuation"],{break_on_blank_lines:!0,break_on_list_continuation:!0})):(ve(z,"compound")&&(z="simple"),b=r.$read_paragraph_lines(K,!1,k(["skip_line_comments","skip_processing"],{skip_line_comments:!0,skip_processing:f}))),d=C):he(A,"compound")?(b=K.$read_lines_until(k(["terminator","skip_processing","context","cursor"],{terminator:R,skip_processing:f,context:Y,cursor:"at_mark"})),d=C):ve(R,!1)?(b=C,d=K):(b=C,B=K.$cursor(),d=Z("Reader").$new(K.$read_lines_until(k(["terminator","skip_processing","context","cursor"],{terminator:R,skip_processing:f,context:Y,cursor:"at_mark"})),B)),z){case"verbatim":D=(a(Q=J["$[]"]("tabsize"))?Q:V.$document().$attributes()["$[]"]("tabsize")).$to_i(),a(X=J["$[]"]("indent"))?r["$adjust_indentation!"](b,X.$to_i(),D):a(Be(D,0))&&r["$adjust_indentation!"](b,-1,D);break;case"skip":return C}if(a(ce=M["$[]"]("extension")))if(J.$delete("style"),a(Re=ce.$process_method()["$[]"](V,a(Ye=d)?Ye:Z("Reader").$new(b),J.$merge()))&&he(Re,V))J.$replace(Re.$attributes()),ve(Re.$content_model(),"compound")&&Me(Z("Block"),Re)&&w((b=Re.$lines())["$empty?"]())&&(z="compound",d=Z("Reader").$new(b));else return C;else Re=Z("Block").$new(V,Y,k(["content_model","source","attributes"],{content_model:z,source:b,attributes:J}));return ve(z,"compound")&&r.$parse_blocks(d,Re),Re},-7),N(we,"$parse_blocks",function(Y,z,R){var V=this,K=C,J=C,M=C;if(R==null&&(R=C),a(R))for(;a(a(K=a(J=M=V.$next_block(Y,z,R.$merge()))?z.$blocks()["$<<"](M):J)?K:Y["$has_more_lines?"]()););else for(;a(a(K=a(J=M=V.$next_block(Y,z))?z.$blocks()["$<<"](M):J)?K:Y["$has_more_lines?"]()););return C},-3),N(we,"$parse_list",function(Y,z,R,V){var K,J=this,M=C,_=C,r=C,f=C;for(Ge["~"]==null&&(Ge["~"]=C),M=Z("List").$new(R,z),_=Z("ListRxMap")["$[]"](z);a(a(r=Y["$has_more_lines?"]())?_["$=~"](Y.$peek_line()):r)&&(a(f=J.$parse_list_item(Y,M,Ge["~"],(K=Ge["~"])===C?C:K["$[]"](1),V))&&M.$items()["$<<"](f),!!a(r=Y.$skip_blank_lines())););return M}),N(we,"$catalog_callouts",function(Y,z){var R=C,V=C;return R=!1,V=0,a(Y["$include?"]("<"))&&E(Y,"scan",[Z("CalloutScanRx")],function(){var J;return a(((J=Ge["~"])===C?C:J["$[]"](0))["$start_with?"]("\\"))||z.$callouts().$register(ve((J=Ge["~"])===C?C:J["$[]"](2),".")?(V=Ue(V,1)).$to_s():(J=Ge["~"])===C?C:J["$[]"](2)),R=!0}),R}),N(we,"$catalog_inline_anchor",function(Y,z,R,V,K){var J=this;return K==null&&(K=R.$document()),a(z)&&a(z["$include?"](Z("ATTR_REF_HEAD")))&&(z=K.$sub_attributes(z)),a(K.$register("refs",[Y,Z("Inline").$new(R,"anchor",z,k(["type","id"],{type:"ref",id:Y}))]))||(Me(Z("Reader"),V)&&(V=V.$cursor()),J.$logger().$warn(J.$message_with_context("id assigned to anchor already in use: "+Y,k(["source_location"],{source_location:V})))),C},-5),N(we,"$catalog_inline_anchors",function(Y,z,R,V){var K=this;return(a(Y["$include?"]("[["))||a(Y["$include?"]("or:")))&&E(Y,"scan",[Z("InlineAnchorScanRx")],function J(){var M,_=J.$$s==null?this:J.$$s,r=C,f=C,A=C,b=C;if(a(r=(M=Ge["~"])===C?C:M["$[]"](1))){if(a(f=(M=Ge["~"])===C?C:M["$[]"](2))&&a(f["$include?"](Z("ATTR_REF_HEAD")))&&a((f=R.$sub_attributes(f))["$empty?"]()))return C}else r=(M=Ge["~"])===C?C:M["$[]"](3),a(f=(M=Ge["~"])===C?C:M["$[]"](4))&&(a(f["$include?"]("]"))?(f=f.$gsub("\\]","]"),a(f["$include?"](Z("ATTR_REF_HEAD")))&&(f=R.$sub_attributes(f))):a(f["$include?"](Z("ATTR_REF_HEAD")))&&a((f=R.$sub_attributes(f))["$empty?"]())&&(f=C));return a(R.$register("refs",[r,Z("Inline").$new(z,"anchor",f,k(["type","id"],{type:"ref",id:r}))]))?C:(A=V.$cursor_at_mark(),a(Be(b=Ue(((M=Ge["~"])===C?C:M.$pre_match()).$count(Z("LF")),a(((M=Ge["~"])===C?C:M["$[]"](0))["$start_with?"](Z("LF")))?1:0),0))&&(A=A.$dup()).$advance(b),_.$logger().$warn(_.$message_with_context("id assigned to anchor already in use: "+r,k(["source_location"],{source_location:A}))))},{$$s:K}),C}),N(we,"$catalog_inline_biblio_anchor",function(Y,z,R,V){var K=this,J=C;return a(R.$document().$register("refs",[Y,Z("Inline").$new(R,"anchor",a(J=z)?"["+z+"]":J,k(["type","id"],{type:"bibref",id:Y}))]))||K.$logger().$warn(K.$message_with_context("id assigned to bibliography anchor already in use: "+Y,k(["source_location"],{source_location:V.$cursor()}))),C}),N(we,"$parse_description_list",function(Y,z,R){var V=this,K=C,J=C,M=C,_=C,r=C;for(Ge["~"]==null&&(Ge["~"]=C),K=Z("List").$new(R,"dlist"),J=Z("DescriptionListSiblingRx")["$[]"](z["$[]"](2)),K.$items()["$<<"](M=V.$parse_list_item(Y,K,z,J));a(a(_=Y["$has_more_lines?"]())?J["$=~"](Y.$peek_line()):_);)r=V.$parse_list_item(Y,K,Ge["~"],J),a(M["$[]"](1))?K.$items()["$<<"](M=r):(M["$[]"](0)["$<<"](r["$[]"](0)["$[]"](0)),M["$[]="](1,r["$[]"](1)));return K}),N(we,"$parse_callout_list",function(Y,z,R,V){var K=this,J=C,M=C,_=C,r=C,f=C,A=C,b=C,d=C;for(J=Z("List").$new(R,"colist"),M=1,_=0;a(a(r=z)?r:a(f=z=Z("CalloutListRx").$match(Y.$peek_line()))?Y.$mark():f);)ve(A=z["$[]"](1),".")&&(A=(_=Ue(_,1)).$to_s()),ve(A,M.$to_s())||K.$logger().$warn(K.$message_with_context("callout list item index: expected "+M+", got "+A,k(["source_location"],{source_location:Y.$cursor_at_mark()}))),a(b=K.$parse_list_item(Y,J,z,"<1>"))&&(J.$items()["$<<"](b),a((d=V.$callout_ids(J.$items().$size()))["$empty?"]())?K.$logger().$warn(K.$message_with_context("no callout found for <"+J.$items().$size()+">",k(["source_location"],{source_location:Y.$cursor_at_mark()}))):b.$attributes()["$[]="]("coids",d)),M=Ue(M,1),z=C;return V.$next_list(),J}),N(we,"$parse_list_item",function(Y,z,R,V,K){var J,M,_=this,r=C,f=C,A=C,b=C,d=C,B=C,D=C,Q=C,X=C,ce=C,Re=C,Ye=C,Qe=C,ot=C,tt=C,at=C,ct=C,ft=C,ut=C,pt=C;if(K==null&&(K=C),ve(r=z.$context(),"dlist"))f=!0,A=Z("ListItem").$new(z,b=R["$[]"](1)),a(b["$start_with?"]("[["))&&a(Z("LeadingInlineAnchorRx")["$=~"](b))&&_.$catalog_inline_anchor((J=Ge["~"])===C?C:J["$[]"](1),a(d=(J=Ge["~"])===C?C:J["$[]"](2))?d:((J=Ge["~"])===C?C:J.$post_match()).$lstrip(),A,Y),a(B=R["$[]"](3))&&(D=!0),Q=Z("ListItem").$new(z,B),a(z.$document().$sourcemap())&&(A["$source_location="](Y.$cursor()),a(D)?Q["$source_location="](A.$source_location()):X=!0);else switch(D=!0,Q=Z("ListItem").$new(z,B=R["$[]"](2)),a(z.$document().$sourcemap())&&Q["$source_location="](Y.$cursor()),r){case"ulist":Q["$marker="](V),a(B["$start_with?"]("["))&&(a(K)&&ve(K,"bibliography")?a(Z("InlineBiblioAnchorRx")["$=~"](B))&&_.$catalog_inline_biblio_anchor((J=Ge["~"])===C?C:J["$[]"](1),(J=Ge["~"])===C?C:J["$[]"](2),Q,Y):a(B["$start_with?"]("[["))?a(Z("LeadingInlineAnchorRx")["$=~"](B))&&_.$catalog_inline_anchor((J=Ge["~"])===C?C:J["$[]"](1),(J=Ge["~"])===C?C:J["$[]"](2),Q,Y):a(B["$start_with?"]("[ ] ","[x] ","[*] "))&&(z.$set_option("checklist"),Q.$attributes()["$[]="]("checkbox",""),a(B["$start_with?"]("[ "))||Q.$attributes()["$[]="]("checked",""),Q["$text="](B.$slice(4,B.$length()))));break;case"olist":M=_.$resolve_ordered_list_marker(V,ce=z.$items().$size(),!0,Y),J=pe(M),V=J[0]==null?C:J[0],Re=J[1]==null?C:J[1],Q["$marker="](V),ve(ce,0)&&w(K)&&z["$style="](a(Ye=Re)?Ye:(a(Qe=Z("ORDERED_LIST_STYLES")["$[]"](et(V.$length(),1)))?Qe:"arabic").$to_s()),a(B["$start_with?"]("[["))&&a(Z("LeadingInlineAnchorRx")["$=~"](B))&&_.$catalog_inline_anchor((J=Ge["~"])===C?C:J["$[]"](1),(J=Ge["~"])===C?C:J["$[]"](2),Q,Y);break;default:Q["$marker="](V),a(B["$start_with?"]("[["))&&a(Z("LeadingInlineAnchorRx")["$=~"](B))&&_.$catalog_inline_anchor((J=Ge["~"])===C?C:J["$[]"](1),(J=Ge["~"])===C?C:J["$[]"](2),Q,Y)}if(Y.$shift(),ot=Y.$cursor(),tt=Z("Reader").$new(_.$read_lines_for_list_item(Y,r,V,D),ot),a(tt["$has_more_lines?"]())){for(a(X)&&Q["$source_location="](ot),at=tt.$skip_line_comments(),a(ct=tt.$peek_line())&&(a(at["$empty?"]())||tt.$unshift_lines(at),a(ct["$empty?"]())||(ft=!0,a(f)||(D=C))),a(ut=_.$next_block(tt,Q,k([],{}),k(["text_only","list_type"],{text_only:a(D)?C:!0,list_type:r})))&&Q.$blocks()["$<<"](ut);a(tt["$has_more_lines?"]());)a(ut=_.$next_block(tt,Q,k([],{}),k(["list_type"],{list_type:r})))&&Q.$blocks()["$<<"](ut);a(ft)&&a(pt=Q.$blocks()["$[]"](0))&&ve(pt.$context(),"paragraph")&&Q.$fold_first()}return a(f)?[[A],a(Q["$text?"]())||a(Q["$blocks?"]())?Q:C]:Q},-5),N(we,"$read_lines_for_list_item",function(Y,z,R,V){var K,J=this,M=C,_=C,r=C,f=C,A=C,b=C,d=C,B=C,D=C,Q=C,X=C,ce=C,Re=C,Ye=C,Qe=C;for(R==null&&(R=C),V==null&&(V=!0),M=[],_="inactive",r=!1,f=C,A=z["$=="]("dlist");a(Y["$has_more_lines?"]())&&(b=Y.$read_line(),!a(J["$is_sibling_list_item?"](b,z,R)));){if(d=a(M["$empty?"]())?C:M["$[]"](-1),ve(d,Z("LIST_CONTINUATION"))&&(ve(_,"inactive")&&(_="active",V=!0,a(r)||M["$[]="](-1,"")),ve(b,Z("LIST_CONTINUATION")))){he(_,"frozen")&&(_="frozen",M["$<<"](b)),b=C;continue}if(a(B=J["$is_delimited_block?"](b,!0))){if(!ve(_,"active"))break;M["$<<"](b),M.$concat(Y.$read_lines_until(k(["terminator","read_last_line","context"],{terminator:B.$terminator(),read_last_line:!0,context:C}))),_="inactive"}else if(a(A)&&he(_,"active")&&a(b["$start_with?"]("["))&&a(Z("BlockAttributeLineRx")["$match?"](b))){for(D=[b];a(Q=Y.$peek_line());){if(a(J["$is_delimited_block?"](Q)))X=!0;else if(a(Q["$empty?"]())||a(Q["$start_with?"]("["))&&a(Z("BlockAttributeLineRx")["$match?"](Q))){D["$<<"](Y.$read_line());continue}else a(Z("AnyListRx")["$match?"](Q))&&w(J["$is_sibling_list_item?"](Q,z,R))?M.$concat(D):X=!0;break}if(a(X)){Y.$unshift_lines(D);break}}else if(ve(_,"active")&&w(b["$empty?"]()))a(Z("LiteralParagraphRx")["$match?"](b))?(Y.$unshift_line(b),a(A)?M.$concat(E(Y,"read_lines_until",[k(["preserve_last_line","break_on_blank_lines","break_on_list_continuation"],{preserve_last_line:!0,break_on_blank_lines:!0,break_on_list_continuation:!0})],function ot(tt){var at=ot.$$s==null?this:ot.$$s;return tt==null&&(tt=C),at["$is_sibling_list_item?"](tt,z,R)},{$$s:J})):M.$concat(Y.$read_lines_until(k(["preserve_last_line","break_on_blank_lines","break_on_list_continuation"],{preserve_last_line:!0,break_on_blank_lines:!0,break_on_list_continuation:!0}))),_="inactive"):ve(ce=b.$chr(),".")&&a(Z("BlockTitleRx")["$match?"](b))||ve(ce,"[")&&a(Z("BlockAttributeLineRx")["$match?"](b))||ve(ce,":")&&a(Z("AttributeEntryRx")["$match?"](b))?M["$<<"](b):(a(Re=E(a(r)?["dlist"]:Z("NESTABLE_LIST_CONTEXTS"),"find",[],function(tt){return tt==null&&(tt=C),Z("ListRxMap")["$[]"](tt)["$match?"](b)}))&&(r=!0,ve(Re,"dlist")&&a(((K=Ge["~"])===C?C:K["$[]"](3))["$nil_or_empty?"]())&&(V=!1)),M["$<<"](b),_="inactive");else if(a(d)&&a(d["$empty?"]())){if(a(b["$empty?"]())&&(!a(b=a(Ye=Y.$skip_blank_lines())?Y.$read_line():Ye)||a(J["$is_sibling_list_item?"](b,z,R))))break;if(ve(b,Z("LIST_CONTINUATION")))f=M.$size(),M["$<<"](b);else if(a(V)){if(a(J["$is_sibling_list_item?"](b,z,R)))break;if(a(Re=E(Z("NESTABLE_LIST_CONTEXTS"),"find",[],function(tt){return tt==null&&(tt=C),Z("ListRxMap")["$[]"](tt)["$=~"](b)})))M["$<<"](b),r=!0,ve(Re,"dlist")&&a(((K=Ge["~"])===C?C:K["$[]"](3))["$nil_or_empty?"]())&&(V=!1);else if(a(Z("LiteralParagraphRx")["$match?"](b)))Y.$unshift_line(b),a(A)?M.$concat(E(Y,"read_lines_until",[k(["preserve_last_line","break_on_blank_lines","break_on_list_continuation"],{preserve_last_line:!0,break_on_blank_lines:!0,break_on_list_continuation:!0})],function ot(tt){var at=ot.$$s==null?this:ot.$$s;return tt==null&&(tt=C),at["$is_sibling_list_item?"](tt,z,R)},{$$s:J})):M.$concat(Y.$read_lines_until(k(["preserve_last_line","break_on_blank_lines","break_on_list_continuation"],{preserve_last_line:!0,break_on_blank_lines:!0,break_on_list_continuation:!0})));else break}else a(r)||M.$pop(),M["$<<"](b),V=!0}else a(b["$empty?"]())||(V=!0),a(Re=E(a(r)?["dlist"]:Z("NESTABLE_LIST_CONTEXTS"),"find",[],function(tt){return tt==null&&(tt=C),Z("ListRxMap")["$[]"](tt)["$=~"](b)}))&&(r=!0,ve(Re,"dlist")&&a(((K=Ge["~"])===C?C:K["$[]"](3))["$nil_or_empty?"]())&&(V=!1)),M["$<<"](b);b=C}for(a(b)&&Y.$unshift_line(b),a(f)&&M["$[]="](f,"");!a(M["$empty?"]());)if(a((Qe=M["$[]"](-1))["$empty?"]()))M.$pop();else{ve(Qe,Z("LIST_CONTINUATION"))&&M.$pop();break}return M},-3),N(we,"$initialize_section",function(Y,z,R){var V,K,J=this,M=C,_=C,r=C,f=C,A=C,b=C,d=C,B=C,D=C,Q=C,X=C,ce=C,Re=C,Ye=C,Qe=C,ot=C,tt=C;return R==null&&(R=k([],{})),M=z.$document(),_=(r=M.$doctype())["$=="]("book"),a(M.$sourcemap())&&(f=Y.$cursor()),A=R["$[]"](1),K=J.$parse_section_title(Y,M,R["$[]"]("id")),V=pe(K),b=V[0]==null?C:V[0],d=V[1]==null?C:V[1],B=V[2]==null?C:V[2],D=V[3]==null?C:V[3],Q=V[4]==null?C:V[4],a(A)?a(_)&&ve(A,"abstract")?(V=["chapter",1],X=V[0],D=V[1]):a(A["$start_with?"]("sect"))&&a(Z("SectionLevelStyleRx")["$match?"](A))?X="section":(V=[A,!0],X=V[0],ce=V[1],ve(D,0)&&(D=1),Re=X["$=="]("appendix")):a(_)?X=ve(D,0)?"part":a(Be(D,1))?"section":"chapter":ve(r,"manpage")&&ve(B.$casecmp("synopsis"),0)?(V=["synopsis",!0],X=V[0],ce=V[1]):X="section",a(d)&&R["$[]="]("reftext",d),Ye=Z("Section").$new(z,D),V=[b,B,X,f],K=[V[0]],E(Ye,"id=",K),K[K.length-1],K=[V[1]],E(Ye,"title=",K),K[K.length-1],K=[V[2]],E(Ye,"sectname=",K),K[K.length-1],K=[V[3]],E(Ye,"source_location=",K),K[K.length-1],a(ce)?(Ye["$special="](!0),a(Re)?Ye["$numbered="](!0):ve(M.$attributes()["$[]"]("sectnums"),"all")&&Ye["$numbered="](a(_)&&ve(D,1)?"chapter":!0)):a(M.$attributes()["$[]"]("sectnums"))&&a(Be(D,0))?Ye["$numbered="](a(Ye.$special())?a(Qe=z.$numbered())||Qe:!0):a(_)&&ve(D,0)&&a(M.$attributes()["$[]"]("partnums"))&&Ye["$numbered="](!0),a(ot=a(Qe=Ye.$id())?Qe:(V=[a(M.$attributes()["$key?"]("sectids"))?tt=Z("Section").$generate_id(Ye.$title(),M):C],E(Ye,"id=",V),V[V.length-1]))&&(a(tt)||w(B["$include?"](Z("ATTR_REF_HEAD")))||Ye.$title(),a(M.$register("refs",[ot,Ye]))||J.$logger().$warn(J.$message_with_context("id assigned to section already in use: "+ot,k(["source_location"],{source_location:Y.$cursor_at_line(et(Y.$lineno(),a(Q)?1:2))})))),Ye.$update_attributes(R),Y.$skip_blank_lines(),Ye},-3),N(we,"$is_next_line_section?",function(Y,z){var R=this,V=C,K=C,J=C;return a(V=z["$[]"](1))&&(ve(V,"discrete")||ve(V,"float"))?C:a(Z("Compliance").$underline_style_section_titles())?(K=Y.$peek_lines(2,a(J=V)?V["$=="]("comment"):J),R["$is_section_title?"](a(J=K["$[]"](0))?J:"",K["$[]"](1))):R["$atx_section_title?"](a(J=Y.$peek_line())?J:"")}),N(we,"$is_next_line_doctitle?",function(Y,z,R){var V=this,K=C,J=C;return a(R)?a(K=J=V["$is_next_line_section?"](Y,z))?Ue(J,R.$to_i())["$=="](0):K:V["$is_next_line_section?"](Y,z)["$=="](0)}),N(we,"$is_section_title?",function(Y,z){var R=this,V=C;return z==null&&(z=C),a(V=R["$atx_section_title?"](Y))?V:a(z["$nil_or_empty?"]())?C:R["$setext_section_title?"](Y,z)},-2),N(we,"$atx_section_title?",function(Y){var z,R=C;return a(a(Z("Compliance").$markdown_syntax())?a(R=Y["$start_with?"]("=","#"))?Z("ExtAtxSectionTitleRx")["$=~"](Y):R:a(R=Y["$start_with?"]("="))?Z("AtxSectionTitleRx")["$=~"](Y):R)?et(((z=Ge["~"])===C?C:z["$[]"](1)).$length(),1):C}),N(we,"$setext_section_title?",function(Y,z){var R=this,V=C,K=C,J=C;return a(K=Z("SETEXT_SECTION_LEVELS")["$[]"](J=z.$chr()))&&a(R["$uniform?"](z,J,V=z.$length()))&&a(Z("SetextSectionTitleRx")["$match?"](Y))&&a(Ae(et(Y.$length(),V).$abs(),2))?K:C}),N(we,"$parse_section_title",function(Y,z,R){var V,K,J=this,M=C,_=C,r=C,f=C,A=C,b=C,d=C,B=C,D=C;return R==null&&(R=C),M=C,_=Y.$read_line(),a(a(Z("Compliance").$markdown_syntax())?a(r=_["$start_with?"]("=","#"))?Z("ExtAtxSectionTitleRx")["$=~"](_):r:a(r=_["$start_with?"]("="))?Z("AtxSectionTitleRx")["$=~"](_):r)?(V=[et(((K=Ge["~"])===C?C:K["$[]"](1)).$length(),1),(K=Ge["~"])===C?C:K["$[]"](2),!0],f=V[0],A=V[1],b=V[2],a(R)||a(A["$end_with?"]("]]"))&&a(Z("InlineSectionAnchorRx")["$=~"](A))&&w((V=Ge["~"])===C?C:V["$[]"](1))&&(V=[A.$slice(0,et(A.$length(),((K=Ge["~"])===C?C:K["$[]"](0)).$length())),(K=Ge["~"])===C?C:K["$[]"](2),(K=Ge["~"])===C?C:K["$[]"](3)],A=V[0],R=V[1],M=V[2])):a(Z("Compliance").$underline_style_section_titles())&&a(D=Y.$peek_line(!0))&&a(f=Z("SETEXT_SECTION_LEVELS")["$[]"](B=D.$chr()))&&a(J["$uniform?"](D,B,d=D.$length()))&&a(A=a(r=Z("SetextSectionTitleRx")["$=~"](_))?(V=Ge["~"])===C?C:V["$[]"](1):r)&&a(Ae(et(_.$length(),d).$abs(),2))?(b=!1,a(R)||a(A["$end_with?"]("]]"))&&a(Z("InlineSectionAnchorRx")["$=~"](A))&&w((V=Ge["~"])===C?C:V["$[]"](1))&&(V=[A.$slice(0,et(A.$length(),((K=Ge["~"])===C?C:K["$[]"](0)).$length())),(K=Ge["~"])===C?C:K["$[]"](2),(K=Ge["~"])===C?C:K["$[]"](3)],A=V[0],R=V[1],M=V[2]),Y.$shift()):J.$raise("Unrecognized section at "+Y.$cursor_at_prev_line()),a(z["$attr?"]("leveloffset"))&&(f=Ue(f,z.$attr("leveloffset").$to_i()),a(Ae(f,0))&&(f=0)),[R,M,A,f,b]},-3),N(we,"$parse_header_metadata",function(Y,z,R){var V,K=this,J=C,M=C,_=C,r=C,f=C,A=C,b=C,d=C,B=C,D=C,Q=C,X=C,ce=C,Re=C,Ye=C,Qe=C,ot=C,tt=C,at=C;if(z==null&&(z=C),R==null&&(R=!0),J=a(M=z)?z.$attributes():M,K.$process_attribute_entries(Y,z),a(Y["$has_more_lines?"]())&&w(Y["$next_line_empty?"]())?(_=(r=K.$process_authors(Y.$read_line())).$delete("authorcount"),a(z)&&a(Be((V=["authorcount",_],E(J,"[]=",V),V[V.length-1]),0))&&(E(r,"each",[],function(ft,ut){var pt;return ft==null&&(ft=C),ut==null&&(ut=C),a(J["$key?"](ft))?C:(pt=[ft,z.$apply_header_subs(ut)],E(J,"[]=",pt),pt[pt.length-1])}),f=J["$[]"]("author"),A=J["$[]"]("authorinitials"),b=J["$[]"]("authors")),r["$[]="]("authorcount",_),K.$process_attribute_entries(Y,z),a(Y["$has_more_lines?"]())&&w(Y["$next_line_empty?"]())&&(d=Y.$read_line(),a(B=Z("RevisionInfoLineRx").$match(d))?(D=k([],{}),a(B["$[]"](1))&&D["$[]="]("revnumber",B["$[]"](1).$rstrip()),a((Q=B["$[]"](2).$strip())["$empty?"]())||(w(B["$[]"](1))&&a(Q["$start_with?"]("v"))?D["$[]="]("revnumber",Q.$slice(1,Q.$length())):D["$[]="]("revdate",Q)),a(B["$[]"](3))&&D["$[]="]("revremark",B["$[]"](3).$rstrip()),a(z)&&w(D["$empty?"]())&&E(D,"each",[],function(ft,ut){var pt;return ft==null&&(ft=C),ut==null&&(ut=C),a(J["$key?"](ft))?C:(pt=[ft,z.$apply_header_subs(ut)],E(J,"[]=",pt),pt[pt.length-1])})):Y.$unshift_line(d)),K.$process_attribute_entries(Y,z),Y.$skip_blank_lines()):r=k([],{}),a(z)){if(a(J["$key?"]("author"))&&he(X=J["$[]"]("author"),f))ce=K.$process_authors(X,!0,!1),he(J["$[]"]("authorinitials"),A)&&ce.$delete("authorinitials");else if(a(J["$key?"]("authors"))&&he(X=J["$[]"]("authors"),b))ce=K.$process_authors(X,!0);else{for(V=[[],1,"author_1",!1,!1],Re=V[0],Ye=V[1],Qe=V[2],ot=V[3],tt=V[4];a(J["$key?"](Qe));)ve(at=J["$[]"](Qe),r["$[]"](Qe))?(Re["$<<"](C),tt=!0):(Re["$<<"](at),ot=!0),Qe="author_"+(Ye=Ue(Ye,1));a(ot)?(a(tt)&&E(Re,"each_with_index",[],function(ft,ut){var pt,ht=C;return ft==null&&(ft=C),ut==null&&(ut=C),a(ft)?C:(pt=[ut,E([r["$[]"]("firstname_"+(ht=Ue(ut,1))),r["$[]"]("middlename_"+ht),r["$[]"]("lastname_"+ht)].$compact(),"map",[],function(yt){return yt==null&&(yt=C),yt.$tr(" ","_")}).$join(" ")],E(Re,"[]=",pt),pt[pt.length-1])}),ce=K.$process_authors(Re,!0,!1)):ce=k(["authorcount"],{authorcount:0})}ve(ce["$[]"]("authorcount"),0)?a(_)?ce=C:J["$[]="]("authorcount",0):(J.$update(ce),w(J["$key?"]("email"))&&a(J["$key?"]("email_1"))&&J["$[]="]("email",J["$[]"]("email_1")))}return a(R)?r.$merge(D.$to_h(),ce.$to_h()):C},-2),N(we,"$process_authors",function(Y,z,R){var V=C,K=C;return z==null&&(z=!1),R==null&&(R=!0),V=k([],{}),K=0,E(a(R)&&a(Y["$include?"](";"))?Y.$split(Z("AuthorDelimiterRx")):[].concat(st(Y)),"each",[],function(M){var _,r=C,f=C,A=C,b=C,d=C,B=C,D=C;return M==null&&(M=C),a(M["$empty?"]())?C:(r=k([],{}),ve(K=Ue(K,1),1)?E(Z("AuthorKeys"),"each",[],function(X){var ce;return X==null&&(X=C),ce=[X.$to_sym(),X],E(r,"[]=",ce),ce[ce.length-1]}):E(Z("AuthorKeys"),"each",[],function(X){var ce;return X==null&&(X=C),ce=[X.$to_sym(),""+X+"_"+K],E(r,"[]=",ce),ce[ce.length-1]}),a(z)?(a(M["$include?"]("<"))&&(V["$[]="](r["$[]"]("author"),M.$tr("_"," ")),M=M.$gsub(Z("XmlSanitizeRx"),"")),ve((f=M.$split(C,3)).$size(),3)&&f["$<<"](f.$pop().$squeeze(" "))):a(A=Z("AuthorInfoLineRx").$match(M))&&(f=A.$to_a()).$shift(),a(f)?(b=(_=[r["$[]"]("firstname"),d=f["$[]"](0).$tr("_"," ")],E(V,"[]=",_),_[_.length-1]),V["$[]="](r["$[]"]("authorinitials"),d.$chr()),a(f["$[]"](1))&&(a(f["$[]"](2))?(V["$[]="](r["$[]"]("middlename"),B=f["$[]"](1).$tr("_"," ")),V["$[]="](r["$[]"]("lastname"),D=f["$[]"](2).$tr("_"," ")),b=Ue(Ue(Ue(Ue(d," "),B)," "),D),V["$[]="](r["$[]"]("authorinitials"),""+d.$chr()+B.$chr()+D.$chr())):(V["$[]="](r["$[]"]("lastname"),D=f["$[]"](1).$tr("_"," ")),b=Ue(Ue(d," "),D),V["$[]="](r["$[]"]("authorinitials"),""+d.$chr()+D.$chr()))),a(V["$[]"](r["$[]"]("author")))||V["$[]="](r["$[]"]("author"),b),a(z)||w(f["$[]"](3))||V["$[]="](r["$[]"]("email"),f["$[]"](3))):(V["$[]="](r["$[]"]("author"),(_=[r["$[]"]("firstname"),d=M.$squeeze(" ").$strip()],E(V,"[]=",_),_[_.length-1])),V["$[]="](r["$[]"]("authorinitials"),d.$chr())),ve(K,1)?(_=["authors",V["$[]"](r["$[]"]("author"))],E(V,"[]=",_),_[_.length-1]):(ve(K,2)&&E(Z("AuthorKeys"),"each",[],function(X){var ce;return X==null&&(X=C),a(V["$key?"](X))?(ce=[""+X+"_1",V["$[]"](X)],E(V,"[]=",ce),ce[ce.length-1]):C}),_=["authors",""+V["$[]"]("authors")+", "+V["$[]"](r["$[]"]("author"))],E(V,"[]=",_),_[_.length-1]))}),V["$[]="]("authorcount",K),V},-2),N(we,"$parse_block_metadata_lines",function(Y,z,R,V){var K=this;for(R==null&&(R=k([],{})),V==null&&(V=k([],{}));a(K.$parse_block_metadata_line(Y,z,R,V))&&(Y.$shift(),!!a(Y.$skip_blank_lines())););return R},-3),N(we,"$parse_block_metadata_line",function(Y,z,R,V){var K,J=this,M=C,_=C,r=C,f=C,A=C,b=C;if(Ge["~"]==null&&(Ge["~"]=C),V==null&&(V=k([],{})),a(_=Y.$peek_line())&&a(a(V["$[]"]("text_only"))?_["$start_with?"]("[","/"):M=_["$start_with?"]("[",".","/",":"))){if(a(_["$start_with?"]("["))){if(a(_["$start_with?"]("[["))){if(a(_["$end_with?"]("]]"))&&a(Z("BlockAnchorRx")["$=~"](_)))return R["$[]="]("id",(K=Ge["~"])===C?C:K["$[]"](1)),a(r=(K=Ge["~"])===C?C:K["$[]"](2))&&R["$[]="]("reftext",a(r["$include?"](Z("ATTR_REF_HEAD")))?z.$sub_attributes(r):r),!0}else if(a(_["$end_with?"]("]"))&&a(Z("BlockAttributeListRx")["$=~"](_)))return f=R["$[]"](1),a(z.$parse_attributes((K=Ge["~"])===C?C:K["$[]"](1),[],k(["sub_input","sub_result","into"],{sub_input:!0,sub_result:!0,into:R}))["$[]"](1))&&R["$[]="](1,a(A=J.$parse_style_attribute(R,Y))?A:f),!0}else if(a(M)&&a(_["$start_with?"]("."))){if(a(Z("BlockTitleRx")["$=~"](_)))return R["$[]="]("title",(K=Ge["~"])===C?C:K["$[]"](1)),!0}else if(w(M)||a(_["$start_with?"]("/"))){if(a(_["$start_with?"]("//"))){if(ve(_,"//"))return!0;if(a(M)&&a(J["$uniform?"](_,"/",b=_.$length()))){if(!ve(b,3))return Y.$read_lines_until(k(["terminator","skip_first_line","preserve_last_line","skip_processing","context"],{terminator:_,skip_first_line:!0,preserve_last_line:!0,skip_processing:!0,context:"comment"})),!0}else if(!a(_["$start_with?"]("///")))return!0}}else if(a(M)&&a(_["$start_with?"](":"))&&a(Z("AttributeEntryRx")["$=~"](_)))return J.$process_attribute_entry(Y,z,R,Ge["~"]),!0}return C},-4),N(we,"$process_attribute_entries",function(Y,z,R){var V=this;for(R==null&&(R=C),Y.$skip_comment_lines();a(V.$process_attribute_entry(Y,z,R));)Y.$shift(),Y.$skip_comment_lines()},-3),N(we,"$process_attribute_entry",function(Y,z,R,V){var K,J=this,M=C,_=C,r=C,f=C,A=C,b=C;if(R==null&&(R=C),V==null&&(V=C),a(V)||a(V=a(Y["$has_more_lines?"]())?Z("AttributeEntryRx").$match(Y.$peek_line()):C)){if(a((M=V["$[]"](2))["$nil_or_empty?"]()))M="";else if(a(M["$end_with?"](Z("LINE_CONTINUATION"),Z("LINE_CONTINUATION_LEGACY"))))for(K=[M.$slice(et(M.$length(),2),2),M.$slice(0,et(M.$length(),2)).$rstrip()],_=K[0],M=K[1];a(a(r=Y.$advance())?(f=a(A=Y.$peek_line())?A:"")["$empty?"]()["$!"]():r)&&(f=f.$lstrip(),a(b=f["$end_with?"](_))&&(f=f.$slice(0,et(f.$length(),2)).$rstrip()),M=""+M+(a(M["$end_with?"](Z("HARD_LINE_BREAK")))?Z("LF"):" ")+f,!!a(b)););return J.$store_attribute(V["$[]"](1),M,z,R),!0}else return C},-3),N(we,"$store_attribute",function(Y,z,R,V){var K=this,J=C;return R==null&&(R=C),V==null&&(V=C),a(Y["$end_with?"]("!"))?(Y=Y.$chop(),z=C):a(Y["$start_with?"]("!"))&&(Y=Y.$slice(1,Y.$length()),z=C),ve(Y=K.$sanitize_attribute_name(Y),"numbered")?Y="sectnums":ve(Y,"hardbreaks")?Y="hardbreaks-option":ve(Y,"showtitle")&&K.$store_attribute("notitle",a(z)?C:"",R,V),a(R)?a(z)?(ve(Y,"leveloffset")&&(a(z["$start_with?"]("+"))?z=Ue(R.$attr("leveloffset",0).$to_i(),z.$slice(1,z.$length()).$to_i()).$to_s():a(z["$start_with?"]("-"))&&(z=et(R.$attr("leveloffset",0).$to_i(),z.$slice(1,z.$length()).$to_i()).$to_s())),a(J=R.$set_attribute(Y,z))&&(z=J,a(V)&&Xe(Z("Document"),"AttributeEntry").$new(Y,z).$save_to(V))):a(R.$delete_attribute(Y))&&a(V)&&Xe(Z("Document"),"AttributeEntry").$new(Y,z).$save_to(V):a(V)&&Xe(Z("Document"),"AttributeEntry").$new(Y,z).$save_to(V),[Y,z]},-3),N(we,"$resolve_list_marker",function(Y,z,R,V,K){var J=this;switch(R==null&&(R=0),V==null&&(V=!1),K==null&&(K=C),Y){case"ulist":return z;case"olist":return J.$resolve_ordered_list_marker(z,R,V,K)["$[]"](0);default:return"<1>"}},-3),N(we,"$resolve_ordered_list_marker",function(Y,z,R,V){var K=this,J=C,M=C,_=C;if(z==null&&(z=0),R==null&&(R=!1),V==null&&(V=C),a(Y["$start_with?"](".")))return[Y];switch(J=E(Z("ORDERED_LIST_STYLES"),"find",[],function(f){return f==null&&(f=C),Z("OrderedListMarkerRxMap")["$[]"](f)["$match?"](Y)})){case"arabic":a(R)&&(M=Ue(z,1),_=Y.$to_i()),Y="1.";break;case"loweralpha":a(R)&&(M=Ue("a"["$[]"](0).$ord(),z).$chr(),_=Y.$chop()),Y="a.";break;case"upperalpha":a(R)&&(M=Ue("A"["$[]"](0).$ord(),z).$chr(),_=Y.$chop()),Y="A.";break;case"lowerroman":a(R)&&(M=Z("Helpers").$int_to_roman(Ue(z,1)).$downcase(),_=Y.$chop()),Y="i)";break;case"upperroman":a(R)&&(M=Z("Helpers").$int_to_roman(Ue(z,1)),_=Y.$chop()),Y="I)";break}return a(R)&&he(M,_)&&K.$logger().$warn(K.$message_with_context("list item index: expected "+M+", got "+_,k(["source_location"],{source_location:V.$cursor()}))),[Y,J]},-2),N(we,"$is_sibling_list_item?",function(Y,z,R){var V,K=this,J=C;return Me(Xe("Regexp"),R)?R["$match?"](Y):a(J=Z("ListRxMap")["$[]"](z)["$=~"](Y))?R["$=="](K.$resolve_list_marker(z,(V=Ge["~"])===C?C:V["$[]"](1))):J}),N(we,"$parse_table",function(Y,z,R){var V,K,J,M=this,_=C,r=C,f=C,A=C,b=C,d=C,B=C,D=C,Q=C,X=C,ce=C,Re=C,Ye=C,Qe=C,ot=C,tt=C,at=C,ct=C;for(_=Z("Table").$new(z,R),a(R["$key?"]("cols"))&&w((r=M.$parse_colspecs(R["$[]"]("cols")))["$empty?"]())&&(_.$create_columns(r),f=!0),A=a(b=Y.$skip_blank_lines())?b:0,a(R["$[]"]("header-option"))?_["$has_header_option="](!0):ve(A,0)&&w(R["$[]"]("noheader-option"))&&(_["$has_header_option="]("implicit"),d=!0),B=Xe(Z("Table"),"ParserContext").$new(Y,_,R),V=[B.$format(),-1,C],D=V[0],Q=V[1],X=V[2];a(ce=Y.$read_line());){for(a(Re=Be(Q=Ue(Q,1),0))&&a(ce["$empty?"]())?(ce=C,a(X)&&(X=Ue(X,1))):ve(D,"psv")&&(a(B["$starts_with_delimiter?"](ce))?(ce=ce.$slice(1,ce.$length()),B.$close_open_cell(),a(X)&&(X=C)):(K=M.$parse_cellspec(ce,"start",B.$delimiter()),V=pe(K),Ye=V[0]==null?C:V[0],ce=V[1]==null?C:V[1],a(Ye)?(B.$close_open_cell(Ye),a(X)&&(X=C)):a(X)&&ve(X,Q)&&_["$has_header_option="](d=X=C))),a(Re)||(Y.$mark(),a(d)&&(a(Y["$has_more_lines?"]())&&a(Y.$peek_line()["$empty?"]())?X=1:_["$has_header_option="](d=C))),V=!1;V||a(!0);)if(V=!1,a(ce)&&a(Qe=B.$match_delimiter(ce))){if(K=[Qe.$pre_match(),Qe.$post_match()],ot=K[0],tt=K[1],Me("csv",b=D)){if(a(B["$buffer_has_unclosed_quotes?"](ot))){if(B.$skip_past_delimiter(ot),a((ce=tt)["$empty?"]()))break;V=!0;continue}B["$buffer="](""+B.$buffer()+ot)}else if(Me("dsv",b)){if(a(ot["$end_with?"]("\\"))){if(B.$skip_past_escaped_delimiter(ot),a((ce=tt)["$empty?"]())){B["$buffer="](""+B.$buffer()+Z("LF")),B.$keep_cell_open();break}V=!0;continue}B["$buffer="](""+B.$buffer()+ot)}else{if(a(ot["$end_with?"]("\\"))){if(B.$skip_past_escaped_delimiter(ot),a((ce=tt)["$empty?"]())){B["$buffer="](""+B.$buffer()+Z("LF")),B.$keep_cell_open();break}V=!0;continue}J=M.$parse_cellspec(ot),K=pe(J),Ye=K[0]==null?C:K[0],at=K[1]==null?C:K[1],B.$push_cellspec(Ye),B["$buffer="](""+B.$buffer()+at)}a((ce=tt)["$empty?"]())&&(ce=C),B.$close_cell()}else{switch(B["$buffer="](""+B.$buffer()+ce+Z("LF")),D){case"csv":a(B["$buffer_has_unclosed_quotes?"]())?(a(X)&&ve(Q,0)&&_["$has_header_option="](d=X=C),B.$keep_cell_open()):B.$close_cell(!0);break;case"dsv":B.$close_cell(!0);break;default:B.$keep_cell_open()}break}if(a(B["$cell_open?"]()))a(Y["$has_more_lines?"]())||B.$close_cell(!0);else if(!a(b=Y.$skip_blank_lines()))break}return ve((ct=_.$attributes(),a(b=ct["$[]"]("colcount"))?b:(V=["colcount",_.$columns().$size()],E(ct,"[]=",V),V[V.length-1])),0)||a(f)||_.$assign_column_widths(),a(d)&&_["$has_header_option="](!0),_.$partition_header_footer(R),_}),N(we,"$parse_colspecs",function(Y){var z=C;return a(Y["$include?"](" "))&&(Y=Y.$delete(" ")),ve(Y,Y.$to_i().$to_s())?E(Xe("Array"),"new",[Y.$to_i()],function(){return k(["width"],{width:1})}):(z=[],E(a(Y["$include?"](","))?Y.$split(",",-1):Y.$split(";",-1),"each",[],function(V){var K,J,M=C,_=C,r=C,f=C,A=C;return V==null&&(V=C),a(V["$empty?"]())?z["$<<"](k(["width"],{width:1})):a(M=Z("ColumnSpecRx").$match(V))?(_=k([],{}),a(M["$[]"](2))&&(J=M["$[]"](2).$split("."),K=pe(J),r=K[0]==null?C:K[0],f=K[1]==null?C:K[1],w(r["$nil_or_empty?"]())&&a(Z("TableCellHorzAlignments")["$key?"](r))&&_["$[]="]("halign",Z("TableCellHorzAlignments")["$[]"](r)),w(f["$nil_or_empty?"]())&&a(Z("TableCellVertAlignments")["$key?"](f))&&_["$[]="]("valign",Z("TableCellVertAlignments")["$[]"](f))),a(A=M["$[]"](3))?_["$[]="]("width",ve(A,"~")?-1:A.$to_i()):_["$[]="]("width",1),a(M["$[]"](4))&&a(Z("TableCellStyles")["$key?"](M["$[]"](4)))&&_["$[]="]("style",Z("TableCellStyles")["$[]"](M["$[]"](4))),a(M["$[]"](1))?E(1,"upto",[M["$[]"](1).$to_i()],function(){return z["$<<"](_.$merge())}):z["$<<"](_)):C}),z)}),N(we,"$parse_cellspec",function(Y,z,R){var V,K,J=C,M=C,_=C,r=C,f=C,A=C;if(z==null&&(z="end"),R==null&&(R=C),V=[C,""],J=V[0],M=V[1],ve(z,"start"))if(a(Y["$include?"](R)))if(K=Y.$partition(R),V=pe(K),_=V[0]==null?C:V[0],V[1]==null||V[1],M=V[2]==null?C:V[2],a(J=Z("CellSpecStartRx").$match(_))){if(a(J["$[]"](0)["$empty?"]()))return[k([],{}),M]}else return[C,Y];else return[C,Y];else if(a(J=Z("CellSpecEndRx").$match(Y))){if(a(J["$[]"](0).$lstrip()["$empty?"]()))return[k([],{}),Y.$rstrip()];M=J.$pre_match()}else return[k([],{}),Y];if(r=k([],{}),a(J["$[]"](1)))switch(K=J["$[]"](1).$split("."),V=pe(K),f=V[0]==null?C:V[0],A=V[1]==null?C:V[1],f=a(f["$nil_or_empty?"]())?1:f.$to_i(),A=a(A["$nil_or_empty?"]())?1:A.$to_i(),J["$[]"](2)){case"+":ve(f,1)||r["$[]="]("colspan",f),ve(A,1)||r["$[]="]("rowspan",A);break;case"*":ve(f,1)||r["$[]="]("repeatcol",f);break}return a(J["$[]"](3))&&(K=J["$[]"](3).$split("."),V=pe(K),f=V[0]==null?C:V[0],A=V[1]==null?C:V[1],w(f["$nil_or_empty?"]())&&a(Z("TableCellHorzAlignments")["$key?"](f))&&r["$[]="]("halign",Z("TableCellHorzAlignments")["$[]"](f)),w(A["$nil_or_empty?"]())&&a(Z("TableCellVertAlignments")["$key?"](A))&&r["$[]="]("valign",Z("TableCellVertAlignments")["$[]"](A))),a(J["$[]"](4))&&a(Z("TableCellStyles")["$key?"](J["$[]"](4)))&&r["$[]="]("style",Z("TableCellStyles")["$[]"](J["$[]"](4))),[r,M]},-2),N(we,"$parse_style_attribute",function(Y,z){var R,V=this,K=C,J=C,M=C,_=C,r=C,f=C;return z==null&&(z=C),a(K=Y["$[]"](1))&&w(K["$include?"](" "))&&a(Z("Compliance").$shorthand_property_syntax())?(J=C,M="",_=k([],{}),E(K,"each_char",[],function A(b){var d=A.$$s==null?this:A.$$s;switch(b==null&&(b=C),b){case".":return d.$yield_buffered_attribute(_,J,M,z),M="",J="role";case"#":return d.$yield_buffered_attribute(_,J,M,z),M="",J="id";case"%":return d.$yield_buffered_attribute(_,J,M,z),M="",J="option";default:return M=Ue(M,b)}},{$$s:V}),a(J)?(V.$yield_buffered_attribute(_,J,M,z),a(r=_["$[]"]("style"))&&Y["$[]="]("style",r),a(_["$key?"]("id"))&&Y["$[]="]("id",_["$[]"]("id")),a(_["$key?"]("role"))&&Y["$[]="]("role",a((f=Y["$[]"]("role"))["$nil_or_empty?"]())?_["$[]"]("role").$join(" "):""+f+" "+_["$[]"]("role").$join(" ")),a(_["$key?"]("option"))&&E(_["$[]"]("option"),"each",[],function(b){var d;return b==null&&(b=C),d=[""+b+"-option",""],E(Y,"[]=",d),d[d.length-1]}),r):(R=["style",K],E(Y,"[]=",R),R[R.length-1])):(R=["style",K],E(Y,"[]=",R),R[R.length-1])},-2),N(we,"$yield_buffered_attribute",function(Y,z,R,V){var K,J=this,M=C;return a(z)?a(R["$empty?"]())?a(V)?J.$logger().$warn(J.$message_with_context("invalid empty "+z+" detected in style attribute",k(["source_location"],{source_location:V.$cursor_at_prev_line()}))):J.$logger().$warn("invalid empty "+z+" detected in style attribute"):ve(z,"id")?(a(Y["$key?"]("id"))&&(a(V)?J.$logger().$warn(J.$message_with_context("multiple ids detected in style attribute",k(["source_location"],{source_location:V.$cursor_at_prev_line()}))):J.$logger().$warn("multiple ids detected in style attribute")),Y["$[]="](z,R)):(a(M=Y["$[]"](z))?M:(K=[z,[]],E(Y,"[]=",K),K[K.length-1]))["$<<"](R):a(R["$empty?"]())||Y["$[]="]("style",R),C}),N(we,"$adjust_indentation!",function(Y,z,R){var V=C,K=C,J=C;return z==null&&(z=0),R==null&&(R=0),a(Y["$empty?"]())||(a(Be(R,0))&&a(E(Y,"any?",[],function(_){return _==null&&(_=C),_["$include?"](Z("TAB"))}))&&(V=Pe(" ",R),E(Y,"map!",[],function(_){var r=C,f=C,A=C,b=C,d=C;return _==null&&(_=C),a(_["$empty?"]())||a((r=_.$index(Z("TAB")))["$nil?"]())||ve(r,0)&&(f=0,function(){try{var B=Ve("break");return E(_,"each_byte",[],function(Q){return Q==null&&(Q=C),ve(Q,9)||B.$throw(),f=Ue(f,1)})}catch(D){if(D===B)return D.$v;throw D}}(),_=""+Pe(V,f)+_.$slice(f,_.$length()),!a(_["$include?"](Z("TAB"))))?_:(A=0,b=0,d="",E(_,"each_char",[],function(D){var Q=C,X=C;return D==null&&(D=C),ve(D,Z("TAB"))?ve((Q=Ue(b,A))["$%"](R),0)?(A=Ue(A,et(R,1)),d=Ue(d,V)):(ve(X=et(R,Q["$%"](R)),1)||(A=Ue(A,et(X,1))),d=Ue(d,Pe(" ",X))):d=Ue(d,D),b=Ue(b,1)}),d)})),a(Ae(z,0)))||(K=C,function(){try{var M=Ve("break");return E(Y,"each",[],function(r){var f=C;return r==null&&(r=C),a(r["$empty?"]())||(ve(f=et(r.$length(),r.$lstrip().$length()),0)&&(K=C,M.$throw()),a(K)&&a(Ae(K,f)))?C:K=f})}catch(_){if(_===M)return _.$v;throw _}}(),ve(z,0)?a(K)&&E(Y,"map!",[],function(_){return _==null&&(_=C),a(_["$empty?"]())?_:_.$slice(K,_.$length())}):(J=Pe(" ",z),a(K)?E(Y,"map!",[],function(_){return _==null&&(_=C),a(_["$empty?"]())?_:Ue(J,_.$slice(K,_.$length()))}):E(Y,"map!",[],function(_){return _==null&&(_=C),a(_["$empty?"]())?_:Ue(J,_)}))),C},-2),N(we,"$uniform?",function(Y,z,R){return Y.$count(z)["$=="](R)}),N(we,"$sanitize_attribute_name",function(Y){return Y.$gsub(Z("InvalidAttributeNameCharsRx"),"").$downcase()})}(H[0],null,H)}(it[0],it)},Opal.modules["asciidoctor/path_resolver"]=function(t){var g=t.module,u=t.klass,$=t.const_set,E=t.truthy,a=t.hash2,k=t.def,pe=t.eqeq,N=t.alias,ve=t.rb_plus,w=t.to_ary,Ge=t.send,he=t.not,Ue=t.neqeq,Ae=t.rb_gt,Be=t.gvars,st=[],Me=t.nil,et=t.$$$;return t.add_stubs("include,attr_accessor,root?,posixify,expand_path,pwd,start_with?,==,match?,absolute_path?,+,length,descends_from?,slice,to_s,relative_path_from,new,include?,tr,partition_path,each,pop,<<,join_path,[],web_root?,unc?,index,split,delete,[]=,join,raise,!,fetch,warn,logger,empty?,nil_or_empty?,chomp,!=,>,size,extract_uri_prefix,end_with?,gsub,private,=~"),function(Pe,Ve){var it=g(Pe,"Asciidoctor"),C=[it].concat(Ve);return function(Xe,y,Ze){var rt=u(Xe,y,"PathResolver"),H=[rt].concat(Ze),T=t.$r(H),De=rt.$$prototype;return De.file_separator=De._partition_path_web=De._partition_path_sys=De.working_dir=Me,rt.$include(T("Logging")),$(H[0],"DOT","."),$(H[0],"DOT_DOT",".."),$(H[0],"DOT_SLASH","./"),$(H[0],"SLASH","/"),$(H[0],"BACKSLASH","\\"),$(H[0],"DOUBLE_SLASH","//"),$(H[0],"URI_CLASSLOADER","uri:classloader:"),$(H[0],"WindowsRootRx",/^(?:[a-zA-Z]:)?[\\\/]/),rt.$attr_accessor("file_separator"),rt.$attr_accessor("working_dir"),k(rt,"$initialize",function(we,ge){var Z=this,$e=Me,Y=Me;return we==null&&(we=Me),ge==null&&(ge=Me),Z.file_separator=E($e=E(Y=we)?Y:et(et("File"),"ALT_SEPARATOR"))?$e:et(et("File"),"SEPARATOR"),Z.working_dir=E(ge)?E(Z["$root?"](ge))?Z.$posixify(ge):et("File").$expand_path(ge):et("Dir").$pwd(),Z._partition_path_sys=a([],{}),Z._partition_path_web=a([],{})},-1),k(rt,"$absolute_path?",function(we){var ge=this,Z=Me,$e=Me;return E(Z=we["$start_with?"](T("SLASH")))?Z:E($e=ge.file_separator["$=="](T("BACKSLASH")))?T("WindowsRootRx")["$match?"](we):$e}),pe(T("RUBY_ENGINE"),"opal")&&pe(et("JAVASCRIPT_IO_MODULE"),"xmlhttprequest")?k(rt,"$root?",function(we){var ge=this,Z=Me;return E(Z=ge["$absolute_path?"](we))?Z:we["$start_with?"]("file://","http://","https://")}):pe(et("RUBY_ENGINE"),"jruby")?k(rt,"$root?",function(we){var ge=this,Z=Me;return E(Z=ge["$absolute_path?"](we))?Z:we["$start_with?"](T("URI_CLASSLOADER"))}):N(rt,"root?","absolute_path?"),k(rt,"$unc?",function(we){return we["$start_with?"](T("DOUBLE_SLASH"))}),k(rt,"$web_root?",function(we){return we["$start_with?"](T("SLASH"))}),k(rt,"$descends_from?",function(we,ge){var Z=Me;return pe(ge,we)?0:pe(ge,T("SLASH"))?E(Z=we["$start_with?"](T("SLASH")))?1:Z:E(Z=we["$start_with?"](ve(ge,T("SLASH"))))?ve(ge.$length(),1):Z}),k(rt,"$relative_path",function(we,ge){var Z=this,$e=Me;if(E(Z["$root?"](we))){if(E($e=Z["$descends_from?"](we,ge)))return we.$slice($e,we.$length());try{return T("Pathname").$new(we).$relative_path_from(T("Pathname").$new(ge)).$to_s()}catch(Y){if(t.rescue(Y,[T("StandardError")]))try{return we}finally{t.pop_exception()}else throw Y}}else return we}),k(rt,"$posixify",function(we){var ge=this;return E(we)?pe(ge.file_separator,T("BACKSLASH"))&&E(we["$include?"](T("BACKSLASH")))?we.$tr(T("BACKSLASH"),T("SLASH")):we:""}),N(rt,"posixfy","posixify"),k(rt,"$expand_path",function(we){var ge,Z,$e=this,Y=Me,z=Me,R=Me;return Z=$e.$partition_path(we),ge=w(Z),Y=ge[0]==null?Me:ge[0],z=ge[1]==null?Me:ge[1],E(we["$include?"](T("DOT_DOT")))?(R=[],Ge(Y,"each",[],function(K){return K==null&&(K=Me),pe(K,T("DOT_DOT"))?R.$pop():R["$<<"](K)}),$e.$join_path(R,z)):$e.$join_path(Y,z)}),k(rt,"$partition_path",function(we,ge){var Z,$e=this,Y=Me,z=Me,R=Me,V=Me,K=Me;return ge==null&&(ge=Me),E(Y=(z=E(ge)?$e._partition_path_web:$e._partition_path_sys)["$[]"](we))?Y:(R=$e.$posixify(we),E(ge)?E($e["$web_root?"](R))?V=T("SLASH"):E(R["$start_with?"](T("DOT_SLASH")))&&(V=T("DOT_SLASH")):E($e["$root?"](R))?E($e["$unc?"](R))?V=T("DOUBLE_SLASH"):E(R["$start_with?"](T("SLASH")))?V=T("SLASH"):E(R["$start_with?"](T("URI_CLASSLOADER")))?V=R.$slice(0,T("URI_CLASSLOADER").$length()):V=R.$slice(0,ve(R.$index(T("SLASH")),1)):E(R["$start_with?"](T("DOT_SLASH")))&&(V=T("DOT_SLASH")),K=(E(V)?R.$slice(V.$length(),R.$length()):R).$split(T("SLASH")),K.$delete(T("DOT")),Z=[we,[K,V]],Ge(z,"[]=",Z),Z[Z.length-1])},-2),k(rt,"$join_path",function(we,ge){return ge==null&&(ge=Me),E(ge)?""+ge+we.$join(T("SLASH")):we.$join(T("SLASH"))},-2),k(rt,"$system_path",function(we,ge,Z,$e){var Y,z,R=this,V=Me,K=Me,J=Me,M=Me,_=Me,r=Me,f=Me,A=Me,b=Me,d=Me,B=Me;if(ge==null&&(ge=Me),Z==null&&(Z=Me),$e==null&&($e=a([],{})),E(Z)&&(E(R["$root?"](Z))||R.$raise(et("SecurityError"),"Jail is not an absolute path: "+Z),Z=R.$posixify(Z)),E(we))if(E(R["$root?"](we))){if(V=R.$expand_path(we),E(Z)&&he(R["$descends_from?"](V,Z))){if(E($e.$fetch("recover",!0)))return R.$logger().$warn(""+(E(K=$e["$[]"]("target_name"))?K:"path")+" is outside of jail; recovering automatically"),z=R.$partition_path(V),Y=w(z),J=Y[0]==null?Me:Y[0],z=R.$partition_path(Z),Y=w(z),M=Y[0]==null?Me:Y[0],_=Y[1]==null?Me:Y[1],R.$join_path(ve(M,J),_);R.$raise(et("SecurityError"),""+(E(K=$e["$[]"]("target_name"))?K:"path")+" "+we+" is outside of jail: "+Z+" (disallowed in safe mode)")}return V}else z=R.$partition_path(we),Y=w(z),J=Y[0]==null?Me:Y[0];else J=[];if(E(J["$empty?"]())){if(E(ge["$nil_or_empty?"]()))return E(K=Z)?K:R.working_dir;if(E(R["$root?"](ge)))if(E(Z))ge=R.$posixify(ge);else return R.$expand_path(ge);else z=R.$partition_path(ge),Y=w(z),J=Y[0]==null?Me:Y[0],ge=E(K=Z)?K:R.working_dir}else E(ge["$nil_or_empty?"]())?ge=E(K=Z)?K:R.working_dir:E(R["$root?"](ge))?E(Z)&&(ge=R.$posixify(ge)):ge=""+(E(K=Z)?K:R.working_dir).$chomp("/")+"/"+ge;return E(Z)&&E(r=R["$descends_from?"](ge,Z)["$!"]())&&pe(R.file_separator,T("BACKSLASH"))?(z=R.$partition_path(ge),Y=w(z),f=Y[0]==null?Me:Y[0],A=Y[1]==null?Me:Y[1],z=R.$partition_path(Z),Y=w(z),M=Y[0]==null?Me:Y[0],_=Y[1]==null?Me:Y[1],Ue(A,_)&&(E($e.$fetch("recover",!0))?(R.$logger().$warn("start path for "+(E(K=$e["$[]"]("target_name"))?K:"path")+" is outside of jail root; recovering automatically"),f=M,r=!1):R.$raise(et("SecurityError"),"start path for "+(E(K=$e["$[]"]("target_name"))?K:"path")+" "+ge+" refers to location outside jail root: "+Z+" (disallowed in safe mode)"))):(z=R.$partition_path(ge),Y=w(z),f=Y[0]==null?Me:Y[0],_=Y[1]==null?Me:Y[1]),E((b=ve(f,J))["$include?"](T("DOT_DOT")))&&(Y=[b,[]],d=Y[0],b=Y[1],E(Z)?(E(M)||(z=R.$partition_path(Z),Y=w(z),M=Y[0]==null?Me:Y[0]),B=!1,Ge(d,"each",[],function D(Q){var X=D.$$s==null?this:D.$$s;return Q==null&&(Q=Me),pe(Q,T("DOT_DOT"))?E(Ae(b.$size(),M.$size()))?b.$pop():E($e.$fetch("recover",!0))?E(B)?Me:(X.$logger().$warn(""+(E(K=$e["$[]"]("target_name"))?K:"path")+" has illegal reference to ancestor of jail; recovering automatically"),B=!0):X.$raise(et("SecurityError"),""+(E(K=$e["$[]"]("target_name"))?K:"path")+" "+we+" refers to location outside jail: "+Z+" (disallowed in safe mode)"):b["$<<"](Q)},{$$s:R})):Ge(d,"each",[],function(Q){return Q==null&&(Q=Me),pe(Q,T("DOT_DOT"))?b.$pop():b["$<<"](Q)})),E(r)?(V=R.$join_path(b,_),E(R["$descends_from?"](V,Z))?V:E($e.$fetch("recover",!0))?(R.$logger().$warn(""+(E(K=$e["$[]"]("target_name"))?K:"path")+" is outside of jail; recovering automatically"),E(M)||(z=R.$partition_path(Z),Y=w(z),M=Y[0]==null?Me:Y[0]),R.$join_path(ve(M,J),_)):R.$raise(et("SecurityError"),""+(E(K=$e["$[]"]("target_name"))?K:"path")+" "+we+" is outside of jail: "+Z+" (disallowed in safe mode)")):R.$join_path(b,_)},-2),k(rt,"$web_path",function(we,ge){var Z,$e,Y=this,z=Me,R=Me,V=Me,K=Me,J=Me;return ge==null&&(ge=Me),we=Y.$posixify(we),ge=Y.$posixify(ge),E(ge["$nil_or_empty?"]())||E(Y["$web_root?"](we))||($e=Y.$extract_uri_prefix(""+ge+(E(ge["$end_with?"](T("SLASH")))?"":T("SLASH"))+we),Z=w($e),we=Z[0]==null?Me:Z[0],z=Z[1]==null?Me:Z[1]),$e=Y.$partition_path(we,!0),Z=w($e),R=Z[0]==null?Me:Z[0],V=Z[1]==null?Me:Z[1],K=[],Ge(R,"each",[],function(_){return _==null&&(_=Me),pe(_,T("DOT_DOT"))?E(K["$empty?"]())?E(V)&&Ue(V,T("DOT_SLASH"))?Me:K["$<<"](_):pe(K["$[]"](-1),T("DOT_DOT"))?K["$<<"](_):K.$pop():K["$<<"](_)}),E((J=Y.$join_path(K,V))["$include?"](" "))&&(J=J.$gsub(" ","%20")),E(z)?""+z+J:J},-2),rt.$private(),k(rt,"$extract_uri_prefix",function(we){var ge;return E(we["$include?"](":"))&&E(T("UriSniffRx")["$=~"](we))?[we.$slice(((ge=Be["~"])===Me?Me:ge["$[]"](0)).$length(),we.$length()),(ge=Be["~"])===Me?Me:ge["$[]"](0)]:we})}(C[0],null,C)}(st[0],st)},Opal.modules["asciidoctor/reader"]=function(t){var g=t.module,u=t.klass,$=t.def,E=t.rb_plus,a=t.alias,k=t.hash2,pe=t.not,N=t.eqeqeq,ve=t.to_ary,w=t.truthy,Ge=t.rb_gt,he=t.send,Ue=t.rb_minus,Ae=t.thrower,Be=t.eqeq,st=t.rb_times,Me=t.neqeq,et=t.to_a,Pe=t.assign_ivar_val,Ve=t.send2,it=t.find_super,C=t.rb_ge,Xe=t.gvars,y=t.rb_lt,Ze=t.hash,rt=[],H=t.nil,T=t.$$$;return t.add_stubs("include,attr_reader,+,line_info,attr_accessor,!,===,split,file,dir,dirname,path,basename,lineno,reverse,prepare_lines,empty?,nil_or_empty?,peek_line,[],>,slice,length,process_line,times,shift,read_line,<<,-,unshift_all,has_more_lines?,read_lines,join,unshift,unshift_line,unshift_lines,replace_next_line,start_with?,==,*,read_lines_until,size,clear,cursor,[]=,fetch,!=,cursor_at_mark,warn,logger,message_with_context,pop,push,respond_to?,reverse_each,new,tap,each,instance_variables,instance_variable_get,drop,instance_variable_set,class,object_id,inspect,private,prepare_source_array,prepare_source_string,chomp,valid_encoding?,to_s,raise,to_i,attributes,catalog,pop_include,parse,path=,dup,end_with?,keys,rindex,rootname,key?,attr,reverse!,>=,exceeds_max_depth?,nil?,include_processors?,extensions,extensions?,include_processors,map,skip_front_matter!,adjust_indentation!,include?,=~,preprocess_conditional_directive,preprocess_include_directive,downcase,error,none?,any?,all?,strip,send,resolve_expr_val,rstrip,sub_attributes,attribute_missing,info,parse_attributes,find,handles?,instance,process_method,safe,resolve_include_path,method,split_delimited_value,partition,<,to_a,uniq,sort,call,each_line,infinite?,push_include,delete,first,values,value?,create_include_cursor,delete_at,keep_if,read,uriish?,attr?,require_library,normalize_system_path,file?,relative_path,path_resolver,base_dir,to_f"),function(De,ue){var we=g(De,"Asciidoctor"),ge=[we].concat(ue),Z=t.$r(ge);return function($e,Y,z){var R=u($e,Y,"Reader"),V=[R].concat(z),K=t.$r(V),J=R.$$prototype;return J.file=J.lines=J.look_ahead=J.unescape_next_line=J.lineno=J.process_lines=J.dir=J.path=J.mark=J.source_lines=J.saved=H,R.$include(K("Logging")),function(M,_){var r=u(M,_,"Cursor"),f=r.$$prototype;return f.lineno=f.path=H,r.$attr_reader("file","dir","path","lineno"),$(r,"$initialize",function(b,d,B,D){var Q,X=this;return d==null&&(d=H),B==null&&(B=H),D==null&&(D=1),Q=[b,d,B,D],X.file=Q[0],X.dir=Q[1],X.path=Q[2],X.lineno=Q[3],Q},-2),$(r,"$advance",function(b){var d=this;return d.lineno=E(d.lineno,b)}),$(r,"$line_info",function(){var b=this;return""+b.path+": line "+b.lineno}),a(r,"to_s","line_info")}(V[0],null),R.$attr_reader("file"),R.$attr_reader("dir"),R.$attr_reader("path"),R.$attr_reader("lineno"),R.$attr_reader("source_lines"),R.$attr_accessor("process_lines"),R.$attr_accessor("unterminated"),$(R,"$initialize",function(_,r,f){var A,b,d=this,B=H;return _==null&&(_=H),r==null&&(r=H),f==null&&(f=k([],{})),pe(r)?(d.file=H,d.dir=".",d.path="<stdin>",d.lineno=1):N(T("String"),r)?(d.file=r,b=T("File").$split(d.file),A=ve(b),d.dir=A[0]==null?H:A[0],d.path=A[1]==null?H:A[1],d.lineno=1):(w(d.file=r.$file())?(d.dir=w(B=r.$dir())?B:T("File").$dirname(d.file),d.path=w(B=r.$path())?B:T("File").$basename(d.file)):(d.dir=w(B=r.$dir())?B:".",d.path=w(B=r.$path())?B:"<stdin>"),d.lineno=w(B=r.$lineno())?B:1),d.lines=(d.source_lines=d.$prepare_lines(_,f)).$reverse(),d.mark=H,d.look_ahead=0,d.process_lines=!0,d.unescape_next_line=!1,d.unterminated=H,d.saved=H},-1),$(R,"$has_more_lines?",function(){var _=this;return w(_.lines["$empty?"]())?(_.look_ahead=0,!1):!0}),$(R,"$empty?",function(){var _=this;return w(_.lines["$empty?"]())?(_.look_ahead=0,!0):!1}),a(R,"eof?","empty?"),$(R,"$next_line_empty?",function(){var _=this;return _.$peek_line()["$nil_or_empty?"]()}),$(R,"$peek_line",function(_){var r=this,f=H,A=H;for(_==null&&(_=!1);w(!0);){if(f=r.lines["$[]"](-1),w(_)||w(Ge(r.look_ahead,0)))return w(r.unescape_next_line)?f.$slice(1,f.$length()):f;if(w(f)){if(w(A=r.$process_line(f)))return A}else return r.look_ahead=0,H}},-1),$(R,"$peek_lines",function(_,r){var f=this,A=H,b=H,d=H;return _==null&&(_=H),r==null&&(r=!1),A=f.look_ahead,b=[],function(){try{var B=Ae("break");return he(w(d=_)?d:K("MAX_INT"),"times",[],function D(){var Q=D.$$s==null?this:D.$$s,X=H;if(Q.lineno==null&&(Q.lineno=H),w(X=w(r)?Q.$shift():Q.$read_line()))return b["$<<"](X);w(r)&&(Q.lineno=Ue(Q.lineno,1)),B.$throw()},{$$s:f})}catch(D){if(D===B)return D.$v;throw D}}(),w(b["$empty?"]())||(f.$unshift_all(b),w(r)&&(f.look_ahead=A)),b},-1),$(R,"$read_line",function(){var _=this;return w(Ge(_.look_ahead,0))||w(_["$has_more_lines?"]())?_.$shift():H}),$(R,"$read_lines",function(){var _=this,r=H;for(r=[];w(_["$has_more_lines?"]());)r["$<<"](_.$shift());return r}),a(R,"readlines","read_lines"),$(R,"$read",function(){var _=this;return _.$read_lines().$join(K("LF"))}),$(R,"$advance",function(){var _=this;return!!w(_.$shift())}),$(R,"$unshift_line",function(_){var r=this;return r.$unshift(_),H}),a(R,"restore_line","unshift_line"),$(R,"$unshift_lines",function(_){var r=this;return r.$unshift_all(_)}),a(R,"restore_lines","unshift_lines"),$(R,"$replace_next_line",function(_){var r=this;return r.$shift(),r.$unshift(_),!0}),a(R,"replace_line","replace_next_line"),$(R,"$skip_blank_lines",function(){var _=this,r=H,f=H;if(w(_["$empty?"]()))return H;for(r=0;w(f=_.$peek_line());)if(w(f["$empty?"]()))_.$shift(),r=E(r,1);else return r}),$(R,"$skip_comment_lines",function(){var _=this,r=H,f=H,A=H;if(w(_["$empty?"]()))return H;for(;w(w(r=f=_.$peek_line())?f["$empty?"]()["$!"]():r)&&w(f["$start_with?"]("//"));)if(w(f["$start_with?"]("///")))if(w(Ge(A=f.$length(),3))&&Be(f,st("/",A)))_.$read_lines_until(k(["terminator","skip_first_line","read_last_line","skip_processing","context"],{terminator:f,skip_first_line:!0,read_last_line:!0,skip_processing:!0,context:"comment"}));else break;else _.$shift();return H}),$(R,"$skip_line_comments",function(){var _=this,r=H,f=H,A=H;if(w(_["$empty?"]()))return[];for(r=[];w(w(f=A=_.$peek_line())?A["$empty?"]()["$!"]():f)&&w(A["$start_with?"]("//"));)r["$<<"](_.$shift());return r}),$(R,"$terminate",function(){var _=this;return _.lineno=E(_.lineno,_.lines.$size()),_.lines.$clear(),_.look_ahead=0,H}),$(R,"$read_lines_until",function M(_){var r,f=M.$$p||H,A=this,b=H,d=H,B=H,D=H,Q=H,X=H,ce=H,Re=H,Ye=H,Qe=H,ot=H,tt=H,at=H,ct=H,ft=H,ut=H;for(M.$$p=null,_==null&&(_=k([],{})),b=[],w(A.process_lines)&&w(_["$[]"]("skip_processing"))&&(A.process_lines=!1,d=!0),w(B=_["$[]"]("terminator"))?(D=w(Q=_["$[]"]("cursor"))?Q:A.$cursor(),X=!1,ce=!1):(X=_["$[]"]("break_on_blank_lines"),ce=_["$[]"]("break_on_list_continuation")),Re=_["$[]"]("skip_line_comments"),Ye=Qe=H,w(_["$[]"]("skip_first_line"))&&A.$shift();w(ot=A.$read_line());){if(w(w(B)?ot["$=="](B):w(Q=w(tt=w(at=X)?ot["$empty?"]():at)?tt:w(at=w(ct=w(ft=ce)?Ye:ft)?ot["$=="](K("LIST_CONTINUATION")):ct)?(r=["preserve_last_line",!0],he(_,"[]=",r),r[r.length-1]):at)?Q:w(tt=f!==H)?t.yield1(f,ot):tt)){w(_["$[]"]("read_last_line"))&&b["$<<"](ot),w(_["$[]"]("preserve_last_line"))&&(A.$unshift(ot),Qe=!0);break}w(Re)&&w(ot["$start_with?"]("//"))&&pe(ot["$start_with?"]("///"))||(b["$<<"](ot),Ye=!0)}return w(d)&&(A.process_lines=!0,w(Qe)&&pe(B)&&(A.look_ahead=Ue(A.look_ahead,1))),w(B)&&Me(B,ot)&&w(ut=_.$fetch("context",B))&&(Be(D,"at_mark")&&(D=A.$cursor_at_mark()),A.$logger().$warn(A.$message_with_context("unterminated "+ut+" block",k(["source_location"],{source_location:D}))),A.unterminated=!0),b},-1),$(R,"$shift",function(){var _=this;return _.lineno=E(_.lineno,1),Be(_.look_ahead,0)||(_.look_ahead=Ue(_.look_ahead,1)),_.lines.$pop()}),$(R,"$unshift",function(_){var r=this;return r.lineno=Ue(r.lineno,1),r.look_ahead=E(r.look_ahead,1),r.lines.$push(_),H}),Be(T("RUBY_ENGINE"),"jruby")?$(R,"$unshift_all",function(_){var r=this;return r.lineno=Ue(r.lineno,_.$size()),r.look_ahead=E(r.look_ahead,_.$size()),w(_["$respond_to?"]("reverse"))?he(r.lines,"push",et(_.$reverse())):he(_,"reverse_each",[],function f(A){var b=f.$$s==null?this:f.$$s;return b.lines==null&&(b.lines=H),A==null&&(A=H),b.lines.$push(A)},{$$s:r}),H}):$(R,"$unshift_all",function(_){var r=this;return r.lineno=Ue(r.lineno,_.$size()),r.look_ahead=E(r.look_ahead,_.$size()),he(r.lines,"push",et(_.$reverse())),H}),$(R,"$cursor",function(){var _=this;return K("Cursor").$new(_.file,_.dir,_.path,_.lineno)}),$(R,"$cursor_at_line",function(_){var r=this;return K("Cursor").$new(r.file,r.dir,r.path,_)}),$(R,"$cursor_at_mark",function(){var _=this;return w(_.mark)?he(K("Cursor"),"new",et(_.mark)):_.$cursor()}),$(R,"$cursor_before_mark",function(){var _,r,f=this,A=H,b=H,d=H,B=H;return w(f.mark)?(r=f.mark,_=ve(r),A=_[0]==null?H:_[0],b=_[1]==null?H:_[1],d=_[2]==null?H:_[2],B=_[3]==null?H:_[3],K("Cursor").$new(A,b,d,Ue(B,1))):K("Cursor").$new(f.file,f.dir,f.path,Ue(f.lineno,1))}),$(R,"$cursor_at_prev_line",function(){var _=this;return K("Cursor").$new(_.file,_.dir,_.path,Ue(_.lineno,1))}),$(R,"$mark",function(){var _=this;return _.mark=[_.file,_.dir,_.path,_.lineno]}),$(R,"$line_info",function(){var _=this;return""+_.path+": line "+_.lineno}),$(R,"$lines",function(){var _=this;return _.lines.$reverse()}),$(R,"$string",function(){var _=this;return _.lines.$reverse().$join(K("LF"))}),$(R,"$source",function(){var _=this;return _.source_lines.$join(K("LF"))}),$(R,"$save",function(){var _=this;return _.saved=he(k([],{}),"tap",[],function r(f){var A=r.$$s==null?this:r.$$s;return f==null&&(f=H),he(A.$instance_variables(),"each",[],function b(d){var B,D=b.$$s==null?this:b.$$s,Q=H;return d==null&&(d=H),Be(d,"@saved")||Be(d,"@source_lines")?H:(B=[d,N(T("Array"),Q=D.$instance_variable_get(d))?Q.$drop(0):Q],he(f,"[]=",B),B[B.length-1])},{$$s:A})},{$$s:_}),H}),$(R,"$restore_save",function(){var _=this;return w(_.saved)?(he(_.saved,"each",[],function r(f,A){var b=r.$$s==null?this:r.$$s;return f==null&&(f=H),A==null&&(A=H),b.$instance_variable_set(f,A)},{$$s:_}),_.saved=H):H}),$(R,"$discard_save",Pe("saved",H)),$(R,"$to_s",function(){var _=this;return"#<"+_.$class()+"@"+_.$object_id()+" {path: "+_.path.$inspect()+", line: "+_.lineno+"}>"}),R.$private(),$(R,"$prepare_lines",function(_,r){var f=this,A=H;r==null&&(r=k([],{}));try{return w(A=r["$[]"]("normalize"))?N(T("Array"),_)?K("Helpers").$prepare_source_array(_,A["$!="]("chomp")):K("Helpers").$prepare_source_string(_,A["$!="]("chomp")):N(T("Array"),_)?_.$drop(0):w(_)?_.$chomp().$split(K("LF"),-1):[]}catch(b){if(t.rescue(b,[K("StandardError")]))try{return w((N(T("Array"),_)?_.$join():_.$to_s())["$valid_encoding?"]())?f.$raise():f.$raise(T("ArgumentError"),"source is either binary or contains invalid Unicode data")}finally{t.pop_exception()}else throw b}},-2),$(R,"$process_line",function(_){var r=this;return w(r.process_lines)&&(r.look_ahead=E(r.look_ahead,1)),_})}(ge[0],null,ge),function($e,Y,z){var R=u($e,Y,"PreprocessorReader"),V=[R].concat(z),K=t.$r(V),J=R.$$prototype;return J.include_stack=J.lines=J.file=J.dir=J.path=J.lineno=J.maxdepth=J.process_lines=J.includes=J.document=J.unescape_next_line=J.include_processor_extensions=J.look_ahead=J.skipping=J.conditional_stack=H,R.$attr_reader("include_stack"),$(R,"$initialize",function M(_,r,f,A){M.$$p;var b=this,d=H,B=H;return M.$$p=null,r==null&&(r=H),f==null&&(f=H),A==null&&(A=k([],{})),b.document=_,Ve(b,it(b,"initialize",M,!1,!0),"initialize",[r,f,A],null),w(Ge(d=(w(B=_.$attributes()["$[]"]("max-include-depth"))?B:64).$to_i(),0))?b.maxdepth=k(["abs","curr","rel"],{abs:d,curr:d,rel:d}):b.maxdepth=H,b.include_stack=[],b.includes=_.$catalog()["$[]"]("includes"),b.skipping=!1,b.conditional_stack=[],b.include_processor_extensions=H},-2),$(R,"$has_more_lines?",function(){var _=this;return!!w(_.$peek_line())}),$(R,"$empty?",function(){var _=this;return!w(_.$peek_line())}),a(R,"eof?","empty?"),$(R,"$peek_line",function M(_){var r=M.$$p||H,f=this,A=H;return M.$$p=null,_==null&&(_=!1),w(A=Ve(f,it(f,"peek_line",M,!1,!0),"peek_line",[_],r))?A:w(f.include_stack["$empty?"]())?H:(f.$pop_include(),f.$peek_line(_))},-1),$(R,"$push_include",function(_,r,f,A,b){var d=this,B=H,D=H,Q=H,X=H,ce=H,Re=H;return r==null&&(r=H),f==null&&(f=H),A==null&&(A=1),b==null&&(b=k([],{})),d.include_stack["$<<"]([d.lines,d.file,d.dir,d.path,d.lineno,d.maxdepth,d.process_lines]),w(d.file=r)?(N(T("String"),r)?d.dir=T("File").$dirname(r):w(K("RUBY_ENGINE_OPAL"))?d.dir=T("URI").$parse(T("File").$dirname(r=r.$to_s())):((d.dir=r.$dup())["$path="](Be(B=T("File").$dirname(r.$path()),"/")?"":B),r=r.$to_s()),d.path=f=w(D=f)?D:T("File").$basename(r),w(d.process_lines=he(r,"end_with?",et(K("ASCIIDOC_EXTENSIONS").$keys())))&&(w(D=d.includes["$[]"](f.$slice(0,f.$rindex("."))))||d.includes["$[]="](f.$slice(0,f.$rindex(".")),w(b["$[]"]("partial-option"))?H:!0))):(d.dir=".",d.process_lines=!0,w(d.path=f)?w(D=d.includes["$[]"](K("Helpers").$rootname(f)))||d.includes["$[]="](K("Helpers").$rootname(f),w(b["$[]"]("partial-option"))?H:!0):d.path="<stdin>"),d.lineno=A,w(d.maxdepth)&&w(b["$key?"]("depth"))&&(w(Ge(Q=b["$[]"]("depth").$to_i(),0))?(w(Ge(X=E(d.include_stack.$size(),Q),ce=d.maxdepth["$[]"]("abs")))&&(X=Q=ce),d.maxdepth=k(["abs","curr","rel"],{abs:ce,curr:X,rel:Q})):d.maxdepth=k(["abs","curr","rel"],{abs:d.maxdepth["$[]"]("abs"),curr:d.include_stack.$size(),rel:0})),w((d.lines=d.$prepare_lines(_,k(["normalize","condense","indent"],{normalize:w(D=d.process_lines)?D:"chomp",condense:!1,indent:b["$[]"]("indent")})))["$empty?"]())?d.$pop_include():(w(b["$key?"]("leveloffset"))?(d.lines=E(E([w(Re=d.document.$attr("leveloffset"))?":leveloffset: "+Re:":leveloffset!:",""],d.lines.$reverse()),["",":leveloffset: "+b["$[]"]("leveloffset")]),d.lineno=Ue(d.lineno,2)):d.lines["$reverse!"](),d.look_ahead=0),d},-2),$(R,"$include_depth",function(){var _=this;return _.include_stack.$size()}),$(R,"$exceeds_max_depth?",function(){var _=this,r=H,f=H;return w(r=w(f=_.maxdepth)?C(_.include_stack.$size(),_.maxdepth["$[]"]("curr")):f)?_.maxdepth["$[]"]("rel"):r}),a(R,"exceeded_max_depth?","exceeds_max_depth?"),$(R,"$shift",function M(){var _=M.$$p||H,r=this,f=H;return M.$$p=null,w(r.unescape_next_line)?(r.unescape_next_line=!1,(f=Ve(r,it(r,"shift",M,!1,!0),"shift",[],_)).$slice(1,f.$length())):Ve(r,it(r,"shift",M,!1,!0),"shift",[],_)}),$(R,"$include_processors?",function(){var _=this;return w(_.include_processor_extensions["$nil?"]())?w(_.document["$extensions?"]())&&w(_.document.$extensions()["$include_processors?"]())?(_.include_processor_extensions=_.document.$extensions().$include_processors())["$!"]()["$!"]():_.include_processor_extensions=!1:_.include_processor_extensions["$!="](!1)}),$(R,"$create_include_cursor",function(_,r,f){var A=H;return N(T("String"),_)?A=T("File").$dirname(_):w(K("RUBY_ENGINE_OPAL"))?A=T("File").$dirname(_=_.$to_s()):(A=Be(A=T("File").$dirname(_.$path()),"")?"/":A,_=_.$to_s()),K("Cursor").$new(_,A,r,f)}),$(R,"$to_s",function(){var _=this;return"#<"+_.$class()+"@"+_.$object_id()+" {path: "+_.path.$inspect()+", line: "+_.lineno+", include depth: "+_.include_stack.$size()+", include stack: ["+he(_.include_stack,"map",[],function(f){return f==null&&(f=H),f.$to_s()}).$join(", ")+"]}>"}),R.$private(),$(R,"$prepare_lines",function M(_,r){var f=M.$$p||H,A=this,b=H,d=H,B=H,D=H;if(M.$$p=null,r==null&&(r=k([],{})),b=Ve(A,it(A,"prepare_lines",M,!1,!0),"prepare_lines",[_,r],f),w(A.document)&&w(A.document.$attributes()["$[]"]("skip-front-matter"))&&w(d=A["$skip_front_matter!"](b))&&A.document.$attributes()["$[]="]("front-matter",d.$join(K("LF"))),w(r.$fetch("condense",!0)))for(;w(w(B=D=b["$[]"](-1))?D["$empty?"]():B);)b.$pop();return w(r["$[]"]("indent"))&&K("Parser")["$adjust_indentation!"](b,r["$[]"]("indent").$to_i(),A.document.$attr("tabsize").$to_i()),b},-2),$(R,"$process_line",function(_){var r,f=this;return w(f.process_lines)?w(_["$empty?"]())?(f.look_ahead=E(f.look_ahead,1),_):w(_["$end_with?"]("]"))&&pe(_["$start_with?"]("["))&&w(_["$include?"]("::"))?w(_["$include?"]("if"))&&w(K("ConditionalDirectiveRx")["$=~"](_))?Be((r=Xe["~"])===H?H:r["$[]"](1),"\\")?(f.unescape_next_line=!0,f.look_ahead=E(f.look_ahead,1),_.$slice(1,_.$length())):w(f.$preprocess_conditional_directive((r=Xe["~"])===H?H:r["$[]"](2),(r=Xe["~"])===H?H:r["$[]"](3),(r=Xe["~"])===H?H:r["$[]"](4),(r=Xe["~"])===H?H:r["$[]"](5)))?(f.$shift(),H):(f.look_ahead=E(f.look_ahead,1),_):w(f.skipping)?(f.$shift(),H):w(_["$start_with?"]("inc","\\inc"))&&w(K("IncludeDirectiveRx")["$=~"](_))?Be((r=Xe["~"])===H?H:r["$[]"](1),"\\")?(f.unescape_next_line=!0,f.look_ahead=E(f.look_ahead,1),_.$slice(1,_.$length())):w(f.$preprocess_include_directive((r=Xe["~"])===H?H:r["$[]"](2),(r=Xe["~"])===H?H:r["$[]"](3)))?H:(f.look_ahead=E(f.look_ahead,1),_):(f.look_ahead=E(f.look_ahead,1),_):w(f.skipping)?(f.$shift(),H):(f.look_ahead=E(f.look_ahead,1),_):_}),$(R,"$preprocess_conditional_directive",function(_,r,f,A){var b,d=this,B=H,D=H,Q=H,X=H,ce=H,Re=H;if(w(B=r["$empty?"]())||(r=r.$downcase()),Be(_,"endif"))return w(A)?d.$logger().$error(d.$message_with_context("malformed preprocessor directive - text not permitted: endif::"+r+"["+A+"]",k(["source_location"],{source_location:d.$cursor()}))):w(d.conditional_stack["$empty?"]())?d.$logger().$error(d.$message_with_context("unmatched preprocessor directive: endif::"+r+"[]",k(["source_location"],{source_location:d.$cursor()}))):w(B)||Be(r,(D=d.conditional_stack["$[]"](-1))["$[]"]("target"))?(d.conditional_stack.$pop(),d.skipping=w(d.conditional_stack["$empty?"]())?!1:d.conditional_stack["$[]"](-1)["$[]"]("skipping")):d.$logger().$error(d.$message_with_context("mismatched preprocessor directive: endif::"+r+"[], expected endif::"+D["$[]"]("target")+"[]",k(["source_location"],{source_location:d.$cursor()}))),!0;if(w(d.skipping))Q=!1;else switch(_){case"ifdef":if(w(B))return d.$logger().$error(d.$message_with_context("malformed preprocessor directive - missing target: ifdef::["+A+"]",k(["source_location"],{source_location:d.$cursor()}))),!0;switch(f){case",":Q=he(r.$split(",",-1),"none?",[],function Ye(Qe){var ot=Ye.$$s==null?this:Ye.$$s;return ot.document==null&&(ot.document=H),Qe==null&&(Qe=H),ot.document.$attributes()["$key?"](Qe)},{$$s:d});break;case"+":Q=he(r.$split("+",-1),"any?",[],function Ye(Qe){var ot=Ye.$$s==null?this:Ye.$$s;return ot.document==null&&(ot.document=H),Qe==null&&(Qe=H),ot.document.$attributes()["$key?"](Qe)["$!"]()},{$$s:d});break;default:Q=d.document.$attributes()["$key?"](r)["$!"]()}break;case"ifndef":if(w(B))return d.$logger().$error(d.$message_with_context("malformed preprocessor directive - missing target: ifndef::["+A+"]",k(["source_location"],{source_location:d.$cursor()}))),!0;switch(f){case",":Q=he(r.$split(",",-1),"any?",[],function Ye(Qe){var ot=Ye.$$s==null?this:Ye.$$s;return ot.document==null&&(ot.document=H),Qe==null&&(Qe=H),ot.document.$attributes()["$key?"](Qe)},{$$s:d});break;case"+":Q=he(r.$split("+",-1),"all?",[],function Ye(Qe){var ot=Ye.$$s==null?this:Ye.$$s;return ot.document==null&&(ot.document=H),Qe==null&&(Qe=H),ot.document.$attributes()["$key?"](Qe)},{$$s:d});break;default:Q=d.document.$attributes()["$key?"](r)}break;case"ifeval":if(w(B))if(w(A)&&w(K("EvalExpressionRx")["$=~"](A.$strip())))X=(b=Xe["~"])===H?H:b["$[]"](1),ce=(b=Xe["~"])===H?H:b["$[]"](2),Re=(b=Xe["~"])===H?H:b["$[]"](3),Q=function(){try{return!w(d.$resolve_expr_val(X).$send(ce,d.$resolve_expr_val(Re)))}catch(Ye){if(t.rescue(Ye,[K("StandardError")]))try{return!0}finally{t.pop_exception()}else throw Ye}}();else return d.$logger().$error(d.$message_with_context("malformed preprocessor directive - "+(w(A)?"invalid expression":"missing expression")+": ifeval::["+A+"]",k(["source_location"],{source_location:d.$cursor()}))),!0;else return d.$logger().$error(d.$message_with_context("malformed preprocessor directive - target not permitted: ifeval::"+r+"["+A+"]",k(["source_location"],{source_location:d.$cursor()}))),!0;break}return Be(_,"ifeval")||pe(A)?(w(Q)&&(d.skipping=!0),d.conditional_stack["$<<"](k(["target","skip","skipping"],{target:r,skip:Q,skipping:d.skipping}))):w(d.skipping)||w(Q)||(d.$replace_next_line(A.$rstrip()),d.$unshift(""),w(A["$start_with?"]("include::"))&&(d.look_ahead=Ue(d.look_ahead,1))),!0}),$(R,"$preprocess_include_directive",function(_,r){var f,A,b=this,d=H,B=H,D=H,Q=H,X=H,ce=H,Re=H,Ye=H,Qe=H,ot=H,tt=H,at=H,ct=H,ft=H,ut=H,pt=H,ht=H,kt=H,yt=H,Tt=H,Ct=H,wt=H,At=H,It=H,Bt=H,Ot=H,Kt=H;if(d=b.document,w((B=_)["$include?"](K("ATTR_REF_HEAD")))&&w((B=d.$sub_attributes(_,k(["attribute_missing"],{attribute_missing:Be(D=w(Q=d.$attributes()["$[]"]("attribute-missing"))?Q:K("Compliance").$attribute_missing(),"warn")?"drop-line":D})))["$empty?"]()))return Be(D,"drop-line")&&w(d.$sub_attributes(E(_," "),k(["attribute_missing","drop_line_severity"],{attribute_missing:"drop-line",drop_line_severity:"ignore"}))["$empty?"]())?(he(b.$logger(),"info",[],function qt(){var xt=qt.$$s==null?this:qt.$$s;return xt.$message_with_context("include dropped due to missing attribute: include::"+_+"["+r+"]",k(["source_location"],{source_location:xt.$cursor()}))},{$$s:b}),b.$shift(),!0):w(d.$parse_attributes(r,[],k(["sub_input"],{sub_input:!0}))["$[]"]("optional-option"))?(he(b.$logger(),"info",[],function qt(){var xt=qt.$$s==null?this:qt.$$s;return xt.$message_with_context("optional include dropped "+(Be(D,"warn")&&w(d.$sub_attributes(E(_," "),k(["attribute_missing","drop_line_severity"],{attribute_missing:"drop-line",drop_line_severity:"ignore"}))["$empty?"]())?"due to missing attribute":"because resolved target is blank")+": include::"+_+"["+r+"]",k(["source_location"],{source_location:xt.$cursor()}))},{$$s:b}),b.$shift(),!0):(b.$logger().$warn(b.$message_with_context("include dropped "+(Be(D,"warn")&&w(d.$sub_attributes(E(_," "),k(["attribute_missing","drop_line_severity"],{attribute_missing:"drop-line",drop_line_severity:"ignore"}))["$empty?"]())?"due to missing attribute":"because resolved target is blank")+": include::"+_+"["+r+"]",k(["source_location"],{source_location:b.$cursor()}))),b.$replace_next_line("Unresolved directive in "+b.path+" - include::"+_+"["+r+"]"));if(w(b["$include_processors?"]())&&w(X=he(b.include_processor_extensions,"find",[],function(xt){return xt==null&&(xt=H),xt.$instance()["$handles?"](B)})))return b.$shift(),X.$process_method()["$[]"](d,b,B,d.$parse_attributes(r,[],k(["sub_input"],{sub_input:!0}))),!0;if(w(C(d.$safe(),T(K("SafeMode"),"SECURE"))))return b.$replace_next_line("link:"+B+"[role=include]");if(w(b.maxdepth)){if(w(C(b.include_stack.$size(),b.maxdepth["$[]"]("curr"))))return b.$logger().$error(b.$message_with_context("maximum include depth of "+b.maxdepth["$[]"]("rel")+" exceeded",k(["source_location"],{source_location:b.$cursor()}))),H;switch(ce=d.$parse_attributes(r,[],k(["sub_input"],{sub_input:!0})),A=b.$resolve_include_path(B,r,ce),f=ve(A),Re=f[0]==null?H:f[0],Ye=f[1]==null?H:f[1],Qe=f[2]==null?H:f[2],Ye){case"file":ot=T("File").$method("open"),tt=K("FILE_READ_MODE");break;case"uri":ot=T("OpenURI").$method("open_uri"),tt=K("URI_READ_MODE");break;default:return Re}if(w(K("RUBY_ENGINE_OPAL"))||w(at=ce["$[]"]("encoding"))&&w(function(){try{return T("Encoding").$find(at)}catch(qt){if(t.rescue(qt,[K("StandardError")]))try{return H}finally{t.pop_exception()}else throw qt}}())&&((ct=tt.$split(":"))["$[]="](1,at),tt=ct.$join(":")),ft=ut=H,w(r)&&(w(ce["$key?"]("lines"))?(ft=[],he(b.$split_delimited_value(ce["$[]"]("lines")),"each",[],function(xt){var Rt,Dt,Et=H,Ft=H;return xt==null&&(xt=H),w(xt["$include?"](".."))?(Dt=xt.$partition(".."),Rt=ve(Dt),Et=Rt[0]==null?H:Rt[0],Rt[1]==null||Rt[1],Ft=Rt[2]==null?H:Rt[2],ft=E(ft,w(Ft["$empty?"]())||w(y(Ft=Ft.$to_i(),0))?[Et.$to_i(),T(T("Float"),"INFINITY")]:t.Range.$new(Et.$to_i(),Ft,!1).$to_a())):ft["$<<"](xt.$to_i())}),ft=w(ft["$empty?"]())?H:ft.$sort().$uniq()):w(ce["$key?"]("tag"))?w((pt=ce["$[]"]("tag"))["$empty?"]())||Be(pt,"!")||(ut=w(pt["$start_with?"]("!"))?Ze(pt.$slice(1,pt.$length()),!1):Ze(pt,!0)):w(ce["$key?"]("tags"))&&(ut=k([],{}),he(b.$split_delimited_value(ce["$[]"]("tags")),"each",[],function(xt){var Rt;return xt==null&&(xt=H),w(xt["$empty?"]())||Be(xt,"!")?H:w(xt["$start_with?"]("!"))?(Rt=[xt.$slice(1,xt.$length()),!1],he(ut,"[]=",Rt),Rt[Rt.length-1]):(Rt=[xt,!0],he(ut,"[]=",Rt),Rt[Rt.length-1])}),w(ut["$empty?"]())&&(ut=H))),w(ft)){f=[[],H,0],ht=f[0],kt=f[1],yt=f[2];try{he(ot,"call",[Re,tt],function(xt){var Rt=H;return xt==null&&(xt=H),Rt=H,function(){try{var Dt=Ae("break");return he(xt,"each_line",[],function(Ft){var Gt=H;if(Ft==null&&(Ft=H),yt=E(yt,1),w(Rt)||N(T("Float"),Gt=ft["$[]"](0))&&w(Rt=Gt["$infinite?"]()))return kt=w(Q=kt)?Q:yt,ht["$<<"](Ft);if(Be(Gt,yt)&&(kt=w(Q=kt)?Q:yt,ht["$<<"](Ft),ft.$shift()),w(ft["$empty?"]()))Dt.$throw();else return H})}catch(Et){if(Et===Dt)return Et.$v;throw Et}}()})}catch(qt){if(t.rescue(qt,[K("StandardError")]))try{return b.$logger().$error(b.$message_with_context("include "+Ye+" not readable: "+Re,k(["source_location"],{source_location:b.$cursor()}))),b.$replace_next_line("Unresolved directive in "+b.path+" - include::"+B+"["+r+"]")}finally{t.pop_exception()}else throw qt}b.$shift(),w(kt)&&(ce["$[]="]("partial-option",""),b.$push_include(ht,Re,Qe,kt,ce))}else if(w(ut)){f=[[],H,0,[],T("Set").$new(),H],ht=f[0],kt=f[1],yt=f[2],Tt=f[3],Ct=f[4],wt=f[5],w(ut["$key?"]("**"))?(At=It=ut.$delete("**"),w(ut["$key?"]("*"))?Bt=ut.$delete("*"):pe(At)&&Be(ut.$values().$first(),!1)&&(Bt=!0)):w(ut["$key?"]("*"))?Be(ut.$keys().$first(),"*")?At=It=(Bt=ut.$delete("*"))["$!"]():(At=It=!1,Bt=ut.$delete("*")):At=It=ut["$value?"](!0)["$!"]();try{he(ot,"call",[Re,tt],function qt(xt){var Rt,Dt=qt.$$s==null?this:qt.$$s,Et=H,Ft=H;return xt==null&&(xt=H),Rt=["::","[]"],Et=Rt[0],Ft=Rt[1],he(xt,"each_line",[],function Gt(Mt){var zt,Xt,Pt=Gt.$$s==null?this:Gt.$$s,jt=H,kr=H,Ar=H;return Mt==null&&(Mt=H),yt=E(yt,1),w(Mt["$include?"](Et))&&w(Mt["$include?"](Ft))&&w(K("TagDirectiveRx")["$=~"](Mt))?(jt=(zt=Xe["~"])===H?H:zt["$[]"](2),w((zt=Xe["~"])===H?H:zt["$[]"](1))?Be(jt,wt)?(Tt.$pop(),Xt=w(Tt["$empty?"]())?[H,It]:Tt["$[]"](-1),zt=ve(Xt),wt=zt[0]==null?H:zt[0],At=zt[1]==null?H:zt[1],Xt):w(ut["$key?"](jt))?(kr=Pt.$create_include_cursor(Re,B,yt),w(Ar=he(Tt,"rindex",[],function(Sr){return Sr==null&&(Sr=H),Sr["$=="](jt)},{$$has_trailing_comma_in_args:!0}))?(Be(Ar,0)?Tt.$shift():Tt.$delete_at(Ar),Pt.$logger().$warn(Pt.$message_with_context("mismatched end tag (expected '"+wt+"' but found '"+jt+"') at line "+yt+" of include "+Ye+": "+Re,k(["source_location","include_location"],{source_location:Pt.$cursor(),include_location:kr})))):Pt.$logger().$warn(Pt.$message_with_context("unexpected end tag '"+jt+"' at line "+yt+" of include "+Ye+": "+Re,k(["source_location","include_location"],{source_location:Pt.$cursor(),include_location:kr})))):H:w(ut["$key?"](jt))?(w(At=ut["$[]"](jt))&&Ct["$<<"](jt),Tt["$<<"]([wt=jt,At,yt])):pe(Bt["$nil?"]())?(At=w(wt)&&pe(At)?!1:Bt,Tt["$<<"]([wt=jt,At,yt])):H):w(At)?(kt=w(Q=kt)?Q:yt,ht["$<<"](Mt)):H},{$$s:Dt})},{$$s:b})}catch(qt){if(t.rescue(qt,[K("StandardError")]))try{return b.$logger().$error(b.$message_with_context("include "+Ye+" not readable: "+Re,k(["source_location"],{source_location:b.$cursor()}))),b.$replace_next_line("Unresolved directive in "+b.path+" - include::"+B+"["+r+"]")}finally{t.pop_exception()}else throw qt}w(Tt["$empty?"]())||he(Tt,"each",[],function qt(xt,Rt,Dt){var Et=qt.$$s==null?this:qt.$$s;return xt==null&&(xt=H),Dt==null&&(Dt=H),Et.$logger().$warn(Et.$message_with_context("detected unclosed tag '"+xt+"' starting at line "+Dt+" of include "+Ye+": "+Re,k(["source_location","include_location"],{source_location:Et.$cursor(),include_location:Et.$create_include_cursor(Re,B,Dt)})))},{$$s:b}),w((Ot=Ue(he(ut,"keep_if",[],function(xt,Rt){return Rt==null&&(Rt=H),Rt}).$keys(),Ct.$to_a()))["$empty?"]())||b.$logger().$warn(b.$message_with_context("tag"+(w(Ge(Ot.$size(),1))?"s":"")+" '"+Ot.$join(", ")+"' not found in include "+Ye+": "+Re,k(["source_location"],{source_location:b.$cursor()}))),b.$shift(),w(kt)&&(w(It)&&Me(Bt,!1)&&w(ut["$empty?"]())||ce["$[]="]("partial-option",""),b.$push_include(ht,Re,Qe,kt,ce))}else{Kt=H;try{Kt=he(ot,"call",[Re,tt],function(xt){return xt==null&&(xt=H),xt.$read()}),b.$shift()}catch(qt){if(t.rescue(qt,[K("StandardError")]))try{return b.$logger().$error(b.$message_with_context("include "+Ye+" not readable: "+Re,k(["source_location"],{source_location:b.$cursor()}))),b.$replace_next_line("Unresolved directive in "+b.path+" - include::"+B+"["+r+"]")}finally{t.pop_exception()}else throw qt}b.$push_include(Kt,Re,Qe,1,ce)}return!0}else return H}),$(R,"$resolve_include_path",function(_,r,f){var A,b=this,d=H,B=H,D=H;return d=b.document,w(K("Helpers")["$uriish?"](_))||w(N(T("String"),b.dir)?H:_=""+b.dir+"/"+_)?w(d["$attr?"]("allow-uri-read"))?(w(d["$attr?"]("cache-uri"))?w((A=T("::","OpenURI","skip_raise"))&&T(A,"Cache","skip_raise")?"constant":H)||K("Helpers").$require_library("open-uri/cached","open-uri-cached"):pe(K("RUBY_ENGINE_OPAL"))&&T("OpenURI"),[T("URI").$parse(_),"uri",_]):b.$replace_next_line("link:"+_+"[role=include]"):(B=d.$normalize_system_path(_,b.dir,H,k(["target_name"],{target_name:"include file"})),w(T("File")["$file?"](B))?(D=d.$path_resolver().$relative_path(B,d.$base_dir()),[B,"file",D]):w(f["$[]"]("optional-option"))?(he(b.$logger(),"info",[],function Q(){var X=Q.$$s==null?this:Q.$$s;return X.$message_with_context("optional include dropped because include file not found: "+B,k(["source_location"],{source_location:X.$cursor()}))},{$$s:b}),b.$shift(),!0):(b.$logger().$error(b.$message_with_context("include file not found: "+B,k(["source_location"],{source_location:b.$cursor()}))),b.$replace_next_line("Unresolved directive in "+b.path+" - include::"+_+"["+r+"]")))}),$(R,"$pop_include",function(){var _,r,f=this;return w(f.include_stack["$empty?"]())||(r=f.include_stack.$pop(),_=ve(r),f.lines=_[0]==null?H:_[0],f.file=_[1]==null?H:_[1],f.dir=_[2]==null?H:_[2],f.path=_[3]==null?H:_[3],f.lineno=_[4]==null?H:_[4],f.maxdepth=_[5]==null?H:_[5],f.process_lines=_[6]==null?H:_[6],f.look_ahead=0),H}),$(R,"$split_delimited_value",function(_){return w(_["$include?"](","))?_.$split(","):_.$split(";")}),$(R,"$skip_front_matter!",function(_,r){var f=this,A=H,b=H,d=H,B=H,D=H;if(r==null&&(r=!0),!Be(A=_["$[]"](0),"---"))return H;for(b=_.$drop(0),_.$shift(),d=[],w(r)&&(f.lineno=E(f.lineno,1));!w(w(B=D=_["$empty?"]())?B:_["$[]"](0)["$=="](A));)d["$<<"](_.$shift()),w(r)&&(f.lineno=E(f.lineno,1));return w(D)?(he(_,"unshift",et(b)),w(r)&&(f.lineno=Ue(f.lineno,b.$size())),H):(_.$shift(),w(r)&&(f.lineno=E(f.lineno,1)),d)},-2),$(R,"$resolve_expr_val",function(_){var r=this,f=H;return w(_["$start_with?"]('"'))&&w(_["$end_with?"]('"'))||w(_["$start_with?"]("'"))&&w(_["$end_with?"]("'"))?(f=!0,_=_.$slice(1,Ue(_.$length(),1))):f=!1,w(_["$include?"](K("ATTR_REF_HEAD")))&&(_=r.document.$sub_attributes(_,k(["attribute_missing"],{attribute_missing:"drop"}))),w(f)?_:w(_["$empty?"]())?H:Be(_,"true")?!0:Be(_,"false")?!1:w(_.$rstrip()["$empty?"]())?" ":w(_["$include?"]("."))?_.$to_f():_.$to_i()})}(ge[0],Z("Reader"),ge)}(rt[0],rt)},Opal.modules["asciidoctor/section"]=function(t){var g=t.module,u=t.klass,$=t.hash2,E=t.send2,a=t.find_super,k=t.eqeqeq,pe=t.truthy,N=t.rb_plus,ve=t.def,w=t.alias,Ge=t.rb_gt,he=t.eqeq,Ue=t.not,Ae=t.send,Be=t.defs,st=[],Me=t.nil;return t.add_stubs("attr_accessor,attr_reader,===,+,level,special,title,generate_id,>,==,sectnum,!,empty?,reftext,sub_placeholder,sub_quotes,compat_mode,[],attributes,context,assign_numeral,class,object_id,inspect,size,[]=,chr,length,gsub,downcase,delete,tr_s,end_with?,chop,start_with?,slice,key?,catalog,unique_id_start_index"),function(et,Pe){var Ve=g(et,"Asciidoctor"),it=[Ve].concat(Pe),C=t.$r(it);return function(Xe,y,Ze){var rt=u(Xe,y,"Section"),H=[rt].concat(Ze),T=t.$r(H),De=rt.$$prototype;return De.document=De.next_section_index=De.parent=De.level=De.numeral=De.numbered=De.sectname=De.title=De.blocks=Me,rt.$attr_accessor("index"),rt.$attr_accessor("sectname"),rt.$attr_accessor("special"),rt.$attr_accessor("numbered"),rt.$attr_reader("caption"),ve(rt,"$initialize",function ue(we,ge,Z,$e){var Y;ue.$$p;var z=this,R=Me;return ue.$$p=null,we==null&&(we=Me),ge==null&&(ge=Me),Z==null&&(Z=!1),$e==null&&($e=$([],{})),E(z,a(z,"initialize",ue,!1,!0),"initialize",[we,"section",$e],null),k(T("Section"),we)?(Y=[pe(R=ge)?R:N(we.$level(),1),we.$special()],z.level=Y[0],z.special=Y[1]):(Y=[pe(R=ge)?R:1,!1],z.level=Y[0],z.special=Y[1]),z.numbered=Z,z.index=0},-1),w(rt,"name","title"),ve(rt,"$generate_id",function(){var we=this;return T("Section").$generate_id(we.$title(),we.document)}),ve(rt,"$sections?",function(){var we=this;return Ge(we.next_section_index,0)}),ve(rt,"$sectnum",function(we,ge){var Z=this,$e=Me;return we==null&&(we="."),ge==null&&(ge=Me),ge=pe($e=ge)?$e:he(ge,!1)?"":we,pe(Ge(Z.level,1))&&k(T("Section"),Z.parent)?""+Z.parent.$sectnum(we,we)+Z.numeral+ge:""+Z.numeral+ge},-1),ve(rt,"$xreftext",function(we){var ge=this,Z=Me,$e=Me,Y=Me,z=Me;if(we==null&&(we=Me),pe(Z=ge.$reftext())&&Ue(Z["$empty?"]()))return Z;if(pe(we))if(pe(ge.numbered))switch(we){case"full":return he($e=ge.sectname,"chapter")||he($e,"appendix")?Y=ge.$sub_placeholder(ge.$sub_quotes("_%s_"),ge.$title()):Y=ge.$sub_placeholder(ge.$sub_quotes(pe(ge.document.$compat_mode())?"``%s''":'"`%s`"'),ge.$title()),pe(z=ge.document.$attributes()["$[]"](""+$e+"-refsig"))?""+z+" "+ge.$sectnum(".",",")+" "+Y:""+ge.$sectnum(".",",")+" "+Y;case"short":return pe(z=ge.document.$attributes()["$[]"](""+ge.sectname+"-refsig"))?""+z+" "+ge.$sectnum(".",""):ge.$sectnum(".","");default:return he($e=ge.sectname,"chapter")||he($e,"appendix")?ge.$sub_placeholder(ge.$sub_quotes("_%s_"),ge.$title()):ge.$title()}else return he($e=ge.sectname,"chapter")||he($e,"appendix")?ge.$sub_placeholder(ge.$sub_quotes("_%s_"),ge.$title()):ge.$title();else return ge.$title()},-1),ve(rt,"$<<",function ue(we){var ge=ue.$$p||Me,Z=this;return ue.$$p=null,he(we.$context(),"section")&&Z.$assign_numeral(we),E(Z,a(Z,"<<",ue,!1,!0),"<<",[we],ge)}),ve(rt,"$to_s",function ue(){var we=ue.$$p||Me,ge=this,Z=Me;return ue.$$p=null,pe(ge.title)?(Z=pe(ge.numbered)?""+ge.$sectnum()+" "+ge.title:ge.title,"#<"+ge.$class()+"@"+ge.$object_id()+" {level: "+ge.level+", title: "+Z.$inspect()+", blocks: "+ge.blocks.$size()+"}>"):E(ge,a(ge,"to_s",ue,!1,!0),"to_s",[],we)}),Be(rt,"$generate_id",function(we,ge){var Z,$e=Me,Y=Me,z=Me,R=Me,V=Me,K=Me,J=Me,M=Me,_=Me,r=Me;if($e=ge.$attributes(),Y=pe(z=$e["$[]"]("idprefix"))?z:"_",pe(R=$e["$[]"]("idseparator"))?(he(R.$length(),1)||Ue(V=R["$empty?"]())&&pe(R=(Z=["idseparator",R.$chr()],Ae($e,"[]=",Z),Z[Z.length-1])))&&(K=he(R,"-")||he(R,".")?" .-":" "+R+".-"):(Z=["_"," _.-"],R=Z[0],K=Z[1]),J=""+Y+we.$downcase().$gsub(T("InvalidSectionIdCharsRx"),""),pe(V)?J=J.$delete(" "):(J=J.$tr_s(K,R),pe(J["$end_with?"](R))&&(J=J.$chop()),pe(Y["$empty?"]())&&pe(J["$start_with?"](R))&&(J=J.$slice(1,J.$length()))),pe(ge.$catalog()["$[]"]("refs")["$key?"](J))){for(M=ge.$catalog()["$[]"]("refs"),_=T("Compliance").$unique_id_start_index();pe(M["$[]"](r=""+J+R+_));)_=N(_,1);return r}else return J})}(it[0],C("AbstractBlock"),it)}(st[0],st)},Opal.modules["asciidoctor/stylesheets"]=function(t){var g=t.module,u=t.klass,$=t.const_set,E=t.return_ivar,a=t.defs,k=t.def,pe=t.truthy,N=t.hash2,ve=[],w=t.nil,Ge=t.$$$;return t.add_stubs("join,new,rstrip,read,primary_stylesheet_data,write,primary_stylesheet_name,stylesheet_basename,for,read_stylesheet,coderay_stylesheet_data,coderay_stylesheet_name,pygments_stylesheet_data,pygments_stylesheet_name"),function(he,Ue){var Ae=g(he,"Asciidoctor"),Be=[Ae].concat(Ue);return function(st,Me,et){var Pe=u(st,Me,"Stylesheets"),Ve=[Pe].concat(et),it=t.$r(Ve),C=Pe.$$prototype;return C.primary_stylesheet_data=w,$(Ve[0],"DEFAULT_STYLESHEET_NAME","asciidoctor.css"),$(Ve[0],"STYLESHEETS_DIR",Ge("File").$join(it("DATA_DIR"),"stylesheets")),Pe.__instance__=Pe.$new(),a(Pe,"$instance",E("__instance__")),k(Pe,"$primary_stylesheet_name",function(){return it("DEFAULT_STYLESHEET_NAME")}),k(Pe,"$primary_stylesheet_data",function(){var y=this,Ze=w;return y.primary_stylesheet_data=pe(Ze=y.primary_stylesheet_data)?Ze:Ge("File").$read(Ge("File").$join(it("STYLESHEETS_DIR"),"asciidoctor-default.css"),N(["mode"],{mode:it("FILE_READ_MODE")})).$rstrip()}),k(Pe,"$embed_primary_stylesheet",function(){var y=this;return`<style>
`+y.$primary_stylesheet_data()+`
</style>`}),k(Pe,"$write_primary_stylesheet",function(y){var Ze=this;return y==null&&(y="."),Ge("File").$write(Ge("File").$join(y,Ze.$primary_stylesheet_name()),Ze.$primary_stylesheet_data(),N(["mode"],{mode:it("FILE_WRITE_MODE")}))},-1),k(Pe,"$coderay_stylesheet_name",function(){return it("SyntaxHighlighter").$for("coderay").$stylesheet_basename()}),k(Pe,"$coderay_stylesheet_data",function(){return it("SyntaxHighlighter").$for("coderay").$read_stylesheet()}),k(Pe,"$embed_coderay_stylesheet",function(){var y=this;return`<style>
`+y.$coderay_stylesheet_data()+`
</style>`}),k(Pe,"$write_coderay_stylesheet",function(y){var Ze=this;return y==null&&(y="."),Ge("File").$write(Ge("File").$join(y,Ze.$coderay_stylesheet_name()),Ze.$coderay_stylesheet_data(),N(["mode"],{mode:it("FILE_WRITE_MODE")}))},-1),k(Pe,"$pygments_stylesheet_name",function(y){return y==null&&(y=w),it("SyntaxHighlighter").$for("pygments").$stylesheet_basename(y)},-1),k(Pe,"$pygments_stylesheet_data",function(y){return y==null&&(y=w),it("SyntaxHighlighter").$for("pygments").$read_stylesheet(y)},-1),k(Pe,"$embed_pygments_stylesheet",function(y){var Ze=this;return y==null&&(y=w),`<style>
`+Ze.$pygments_stylesheet_data(y)+`
</style>`},-1),k(Pe,"$write_pygments_stylesheet",function(y,Ze){var rt=this;return y==null&&(y="."),Ze==null&&(Ze=w),Ge("File").$write(Ge("File").$join(y,rt.$pygments_stylesheet_name(Ze)),rt.$pygments_stylesheet_data(Ze),N(["mode"],{mode:it("FILE_WRITE_MODE")}))},-1)}(Be[0],null,Be)}(ve[0],ve)},Opal.modules["asciidoctor/table"]=function(t){var g=t.module,u=t.klass,$=t.const_set,E=t.def,a=t.alias,k=t.hash2,pe=t.send2,N=t.find_super,ve=t.truthy,w=t.rb_lt,Ge=t.rb_gt,he=t.eqeq,Ue=t.rb_times,Ae=t.rb_divide,Be=t.send,st=t.rb_plus,Me=t.rb_minus,et=t.return_val,Pe=t.to_a,Ve=t.gvars,it=t.neqeq,C=t.return_ivar,Xe=t.to_ary,y=t.regexp,Ze=t.not,rt=t.thrower,H=[],T=t.nil,De=t.$$$;return t.add_stubs("attr_accessor,send,attr_reader,new,[],<,>,to_i,==,[]=,attributes,truncate,*,/,to_f,empty?,body,each,<<,size,+,assign_column_widths,warn,logger,-,update_attributes,assign_width,round,head=,map,shift,reinitialize,nil?,unshift,foot=,pop,parent,sourcemap,dup,header_row?,table,style,merge,delete,start_with?,rstrip,slice,length,advance,lstrip,strip,split,include?,readlines,catalog_inline_anchor,=~,apply_subs,attr_writer,convert,text,!=,file,lineno,include,to_set,mark,key?,nested?,document,error,message_with_context,cursor_at_prev_line,nil_or_empty?,escape,columns,match,chop,end_with?,gsub,!,push_cellspec,cell_open?,close_cell,take_cellspec,squeeze,upto,times,cursor_before_mark,rowspan,activate_rowspan,colspan,end_of_row?,close_row,private,rows,effective_column_visits"),function(ue,we){var ge=g(ue,"Asciidoctor"),Z=[ge].concat(we),$e=t.$r(Z);return function(Y,z,R){var V=u(Y,z,"Table"),K=[V].concat(R),J=t.$r(K),M=V.$$prototype;return M.attributes=M.document=M.rows=M.has_header_option=M.columns=T,$(K[0],"DEFAULT_PRECISION",4),function(_,r){var f=u(_,r,"Rows"),A=f.$$prototype;return A.head=A.body=A.foot=T,f.$attr_accessor("head","foot","body"),E(f,"$initialize",function(d,B,D){var Q=this;return d==null&&(d=[]),B==null&&(B=[]),D==null&&(D=[]),Q.head=d,Q.foot=B,Q.body=D},-1),a(f,"[]","send"),E(f,"$by_section",function(){var d=this;return[["head",d.head],["body",d.body],["foot",d.foot]]}),E(f,"$to_h",function(){var d=this;return k(["head","body","foot"],{head:d.head,body:d.body,foot:d.foot})})}(K[0],null),V.$attr_accessor("columns"),V.$attr_accessor("rows"),V.$attr_accessor("has_header_option"),V.$attr_reader("caption"),E(V,"$initialize",function _(r,f){var A;_.$$p;var b=this,d=T,B=T,D=T;return _.$$p=null,pe(b,N(b,"initialize",_,!1,!0),"initialize",[r,"table"],null),b.rows=J("Rows").$new(),b.columns=[],b.has_header_option=!1,ve(d=f["$[]"]("width"))?(ve(Ge(B=d.$to_i(),100))||ve(w(B,1)))&&(he(B,0)&&(he(d,"0")||he(d,"0%"))||(B=100)):B=100,b.attributes["$[]="]("tablepcwidth",B),ve(b.document.$attributes()["$[]"]("pagewidth"))&&b.attributes["$[]="]("tableabswidth",he(D=Ue(Ae(B,100),b.document.$attributes()["$[]"]("pagewidth").$to_f()).$truncate(J("DEFAULT_PRECISION")),D.$to_i())?D.$to_i():D),ve(f["$[]"]("rotate-option"))?(A=["orientation","landscape"],Be(b.attributes,"[]=",A),A[A.length-1]):T}),E(V,"$header_row?",function(){var r=this,f=T;return ve(f=r.has_header_option)&&ve(r.rows.$body()["$empty?"]())?f:T}),E(V,"$create_columns",function(r){var f=this,A=T,b=T,d=T,B=T;return A=[],b=T,d=0,Be(r,"each",[],function D(Q){var X=D.$$s==null?this:D.$$s,ce=T,Re=T;return Q==null&&(Q=T),ce=Q["$[]"]("width"),A["$<<"](J("Column").$new(X,A.$size(),Q)),ve(w(ce,0))?(b=ve(Re=b)?Re:[])["$<<"](A["$[]"](-1)):d=st(d,ce)},{$$s:f}),ve(Ge(B=(f.columns=A).$size(),0))&&(f.attributes["$[]="]("colcount",B),ve(Ge(d,0))||ve(b)||(d=T),f.$assign_column_widths(d,b)),T}),E(V,"$assign_column_widths",function(r,f){var A=this,b=T,d=T,B=T,D=T,Q=T;return r==null&&(r=T),f==null&&(f=T),b=J("DEFAULT_PRECISION"),d=B=0,ve(r)?(ve(f)&&(ve(Ge(r,100))?(D=0,A.$logger().$warn("total column width must not exceed 100% when using autowidth columns; got "+r+"%")):(D=Ae(Me(100,r),f.$size()).$truncate(b),he(D.$to_i(),D)&&(D=D.$to_i()),r=100),Q=k(["width","autowidth-option"],{width:D,"autowidth-option":""}),Be(f,"each",[],function(ce){return ce==null&&(ce=T),ce.$update_attributes(Q)})),Be(A.columns,"each",[],function(ce){return ce==null&&(ce=T),d=st(d,B=ce.$assign_width(T,r,b))})):(B=Ae(100,A.columns.$size()).$truncate(b),he(B.$to_i(),B)&&(B=B.$to_i()),Be(A.columns,"each",[],function(ce){return ce==null&&(ce=T),d=st(d,ce.$assign_width(B,T,b))})),he(d,100)||A.columns["$[]"](-1).$assign_width(st(Me(100,d),B).$round(b),T,b),T},-1),E(V,"$partition_header_footer",function(r){var f,A=this,b=T,d=T;return b=(f=["rowcount",(d=A.rows.$body()).$size()],Be(A.attributes,"[]=",f),f[f.length-1]),ve(Ge(b,0))&&(ve(A.has_header_option)?(A.rows["$head="]([Be(d.$shift(),"map",[],function(D){return D==null&&(D=T),D.$reinitialize(!0)})]),b=Me(b,1)):ve(A.has_header_option["$nil?"]())&&(A.has_header_option=!1,d.$unshift(Be(d.$shift(),"map",[],function(D){return D==null&&(D=T),D.$reinitialize(!1)})))),ve(Ge(b,0))&&ve(r["$[]"]("footer-option"))&&A.rows["$foot="]([d.$pop()]),T})}(Z[0],$e("AbstractBlock"),Z),function(Y,z){var R=u(Y,z,"Column"),V=R.$$prototype;return V.attributes=T,R.$attr_accessor("style"),E(R,"$initialize",function K(J,M,_){K.$$p;var r=this;return K.$$p=null,_==null&&(_=k([],{})),pe(r,N(r,"initialize",K,!1,!0),"initialize",[J,"table_column"],null),r.style=_["$[]"]("style"),_["$[]="]("colnumber",st(M,1)),ve(_["$[]"]("width"))||_["$[]="]("width",1),ve(_["$[]"]("halign"))||_["$[]="]("halign","left"),ve(_["$[]"]("valign"))||_["$[]="]("valign","top"),r.$update_attributes(_)},-3),a(R,"table","parent"),E(R,"$assign_width",function(J,M,_){var r,f=this,A=T;return ve(M)&&(J=Ae(Ue(f.attributes["$[]"]("width").$to_f(),100),M).$truncate(_),he(J.$to_i(),J)&&(J=J.$to_i())),ve(f.$parent().$attributes()["$[]"]("tableabswidth"))&&f.attributes["$[]="]("colabswidth",he(A=Ue(Ae(J,100),f.$parent().$attributes()["$[]"]("tableabswidth")).$truncate(_),A.$to_i())?A.$to_i():A),r=["colpcwidth",J],Be(f.attributes,"[]=",r),r[r.length-1]}),E(R,"$block?",et(!1)),E(R,"$inline?",et(!1))}($e("Table"),$e("AbstractNode")),function(Y,z,R){var V=u(Y,z,"Cell"),K=[V].concat(R),J=t.$r(K),M=V.$$prototype;return M.document=M.reinitialize_args=M.attributes=M.cursor=M.text=M.subs=M.style=M.inner_document=M.source_location=M.colspan=M.rowspan=T,$(K[0],"DOUBLE_LF",Ue(J("LF"),2)),V.$attr_accessor("colspan"),V.$attr_accessor("rowspan"),a(V,"column","parent"),V.$attr_reader("inner_document"),E(V,"$initialize",function _(r,f,A,b){var d;_.$$p;var B=this,D=T,Q=T,X=T,ce=T,Re=T,Ye=T,Qe=T,ot=T,tt=T,at=T,ct=T,ft=T,ut=T;if(_.$$p=null,A==null&&(A=k([],{})),b==null&&(b=k([],{})),pe(B,N(B,"initialize",_,!1,!0),"initialize",[r,"table_cell"],null),B.cursor=B.reinitialize_args=T,ve(B.document.$sourcemap())&&(B.source_location=b["$[]"]("cursor").$dup()),ve(r)&&(ve(D=r.$table()["$header_row?"]())?he(D,"implicit")&&ve(Q=ve(X=r.$style())?X:ve(ce=A)?A["$[]"]("style"):ce)&&((he(Q,"asciidoc")||he(Q,"literal"))&&(B.reinitialize_args=[r,f,ve(X=A)?A.$merge():X,b]),Q=T):Q=r.$style(),B.$update_attributes(r.$attributes())),ve(A))switch(ve(A["$empty?"]())?B.colspan=B.rowspan=T:(d=[A.$delete("colspan"),A.$delete("rowspan")],B.colspan=d[0],B.rowspan=d[1],ve(D)||(Q=ve(X=A["$[]"]("style"))?X:Q),B.$update_attributes(A)),Q){case"asciidoc":if(Re=!0,Ye=b["$[]"]("cursor"),ve((f=f.$rstrip())["$start_with?"](J("LF")))){for(Qe=1;ve((f=f.$slice(1,f.$length()))["$start_with?"](J("LF")));)Qe=st(Qe,1);Ye.$advance(Qe)}else f=f.$lstrip();break;case"literal":for(ot=!0,f=f.$rstrip();ve(f["$start_with?"](J("LF")));)f=f.$slice(1,f.$length());break;default:tt=!0,f=ve(f)?f.$strip():""}else B.colspan=B.rowspan=T,he(Q,"asciidoc")&&(Re=!0,Ye=b["$[]"]("cursor"));return ve(Re)?(at=B.document.$attributes().$delete("doctitle"),ct=f.$split(J("LF"),-1),ve(ct["$empty?"]())||ve((ft=ct["$[]"](0))["$include?"]("::"))&&(ut=J("PreprocessorReader").$new(B.document,[ft]).$readlines(),he(ft,ut["$[]"](0))&&ve(w(ut.$size(),2))||(ct.$shift(),ve(ut["$empty?"]())||Be(ct,"unshift",Pe(ut)))),B.inner_document=J("Document").$new(ct,k(["standalone","parent","cursor"],{standalone:!1,parent:B.document,cursor:Ye})),ve(at["$nil?"]())||B.document.$attributes()["$[]="]("doctitle",at),B.subs=T):ve(ot)?(B.content_model="verbatim",B.subs=J("BASIC_SUBS")):(ve(tt)&&(ve(D)?B.cursor=b["$[]"]("cursor"):B.$catalog_inline_anchor(f,b["$[]"]("cursor"))),B.content_model="simple",B.subs=J("NORMAL_SUBS")),B.text=f,B.style=Q},-3),E(V,"$reinitialize",function(r){var f=this;if(ve(r))f.reinitialize_args=T;else{if(ve(f.reinitialize_args))return Be(De(J("Table"),"Cell"),"new",Pe(f.reinitialize_args));f.style=f.attributes["$[]"]("style")}return ve(f.cursor)&&f.$catalog_inline_anchor(),f}),E(V,"$catalog_inline_anchor",function(r,f){var A,b=this;return r==null&&(r=b.text),f==null&&(f=T),ve(f)||(A=[b.cursor,T],f=A[0],b.cursor=A[1]),ve(r["$start_with?"]("[["))&&ve(J("LeadingInlineAnchorRx")["$=~"](r))?J("Parser").$catalog_inline_anchor((A=Ve["~"])===T?T:A["$[]"](1),(A=Ve["~"])===T?T:A["$[]"](2),b,f,b.document):T},-1),E(V,"$text",function(){var r=this;return r.$apply_subs(r.text,r.subs)}),V.$attr_writer("text"),E(V,"$content",function(){var r=this,f=T,A=T;return he(f=r.style,"asciidoc")?r.inner_document.$convert():ve(r.text["$include?"](J("DOUBLE_LF")))?Be(r.$text().$split(J("BlankLineRx")),"map",[],function b(d){var B=b.$$s==null?this:b.$$s;return d==null&&(d=T),ve(f)&&it(f,"header")?J("Inline").$new(B.$parent(),"quoted",d,k(["type"],{type:f})).$convert():d},{$$s:r}):ve((A=r.$text())["$empty?"]())?[]:ve(f)&&it(f,"header")?[J("Inline").$new(r.$parent(),"quoted",A,k(["type"],{type:f})).$convert()]:[A]}),E(V,"$lines",function(){var r=this;return r.text.$split(J("LF"))}),E(V,"$source",C("text")),E(V,"$file",function(){var r=this,f=T;return ve(f=r.source_location)?r.source_location.$file():f}),E(V,"$lineno",function(){var r=this,f=T;return ve(f=r.source_location)?r.source_location.$lineno():f}),E(V,"$to_s",function _(){var r=_.$$p||T,f=this,A=T;return _.$$p=null,""+pe(f,N(f,"to_s",_,!1,!0),"to_s",[],r)+" - [text: "+f.text+", colspan: "+(ve(A=f.colspan)?A:1)+", rowspan: "+(ve(A=f.rowspan)?A:1)+", attributes: "+f.attributes+"]"})}($e("Table"),$e("AbstractBlock"),Z),function(Y,z,R){var V=u(Y,z,"ParserContext"),K=[V].concat(R),J=t.$r(K),M=V.$$prototype;return M.delimiter=M.delimiter_rx=M.buffer=M.cellspecs=M.cell_open=M.format=M.start_cursor_data=M.reader=M.table=M.current_row=M.colcount=M.column_visits=M.active_rowspans=M.linenum=T,V.$include(J("Logging")),$(K[0],"FORMATS",["psv","csv","dsv","tsv"].$to_set()),$(K[0],"DELIMITERS",k(["psv","csv","dsv","tsv","!sv"],{psv:["|",/\|/],csv:[",",/,/],dsv:[":",/:/],tsv:["	",/\t/],"!sv":["!",/!/]})),V.$attr_accessor("table"),V.$attr_accessor("format"),V.$attr_reader("colcount"),V.$attr_accessor("buffer"),V.$attr_reader("delimiter"),V.$attr_reader("delimiter_re"),E(V,"$initialize",function(r,f,A){var b,d,B=this,D=T,Q=T;return A==null&&(A=k([],{})),B.start_cursor_data=(B.reader=r).$mark(),B.table=f,ve(A["$key?"]("format"))?ve(J("FORMATS")["$include?"](D=A["$[]"]("format")))?he(D,"tsv")?B.format="csv":he(B.format=D,"psv")&&ve(f.$document()["$nested?"]())&&(D="!sv"):(B.$logger().$error(B.$message_with_context("illegal table format: "+D,k(["source_location"],{source_location:r.$cursor_at_prev_line()}))),b=["psv",ve(f.$document()["$nested?"]())?"!sv":"psv"],B.format=b[0],D=b[1]):(b=["psv",ve(f.$document()["$nested?"]())?"!sv":"psv"],B.format=b[0],D=b[1]),ve(A["$key?"]("separator"))?ve((Q=A["$[]"]("separator"))["$nil_or_empty?"]())?(d=J("DELIMITERS")["$[]"](D),b=Xe(d),B.delimiter=b[0]==null?T:b[0],B.delimiter_rx=b[1]==null?T:b[1]):he(Q,"\\t")?(d=J("DELIMITERS")["$[]"]("tsv"),b=Xe(d),B.delimiter=b[0]==null?T:b[0],B.delimiter_rx=b[1]==null?T:b[1]):(b=[Q,y([De("Regexp").$escape(Q)])],B.delimiter=b[0],B.delimiter_rx=b[1]):(d=J("DELIMITERS")["$[]"](D),b=Xe(d),B.delimiter=b[0]==null?T:b[0],B.delimiter_rx=b[1]==null?T:b[1]),B.colcount=ve(f.$columns()["$empty?"]())?-1:f.$columns().$size(),B.buffer="",B.cellspecs=[],B.cell_open=!1,B.active_rowspans=[0],B.column_visits=0,B.current_row=[],B.linenum=-1},-3),E(V,"$starts_with_delimiter?",function(r){var f=this;return r["$start_with?"](f.delimiter)}),E(V,"$match_delimiter",function(r){var f=this;return f.delimiter_rx.$match(r)}),E(V,"$skip_past_delimiter",function(r){var f=this;return f.buffer=""+f.buffer+r+f.delimiter,T}),E(V,"$skip_past_escaped_delimiter",function(r){var f=this;return f.buffer=""+f.buffer+r.$chop()+f.delimiter,T}),E(V,"$buffer_has_unclosed_quotes?",function(r,f){var A=this,b=T,d=T,B=T,D=T;return r==null&&(r=T),f==null&&(f='"'),he(b=ve(r)?st(A.buffer,r).$strip():A.buffer.$strip(),f)?!0:ve(b["$start_with?"](f))?(d=st(f,f),ve(B=b["$end_with?"](f))&&ve(b["$end_with?"](d))||ve(b["$start_with?"](d))?ve(D=(b=b.$gsub(d,""))["$start_with?"](f))?b["$end_with?"](f)["$!"]():D:B["$!"]()):!1},-1),E(V,"$take_cellspec",function(){var r=this;return r.cellspecs.$shift()}),E(V,"$push_cellspec",function(r){var f=this,A=T;return r==null&&(r=k([],{})),f.cellspecs["$<<"](ve(A=r)?A:k([],{})),T},-1),E(V,"$keep_cell_open",function(){var r=this;return r.cell_open=!0,T}),E(V,"$mark_cell_closed",function(){var r=this;return r.cell_open=!1,T}),E(V,"$cell_open?",C("cell_open")),E(V,"$cell_closed?",function(){var r=this;return r.cell_open["$!"]()}),E(V,"$close_open_cell",function(r){var f=this;return r==null&&(r=k([],{})),f.$push_cellspec(r),ve(f["$cell_open?"]())&&f.$close_cell(!0),f.$advance(),T},-1),E(V,"$close_cell",function(r){try{var f=rt("return"),A=this,b=T,d=T,B=T,D=T,Q=T;return r==null&&(r=!1),he(A.format,"psv")?(b=A.buffer,A.buffer="",ve(d=A.$take_cellspec())?B=ve(D=d.$delete("repeatcol"))?D:1:(A.$logger().$error(A.$message_with_context("table missing leading separator; recovering automatically",k(["source_location"],{source_location:Be(De(J("Reader"),"Cursor"),"new",Pe(A.start_cursor_data))}))),d=k([],{}),B=1)):(b=A.buffer.$strip(),A.buffer="",d=T,B=1,he(A.format,"csv")&&Ze(b["$empty?"]())&&ve(b["$include?"](Q='"'))&&(ve(b["$start_with?"](Q))&&ve(b["$end_with?"](Q))?ve(b=b.$slice(1,Me(b.$length(),2)))?b=b.$strip().$squeeze(Q):(A.$logger().$error(A.$message_with_context("unclosed quote in CSV data; setting cell to empty",k(["source_location"],{source_location:A.reader.$cursor_at_prev_line()}))),b=""):b=b.$squeeze(Q))),Be(1,"upto",[B],function X(ce){var Re=X.$$s==null?this:X.$$s,Ye=T,Qe=T,ot=T,tt=T;return Re.colcount==null&&(Re.colcount=T),Re.table==null&&(Re.table=T),Re.current_row==null&&(Re.current_row=T),Re.reader==null&&(Re.reader=T),Re.column_visits==null&&(Re.column_visits=T),Re.linenum==null&&(Re.linenum=T),ce==null&&(ce=T),he(Re.colcount,-1)?(Re.table.$columns()["$<<"](Ye=De(J("Table"),"Column").$new(Re.table,Me(st(Re.table.$columns().$size(),ce),1))),ve(d)&&ve(d["$key?"]("colspan"))&&ve(Ge(Qe=Me(d["$[]"]("colspan").$to_i(),1),0))&&(ot=Re.table.$columns().$size(),Be(Qe,"times",[],function at(ct){var ft=at.$$s==null?this:at.$$s;return ft.table==null&&(ft.table=T),ct==null&&(ct=T),ft.table.$columns()["$<<"](De(J("Table"),"Column").$new(ft.table,st(ot,ct)))},{$$s:Re}))):ve(Ye=Re.table.$columns()["$[]"](Re.current_row.$size()))||(Re.$logger().$error(Re.$message_with_context("dropping cell because it exceeds specified number of columns",k(["source_location"],{source_location:Re.reader.$cursor_before_mark()}))),f.$throw()),tt=De(J("Table"),"Cell").$new(Ye,b,d,k(["cursor"],{cursor:Re.reader.$cursor_before_mark()})),Re.reader.$mark(),Ze(tt.$rowspan())||he(tt.$rowspan(),1)||Re.$activate_rowspan(tt.$rowspan(),ve(D=tt.$colspan())?D:1),Re.column_visits=st(Re.column_visits,ve(D=tt.$colspan())?D:1),Re.current_row["$<<"](tt),ve(Re["$end_of_row?"]())&&(it(Re.colcount,-1)||ve(Ge(Re.linenum,0))||ve(r)&&he(ce,B))?Re.$close_row():T},{$$s:A,$$ret:f}),A.cell_open=!1,T}catch(X){if(X===f)return X.$v;throw X}},-1),V.$private(),E(V,"$close_row",function(){var r=this;return r.table.$rows().$body()["$<<"](r.current_row),he(r.colcount,-1)&&(r.colcount=r.column_visits),r.column_visits=0,r.current_row=[],r.active_rowspans.$shift(),ve(r.active_rowspans["$[]"](0))||r.active_rowspans["$[]="](0,0),T}),E(V,"$activate_rowspan",function(r,f){var A=this;return Be(1,"upto",[Me(r,1)],function b(d){var B,D=b.$$s==null?this:b.$$s,Q=T;return D.active_rowspans==null&&(D.active_rowspans=T),d==null&&(d=T),B=[d,st(ve(Q=D.active_rowspans["$[]"](d))?Q:0,f)],Be(D.active_rowspans,"[]=",B),B[B.length-1]},{$$s:A}),T}),E(V,"$end_of_row?",function(){var r=this,f=T;return ve(f=r.colcount["$=="](-1))?f:r.$effective_column_visits()["$=="](r.colcount)}),E(V,"$effective_column_visits",function(){var r=this;return st(r.column_visits,r.active_rowspans["$[]"](0))}),E(V,"$advance",function(){var r=this;return r.linenum=st(r.linenum,1)})}($e("Table"),null,Z)}(H[0],H)},Opal.modules["asciidoctor/writer"]=function(t){var g=t.module,u=t.truthy,$=t.rb_plus,E=t.hash2,a=t.def,k=t.return_val,pe=[],N=t.nil,ve=t.$$$;return t.add_stubs("respond_to?,write,+,chomp,include"),function(w,Ge){var he=g(w,"Asciidoctor"),Ue=[he].concat(Ge);return function(Ae,Be){var st=g(Ae,"Writer"),Me=[st].concat(Be),et=t.$r(Me);return a(st,"$write",function(Ve,it){return u(it["$respond_to?"]("write"))?it.$write($(Ve.$chomp(),et("LF"))):ve("File").$write(it,Ve,E(["mode"],{mode:et("FILE_WRITE_MODE")})),N})}(Ue[0],Ue),function(Ae,Be){var st=g(Ae,"VoidWriter"),Me=[st].concat(Be),et=t.$r(Me);return st.$include(et("Writer")),a(st,"$write",k(N))}(Ue[0],Ue)}(pe[0],pe)},Opal.modules["asciidoctor/load"]=function(t){var g=t.module,u=t.hash2,$=t.truthy,E=t.neqeq,a=t.not,k=t.eqeqeq,pe=t.send,N=t.to_ary,ve=t.rb_plus,w=t.eqeq,Ge=t.def,he=[],Ue=t.nil,Ae=t.$$$;return t.add_stubs("merge,[],start,!=,logger,key?,logger=,new,!,===,dup,tap,each,partition,[]=,split,gsub,+,respond_to?,keys,raise,join,ancestors,class,==,at,to_i,mtime,absolute_path,path,dirname,basename,extname,read,rewind,drop,record,parse,exception,message,set_backtrace,backtrace,stack_trace=,stack_trace,open,load"),function(Be,st){var Me=g(Be,"Asciidoctor"),et=[Me].concat(st);return function(Pe,Ve){var it=[Pe].concat(Ve),C=t.$r(it);return Ge(Pe,"$load",function(y,Ze){var rt,H,T,De,ue=this,we=Ue,ge=Ue,Z=Ue,$e=Ue,Y=Ue,z=Ue,R=Ue,V=Ue,K=Ue,J=Ue;Ze==null&&(Ze=u([],{}));try{if(Ze=Ze.$merge(),$(we=Ze["$[]"]("timings"))&&we.$start("read"),$(Ze["$key?"]("logger"))&&E(ge=Ze["$[]"]("logger"),C("LoggerManager").$logger())&&C("LoggerManager")["$logger="]($(Z=ge)?Z:C("NullLogger").$new()),a($e=Ze["$[]"]("attributes"))?$e=u([],{}):k(Ae("Hash"),$e)?$e=$e.$merge():$((T=Ae("::","Java","skip_raise"))&&(H=Ae(T,"JavaUtil","skip_raise"))&&(rt=Ae(H,"Map","skip_raise"))?"constant":Ue)&&k(Ae(Ae(Ae("Java"),"JavaUtil"),"Map"),$e)?$e=$e.$dup():k(Ae("Array"),$e)?$e=pe(u([],{}),"tap",[],function(_){return _==null&&(_=Ue),pe($e,"each",[],function(f){var A,b,d=Ue,B=Ue,D=Ue;return f==null&&(f=Ue),b=f.$partition("="),A=N(b),d=A[0]==null?Ue:A[0],B=A[1]==null?Ue:A[1],D=A[2]==null?Ue:A[2],A=[d,D],pe(_,"[]=",A),A[A.length-1]})}):k(Ae("String"),$e)?$e=pe(u([],{}),"tap",[],function(_){return _==null&&(_=Ue),pe($e.$gsub(C("SpaceDelimiterRx"),ve("\\1",C("NULL"))).$gsub(C("EscapedSpaceRx"),"\\1").$split(C("NULL")),"each",[],function(f){var A,b,d=Ue,B=Ue,D=Ue;return f==null&&(f=Ue),b=f.$partition("="),A=N(b),d=A[0]==null?Ue:A[0],B=A[1]==null?Ue:A[1],D=A[2]==null?Ue:A[2],A=[d,D],pe(_,"[]=",A),A[A.length-1]})}):$($e["$respond_to?"]("keys"))&&$($e["$respond_to?"]("[]"))?$e=pe(u([],{}),"tap",[],function(_){return _==null&&(_=Ue),pe($e.$keys(),"each",[],function(f){var A;return f==null&&(f=Ue),A=[f,$e["$[]"](f)],pe(_,"[]=",A),A[A.length-1]})}):ue.$raise(Ae("ArgumentError"),"illegal type for attributes option: "+$e.$class().$ancestors().$join(" < ")),k(Ae("File"),y))Ze["$[]="]("input_mtime",w(C("RUBY_ENGINE"),"jruby")?Ae("Time").$at(y.$mtime().$to_i()):y.$mtime()),$e["$[]="]("docfile",Y=Ae("File").$absolute_path(y.$path())),$e["$[]="]("docdir",Ae("File").$dirname(Y)),$e["$[]="]("docname",C("Helpers").$basename(Y,(De=["docfilesuffix",C("Helpers").$extname(Y)],pe($e,"[]=",De),De[De.length-1]))),z=y.$read();else if($(y["$respond_to?"]("read"))){try{y.$rewind()}catch(M){if(t.rescue(M,[C("StandardError")]))try{}finally{t.pop_exception()}else throw M}z=y.$read()}else k(Ae("String"),y)?z=y:k(Ae("Array"),y)?z=y.$drop(0):$(y)&&ue.$raise(Ae("ArgumentError"),"unsupported input type: "+y.$class());return $(we)&&(we.$record("read"),we.$start("parse")),Ze["$[]="]("attributes",$e),R=w(Ze["$[]"]("parse"),!1)?C("Document").$new(z,Ze):C("Document").$new(z,Ze).$parse(),$(we)&&we.$record("parse"),R}catch(M){if(t.rescue(M,[C("StandardError")])){V=M;try{try{K="asciidoctor: FAILED: "+($(Z=$e["$[]"]("docfile"))?Z:"<stdin>")+": Failed to load AsciiDoc document",$(V["$respond_to?"]("exception"))?(J=V.$exception(""+K+" - "+V.$message()),J.$set_backtrace(V.$backtrace())):(J=V.$class().$new(K,V),J["$stack_trace="](V.$stack_trace()))}catch(_){if(t.rescue(_,[C("StandardError")]))try{J=V}finally{t.pop_exception()}else throw _}return ue.$raise(J)}finally{t.pop_exception()}}else throw M}},-2),Ge(Pe,"$load_file",function(y,Ze){var rt=this;return Ze==null&&(Ze=u([],{})),pe(Ae("File"),"open",[y,C("FILE_READ_MODE")],function H(T){var De=H.$$s==null?this:H.$$s;return T==null&&(T=Ue),De.$load(T,Ze)},{$$s:rt})},-2)}(t.get_singleton_class(Me),et)}(he[0],he)},Opal.modules["asciidoctor/convert"]=function(t){var g=t.module,u=t.hash2,$=t.eqeqeq,E=t.truthy,a=t.eqeq,k=t.rb_ge,pe=t.not,N=t.rb_lt,ve=t.neqeq,w=t.def,Ge=t.send,he=t.alias,Ue=[],Ae=t.nil,Be=t.$$$;return t.add_stubs("delete,merge,===,absolute_path,path,load,respond_to?,[]=,key?,fetch,[],dirname,expand_path,join,attributes,outfilesuffix,==,raise,pwd,>=,safe,normalize_system_path,mkdir_p,directory?,!,convert,write,attr,uriish?,basebackend?,attr?,<,include?,syntax_highlighter,write_stylesheet?,write_primary_stylesheet,instance,to_s,read_asset,file?,!=,write_stylesheet,open,convert_file"),function(st,Me){var et=g(st,"Asciidoctor"),Pe=[et].concat(Me);return function(Ve,it){var C=[Ve].concat(it),Xe=t.$r(C);return w(Ve,"$convert",function(Ze,rt){var H=this,T=Ae,De=Ae,ue=Ae,we=Ae,ge=Ae,Z=Ae,$e=Ae,Y=Ae,z=Ae,R=Ae,V=Ae,K=Ae,J=Ae,M=Ae,_=Ae,r=Ae,f=Ae,A=Ae,b=Ae,d=Ae,B=Ae,D=Ae,Q=Ae,X=Ae;if(rt==null&&(rt=u([],{})),(rt=rt.$merge()).$delete("parse"),T=rt.$delete("to_dir"),De=rt.$delete("mkdirs"),$(!0,ue=we=rt.$delete("to_file"))||$(Ae,ue))E(ge=T)||$(Be("File"),Ze)&&(Z=Be("File").$absolute_path(Ze.$path())),we=Ae;else if($(!1,ue))we=Ae;else{if($("/dev/null",ue))return H.$load(Ze,rt);E($e=we["$respond_to?"]("write"))||rt["$[]="]("to_file",ge=we)}return E(rt["$key?"]("standalone"))||(E(Z)||E(ge)?rt["$[]="]("standalone",rt.$fetch("header_footer",!0)):E(rt["$key?"]("header_footer"))&&rt["$[]="]("standalone",rt["$[]"]("header_footer"))),E(Z)?rt["$[]="]("to_dir",Y=Be("File").$dirname(Z)):E(ge)&&(E(T)?E(we)?rt["$[]="]("to_dir",Be("File").$dirname(Be("File").$expand_path(we,T))):rt["$[]="]("to_dir",Be("File").$expand_path(T)):E(we)&&rt["$[]="]("to_dir",Be("File").$dirname(Be("File").$expand_path(we)))),z=H.$load(Ze,rt),E(Z)?(R=Be("File").$join(Y,""+z.$attributes()["$[]"]("docname")+z.$outfilesuffix()),a(R,Z)&&H.$raise(Be("IOError"),"input file and output file cannot be the same: "+R)):E(ge)?(V=E(rt["$key?"]("base_dir"))?Be("File").$expand_path(rt["$[]"]("base_dir")):Be("Dir").$pwd(),K=E(k(z.$safe(),Be(Xe("SafeMode"),"SAFE")))?V:Ae,E(T)?(Y=z.$normalize_system_path(T,V,K,u(["target_name","recover"],{target_name:"to_dir",recover:!1})),E(we)?(R=z.$normalize_system_path(we,Y,Ae,u(["target_name","recover"],{target_name:"to_dir",recover:!1})),Y=Be("File").$dirname(R)):R=Be("File").$join(Y,""+z.$attributes()["$[]"]("docname")+z.$outfilesuffix())):E(we)&&(R=z.$normalize_system_path(we,V,K,u(["target_name","recover"],{target_name:"to_dir",recover:!1})),Y=Be("File").$dirname(R)),$(Be("File"),Ze)&&a(R,Be("File").$absolute_path(Ze.$path()))&&H.$raise(Be("IOError"),"input file and output file cannot be the same: "+R),E(De)?Xe("Helpers").$mkdir_p(Y):E(Be("File")["$directory?"](Y))||H.$raise(Be("IOError"),"target directory does not exist: "+T+" (hint: set :mkdirs option)")):(R=we,Y=Ae),E(R)&&pe($e)?J=z.$convert(u(["outfile","outdir"],{outfile:R,outdir:Y})):J=z.$convert(),E(R)?(z.$write(J,R),pe($e)&&E(N(z.$safe(),Be(Xe("SafeMode"),"SECURE")))&&E(z["$attr?"]("linkcss"))&&E(z["$attr?"]("copycss"))&&E(z["$basebackend?"]("html"))&&pe(E(ue=M=z.$attr("stylesdir"))?Xe("Helpers")["$uriish?"](M):ue)&&(E(_=z.$attr("stylesheet"))&&(E(Xe("DEFAULT_STYLESHEET_KEYS")["$include?"](_))?r=!0:pe(Xe("Helpers")["$uriish?"](_))&&(f=!0)),A=E(ue=b=z.$syntax_highlighter())?b["$write_stylesheet?"](z):ue,(E(r)||E(f)||E(A))&&(d=z.$normalize_system_path(M,Y,E(k(z.$safe(),Be(Xe("SafeMode"),"SAFE")))?Y:Ae),E(De)?Xe("Helpers").$mkdir_p(d):E(Be("File")["$directory?"](d))||H.$raise(Be("IOError"),"target stylesheet directory does not exist: "+d+" (hint: set :mkdirs option)"),E(r)?Xe("Stylesheets").$instance().$write_primary_stylesheet(d):E(f)&&(a(B=z.$attr("copycss"),"")||a(B,!0)?B=z.$normalize_system_path(_):B=z.$normalize_system_path(B.$to_s()),D=z.$normalize_system_path(_,d,E(k(z.$safe(),Be(Xe("SafeMode"),"SAFE")))?Y:Ae),ve(B,D)&&E(Q=z.$read_asset(B,u(["warn_on_failure","label"],{warn_on_failure:Be("File")["$file?"](D)["$!"](),label:"stylesheet"})))&&(ve(X=Be("File").$dirname(D),d)&&pe(Be("File")["$directory?"](X))&&(E(De)?Xe("Helpers").$mkdir_p(X):H.$raise(Be("IOError"),"target stylesheet directory does not exist: "+X+" (hint: set :mkdirs option)")),Be("File").$write(D,Q,u(["mode"],{mode:Xe("FILE_WRITE_MODE")})))),E(A)&&b.$write_stylesheet(z,d))),z):J},-2),w(Ve,"$convert_file",function(Ze,rt){var H=this;return rt==null&&(rt=u([],{})),Ge(Be("File"),"open",[Ze,Xe("FILE_READ_MODE")],function T(De){var ue=T.$$s==null?this:T.$$s;return De==null&&(De=Ae),ue.$convert(De,rt)},{$$s:H})},-2),he(Ve,"render","convert"),he(Ve,"render_file","convert_file")}(t.get_singleton_class(et),Pe)}(Ue[0],Ue)},Opal.modules["asciidoctor/syntax_highlighter/highlightjs"]=function(t){var g=t.module,u=t.klass,$=t.slice,E=t.send2,a=t.find_super,k=t.to_a,pe=t.def,N=t.hash2,ve=t.send,w=t.truthy,Ge=t.return_val,he=t.eqeq,Ue=[],Ae=t.nil,Be=t.$$$;return t.add_stubs("register_for,merge,proc,[]=,attr,[],==,attr?,join,map,split,lstrip"),function(st,Me){var et=g(st,"Asciidoctor"),Pe=[et].concat(Me),Ve=t.$r(Pe);return function(it,C,Xe){var y=u(it,C,"HighlightJsAdapter"),Ze=[y].concat(Xe),rt=t.$r(Ze);return y.$register_for("highlightjs","highlight.js"),pe(y,"$initialize",function H(T){var De,ue,we=H.$$p||Ae,ge=this;return H.$$p=null,De=$(arguments),ue=De,E(ge,a(ge,"initialize",H,!1,!0),"initialize",k(ue),we),ge.name=ge.pre_class="highlightjs"},-1),pe(y,"$format",function H(T,De,ue){H.$$p;var we=this;return H.$$p=null,E(we,a(we,"format",H,!1,!0),"format",[T,De,ue.$merge(N(["transform"],{transform:ve(we,"proc",[],function(Z,$e){var Y,z=Ae;return $e==null&&($e=Ae),Y=["class","language-"+(w(z=De)?z:"none")+" hljs"],ve($e,"[]=",Y),Y[Y.length-1]})}))],null)}),pe(y,"$docinfo?",Ge(!0)),pe(y,"$docinfo",function(T,De,ue){var we=Ae;return we=De.$attr("highlightjsdir",""+ue["$[]"]("cdn_base_url")+"/highlight.js/"+rt("HIGHLIGHT_JS_VERSION")),he(T,"head")?'<link rel="stylesheet" href="'+we+"/styles/"+De.$attr("highlightjs-theme","github")+'.min.css"'+ue["$[]"]("self_closing_tag_slash")+">":'<script src="'+we+`/highlight.min.js"><\/script>
`+(w(De["$attr?"]("highlightjs-languages"))?ve(De.$attr("highlightjs-languages").$split(","),"map",[],function(Z){return Z==null&&(Z=Ae),'<script src="'+we+"/languages/"+Z.$lstrip()+`.min.js"><\/script>
`}).$join():"")+`<script>
if (!hljs.initHighlighting.called) {
  hljs.initHighlighting.called = true
  ;[].slice.call(document.querySelectorAll('pre.highlight > code[data-lang]')).forEach(function (el) { hljs.highlightBlock(el) })
}
<\/script>`})}(Ve("SyntaxHighlighter"),Be(Ve("SyntaxHighlighter"),"Base"),Pe)}(Ue[0],Ue)},Opal.modules["asciidoctor/syntax_highlighter"]=function(t){var g=t.module,u=t.hash2,$=t.def,E=t.return_val,a=t.defs,k=t.slice,pe=t.send,N=t.to_a,ve=t.truthy,w=t.eqeqeq,Ge=t.Class,he=t.klass,Ue=t.class_variable_set,Ae=t.class_variable_get,Be=t.top,st=[],Me=t.nil,et=t.$$$;return t.add_stubs("attr_reader,raise,class,extend,private_class_method,register,map,to_s,each,[]=,registry,[],for,===,new,name,private,include,delete,join,content"),function(Pe,Ve){var it=g(Pe,"Asciidoctor"),C=[it].concat(Ve);return function(Xe,y){var Ze=g(Xe,"SyntaxHighlighter"),rt=[Ze].concat(y),H=t.$r(rt);return Ze.$attr_reader("name"),$(Ze,"$initialize",function(De,ue,we){var ge=this;return we==null&&(we=u([],{})),ge.name=ge.pre_class=De},-2),$(Ze,"$docinfo?",E(Me)),$(Ze,"$docinfo",function(De,ue,we){var ge=this;return ge.$raise(et("NotImplementedError"),""+H("SyntaxHighlighter")+" subclass "+ge.$class()+" must implement the #docinfo method since #docinfo? returns true")}),$(Ze,"$highlight?",E(Me)),$(Ze,"$highlight",function(De,ue,we,ge){var Z=this;return Z.$raise(et("NotImplementedError"),""+H("SyntaxHighlighter")+" subclass "+Z.$class()+" must implement the #highlight method since #highlight? returns true")}),$(Ze,"$format",function(De,ue,we){var ge=this;return ge.$raise(et("NotImplementedError"),""+H("SyntaxHighlighter")+" subclass "+ge.$class()+" must implement the #format method")}),$(Ze,"$write_stylesheet?",E(Me)),$(Ze,"$write_stylesheet",function(De,ue){var we=this;return we.$raise(et("NotImplementedError"),""+H("SyntaxHighlighter")+" subclass "+we.$class()+" must implement the #write_stylesheet method since #write_stylesheet? returns true")}),a(Ze,"$included",function(De){return De.$extend(H("Config"))}),Ze.$private_class_method("included"),function(T,De){var ue=g(T,"Config"),we=[ue].concat(De),ge=t.$r(we);return $(ue,"$register_for",function($e){var Y,z,R=this;return Y=k(arguments),z=Y,pe(ge("SyntaxHighlighter"),"register",[R].concat(N(pe(z,"map",[],function(K){return K==null&&(K=Me),K.$to_s()}))))},-1)}(rt[0],rt),function(T,De){var ue=g(T,"Factory"),we=[ue].concat(De),ge=t.$r(we);return $(ue,"$register",function($e,Y){var z,R,V=this;return z=k(arguments,1),R=z,pe(R,"each",[],function K(J){var M,_=K.$$s==null?this:K.$$s;return J==null&&(J=Me),M=[J,$e],pe(_.$registry(),"[]=",M),M[M.length-1]},{$$s:V})},-2),$(ue,"$for",function($e){var Y=this;return Y.$registry()["$[]"]($e)}),$(ue,"$create",function($e,Y,z){var R=this,V=Me;return Y==null&&(Y="html5"),z==null&&(z=u([],{})),ve(V=R.$for($e))?(w(Ge,V)&&(V=V.$new($e,Y,z)),ve(V.$name())||R.$raise(et("NameError"),""+V.$class()+" must specify a value for `name'"),V):Me},-2),ue.$private(),$(ue,"$registry",function(){var $e=this;return $e.$raise(et("NotImplementedError"),""+ge("Factory")+" subclass "+$e.$class()+" must implement the #registry method")})}(rt[0],rt),function(T,De,ue){var we=he(T,De,"CustomFactory"),ge=[we].concat(ue),Z=t.$r(ge);return we.$include(Z("Factory")),$(we,"$initialize",function(Y){var z=this,R=Me;return Y==null&&(Y=Me),z.registry=ve(R=Y)?R:u([],{})},-1),we.$private(),we.$attr_reader("registry")}(rt[0],null,rt),function(T,De){var ue=g(T,"DefaultFactory"),we=[ue].concat(De),ge=t.$r(we);return ue.$include(ge("Factory")),Ue(we[0],"@@registry",u([],{})),ue.$private(),$(ue,"$registry",function(){return Ae(we[0],"@@registry",!1)}),Me}(rt[0],rt),function(T,De,ue){var we=he(T,De,"DefaultFactoryProxy"),ge=[we].concat(ue),Z=t.$r(ge);return we.$include(Z("DefaultFactory")),Me}(rt[0],H("CustomFactory"),rt),function(T,De,ue){var we=he(T,De,"Base"),ge=[we].concat(ue),Z=t.$r(ge),$e=we.$$prototype;return $e.pre_class=Me,we.$include(Z("SyntaxHighlighter")),$(we,"$format",function(z,R,V){var K=this,J=Me,M=Me,_=Me,r=Me;return J=ve(V["$[]"]("nowrap"))?""+K.pre_class+" highlight nowrap":""+K.pre_class+" highlight",ve(M=V["$[]"]("transform"))?(M["$[]"](_=u(["class"],{class:J}),r=ve(R)?u(["data-lang"],{"data-lang":R}):u([],{})),ve(R=r.$delete("data-lang"))&&r["$[]="]("data-lang",R),"<pre"+pe(_,"map",[],function(A,b){return A==null&&(A=Me),b==null&&(b=Me)," "+A+'="'+b+'"'}).$join()+"><code"+pe(r,"map",[],function(A,b){return A==null&&(A=Me),b==null&&(b=Me)," "+A+'="'+b+'"'}).$join()+">"+z.$content()+"</code></pre>"):'<pre class="'+J+'"><code'+(ve(R)?' data-lang="'+R+'"':"")+">"+z.$content()+"</code></pre>"})}(rt[0],null,rt),Ze.$extend(H("DefaultFactory"))}(C[0],C)}(st[0],st),Be.$require("asciidoctor/syntax_highlighter.rb/../syntax_highlighter/highlightjs"),Me},Opal.modules["asciidoctor/timings"]=function(t){var g=t.module,u=t.klass,$=t.hash2,E=t.def,a=t.send,k=t.rb_minus,pe=t.slice,N=t.rb_plus,ve=t.truthy,w=t.rb_gt,Ge=t.gvars,he=t.eqeq,Ue=t.const_set,Ae=[],Be=t.nil,st=t.$$$;return t.add_stubs("[]=,now,-,delete,reduce,+,[],>,time,puts,sprintf,to_f,read_parse,convert,read_parse_convert,private,==,const_defined?,clock_gettime"),function(Me,et){var Pe=g(Me,"Asciidoctor"),Ve=[Pe].concat(et);return function(it,C,Xe){var y=u(it,C,"Timings"),Ze,rt,H,T,De=[y].concat(Xe),ue=t.$r(De),we=y.$$prototype;return we.timers=we.log=Be,E(y,"$initialize",function(){var Z=this;return Z.log=$([],{}),Z.timers=$([],{})}),E(y,"$start",function(Z){var $e,Y=this;return $e=[Z,Y.$now()],a(Y.timers,"[]=",$e),$e[$e.length-1]}),E(y,"$record",function(Z){var $e,Y=this;return $e=[Z,k(Y.$now(),Y.timers.$delete(Z))],a(Y.log,"[]=",$e),$e[$e.length-1]}),E(y,"$time",function(Z){var $e,Y,z=this,R=Be;return $e=pe(arguments),Y=$e,R=a(Y,"reduce",[0],function V(K,J){var M=V.$$s==null?this:V.$$s,_=Be;return M.log==null&&(M.log=Be),K==null&&(K=Be),J==null&&(J=Be),N(K,ve(_=M.log["$[]"](J))?_:0)},{$$s:z}),ve(w(R,0))?R:Be},-1),E(y,"$read",function(){var Z=this;return Z.$time("read")}),E(y,"$parse",function(){var Z=this;return Z.$time("parse")}),E(y,"$read_parse",function(){var Z=this;return Z.$time("read","parse")}),E(y,"$convert",function(){var Z=this;return Z.$time("convert")}),E(y,"$read_parse_convert",function(){var Z=this;return Z.$time("read","parse","convert")}),E(y,"$write",function(){var Z=this;return Z.$time("write")}),E(y,"$total",function(){var Z=this;return Z.$time("read","parse","convert","write")}),E(y,"$print_report",function(Z,$e){var Y=this;return Ge.stdout==null&&(Ge.stdout=Be),Z==null&&(Z=Ge.stdout),$e==null&&($e=Be),ve($e)&&Z.$puts("Input file: "+$e),Z.$puts("  Time to read and parse source: "+Y.$sprintf("%05.5f",Y.$read_parse().$to_f())),Z.$puts("  Time to convert document: "+Y.$sprintf("%05.5f",Y.$convert().$to_f())),Z.$puts("  Total time (read, parse and convert): "+Y.$sprintf("%05.5f",Y.$read_parse_convert().$to_f()))},-1),y.$private(),ve(st("Process")["$const_defined?"]("CLOCK_MONOTONIC",!1))&&he((Ze=st("::","Process","skip_raise"))&&(rt=Ze,rt)&&(H=rt)&&((T=H.$clock_gettime)&&!T.$$stub||H["$respond_to_missing?"]("clock_gettime"))?"method":Be,"method")?(Ue(De[0],"CLOCK_ID",st(st("Process"),"CLOCK_MONOTONIC")),E(y,"$now",function(){return st("Process").$clock_gettime(ue("CLOCK_ID"))})):E(y,"$now",function(){return st("Time").$now()})}(Ve[0],null,Ve)}(Ae[0],Ae)},Opal.modules["asciidoctor/converter/html5"]=function(t){var g=t.module,u=t.klass,$=t.const_set,E=t.hash2,a=t.regexp,k=t.eqeq,pe=t.def,N=t.send2,ve=t.find_super,w=t.truthy,Ge=t.send,he=t.rb_gt,Ue=t.rb_plus,Ae=t.not,Be=t.neqeq,st=t.rb_le,Me=t.rb_lt,et=t.to_ary,Pe=t.rb_times,Ve=t.rb_minus,it=t.gvars,C=t.return_val,Xe=t.alias,y=t.eqeqeq,Ze=t.slice,rt=t.to_a,H=[],T=t.nil,De=t.$$$;return t.add_stubs("register_for,default=,==,[],init_backend_traits,node_name,convert_inline_quoted,convert_paragraph,convert_inline_anchor,convert_section,convert_listing,convert_literal,convert_ulist,convert_olist,convert_dlist,convert_admonition,convert_colist,convert_embedded,convert_example,convert_floating_title,convert_image,convert_inline_break,convert_inline_button,convert_inline_callout,convert_inline_footnote,convert_inline_image,convert_inline_indexterm,convert_inline_kbd,convert_inline_menu,convert_open,convert_page_break,convert_preamble,convert_quote,convert_sidebar,convert_stem,convert_table,convert_thematic_break,convert_verse,convert_video,convert_document,convert_toc,convert_pass,convert_audio,empty?,attr,attr?,<<,include?,sub_replacements,gsub,extname,slice,length,doctitle,normalize_web_path,primary_stylesheet_data,instance,read_contents,syntax_highlighter,size,docinfo,id,sections?,doctype,role?,role,join,noheader,convert,converter,generate_manname_section,header?,notitle,title,header,each,authors,>,name,email,sub_macros,+,downcase,concat,content,!,footnotes?,footnotes,index,text,nofooter,docinfo?,[]=,delete_at,inspect,!=,to_i,attributes,document,sections,level,caption,captioned_title,<=,numbered,<,sectname,sectnum,convert_outline,title?,icon_uri,compact,media_uri,option?,append_boolean_attribute,style,items,blocks?,text?,chomp,safe,read_svg_contents,alt,image_uri,encode_attribute_value,append_link_constraint_attrs,highlight?,to_sym,format,*,-,count,end_with?,start_with?,list_marker_keyword,parent,warn,logger,context,error,content_only,new,columns,to_h,rows,colspan,rowspan,unshift,shift,split,pop,nil_or_empty?,type,===,catalog,get_root_document,xreftext,target,reftext,chop,sub,match,private,upcase,nested?,parent_document,handles?,to_s,send"),function(ue,we){var ge=g(ue,"Asciidoctor"),Z=[ge].concat(we),$e=t.$r(Z);return function(Y,z,R){var V=u(Y,z,"Html5Converter"),K=[V].concat(R),J=t.$r(K),M=V.$$prototype;return M.void_element_slash=M.xml_mode=M.refs=M.resolving_xref=T,V.$register_for("html5"),$(K[0],"QUOTE_TAGS",E(["monospaced","emphasis","strong","double","single","mark","superscript","subscript","asciimath","latexmath"],{monospaced:["<code>","</code>",!0],emphasis:["<em>","</em>",!0],strong:["<strong>","</strong>",!0],double:["&#8220;","&#8221;"],single:["&#8216;","&#8217;"],mark:["<mark>","</mark>",!0],superscript:["<sup>","</sup>",!0],subscript:["<sub>","</sub>",!0],asciimath:["\\$","\\$"],latexmath:["\\(","\\)"]}))["$default="](["",""]),$(K[0],"DropAnchorRx",/<(?:a\b[^>]*|\/a)>/),$(K[0],"StemBreakRx",/ *\\\n(?:\\?\n)*|\n\n+/),$(K[0],"SvgPreambleRx",a(["^",J("CC_ALL"),"*?(?=<svg[\\s>])"])),$(K[0],"SvgStartTagRx",/^<svg(?:\s[^>]*)?>/),$(K[0],"DimensionAttributeRx",a([`\\s(?:width|height|style)=(["'])`,J("CC_ANY"),"*?\\1"])),pe(V,"$initialize",function(r,f){var A=this,b=T;return f==null&&(f=E([],{})),A.backend=r,k(f["$[]"]("htmlsyntax"),"xml")?(b="xml",A.xml_mode=!0,A.void_element_slash="/"):(b="html",A.xml_mode=T,A.void_element_slash=""),A.$init_backend_traits(E(["basebackend","filetype","htmlsyntax","outfilesuffix","supports_templates"],{basebackend:"html",filetype:"html",htmlsyntax:b,outfilesuffix:".html",supports_templates:!0}))},-2),pe(V,"$convert",function _(r,f,A){var b=_.$$p||T,d=this;switch(_.$$p=null,f==null&&(f=r.$node_name()),A==null&&(A=T),f){case"inline_quoted":return d.$convert_inline_quoted(r);case"paragraph":return d.$convert_paragraph(r);case"inline_anchor":return d.$convert_inline_anchor(r);case"section":return d.$convert_section(r);case"listing":return d.$convert_listing(r);case"literal":return d.$convert_literal(r);case"ulist":return d.$convert_ulist(r);case"olist":return d.$convert_olist(r);case"dlist":return d.$convert_dlist(r);case"admonition":return d.$convert_admonition(r);case"colist":return d.$convert_colist(r);case"embedded":return d.$convert_embedded(r);case"example":return d.$convert_example(r);case"floating_title":return d.$convert_floating_title(r);case"image":return d.$convert_image(r);case"inline_break":return d.$convert_inline_break(r);case"inline_button":return d.$convert_inline_button(r);case"inline_callout":return d.$convert_inline_callout(r);case"inline_footnote":return d.$convert_inline_footnote(r);case"inline_image":return d.$convert_inline_image(r);case"inline_indexterm":return d.$convert_inline_indexterm(r);case"inline_kbd":return d.$convert_inline_kbd(r);case"inline_menu":return d.$convert_inline_menu(r);case"open":return d.$convert_open(r);case"page_break":return d.$convert_page_break(r);case"preamble":return d.$convert_preamble(r);case"quote":return d.$convert_quote(r);case"sidebar":return d.$convert_sidebar(r);case"stem":return d.$convert_stem(r);case"table":return d.$convert_table(r);case"thematic_break":return d.$convert_thematic_break(r);case"verse":return d.$convert_verse(r);case"video":return d.$convert_video(r);case"document":return d.$convert_document(r);case"toc":return d.$convert_toc(r);case"pass":return d.$convert_pass(r);case"audio":return d.$convert_audio(r);default:return N(d,ve(d,"convert",_,!1,!0),"convert",[r,f,A],b)}},-2),pe(V,"$convert_document",function(r){var f=this,A=T,b=T,d=T,B=T,D=T,Q=T,X=T,ce=T,Re=T,Ye=T,Qe=T,ot=T,tt=T,at=T,ct=T,ft=T,ut=T,pt=T,ht=T,kt=T,yt=T,Tt=T,Ct=T,wt=T,At=T;return A="<br"+(b=f.void_element_slash)+">",w((d=r.$attr("asset-uri-scheme","https"))["$empty?"]())||(d=""+d+":"),B=""+d+"//cdnjs.cloudflare.com/ajax/libs",D=r["$attr?"]("linkcss"),Q=w(r["$attr?"]("max-width"))?' style="max-width: '+r.$attr("max-width")+';"':"",X=["<!DOCTYPE html>"],ce=w(r["$attr?"]("nolang"))?"":' lang="'+r.$attr("lang","en")+'"',X["$<<"]("<html"+(w(f.xml_mode)?' xmlns="http://www.w3.org/1999/xhtml"':"")+ce+">"),X["$<<"](`<head>
<meta charset="`+r.$attr("encoding","UTF-8")+'"'+b+`>
<meta http-equiv="X-UA-Compatible" content="IE=edge"`+b+`>
<meta name="viewport" content="width=device-width, initial-scale=1.0"`+b+`>
<meta name="generator" content="Asciidoctor `+r.$attr("asciidoctor-version")+'"'+b+">"),w(r["$attr?"]("app-name"))&&X["$<<"]('<meta name="application-name" content="'+r.$attr("app-name")+'"'+b+">"),w(r["$attr?"]("description"))&&X["$<<"]('<meta name="description" content="'+r.$attr("description")+'"'+b+">"),w(r["$attr?"]("keywords"))&&X["$<<"]('<meta name="keywords" content="'+r.$attr("keywords")+'"'+b+">"),w(r["$attr?"]("authors"))&&X["$<<"]('<meta name="author" content="'+(w((Re=r.$sub_replacements(r.$attr("authors")))["$include?"]("<"))?Re.$gsub(J("XmlSanitizeRx"),""):Re)+'"'+b+">"),w(r["$attr?"]("copyright"))&&X["$<<"]('<meta name="copyright" content="'+r.$attr("copyright")+'"'+b+">"),w(r["$attr?"]("favicon"))&&(w((Ye=r.$attr("favicon"))["$empty?"]())?(Ye="favicon.ico",Qe="image/x-icon"):w(ot=J("Helpers").$extname(Ye,T))?Qe=k(ot,".ico")?"image/x-icon":"image/"+ot.$slice(1,ot.$length()):Qe="image/x-icon",X["$<<"]('<link rel="icon" type="'+Qe+'" href="'+Ye+'"'+b+">")),X["$<<"]("<title>"+r.$doctitle(E(["sanitize","use_fallback"],{sanitize:!0,use_fallback:!0}))+"</title>"),w(J("DEFAULT_STYLESHEET_KEYS")["$include?"](r.$attr("stylesheet")))?(w(tt=r.$attr("webfonts"))&&X["$<<"]('<link rel="stylesheet" href="'+d+"//fonts.googleapis.com/css?family="+(w(tt["$empty?"]())?"Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700":tt)+'"'+b+">"),w(D)?X["$<<"]('<link rel="stylesheet" href="'+r.$normalize_web_path(J("DEFAULT_STYLESHEET_NAME"),r.$attr("stylesdir",""),!1)+'"'+b+">"):X["$<<"](`<style>
`+J("Stylesheets").$instance().$primary_stylesheet_data()+`
</style>`)):w(r["$attr?"]("stylesheet"))&&(w(D)?X["$<<"]('<link rel="stylesheet" href="'+r.$normalize_web_path(r.$attr("stylesheet"),r.$attr("stylesdir",""))+'"'+b+">"):X["$<<"](`<style>
`+r.$read_contents(r.$attr("stylesheet"),E(["start","warn_on_failure","label"],{start:r.$attr("stylesdir"),warn_on_failure:!0,label:"stylesheet"}))+`
</style>`)),w(r["$attr?"]("icons","font"))&&(w(r["$attr?"]("iconfont-remote"))?X["$<<"]('<link rel="stylesheet" href="'+r.$attr("iconfont-cdn",""+B+"/font-awesome/"+J("FONT_AWESOME_VERSION")+"/css/font-awesome.min.css")+'"'+b+">"):(at=""+r.$attr("iconfont-name","font-awesome")+".css",X["$<<"]('<link rel="stylesheet" href="'+r.$normalize_web_path(at,r.$attr("stylesdir",""),!1)+'"'+b+">"))),w(ct=r.$syntax_highlighter())&&X["$<<"](ft=X.$size()),w((ut=r.$docinfo())["$empty?"]())||X["$<<"](ut),X["$<<"]("</head>"),pt=w(r.$id())?' id="'+r.$id()+'"':"",w(ht=r["$sections?"]())&&w(r["$attr?"]("toc-class"))&&w(r["$attr?"]("toc"))&&w(r["$attr?"]("toc-placement","auto"))?kt=[r.$doctype(),r.$attr("toc-class"),"toc-"+r.$attr("toc-position","header")]:kt=[r.$doctype()],w(r["$role?"]())&&kt["$<<"](r.$role()),X["$<<"]("<body"+pt+' class="'+kt.$join(" ")+'">'),w((ut=r.$docinfo("header"))["$empty?"]())||X["$<<"](ut),w(r.$noheader())||(X["$<<"]('<div id="header"'+Q+">"),k(r.$doctype(),"manpage")?(X["$<<"]("<h1>"+r.$doctitle()+" Manual Page</h1>"),w(ht)&&w(r["$attr?"]("toc"))&&w(r["$attr?"]("toc-placement","auto"))&&X["$<<"]('<div id="toc" class="'+r.$attr("toc-class","toc")+`">
<div id="toctitle">`+r.$attr("toc-title")+`</div>
`+r.$converter().$convert(r,"outline")+`
</div>`),w(r["$attr?"]("manpurpose"))&&X["$<<"](f.$generate_manname_section(r))):(w(r["$header?"]())&&(w(r.$notitle())||X["$<<"]("<h1>"+r.$header().$title()+"</h1>"),yt=[],Tt=1,Ge(r.$authors(),"each",[],function(Bt){return Bt==null&&(Bt=T),yt["$<<"]('<span id="author'+(w(he(Tt,1))?Tt:"")+'" class="author">'+r.$sub_replacements(Bt.$name())+"</span>"+A),w(Bt.$email())&&yt["$<<"]('<span id="email'+(w(he(Tt,1))?Tt:"")+'" class="email">'+r.$sub_macros(Bt.$email())+"</span>"+A),Tt=Ue(Tt,1)}),w(r["$attr?"]("revnumber"))&&yt["$<<"]('<span id="revnumber">'+(w(Ct=r.$attr("version-label"))?Ct:"").$downcase()+" "+r.$attr("revnumber")+(w(r["$attr?"]("revdate"))?",":"")+"</span>"),w(r["$attr?"]("revdate"))&&yt["$<<"]('<span id="revdate">'+r.$attr("revdate")+"</span>"),w(r["$attr?"]("revremark"))&&yt["$<<"](""+A+'<span id="revremark">'+r.$attr("revremark")+"</span>"),w(yt["$empty?"]())||(X["$<<"]('<div class="details">'),X.$concat(yt),X["$<<"]("</div>"))),w(ht)&&w(r["$attr?"]("toc"))&&w(r["$attr?"]("toc-placement","auto"))&&X["$<<"]('<div id="toc" class="'+r.$attr("toc-class","toc")+`">
<div id="toctitle">`+r.$attr("toc-title")+`</div>
`+r.$converter().$convert(r,"outline")+`
</div>`)),X["$<<"]("</div>")),X["$<<"]('<div id="content"'+Q+`>
`+r.$content()+`
</div>`),w(r["$footnotes?"]())&&Ae(r["$attr?"]("nofootnotes"))&&(X["$<<"]('<div id="footnotes"'+Q+`>
<hr`+b+">"),Ge(r.$footnotes(),"each",[],function(Bt){return Bt==null&&(Bt=T),X["$<<"]('<div class="footnote" id="_footnotedef_'+Bt.$index()+`">
<a href="#_footnoteref_`+Bt.$index()+'">'+Bt.$index()+"</a>. "+Bt.$text()+`
</div>`)}),X["$<<"]("</div>")),w(r.$nofooter())||(X["$<<"]('<div id="footer"'+Q+">"),X["$<<"]('<div id="footer-text">'),w(r["$attr?"]("revnumber"))&&X["$<<"](""+r.$attr("version-label")+" "+r.$attr("revnumber")+A),w(r["$attr?"]("last-update-label"))&&Ae(r["$attr?"]("reproducible"))&&X["$<<"](""+r.$attr("last-update-label")+" "+r.$attr("docdatetime")),X["$<<"]("</div>"),X["$<<"]("</div>")),w(ct)&&(w(ct["$docinfo?"]("head"))?X["$[]="](ft,ct.$docinfo("head",r,E(["cdn_base_url","linkcss","self_closing_tag_slash"],{cdn_base_url:B,linkcss:D,self_closing_tag_slash:b}))):X.$delete_at(ft),w(ct["$docinfo?"]("footer"))&&X["$<<"](ct.$docinfo("footer",r,E(["cdn_base_url","linkcss","self_closing_tag_slash"],{cdn_base_url:B,linkcss:D,self_closing_tag_slash:b})))),w(r["$attr?"]("stem"))&&(wt=r.$attr("eqnums","none"),w(wt["$empty?"]())&&(wt="AMS"),At=' equationNumbers: { autoNumber: "'+wt+'" } ',X["$<<"](`<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [`+J("INLINE_MATH_DELIMITERS")["$[]"]("latexmath").$inspect()+`],
    displayMath: [`+J("BLOCK_MATH_DELIMITERS")["$[]"]("latexmath").$inspect()+`],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [`+J("BLOCK_MATH_DELIMITERS")["$[]"]("asciimath").$inspect()+`],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: {`+At+`}
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
<\/script>
<script src="`+B+"/mathjax/"+J("MATHJAX_VERSION")+'/MathJax.js?config=TeX-MML-AM_HTMLorMML"><\/script>')),w((ut=r.$docinfo("footer"))["$empty?"]())||X["$<<"](ut),X["$<<"]("</body>"),X["$<<"]("</html>"),X.$join(J("LF"))}),pe(V,"$convert_embedded",function(r){var f=this,A=T,b=T,d=T;return A=[],k(r.$doctype(),"manpage")?(w(r.$notitle())||(b=w(r.$id())?' id="'+r.$id()+'"':"",A["$<<"]("<h1"+b+">"+r.$doctitle()+" Manual Page</h1>")),w(r["$attr?"]("manpurpose"))&&A["$<<"](f.$generate_manname_section(r))):w(r["$header?"]())&&Ae(r.$notitle())&&(b=w(r.$id())?' id="'+r.$id()+'"':"",A["$<<"]("<h1"+b+">"+r.$header().$title()+"</h1>")),w(r["$sections?"]())&&w(r["$attr?"]("toc"))&&Be(d=r.$attr("toc-placement"),"macro")&&Be(d,"preamble")&&A["$<<"](`<div id="toc" class="toc">
<div id="toctitle">`+r.$attr("toc-title")+`</div>
`+r.$converter().$convert(r,"outline")+`
</div>`),A["$<<"](r.$content()),w(r["$footnotes?"]())&&Ae(r["$attr?"]("nofootnotes"))&&(A["$<<"](`<div id="footnotes">
<hr`+f.void_element_slash+">"),Ge(r.$footnotes(),"each",[],function(D){return D==null&&(D=T),A["$<<"]('<div class="footnote" id="_footnotedef_'+D.$index()+`">
<a href="#_footnoteref_`+D.$index()+'">'+D.$index()+"</a>. "+D.$text()+`
</div>`)}),A["$<<"]("</div>")),A.$join(J("LF"))}),pe(V,"$convert_outline",function(r,f){var A=this,b=T,d=T,B=T,D=T,Q=T,X=T;return f==null&&(f=E([],{})),w(r["$sections?"]())?(b=w(d=f["$[]"]("sectnumlevels"))?d:(w(B=r.$document().$attributes()["$[]"]("sectnumlevels"))?B:3).$to_i(),D=w(d=f["$[]"]("toclevels"))?d:(w(B=r.$document().$attributes()["$[]"]("toclevels"))?B:2).$to_i(),Q=r.$sections(),X=['<ul class="sectlevel'+Q["$[]"](0).$level()+'">'],Ge(Q,"each",[],function ce(Re){var Ye=ce.$$s==null?this:ce.$$s,Qe=T,ot=T,tt=T,at=T;if(Re==null&&(Re=T),Qe=Re.$level(),w(Re.$caption()))ot=Re.$captioned_title();else if(w(Re.$numbered())&&w(st(Qe,b)))if(w(Me(Qe,2))&&k(r.$document().$doctype(),"book"))switch(Re.$sectname()){case"chapter":ot=(w(tt=r.$document().$attributes()["$[]"]("chapter-signifier"))?""+tt+" ":"")+Re.$sectnum()+" "+Re.$title();break;case"part":ot=(w(tt=r.$document().$attributes()["$[]"]("part-signifier"))?""+tt+" ":"")+Re.$sectnum(T,":")+" "+Re.$title();break;default:ot=""+Re.$sectnum()+" "+Re.$title()}else ot=""+Re.$sectnum()+" "+Re.$title();else ot=Re.$title();return w(ot["$include?"]("<a"))&&(ot=ot.$gsub(J("DropAnchorRx"),"")),w(Me(Qe,D))&&w(at=Ye.$convert_outline(Re,E(["toclevels","sectnumlevels"],{toclevels:D,sectnumlevels:b})))?(X["$<<"]('<li><a href="#'+Re.$id()+'">'+ot+"</a>"),X["$<<"](at),X["$<<"]("</li>")):X["$<<"]('<li><a href="#'+Re.$id()+'">'+ot+"</a></li>")},{$$s:A}),X["$<<"]("</ul>"),X.$join(J("LF"))):T},-2),pe(V,"$convert_section",function(r){var f=T,A=T,b=T,d=T,B=T,D=T,Q=T,X=T;if(f=r.$document().$attributes(),A=r.$level(),w(r.$caption()))b=r.$captioned_title();else if(w(r.$numbered())&&w(st(A,(w(d=f["$[]"]("sectnumlevels"))?d:3).$to_i())))if(w(Me(A,2))&&k(r.$document().$doctype(),"book"))switch(r.$sectname()){case"chapter":b=(w(B=f["$[]"]("chapter-signifier"))?""+B+" ":"")+r.$sectnum()+" "+r.$title();break;case"part":b=(w(B=f["$[]"]("part-signifier"))?""+B+" ":"")+r.$sectnum(T,":")+" "+r.$title();break;default:b=""+r.$sectnum()+" "+r.$title()}else b=""+r.$sectnum()+" "+r.$title();else b=r.$title();return w(r.$id())?(D=' id="'+(Q=r.$id())+'"',w(f["$[]"]("sectlinks"))&&(b='<a class="link" href="#'+Q+'">'+b+"</a>"),w(f["$[]"]("sectanchors"))&&(k(f["$[]"]("sectanchors"),"after")?b=""+b+'<a class="anchor" href="#'+Q+'"></a>':b='<a class="anchor" href="#'+Q+'"></a>'+b)):D="",k(A,0)?"<h1"+D+' class="sect0'+(w(X=r.$role())?" "+X:"")+'">'+b+`</h1>
`+r.$content():'<div class="sect'+A+(w(X=r.$role())?" "+X:"")+`">
<h`+Ue(A,1)+D+">"+b+"</h"+Ue(A,1)+`>
`+(k(A,1)?`<div class="sectionbody">
`+r.$content()+`
</div>`:r.$content())+`
</div>`}),pe(V,"$convert_admonition",function(r){var f=this,A=T,b=T,d=T,B=T,D=T;return A=w(r.$id())?' id="'+r.$id()+'"':"",b=r.$attr("name"),d=w(r["$title?"]())?'<div class="title">'+r.$title()+`</div>
`:"",w(r.$document()["$attr?"]("icons"))?w(r.$document()["$attr?"]("icons","font"))&&Ae(r["$attr?"]("icon"))?B='<i class="fa icon-'+b+'" title="'+r.$attr("textlabel")+'"></i>':B='<img src="'+r.$icon_uri(b)+'" alt="'+r.$attr("textlabel")+'"'+f.void_element_slash+">":B='<div class="title">'+r.$attr("textlabel")+"</div>","<div"+A+' class="admonitionblock '+b+(w(D=r.$role())?" "+D:"")+`">
<table>
<tr>
<td class="icon">
`+B+`
</td>
<td class="content">
`+d+r.$content()+`
</td>
</tr>
</table>
</div>`}),pe(V,"$convert_audio",function(r){var f=this,A=T,b=T,d=T,B=T,D=T,Q=T,X=T,ce=T,Re=T;return A=f.xml_mode,b=w(r.$id())?' id="'+r.$id()+'"':"",d=["audioblock",r.$role()].$compact(),B=' class="'+d.$join(" ")+'"',D=w(r["$title?"]())?'<div class="title">'+r.$title()+`</div>
`:"",Q=r.$attr("start"),X=r.$attr("end"),ce=w(Q)||w(X)?"#t="+(w(Re=Q)?Re:"")+(w(X)?","+X:""):"","<div"+b+B+`>
`+D+`<div class="content">
<audio src="`+r.$media_uri(r.$attr("target"))+ce+'"'+(w(r["$option?"]("autoplay"))?f.$append_boolean_attribute("autoplay",A):"")+(w(r["$option?"]("nocontrols"))?"":f.$append_boolean_attribute("controls",A))+(w(r["$option?"]("loop"))?f.$append_boolean_attribute("loop",A):"")+`>
Your browser does not support the audio tag.
</audio>
</div>
</div>`}),pe(V,"$convert_colist",function(r){var f,A=this,b=T,d=T,B=T,D=T,Q=T,X=T;return b=[],d=w(r.$id())?' id="'+r.$id()+'"':"",B=["colist",r.$style(),r.$role()].$compact(),D=' class="'+B.$join(" ")+'"',b["$<<"]("<div"+d+D+">"),w(r["$title?"]())&&b["$<<"]('<div class="title">'+r.$title()+"</div>"),w(r.$document()["$attr?"]("icons"))?(b["$<<"]("<table>"),f=[r.$document()["$attr?"]("icons","font"),0],Q=f[0],X=f[1],Ge(r.$items(),"each",[],function ce(Re){var Ye=ce.$$s==null?this:ce.$$s,Qe=T;return Ye.void_element_slash==null&&(Ye.void_element_slash=T),Re==null&&(Re=T),X=Ue(X,1),w(Q)?Qe='<i class="conum" data-value="'+X+'"></i><b>'+X+"</b>":Qe='<img src="'+r.$icon_uri("callouts/"+X)+'" alt="'+X+'"'+Ye.void_element_slash+">",b["$<<"](`<tr>
<td>`+Qe+`</td>
<td>`+Re.$text()+(w(Re["$blocks?"]())?Ue(J("LF"),Re.$content()):"")+`</td>
</tr>`)},{$$s:A}),b["$<<"]("</table>")):(b["$<<"]("<ol>"),Ge(r.$items(),"each",[],function(Re){return Re==null&&(Re=T),b["$<<"](`<li>
<p>`+Re.$text()+"</p>"+(w(Re["$blocks?"]())?Ue(J("LF"),Re.$content()):"")+`
</li>`)}),b["$<<"]("</ol>")),b["$<<"]("</div>"),b.$join(J("LF"))}),pe(V,"$convert_dlist",function(r){var f=this,A=T,b=T,d=T,B=T,D=T,Q=T,X=T;switch(A=[],b=w(r.$id())?' id="'+r.$id()+'"':"",r.$style()){case"qanda":d=["qlist","qanda",r.$role()];break;case"horizontal":d=["hdlist",r.$role()];break;default:d=["dlist",r.$style(),r.$role()]}switch(B=' class="'+d.$compact().$join(" ")+'"',A["$<<"]("<div"+b+B+">"),w(r["$title?"]())&&A["$<<"]('<div class="title">'+r.$title()+"</div>"),r.$style()){case"qanda":A["$<<"]("<ol>"),Ge(r.$items(),"each",[],function(Re,Ye){return Re==null&&(Re=T),Ye==null&&(Ye=T),A["$<<"]("<li>"),Ge(Re,"each",[],function(ot){return ot==null&&(ot=T),A["$<<"]("<p><em>"+ot.$text()+"</em></p>")}),w(Ye)&&(w(Ye["$text?"]())&&A["$<<"]("<p>"+Ye.$text()+"</p>"),w(Ye["$blocks?"]())&&A["$<<"](Ye.$content())),A["$<<"]("</li>")}),A["$<<"]("</ol>");break;case"horizontal":D=f.void_element_slash,A["$<<"]("<table>"),(w(r["$attr?"]("labelwidth"))||w(r["$attr?"]("itemwidth")))&&(A["$<<"]("<colgroup>"),Q=w(r["$attr?"]("labelwidth"))?' style="width: '+r.$attr("labelwidth").$chomp("%")+'%;"':"",A["$<<"]("<col"+Q+D+">"),Q=w(r["$attr?"]("itemwidth"))?' style="width: '+r.$attr("itemwidth").$chomp("%")+'%;"':"",A["$<<"]("<col"+Q+D+">"),A["$<<"]("</colgroup>")),Ge(r.$items(),"each",[],function(Re,Ye){var Qe=T;return Re==null&&(Re=T),Ye==null&&(Ye=T),A["$<<"]("<tr>"),A["$<<"]('<td class="hdlist1'+(w(r["$option?"]("strong"))?" strong":"")+'">'),Qe=!0,Ge(Re,"each",[],function(tt){return tt==null&&(tt=T),w(Qe)||A["$<<"]("<br"+D+">"),A["$<<"](tt.$text()),Qe=T}),A["$<<"]("</td>"),A["$<<"]('<td class="hdlist2">'),w(Ye)&&(w(Ye["$text?"]())&&A["$<<"]("<p>"+Ye.$text()+"</p>"),w(Ye["$blocks?"]())&&A["$<<"](Ye.$content())),A["$<<"]("</td>"),A["$<<"]("</tr>")}),A["$<<"]("</table>");break;default:A["$<<"]("<dl>"),X=w(r.$style())?"":' class="hdlist1"',Ge(r.$items(),"each",[],function(Re,Ye){return Re==null&&(Re=T),Ye==null&&(Ye=T),Ge(Re,"each",[],function(ot){return ot==null&&(ot=T),A["$<<"]("<dt"+X+">"+ot.$text()+"</dt>")}),w(Ye)?(A["$<<"]("<dd>"),w(Ye["$text?"]())&&A["$<<"]("<p>"+Ye.$text()+"</p>"),w(Ye["$blocks?"]())&&A["$<<"](Ye.$content()),A["$<<"]("</dd>")):T}),A["$<<"]("</dl>")}return A["$<<"]("</div>"),A.$join(J("LF"))}),pe(V,"$convert_example",function(r){var f=T,A=T,b=T,d=T,B=T;return f=w(r.$id())?' id="'+r.$id()+'"':"",w(r["$option?"]("collapsible"))?(A=w(r.$role())?' class="'+r.$role()+'"':"",b=w(r["$title?"]())?'<summary class="title">'+r.$title()+"</summary>":'<summary class="title">Details</summary>',"<details"+f+A+(w(r["$option?"]("open"))?" open":"")+`>
`+b+`
<div class="content">
`+r.$content()+`
</div>
</details>`):(d=w(r["$title?"]())?'<div class="title">'+r.$captioned_title()+`</div>
`:"","<div"+f+' class="exampleblock'+(w(B=r.$role())?" "+B:"")+`">
`+d+`<div class="content">
`+r.$content()+`
</div>
</div>`)}),pe(V,"$convert_floating_title",function(r){var f=T,A=T,b=T;return f="h"+Ue(r.$level(),1),A=w(r.$id())?' id="'+r.$id()+'"':"",b=[r.$style(),r.$role()].$compact(),"<"+f+A+' class="'+b.$join(" ")+'">'+r.$title()+"</"+f+">"}),pe(V,"$convert_image",function(r){var f=this,A=T,b=T,d=T,B=T,D=T,Q=T,X=T,ce=T,Re=T,Ye=T;return A=r.$attr("target"),b=w(r["$attr?"]("width"))?' width="'+r.$attr("width")+'"':"",d=w(r["$attr?"]("height"))?' height="'+r.$attr("height")+'"':"",(w(r["$attr?"]("format","svg"))||w(A["$include?"](".svg")))&&w(Me(r.$document().$safe(),De(J("SafeMode"),"SECURE")))?w(r["$option?"]("inline"))?B=w(D=f.$read_svg_contents(r,A))?D:'<span class="alt">'+r.$alt()+"</span>":w(r["$option?"]("interactive"))?(Q=w(r["$attr?"]("fallback"))?'<img src="'+r.$image_uri(r.$attr("fallback"))+'" alt="'+f.$encode_attribute_value(r.$alt())+'"'+b+d+f.void_element_slash+">":'<span class="alt">'+r.$alt()+"</span>",B='<object type="image/svg+xml" data="'+r.$image_uri(A)+'"'+b+d+">"+Q+"</object>"):B='<img src="'+r.$image_uri(A)+'" alt="'+f.$encode_attribute_value(r.$alt())+'"'+b+d+f.void_element_slash+">":B='<img src="'+r.$image_uri(A)+'" alt="'+f.$encode_attribute_value(r.$alt())+'"'+b+d+f.void_element_slash+">",w(r["$attr?"]("link"))&&(B='<a class="image" href="'+r.$attr("link")+'"'+f.$append_link_constraint_attrs(r).$join()+">"+B+"</a>"),X=w(r.$id())?' id="'+r.$id()+'"':"",ce=["imageblock"],w(r["$attr?"]("float"))&&ce["$<<"](r.$attr("float")),w(r["$attr?"]("align"))&&ce["$<<"]("text-"+r.$attr("align")),w(r.$role())&&ce["$<<"](r.$role()),Re=' class="'+ce.$join(" ")+'"',Ye=w(r["$title?"]())?`
<div class="title">`+r.$captioned_title()+"</div>":"","<div"+X+Re+`>
<div class="content">
`+B+`
</div>`+Ye+`
</div>`}),pe(V,"$convert_listing",function(r){var f=T,A=T,b=T,d=T,B=T,D=T,Q=T,X=T,ce=T,Re=T,Ye=T;return f=w(A=r["$option?"]("nowrap"))?A:r.$document()["$attr?"]("prewrap")["$!"](),k(r.$style(),"source")?(b=r.$attr("language"),w(d=r.$document().$syntax_highlighter())?(B=w(d["$highlight?"]())?E(["css_mode","style"],{css_mode:(w(A=(D=r.$document().$attributes())["$[]"](""+d.$name()+"-css"))?A:"class").$to_sym(),style:D["$[]"](""+d.$name()+"-style")}):E([],{}),B["$[]="]("nowrap",f)):(Q='<pre class="highlight'+(w(f)?" nowrap":"")+'"><code'+(w(b)?' class="language-'+b+'" data-lang="'+b+'"':"")+">",X="</code></pre>")):(Q="<pre"+(w(f)?' class="nowrap"':"")+">",X="</pre>"),ce=w(r.$id())?' id="'+r.$id()+'"':"",Re=w(r["$title?"]())?'<div class="title">'+r.$captioned_title()+`</div>
`:"","<div"+ce+' class="listingblock'+(w(Ye=r.$role())?" "+Ye:"")+`">
`+Re+`<div class="content">
`+(w(d)?d.$format(r,b,B):Ue(Ue(Q,r.$content()),X))+`
</div>
</div>`}),pe(V,"$convert_literal",function(r){var f=T,A=T,b=T,d=T,B=T;return f=w(r.$id())?' id="'+r.$id()+'"':"",A=w(r["$title?"]())?'<div class="title">'+r.$title()+`</div>
`:"",b=w(d=r.$document()["$attr?"]("prewrap")["$!"]())?d:r["$option?"]("nowrap"),"<div"+f+' class="literalblock'+(w(B=r.$role())?" "+B:"")+`">
`+A+`<div class="content">
<pre`+(w(b)?' class="nowrap"':"")+">"+r.$content()+`</pre>
</div>
</div>`}),pe(V,"$convert_stem",function(r){var f,A,b=this,d=T,B=T,D=T,Q=T,X=T,ce=T,Re=T,Ye=T;return d=w(r.$id())?' id="'+r.$id()+'"':"",B=w(r["$title?"]())?'<div class="title">'+r.$title()+`</div>
`:"",A=J("BLOCK_MATH_DELIMITERS")["$[]"](D=r.$style().$to_sym()),f=et(A),Q=f[0]==null?T:f[0],X=f[1]==null?T:f[1],w(ce=r.$content())?(k(D,"asciimath")&&w(ce["$include?"](J("LF")))&&(Re=""+J("LF")+"<br"+b.void_element_slash+">",ce=Ge(ce,"gsub",[J("StemBreakRx")],function(){var ot;return""+X+Pe(Re,Ve(((ot=it["~"])===T?T:ot["$[]"](0)).$count(J("LF")),1))+J("LF")+Q})),w(ce["$start_with?"](Q))&&w(ce["$end_with?"](X))||(ce=""+Q+ce+X)):ce="","<div"+d+' class="stemblock'+(w(Ye=r.$role())?" "+Ye:"")+`">
`+B+`<div class="content">
`+ce+`
</div>
</div>`}),pe(V,"$convert_olist",function(r){var f=this,A=T,b=T,d=T,B=T,D=T,Q=T,X=T,ce=T;return A=[],b=w(r.$id())?' id="'+r.$id()+'"':"",d=["olist",r.$style(),r.$role()].$compact(),B=' class="'+d.$join(" ")+'"',A["$<<"]("<div"+b+B+">"),w(r["$title?"]())&&A["$<<"]('<div class="title">'+r.$title()+"</div>"),D=w(Q=r.$list_marker_keyword())?' type="'+Q+'"':"",X=w(r["$attr?"]("start"))?' start="'+r.$attr("start")+'"':"",ce=w(r["$option?"]("reversed"))?f.$append_boolean_attribute("reversed",f.xml_mode):"",A["$<<"]('<ol class="'+r.$style()+'"'+D+X+ce+">"),Ge(r.$items(),"each",[],function(Ye){return Ye==null&&(Ye=T),w(Ye.$id())?A["$<<"]('<li id="'+Ye.$id()+'"'+(w(Ye.$role())?' class="'+Ye.$role()+'"':"")+">"):w(Ye.$role())?A["$<<"]('<li class="'+Ye.$role()+'">'):A["$<<"]("<li>"),A["$<<"]("<p>"+Ye.$text()+"</p>"),w(Ye["$blocks?"]())&&A["$<<"](Ye.$content()),A["$<<"]("</li>")}),A["$<<"]("</ol>"),A["$<<"]("</div>"),A.$join(J("LF"))}),pe(V,"$convert_open",function(r){var f=this,A=T,b=T,d=T,B=T;return k(A=r.$style(),"abstract")?k(r.$parent(),r.$document())&&k(r.$document().$doctype(),"book")?(f.$logger().$warn("abstract block cannot be used in a document without a title when doctype is book. Excluding block content."),""):(b=w(r.$id())?' id="'+r.$id()+'"':"",d=w(r["$title?"]())?'<div class="title">'+r.$title()+`</div>
`:"","<div"+b+' class="quoteblock abstract'+(w(B=r.$role())?" "+B:"")+`">
`+d+`<blockquote>
`+r.$content()+`
</blockquote>
</div>`):k(A,"partintro")&&(w(he(r.$level(),0))||Be(r.$parent().$context(),"section")||Be(r.$document().$doctype(),"book"))?(f.$logger().$error("partintro block can only be used when doctype is book and must be a child of a book part. Excluding block content."),""):(b=w(r.$id())?' id="'+r.$id()+'"':"",d=w(r["$title?"]())?'<div class="title">'+r.$title()+`</div>
`:"","<div"+b+' class="openblock'+(w(A)&&Be(A,"open")?" "+A:"")+(w(B=r.$role())?" "+B:"")+`">
`+d+`<div class="content">
`+r.$content()+`
</div>
</div>`)}),pe(V,"$convert_page_break",C('<div style="page-break-after: always;"></div>')),pe(V,"$convert_paragraph",function(r){var f=T;return w(r.$role())?f=(w(r.$id())?' id="'+r.$id()+'"':"")+' class="paragraph '+r.$role()+'"':w(r.$id())?f=' id="'+r.$id()+'" class="paragraph"':f=' class="paragraph"',w(r["$title?"]())?"<div"+f+`>
<div class="title">`+r.$title()+`</div>
<p>`+r.$content()+`</p>
</div>`:"<div"+f+`>
<p>`+r.$content()+`</p>
</div>`}),Xe(V,"convert_pass","content_only"),pe(V,"$convert_preamble",function(r){var f=T,A=T;return w((f=r.$document())["$attr?"]("toc-placement","preamble"))&&w(f["$sections?"]())&&w(f["$attr?"]("toc"))?A=`
<div id="toc" class="`+f.$attr("toc-class","toc")+`">
<div id="toctitle">`+f.$attr("toc-title")+`</div>
`+f.$converter().$convert(f,"outline")+`
</div>`:A="",`<div id="preamble">
<div class="sectionbody">
`+r.$content()+`
</div>`+A+`
</div>`}),pe(V,"$convert_quote",function(r){var f=this,A=T,b=T,d=T,B=T,D=T,Q=T,X=T,ce=T,Re=T;return A=w(r.$id())?' id="'+r.$id()+'"':"",b=["quoteblock",r.$role()].$compact(),d=' class="'+b.$join(" ")+'"',B=w(r["$title?"]())?`
<div class="title">`+r.$title()+"</div>":"",D=w(r["$attr?"]("attribution"))?r.$attr("attribution"):T,Q=w(r["$attr?"]("citetitle"))?r.$attr("citetitle"):T,w(D)||w(Q)?(X=w(Q)?"<cite>"+Q+"</cite>":"",ce=w(D)?"&#8212; "+D+(w(Q)?"<br"+f.void_element_slash+`>
`:""):"",Re=`
<div class="attribution">
`+ce+X+`
</div>`):Re="","<div"+A+d+">"+B+`
<blockquote>
`+r.$content()+`
</blockquote>`+Re+`
</div>`}),pe(V,"$convert_thematic_break",function(r){var f=this;return"<hr"+f.void_element_slash+">"}),pe(V,"$convert_sidebar",function(r){var f=T,A=T,b=T;return f=w(r.$id())?' id="'+r.$id()+'"':"",A=w(r["$title?"]())?'<div class="title">'+r.$title()+`</div>
`:"","<div"+f+' class="sidebarblock'+(w(b=r.$role())?" "+b:"")+`">
<div class="content">
`+A+r.$content()+`
</div>
</div>`}),pe(V,"$convert_table",function(r){var f=this,A=T,b=T,d=T,B=T,D=T,Q=T,X=T,ce=T,Re=T,Ye=T,Qe=T;return A=[],b=w(r.$id())?' id="'+r.$id()+'"':"",k(d=r.$attr("frame","all","table-frame"),"topbot")&&(d="ends"),B=["tableblock","frame-"+d,"grid-"+r.$attr("grid","all","table-grid")],w(D=r.$attr("stripes",T,"table-stripes"))&&B["$<<"]("stripes-"+D),Q="",w(X=r["$option?"]("autowidth"))&&Ae(r["$attr?"]("width"))?B["$<<"]("fit-content"):k(ce=r.$attr("tablepcwidth"),100)?B["$<<"]("stretch"):Q=' style="width: '+ce+'%;"',w(r["$attr?"]("float"))&&B["$<<"](r.$attr("float")),w(Re=r.$role())&&B["$<<"](Re),Ye=' class="'+B.$join(" ")+'"',A["$<<"]("<table"+b+Ye+Q+">"),w(r["$title?"]())&&A["$<<"]('<caption class="title">'+r.$captioned_title()+"</caption>"),w(he(r.$attr("rowcount"),0))&&(Qe=f.void_element_slash,A["$<<"]("<colgroup>"),w(X)?A=Ue(A,J("Array").$new(r.$columns().$size(),"<col"+Qe+">")):Ge(r.$columns(),"each",[],function(tt){return tt==null&&(tt=T),A["$<<"](w(tt["$option?"]("autowidth"))?"<col"+Qe+">":'<col style="width: '+tt.$attr("colpcwidth")+'%;"'+Qe+">")}),A["$<<"]("</colgroup>"),Ge(r.$rows().$to_h(),"each",[],function(tt,at){return tt==null&&(tt=T),at==null&&(at=T),w(at["$empty?"]())?T:(A["$<<"]("<t"+tt+">"),Ge(at,"each",[],function(ft){return ft==null&&(ft=T),A["$<<"]("<tr>"),Ge(ft,"each",[],function(pt){var ht=T,kt=T,yt=T,Tt=T,Ct=T,wt=T;if(pt==null&&(pt=T),k(tt,"head"))ht=pt.$text();else switch(pt.$style()){case"asciidoc":ht='<div class="content">'+pt.$content()+"</div>";break;case"literal":ht='<div class="literal"><pre>'+pt.$text()+"</pre></div>";break;default:ht=w((ht=pt.$content())["$empty?"]())?"":'<p class="tableblock">'+ht.$join(`</p>
<p class="tableblock">`)+"</p>"}return kt=k(tt,"head")||k(pt.$style(),"header")?"th":"td",yt=' class="tableblock halign-'+pt.$attr("halign")+" valign-"+pt.$attr("valign")+'"',Tt=w(pt.$colspan())?' colspan="'+pt.$colspan()+'"':"",Ct=w(pt.$rowspan())?' rowspan="'+pt.$rowspan()+'"':"",wt=w(r.$document()["$attr?"]("cellbgcolor"))?' style="background-color: '+r.$document().$attr("cellbgcolor")+';"':"",A["$<<"]("<"+kt+yt+Tt+Ct+wt+">"+ht+"</"+kt+">")}),A["$<<"]("</tr>")}),A["$<<"]("</t"+tt+">"))})),A["$<<"]("</table>"),A.$join(J("LF"))}),pe(V,"$convert_toc",function(r){var f=T,A=T,b=T,d=T,B=T,D=T;return w((f=r.$document())["$attr?"]("toc-placement","macro"))&&w(f["$sections?"]())&&w(f["$attr?"]("toc"))?(w(r.$id())?(A=' id="'+r.$id()+'"',b=' id="'+r.$id()+'title"'):(A=' id="toc"',b=' id="toctitle"'),d=w(r["$title?"]())?r.$title():f.$attr("toc-title"),B=w(r["$attr?"]("levels"))?r.$attr("levels").$to_i():T,D=w(r["$role?"]())?r.$role():f.$attr("toc-class","toc"),"<div"+A+' class="'+D+`">
<div`+b+' class="title">'+d+`</div>
`+f.$converter().$convert(f,"outline",E(["toclevels"],{toclevels:B}))+`
</div>`):"\x3C!-- toc disabled -->"}),pe(V,"$convert_ulist",function(r){var f=this,A=T,b=T,d=T,B=T,D=T,Q=T,X=T;return A=[],b=w(r.$id())?' id="'+r.$id()+'"':"",d=["ulist",r.$style(),r.$role()].$compact(),B=D="",w(Q=r["$option?"]("checklist"))?(d.$unshift(d.$shift(),"checklist"),X=' class="checklist"',w(r["$option?"]("interactive"))?w(f.xml_mode)?(B='<input type="checkbox" data-item-complete="1" checked="checked"/> ',D='<input type="checkbox" data-item-complete="0"/> '):(B='<input type="checkbox" data-item-complete="1" checked> ',D='<input type="checkbox" data-item-complete="0"> '):w(r.$document()["$attr?"]("icons","font"))?(B='<i class="fa fa-check-square-o"></i> ',D='<i class="fa fa-square-o"></i> '):(B="&#10003; ",D="&#10063; ")):X=w(r.$style())?' class="'+r.$style()+'"':"",A["$<<"]("<div"+b+' class="'+d.$join(" ")+'">'),w(r["$title?"]())&&A["$<<"]('<div class="title">'+r.$title()+"</div>"),A["$<<"]("<ul"+X+">"),Ge(r.$items(),"each",[],function(Re){return Re==null&&(Re=T),w(Re.$id())?A["$<<"]('<li id="'+Re.$id()+'"'+(w(Re.$role())?' class="'+Re.$role()+'"':"")+">"):w(Re.$role())?A["$<<"]('<li class="'+Re.$role()+'">'):A["$<<"]("<li>"),w(Q)&&w(Re["$attr?"]("checkbox"))?A["$<<"]("<p>"+(w(Re["$attr?"]("checked"))?B:D)+Re.$text()+"</p>"):A["$<<"]("<p>"+Re.$text()+"</p>"),w(Re["$blocks?"]())&&A["$<<"](Re.$content()),A["$<<"]("</li>")}),A["$<<"]("</ul>"),A["$<<"]("</div>"),A.$join(J("LF"))}),pe(V,"$convert_verse",function(r){var f=this,A=T,b=T,d=T,B=T,D=T,Q=T,X=T,ce=T,Re=T;return A=w(r.$id())?' id="'+r.$id()+'"':"",b=["verseblock",r.$role()].$compact(),d=' class="'+b.$join(" ")+'"',B=w(r["$title?"]())?`
<div class="title">`+r.$title()+"</div>":"",D=w(r["$attr?"]("attribution"))?r.$attr("attribution"):T,Q=w(r["$attr?"]("citetitle"))?r.$attr("citetitle"):T,w(D)||w(Q)?(X=w(Q)?"<cite>"+Q+"</cite>":"",ce=w(D)?"&#8212; "+D+(w(Q)?"<br"+f.void_element_slash+`>
`:""):"",Re=`
<div class="attribution">
`+ce+X+`
</div>`):Re="","<div"+A+d+">"+B+`
<pre class="content">`+r.$content()+"</pre>"+Re+`
</div>`}),pe(V,"$convert_video",function(r){var f,A,b=this,d=T,B=T,D=T,Q=T,X=T,ce=T,Re=T,Ye=T,Qe=T,ot=T,tt=T,at=T,ct=T,ft=T,ut=T,pt=T,ht=T,kt=T,yt=T,Tt=T,Ct=T,wt=T,At=T,It=T,Bt=T,Ot=T,Kt=T,qt=T,xt=T,Rt=T,Dt=T,Et=T,Ft=T,Gt=T,Mt=T,zt=T,Xt=T;switch(d=b.xml_mode,B=w(r.$id())?' id="'+r.$id()+'"':"",D=["videoblock"],w(r["$attr?"]("float"))&&D["$<<"](r.$attr("float")),w(r["$attr?"]("align"))&&D["$<<"]("text-"+r.$attr("align")),w(r.$role())&&D["$<<"](r.$role()),Q=' class="'+D.$join(" ")+'"',X=w(r["$title?"]())?`
<div class="title">`+r.$title()+"</div>":"",ce=w(r["$attr?"]("width"))?' width="'+r.$attr("width")+'"':"",Re=w(r["$attr?"]("height"))?' height="'+r.$attr("height")+'"':"",r.$attr("poster")){case"vimeo":return w((Ye=r.$document().$attr("asset-uri-scheme","https"))["$empty?"]())||(Ye=""+Ye+":"),Qe=w(r["$attr?"]("start"))?"#at="+r.$attr("start"):"",ot=["?"],A=r.$attr("target").$split("/",2),f=et(A),tt=f[0]==null?T:f[0],at=f[1]==null?T:f[1],ct=w(at=w(ft=at)?ft:r.$attr("hash"))?""+(w(ft=ot.$pop())?ft:"&amp;")+"h="+at:"",ut=w(r["$option?"]("autoplay"))?""+(w(ft=ot.$pop())?ft:"&amp;")+"autoplay=1":"",pt=w(r["$option?"]("loop"))?""+(w(ft=ot.$pop())?ft:"&amp;")+"loop=1":"",ht=w(r["$option?"]("muted"))?""+(w(ft=ot.$pop())?ft:"&amp;")+"muted=1":"","<div"+B+Q+">"+X+`
<div class="content">
<iframe`+ce+Re+' src="'+Ye+"//player.vimeo.com/video/"+tt+ct+ut+pt+ht+Qe+'" frameborder="0"'+(w(r["$option?"]("nofullscreen"))?"":b.$append_boolean_attribute("allowfullscreen",d))+`></iframe>
</div>
</div>`;case"youtube":return w((Ye=r.$document().$attr("asset-uri-scheme","https"))["$empty?"]())||(Ye=""+Ye+":"),kt=w(r["$option?"]("related"))?1:0,yt=w(r["$attr?"]("start"))?"&amp;start="+r.$attr("start"):"",Tt=w(r["$attr?"]("end"))?"&amp;end="+r.$attr("end"):"",ut=w(r["$option?"]("autoplay"))?"&amp;autoplay=1":"",pt=w(Ct=r["$option?"]("loop"))?"&amp;loop=1":"",wt=w(r["$option?"]("muted"))?"&amp;mute=1":"",At=w(r["$option?"]("nocontrols"))?"&amp;controls=0":"",w(r["$option?"]("nofullscreen"))?(It="&amp;fs=0",Bt=""):(It="",Bt=b.$append_boolean_attribute("allowfullscreen",d)),Ot=w(r["$option?"]("modest"))?"&amp;modestbranding=1":"",Kt=w(r["$attr?"]("theme"))?"&amp;theme="+r.$attr("theme"):"",qt=w(r["$attr?"]("lang"))?"&amp;hl="+r.$attr("lang"):"",A=r.$attr("target").$split("/",2),f=et(A),tt=f[0]==null?T:f[0],xt=f[1]==null?T:f[1],w(xt=w(ft=xt)?ft:r.$attr("list"))?Rt="&amp;list="+xt:(A=tt.$split(",",2),f=et(A),tt=f[0]==null?T:f[0],Dt=f[1]==null?T:f[1],w(Dt=w(ft=Dt)?ft:r.$attr("playlist"))?Rt="&amp;playlist="+tt+","+Dt:Rt=w(Ct)?"&amp;playlist="+tt:""),"<div"+B+Q+">"+X+`
<div class="content">
<iframe`+ce+Re+' src="'+Ye+"//www.youtube.com/embed/"+tt+"?rel="+kt+yt+Tt+ut+pt+wt+At+Rt+It+Ot+Kt+qt+'" frameborder="0"'+Bt+`></iframe>
</div>
</div>`;default:return Et=w((Ft=r.$attr("poster"))["$nil_or_empty?"]())?"":' poster="'+r.$media_uri(Ft)+'"',Gt=w((Ft=r.$attr("preload"))["$nil_or_empty?"]())?"":' preload="'+Ft+'"',Mt=r.$attr("start"),zt=r.$attr("end"),Xt=w(Mt)||w(zt)?"#t="+(w(ft=Mt)?ft:"")+(w(zt)?","+zt:""):"","<div"+B+Q+">"+X+`
<div class="content">
<video src="`+r.$media_uri(r.$attr("target"))+Xt+'"'+ce+Re+Et+(w(r["$option?"]("autoplay"))?b.$append_boolean_attribute("autoplay",d):"")+(w(r["$option?"]("muted"))?b.$append_boolean_attribute("muted",d):"")+(w(r["$option?"]("nocontrols"))?"":b.$append_boolean_attribute("controls",d))+(w(r["$option?"]("loop"))?b.$append_boolean_attribute("loop",d):"")+Gt+`>
Your browser does not support the video tag.
</video>
</div>
</div>`}}),pe(V,"$convert_inline_anchor",function(r){var f=this,A=T,b=T,d=T,B=T,D=T,Q=T,X=T,ce=T,Re=T;switch(r.$type()){case"xref":return w(A=r.$attributes()["$[]"]("path"))?(b=f.$append_link_constraint_attrs(r,w(r.$role())?[' class="'+r.$role()+'"']:[]).$join(),d=w(B=r.$text())?B:A):(b=w(r.$role())?' class="'+r.$role()+'"':"",w(d=r.$text())||(y(J("AbstractNode"),D=w(B=(f.refs=w(Q=f.refs)?Q:r.$document().$catalog()["$[]"]("refs"))["$[]"](X=r.$attributes()["$[]"]("refid")))?B:w(X["$nil_or_empty?"]())?ce=f.$get_root_document(r):T)?w(f.resolving_xref=w(B=f.resolving_xref)?B:Re=!0)&&w(Re)?(w(d=D.$xreftext(r.$attr("xrefstyle",T,!0)))?w(d["$include?"]("<a"))&&(d=d.$gsub(J("DropAnchorRx"),"")):d=w(ce)?"[^top]":"["+X+"]",f.resolving_xref=T):d=w(ce)?"[^top]":"["+X+"]":d="["+X+"]")),'<a href="'+r.$target()+'"'+b+">"+d+"</a>";case"ref":return'<a id="'+r.$id()+'"></a>';case"link":return b=w(r.$id())?[' id="'+r.$id()+'"']:[],w(r.$role())&&b["$<<"](' class="'+r.$role()+'"'),w(r["$attr?"]("title"))&&b["$<<"](' title="'+r.$attr("title")+'"'),'<a href="'+r.$target()+'"'+f.$append_link_constraint_attrs(r,b).$join()+">"+r.$text()+"</a>";case"bibref":return'<a id="'+r.$id()+'"></a>['+(w(B=r.$reftext())?B:r.$id())+"]";default:return f.$logger().$warn("unknown anchor type: "+r.$type().$inspect()),T}}),pe(V,"$convert_inline_break",function(r){var f=this;return""+r.$text()+"<br"+f.void_element_slash+">"}),pe(V,"$convert_inline_button",function(r){return'<b class="button">'+r.$text()+"</b>"}),pe(V,"$convert_inline_callout",function(r){var f=this,A=T,b=T;return w(r.$document()["$attr?"]("icons","font"))?'<i class="conum" data-value="'+r.$text()+'"></i><b>('+r.$text()+")</b>":w(r.$document()["$attr?"]("icons"))?(A=r.$icon_uri("callouts/"+r.$text()),'<img src="'+A+'" alt="'+r.$text()+'"'+f.void_element_slash+">"):y(De("Array"),b=r.$attributes()["$[]"]("guard"))?'&lt;!--<b class="conum">('+r.$text()+")</b>--&gt;":""+b+'<b class="conum">('+r.$text()+")</b>"}),pe(V,"$convert_inline_footnote",function(r){var f=T,A=T;return w(f=r.$attr("index"))?k(r.$type(),"xref")?'<sup class="footnoteref">[<a class="footnote" href="#_footnotedef_'+f+'" title="View footnote.">'+f+"</a>]</sup>":(A=w(r.$id())?' id="_footnote_'+r.$id()+'"':"",'<sup class="footnote"'+A+'>[<a id="_footnoteref_'+f+'" class="footnote" href="#_footnotedef_'+f+'" title="View footnote.">'+f+"</a>]</sup>"):k(r.$type(),"xref")?'<sup class="footnoteref red" title="Unresolved footnote reference.">['+r.$text()+"]</sup>":T}),pe(V,"$convert_inline_image",function(r){var f=this,A=T,b=T,d=T,B=T,D=T,Q=T,X=T,ce=T,Re=T,Ye=T;return A=r.$target(),k(b=w(d=r.$type())?d:"image","icon")?k(B=r.$document().$attr("icons"),"font")?(D="fa fa-"+A,w(r["$attr?"]("size"))&&(D=""+D+" fa-"+r.$attr("size")),w(r["$attr?"]("flip"))?D=""+D+" fa-flip-"+r.$attr("flip"):w(r["$attr?"]("rotate"))&&(D=""+D+" fa-rotate-"+r.$attr("rotate")),Q=w(r["$attr?"]("title"))?' title="'+r.$attr("title")+'"':"",X='<i class="'+D+'"'+Q+"></i>"):w(B)?(Q=w(r["$attr?"]("width"))?' width="'+r.$attr("width")+'"':"",w(r["$attr?"]("height"))&&(Q=""+Q+' height="'+r.$attr("height")+'"'),w(r["$attr?"]("title"))&&(Q=""+Q+' title="'+r.$attr("title")+'"'),X='<img src="'+r.$icon_uri(A)+'" alt="'+f.$encode_attribute_value(r.$alt())+'"'+Q+f.void_element_slash+">"):X="["+r.$alt()+"&#93;":(Q=w(r["$attr?"]("width"))?' width="'+r.$attr("width")+'"':"",w(r["$attr?"]("height"))&&(Q=""+Q+' height="'+r.$attr("height")+'"'),w(r["$attr?"]("title"))&&(Q=""+Q+' title="'+r.$attr("title")+'"'),(w(r["$attr?"]("format","svg"))||w(A["$include?"](".svg")))&&w(Me(r.$document().$safe(),De(J("SafeMode"),"SECURE")))?w(r["$option?"]("inline"))?X=w(d=f.$read_svg_contents(r,A))?d:'<span class="alt">'+r.$alt()+"</span>":w(r["$option?"]("interactive"))?(ce=w(r["$attr?"]("fallback"))?'<img src="'+r.$image_uri(r.$attr("fallback"))+'" alt="'+f.$encode_attribute_value(r.$alt())+'"'+Q+f.void_element_slash+">":'<span class="alt">'+r.$alt()+"</span>",X='<object type="image/svg+xml" data="'+r.$image_uri(A)+'"'+Q+">"+ce+"</object>"):X='<img src="'+r.$image_uri(A)+'" alt="'+f.$encode_attribute_value(r.$alt())+'"'+Q+f.void_element_slash+">":X='<img src="'+r.$image_uri(A)+'" alt="'+f.$encode_attribute_value(r.$alt())+'"'+Q+f.void_element_slash+">"),w(r["$attr?"]("link"))&&(X='<a class="image" href="'+r.$attr("link")+'"'+f.$append_link_constraint_attrs(r).$join()+">"+X+"</a>"),Re=b,w(Ye=r.$role())?Re=w(r["$attr?"]("float"))?""+Re+" "+r.$attr("float")+" "+Ye:""+Re+" "+Ye:w(r["$attr?"]("float"))&&(Re=""+Re+" "+r.$attr("float")),'<span class="'+Re+'">'+X+"</span>"}),pe(V,"$convert_inline_indexterm",function(r){return k(r.$type(),"visible")?r.$text():""}),pe(V,"$convert_inline_kbd",function(r){var f=T;return k((f=r.$attr("keys")).$size(),1)?"<kbd>"+f["$[]"](0)+"</kbd>":'<span class="keyseq"><kbd>'+f.$join("</kbd>+<kbd>")+"</kbd></span>"}),pe(V,"$convert_inline_menu",function(r){var f=T,A=T,b=T,d=T,B=T;return f=w(r.$document()["$attr?"]("icons","font"))?'&#160;<i class="fa fa-angle-right caret"></i> ':'&#160;<b class="caret">&#8250;</b> ',A="</b>"+f+'<b class="submenu">',b=r.$attr("menu"),w((d=r.$attr("submenus"))["$empty?"]())?w(B=r.$attr("menuitem"))?'<span class="menuseq"><b class="menu">'+b+"</b>"+f+'<b class="menuitem">'+B+"</b></span>":'<b class="menuref">'+b+"</b>":'<span class="menuseq"><b class="menu">'+b+"</b>"+f+'<b class="submenu">'+d.$join(A)+"</b>"+f+'<b class="menuitem">'+r.$attr("menuitem")+"</b></span>"}),pe(V,"$convert_inline_quoted",function(r){var f,A,b=T,d=T,B=T,D=T;return A=J("QUOTE_TAGS")["$[]"](r.$type()),f=et(A),b=f[0]==null?T:f[0],d=f[1]==null?T:f[1],B=f[2]==null?T:f[2],w(r.$id())?(D=w(r.$role())?' class="'+r.$role()+'"':"",w(B)?""+b.$chop()+' id="'+r.$id()+'"'+D+">"+r.$text()+d:'<span id="'+r.$id()+'"'+D+">"+b+r.$text()+d+"</span>"):w(r.$role())?w(B)?""+b.$chop()+' class="'+r.$role()+'">'+r.$text()+d:'<span class="'+r.$role()+'">'+b+r.$text()+d+"</span>":""+b+r.$text()+d}),pe(V,"$read_svg_contents",function(r,f){var A=T,b=T,d=T,B=T;if(w(A=r.$read_contents(f,E(["start","normalize","label","warn_if_empty"],{start:r.$document().$attr("imagesdir"),normalize:!0,label:"SVG",warn_if_empty:!0})))){if(w(A["$empty?"]()))return T;w(A["$start_with?"]("<svg"))||(A=A.$sub(J("SvgPreambleRx"),"")),b=d=B=T,Ge(["width","height"],"each",[],function(Q){var X=T,ce=T;if(Q==null&&(Q=T),!w(r["$attr?"](Q)))return T;if(!w(d)){if(k(B=w(X=B)?X:w(ce=A.$match(J("SvgStartTagRx")))?ce:"no_match","no_match"))return T;d=(b=B["$[]"](0)).$gsub(J("DimensionAttributeRx"),"")}return d=""+d.$chop()+" "+Q+'="'+r.$attr(Q)+'">'}),w(d)&&(A=""+d+A["$[]"](t.Range.$new(b.$length(),-1,!1)))}return A}),V.$private(),pe(V,"$append_boolean_attribute",function(r,f){return w(f)?" "+r+'="'+r+'"':" "+r}),pe(V,"$append_link_constraint_attrs",function(r,f){var A=T,b=T;return f==null&&(f=[]),w(r["$option?"]("nofollow"))&&(A="nofollow"),w(b=r.$attributes()["$[]"]("window"))?(f["$<<"](' target="'+b+'"'),(k(b,"_blank")||w(r["$option?"]("noopener")))&&f["$<<"](w(A)?' rel="'+A+' noopener"':' rel="noopener"')):w(A)&&f["$<<"](' rel="'+A+'"'),f},-2),pe(V,"$encode_attribute_value",function(r){return w(r["$include?"]('"'))?r.$gsub('"',"&quot;"):r}),pe(V,"$generate_manname_section",function(r){var f=T,A=T,b=T,d=T,B=T;return f=r.$attr("manname-title","Name"),w(b=r.$sections()["$[]"](0))&&k(A=b.$title(),A.$upcase())&&(f=f.$upcase()),d=w(B=r.$attr("manname-id"))?' id="'+B+'"':"","<h2"+d+">"+f+`</h2>
<div class="sectionbody">
<p>`+r.$attr("mannames").$join(", ")+" - "+r.$attr("manpurpose")+`</p>
</div>`}),pe(V,"$get_root_document",function(r){for(;w((r=r.$document())["$nested?"]());)r=r.$parent_document();return r}),pe(V,"$method_missing",function _(r,f){var A,b,d=_.$$p||T,B=this,D=T;return _.$$p=null,A=Ze(arguments,1),b=A,Ae((D=r.$to_s())["$start_with?"]("convert_"))&&w(B["$handles?"](D))?Ge(B,"send",["convert_"+D].concat(rt(b))):N(B,ve(B,"method_missing",_,!1,!0),"method_missing",[r].concat(rt(b)),d)},-2),pe(V,"$respond_to_missing?",function(r,f){var A=this,b=T,d=T;return Ze(arguments,1),w(b=(d=r.$to_s())["$start_with?"]("convert_")["$!"]())?A["$handles?"](d):b},-2)}($e("Converter"),De($e("Converter"),"Base"),Z)}(H[0],H)},Opal.modules["asciidoctor/extensions"]=function(t){var g=t.module,u=t.klass,$=t.truthy,E=t.hash2,a=t.def,k=t.send,pe=t.alias,N=t.slice,ve=t.rb_plus,w=t.eqeq,Ge=t.rb_gt,he=t.not,Ue=t.eqeqeq,Ae=t.to_a,Be=t.to_ary,st=t.const_set,Me=t.return_val,et=t.send2,Pe=t.find_super,Ve=t.NilClass,it=t.class_variable_set,C=t.class_variable_get,Xe=t.regexp,y=t.Class,Ze=t.return_ivar,rt=t.rb_lt,H=t.rb_minus,T=t.hash,De=[],ue=t.nil,we=t.$$$;return t.add_stubs("[]=,config,const_defined?,singleton_class?,include,const_get,extend,enable_dsl,attr_reader,merge,class,update,raise,document,==,doctype,[],+,level,delete,>,casecmp,new,title=,sectname=,special=,fetch,numbered=,attr?,!,key?,special,numbered,id=,generate_id,title,update_attributes,tr,basename,create_block,assign_caption,===,parse_blocks,empty?,include?,sub_attributes,parse,each,define_method,unshift,shift,send,size,receiver,binding,define_singleton_method,instance_exec,to_proc,call,option,content_model,flatten,positional_attributes,default_attributes,respond_to?,to_s,partition,to_i,<<,compact,inspect,resolve_attributes,attr_accessor,to_set,contexts,match?,resolve_regexp,format,method,register,reset,values,groups,arity,activate,add_document_processor,tree_processor,tree_processors?,tree_processors,any?,select,add_syntax_processor,to_sym,instance_variable_get,kind,private,join,map,split,capitalize,instance_variable_set,resolve_args,singleton_class,process_block_given?,source_location,freeze,resolve_class,<,update_config,as_symbol,name,name=,pop,-,-@,next_auto_id,generate_name,each_with_object"),function(ge,Z){var $e=g(ge,"Asciidoctor"),Y=[$e].concat(Z);return function(z,R){var V=g(z,"Extensions"),K=[V].concat(R),J=t.$r(K);return function(M,_,r){var f=u(M,_,"Processor"),A=[f].concat(r),b=t.$r(A),d=f.$$prototype;return d.config=ue,function(B,D){return a(B,"$config",function(){var X=this,ce=ue;return X.config==null&&(X.config=ue),X.config=$(ce=X.config)?ce:E([],{})}),a(B,"$option",function(X,ce){var Re,Ye=this;return Re=[X,ce],k(Ye.$config(),"[]=",Re),Re[Re.length-1]}),a(B,"$enable_dsl",function(){var X=this;return $(X["$const_defined?"]("DSL"))?$(X["$singleton_class?"]())?X.$include(X.$const_get("DSL")):X.$extend(X.$const_get("DSL")):ue}),pe(B,"use_dsl","enable_dsl")}(t.get_singleton_class(f)),f.$attr_reader("config"),a(f,"$initialize",function(D){var Q=this;return D==null&&(D=E([],{})),Q.config=Q.$class().$config().$merge(D)},-1),a(f,"$update_config",function(D){var Q=this;return Q.config.$update(D)}),a(f,"$process",function(D){var Q=this;return N(arguments),Q.$raise(we("NotImplementedError"),""+b("Processor")+" subclass "+Q.$class()+" must implement the #process method")},-1),a(f,"$create_section",function(D,Q,X,ce){var Re,Ye,Qe=ue,ot=ue,tt=ue,at=ue,ct=ue,ft=ue,ut=ue,pt=ue,ht=ue,kt=ue;return ce==null&&(ce=E([],{})),Qe=D.$document(),ot=(tt=Qe.$doctype())["$=="]("book"),at=$(ct=ce["$[]"]("level"))?ct:ve(D.$level(),1),$(ft=X.$delete("style"))?$(ot)&&w(ft,"abstract")?(Re=["chapter",1],ut=Re[0],at=Re[1]):(Re=[ft,!0],ut=Re[0],pt=Re[1],w(at,0)&&(at=1)):$(ot)?ut=w(at,0)?"part":$(Ge(at,1))?"section":"chapter":w(tt,"manpage")&&w(Q.$casecmp("synopsis"),0)?(Re=["synopsis",!0],ut=Re[0],pt=Re[1]):ut="section",ht=b("Section").$new(D,at),Re=[Q,ut],Ye=[Re[0]],k(ht,"title=",Ye),Ye[Ye.length-1],Ye=[Re[1]],k(ht,"sectname=",Ye),Ye[Ye.length-1],$(pt)?(ht["$special="](!0),$(ce.$fetch("numbered",ft["$=="]("appendix")))?ht["$numbered="](!0):he(ce["$key?"]("numbered"))&&$(Qe["$attr?"]("sectnums","all"))&&ht["$numbered="]($(ot)&&w(at,1)?"chapter":!0)):$(Ge(at,0))?$(ce.$fetch("numbered",Qe["$attr?"]("sectnums")))&&ht["$numbered="]($(ht.$special())?$(ct=D.$numbered())||ct:!0):$(ce.$fetch("numbered",$(ct=ot)?Qe["$attr?"]("partnums"):ct))&&ht["$numbered="](!0),w(kt=X["$[]"]("id"),!1)?X.$delete("id"):ht["$id="]((Re=["id",$(ct=kt)?ct:$(Qe["$attr?"]("sectids"))?b("Section").$generate_id(ht.$title(),Qe):ue],k(X,"[]=",Re),Re[Re.length-1])),ht.$update_attributes(X),ht},-4),a(f,"$create_block",function(D,Q,X,ce,Re){return Re==null&&(Re=E([],{})),b("Block").$new(D,Q,E(["source","attributes"],{source:X,attributes:ce}).$merge(Re))},-5),a(f,"$create_list",function(D,Q,X){var ce=ue;return X==null&&(X=ue),ce=b("List").$new(D,Q),$(X)&&ce.$update_attributes(X),ce},-3),a(f,"$create_list_item",function(D,Q){return Q==null&&(Q=ue),b("ListItem").$new(D,Q)},-2),a(f,"$create_image_block",function(D,Q,X){var ce,Re=this,Ye=ue,Qe=ue,ot=ue;return X==null&&(X=E([],{})),$(Ye=Q["$[]"]("target"))||Re.$raise(we("ArgumentError"),"Unable to create an image block, target attribute is required"),$(Q["$[]"]("alt"))||Q["$[]="]("alt",(ce=["default-alt",b("Helpers").$basename(Ye,!0).$tr("_-"," ")],k(Q,"[]=",ce),ce[ce.length-1])),Qe=$(Q["$key?"]("title"))?Q.$delete("title"):ue,ot=Re.$create_block(D,"image",ue,Q,X),$(Qe)&&(ot["$title="](Qe),ot.$assign_caption(Q.$delete("caption"),"figure")),ot},-3),a(f,"$create_inline",function(D,Q,X,ce){return ce==null&&(ce=E([],{})),b("Inline").$new(D,Q,X,w(Q,"quoted")?E(["type"],{type:"unquoted"}).$merge(ce):ce)},-4),a(f,"$parse_content",function(D,Q,X){var ce=ue;return X==null&&(X=ue),ce=Ue(b("Reader"),Q)?Q:b("Reader").$new(Q),b("Parser").$parse_blocks(ce,D,X),D},-3),a(f,"$parse_attributes",function(D,Q,X){var ce=ue;return X==null&&(X=E([],{})),$($(Q)?Q["$empty?"]():!0)?E([],{}):($(X["$[]"]("sub_attributes"))&&$(Q["$include?"](b("ATTR_REF_HEAD")))&&(Q=D.$sub_attributes(Q)),b("AttributeList").$new(Q).$parse($(ce=X["$[]"]("positional_attributes"))?ce:[]))},-3),k([["create_paragraph","create_block","paragraph"],["create_open_block","create_block","open"],["create_example_block","create_block","example"],["create_pass_block","create_block","pass"],["create_listing_block","create_block","listing"],["create_literal_block","create_block","literal"],["create_anchor","create_inline","anchor"],["create_inline_pass","create_inline","quoted"]],"each",[],function B(D,Q,X){var ce=B.$$s==null?this:B.$$s;return D==null&&(D=ue),Q==null&&(Q=ue),X==null&&(X=ue),k(ce,"define_method",[D],function Re(Ye){var Qe,ot,tt=Re.$$s==null?this:Re.$$s;return Qe=N(arguments),ot=Qe,ot.$unshift(ot.$shift(),X),k(tt,"send",[Q].concat(Ae(ot)))},{$$arity:-1,$$s:ce})},{$$s:f})}(K[0],null,K),function(M){var _=g(M,"ProcessorDsl");return a(_,"$option",function(f,A){var b,d=this;return b=[f,A],k(d.$config(),"[]=",b),b[b.length-1]}),a(_,"$process",function r(f){var A=r.$$p||ue,b,d,B,D=this,Q=ue;return D.process_block==null&&(D.process_block=ue),r.$$p=null,b=N(arguments),d=b,A!==ue?($(d["$empty?"]())||D.$raise(we("ArgumentError"),"wrong number of arguments (given "+d.$size()+", expected 0)"),$(A.$binding())&&w(D,A.$binding().$receiver())||(Q=D,k(A,"define_singleton_method",["call"],function(ce){var Re,Ye;return Re=N(arguments),Ye=Re,k(Q,"instance_exec",Ae(Ye),A.$to_proc())},-1)),D.process_block=A):$((B=D.process_block,B!=null&&B!==ue?"instance-variable":ue))?k(D.process_block,"call",Ae(d)):D.$raise(we("NotImplementedError"),""+D.$class()+" #process method called before being registered")},-1),a(_,"$process_block_given?",function(){var f,A=this;return f=A.process_block,f!=null&&f!==ue?"instance-variable":ue})}(K[0]),function(M,_){var r=g(M,"DocumentProcessorDsl"),f=[r].concat(_),A=t.$r(f);return r.$include(A("ProcessorDsl")),a(r,"$prefer",function(){var d=this;return d.$option("position",">>")})}(K[0],K),function(M,_){var r=g(M,"SyntaxProcessorDsl"),f=[r].concat(_),A=t.$r(f);return r.$include(A("ProcessorDsl")),a(r,"$named",function(d){var B=this;return Ue(A("Processor"),B)?B.name=d:B.$option("name",d)}),a(r,"$content_model",function(d){var B=this;return B.$option("content_model",d)}),pe(r,"parse_content_as","content_model"),a(r,"$positional_attributes",function(d){var B,D,Q=this;return B=N(arguments),D=B,Q.$option("positional_attrs",D.$flatten())},-1),pe(r,"name_positional_attributes","positional_attributes"),pe(r,"positional_attrs","positional_attributes"),a(r,"$default_attributes",function(d){var B=this;return B.$option("default_attrs",d)}),pe(r,"default_attrs","default_attributes"),a(r,"$resolve_attributes",function(d){var B,D,Q,X=this,ce=ue,Re=ue,Ye=ue;return B=N(arguments),D=B,$(Ge(D.$size(),1))||$((D=D.$fetch(0,!0))["$respond_to?"]("to_sym"))&&(D=[D]),Ue(!0,ce=D)?(X.$option("positional_attrs",[]),X.$option("default_attrs",E([],{}))):Ue(we("Array"),ce)?(Q=[[],E([],{})],Re=Q[0],Ye=Q[1],k(D,"each",[],function(ot){var tt,at,ct=ue,ft=ue,ut=ue;return ot==null&&(ot=ue),$((ot=ot.$to_s())["$include?"]("="))?(at=ot.$partition("="),tt=Be(at),ct=tt[0]==null?ue:tt[0],tt[1]==null||tt[1],ft=tt[2]==null?ue:tt[2],$(ct["$include?"](":"))&&(at=ct.$partition(":"),tt=Be(at),ut=tt[0]==null?ue:tt[0],tt[1]==null||tt[1],ct=tt[2]==null?ue:tt[2],ut=w(ut,"@")?Re.$size():ut.$to_i(),Re["$[]="](ut,ct)),tt=[ct,ft],k(Ye,"[]=",tt),tt[tt.length-1]):$(ot["$include?"](":"))?(at=ot.$partition(":"),tt=Be(at),ut=tt[0]==null?ue:tt[0],tt[1]==null||tt[1],ct=tt[2]==null?ue:tt[2],ut=w(ut,"@")?Re.$size():ut.$to_i(),tt=[ut,ct],k(Re,"[]=",tt),tt[tt.length-1]):Re["$<<"](ot)}),X.$option("positional_attrs",Re.$compact()),X.$option("default_attrs",Ye)):Ue(we("Hash"),ce)?(Q=[[],E([],{})],Re=Q[0],Ye=Q[1],k(D,"each",[],function(ot,tt){var at,ct,ft=ue,ut=ue;return ot==null&&(ot=ue),tt==null&&(tt=ue),$((ft=ot.$to_s())["$include?"](":"))&&(ct=ft.$partition(":"),at=Be(ct),ut=at[0]==null?ue:at[0],at[1]==null||at[1],ft=at[2]==null?ue:at[2],ut=w(ut,"@")?Re.$size():ut.$to_i(),Re["$[]="](ut,ft)),$(tt)?(at=[ft,tt],k(Ye,"[]=",at),at[at.length-1]):ue}),X.$option("positional_attrs",Re.$compact()),X.$option("default_attrs",Ye)):X.$raise(we("ArgumentError"),"unsupported attributes specification for macro: "+D.$inspect())},-1),pe(r,"resolves_attributes","resolve_attributes")}(K[0],K),function(M,_,r){var f=u(M,_,"Preprocessor"),A=[f].concat(r),b=t.$r(A);return a(f,"$process",function(B,D){var Q=this;return Q.$raise(we("NotImplementedError"),""+b("Preprocessor")+" subclass "+Q.$class()+" must implement the #process method")})}(K[0],J("Processor"),K),st(J("Preprocessor"),"DSL",J("DocumentProcessorDsl")),function(M,_,r){var f=u(M,_,"TreeProcessor"),A=[f].concat(r),b=t.$r(A);return a(f,"$process",function(B){var D=this;return D.$raise(we("NotImplementedError"),""+b("TreeProcessor")+" subclass "+D.$class()+" must implement the #process method")})}(K[0],J("Processor"),K),st(J("TreeProcessor"),"DSL",J("DocumentProcessorDsl")),st(K[0],"Treeprocessor",J("TreeProcessor")),function(M,_,r){var f=u(M,_,"Postprocessor"),A=[f].concat(r),b=t.$r(A);return a(f,"$process",function(B,D){var Q=this;return Q.$raise(we("NotImplementedError"),""+b("Postprocessor")+" subclass "+Q.$class()+" must implement the #process method")})}(K[0],J("Processor"),K),st(J("Postprocessor"),"DSL",J("DocumentProcessorDsl")),function(M,_,r){var f=u(M,_,"IncludeProcessor"),A=[f].concat(r),b=t.$r(A);return a(f,"$process",function(B,D,Q,X){var ce=this;return ce.$raise(we("NotImplementedError"),""+b("IncludeProcessor")+" subclass "+ce.$class()+" must implement the #process method")}),a(f,"$handles?",Me(!0))}(K[0],J("Processor"),K),function(M,_){var r=g(M,"IncludeProcessorDsl"),f=[r].concat(_),A=t.$r(f);return r.$include(A("DocumentProcessorDsl")),a(r,"$handles?",function b(d){var B=b.$$p||ue,D,Q,X,ce=this;return ce.handles_block==null&&(ce.handles_block=ue),b.$$p=null,D=N(arguments),Q=D,B!==ue?($(Q["$empty?"]())||ce.$raise(we("ArgumentError"),"wrong number of arguments (given "+Q.$size()+", expected 0)"),ce.handles_block=B):$((X=ce.handles_block,X!=null&&X!==ue?"instance-variable":ue))?ce.handles_block.$call(Q["$[]"](0)):!0},-1)}(K[0],K),st(J("IncludeProcessor"),"DSL",J("IncludeProcessorDsl")),function(M,_,r){var f=u(M,_,"DocinfoProcessor"),A=[f].concat(r),b=t.$r(A),d=f.$$prototype;return d.config=ue,a(f,"$initialize",function B(D){var Q;B.$$p;var X=this,ce=ue;return B.$$p=null,D==null&&(D=E([],{})),et(X,Pe(X,"initialize",B,!1,!0),"initialize",[D],null),$(ce=X.config["$[]"]("location"))?ce:(Q=["location","head"],k(X.config,"[]=",Q),Q[Q.length-1])},-1),a(f,"$process",function(D){var Q=this;return Q.$raise(we("NotImplementedError"),""+b("DocinfoProcessor")+" subclass "+Q.$class()+" must implement the #process method")})}(K[0],J("Processor"),K),function(M,_){var r=g(M,"DocinfoProcessorDsl"),f=[r].concat(_),A=t.$r(f);return r.$include(A("DocumentProcessorDsl")),a(r,"$at_location",function(d){var B=this;return B.$option("location",d)})}(K[0],K),st(J("DocinfoProcessor"),"DSL",J("DocinfoProcessorDsl")),function(M,_,r){var f=u(M,_,"BlockProcessor"),A=[f].concat(r),b=t.$r(A),d=f.$$prototype;return d.config=ue,f.$attr_accessor("name"),a(f,"$initialize",function B(D,Q){var X;B.$$p;var ce=this,Re=ue;return B.$$p=null,D==null&&(D=ue),Q==null&&(Q=E([],{})),et(ce,Pe(ce,"initialize",B,!1,!0),"initialize",[Q],null),ce.name=$(Re=D)?Re:ce.config["$[]"]("name"),Ue(Ve,Re=ce.config["$[]"]("contexts"))?$(ce.config["$[]"]("contexts"))||ce.config["$[]="]("contexts",["open","paragraph"].$to_set()):Ue(we("Symbol"),Re)?ce.config["$[]="]("contexts",[ce.config["$[]"]("contexts")].$to_set()):ce.config["$[]="]("contexts",ce.config["$[]"]("contexts").$to_set()),$(Re=ce.config["$[]"]("content_model"))?Re:(X=["content_model","compound"],k(ce.config,"[]=",X),X[X.length-1])},-1),a(f,"$process",function(D,Q,X){var ce=this;return ce.$raise(we("NotImplementedError"),""+b("BlockProcessor")+" subclass "+ce.$class()+" must implement the #process method")})}(K[0],J("Processor"),K),function(M,_){var r=g(M,"BlockProcessorDsl"),f=[r].concat(_),A=t.$r(f);return r.$include(A("SyntaxProcessorDsl")),a(r,"$contexts",function(d){var B,D,Q=this;return B=N(arguments),D=B,Q.$option("contexts",D.$flatten().$to_set())},-1),pe(r,"on_contexts","contexts"),pe(r,"on_context","contexts"),pe(r,"bind_to","contexts")}(K[0],K),st(J("BlockProcessor"),"DSL",J("BlockProcessorDsl")),function(M,_,r){var f=u(M,_,"MacroProcessor"),A=[f].concat(r),b=t.$r(A),d=f.$$prototype;return d.config=ue,f.$attr_accessor("name"),a(f,"$initialize",function B(D,Q){var X;B.$$p;var ce=this,Re=ue;return B.$$p=null,D==null&&(D=ue),Q==null&&(Q=E([],{})),et(ce,Pe(ce,"initialize",B,!1,!0),"initialize",[Q],null),ce.name=$(Re=D)?Re:ce.config["$[]"]("name"),$(Re=ce.config["$[]"]("content_model"))?Re:(X=["content_model","attributes"],k(ce.config,"[]=",X),X[X.length-1])},-1),a(f,"$process",function(D,Q,X){var ce=this;return ce.$raise(we("NotImplementedError"),""+b("MacroProcessor")+" subclass "+ce.$class()+" must implement the #process method")})}(K[0],J("Processor"),K),function(M,_){var r=g(M,"MacroProcessorDsl"),f=[r].concat(_),A=t.$r(f);return r.$include(A("SyntaxProcessorDsl")),a(r,"$resolve_attributes",function b(d){var B,D,Q=b.$$p||ue,X=this;return b.$$p=null,B=N(arguments),D=B,w(D.$size(),1)&&he(D["$[]"](0))?X.$option("content_model","text"):(et(X,Pe(X,"resolve_attributes",b,!1,!0),"resolve_attributes",Ae(D),Q),X.$option("content_model","attributes"))},-1),pe(r,"resolves_attributes","resolve_attributes")}(K[0],K),function(M,_,r){var f=u(M,_,"BlockMacroProcessor"),A=[f].concat(r),b=t.$r(A),d=f.$$prototype;return d.name=ue,a(f,"$name",function(){var D=this;return $(b("MacroNameRx")["$match?"](D.name.$to_s()))||D.$raise(we("ArgumentError"),"invalid name for block macro: "+D.name),D.name})}(K[0],J("MacroProcessor"),K),st(J("BlockMacroProcessor"),"DSL",J("MacroProcessorDsl")),function(M,_,r){var f=u(M,_,"InlineMacroProcessor"),A=[f].concat(r),b=t.$r(A),d=f.$$prototype;return d.config=d.name=ue,it(A[0],"@@rx_cache",E([],{})),a(f,"$regexp",function(){var D,Q=this,X=ue;return $(X=Q.config["$[]"]("regexp"))?X:(D=["regexp",Q.$resolve_regexp(Q.name.$to_s(),Q.config["$[]"]("format"))],k(Q.config,"[]=",D),D[D.length-1])}),a(f,"$resolve_regexp",function(D,Q){var X,ce=this,Re=ue;return $(b("MacroNameRx")["$match?"](D))||ce.$raise(we("ArgumentError"),"invalid name for inline macro: "+D),$(Re=C(A[0],"@@rx_cache",!1)["$[]"]([D,Q]))?Re:(X=[[D,Q],Xe(["\\\\?",D,":",w(Q,"short")?"(){0}":"(\\S+?)","\\[(|",b("CC_ANY"),"*?[^\\\\])\\]"])],k(C(A[0],"@@rx_cache",!1),"[]=",X),X[X.length-1])})}(K[0],J("MacroProcessor"),K),function(M,_){var r=g(M,"InlineMacroProcessorDsl"),f=[r].concat(_),A=t.$r(f);return r.$include(A("MacroProcessorDsl")),a(r,"$format",function(d){var B=this;return B.$option("format",d)}),pe(r,"match_format","format"),pe(r,"using_format","format"),a(r,"$match",function(d){var B=this;return B.$option("regexp",d)})}(K[0],K),st(J("InlineMacroProcessor"),"DSL",J("InlineMacroProcessorDsl")),function(M,_){var r=u(M,_,"Extension");return r.$attr_reader("kind"),r.$attr_reader("config"),r.$attr_reader("instance"),a(r,"$initialize",function(A,b,d){var B=this;return B.kind=A,B.instance=b,B.config=d})}(K[0],null),function(M,_){var r=u(M,_,"ProcessorExtension");return r.$attr_reader("process_method"),a(r,"$initialize",function f(A,b,d){f.$$p;var B=this,D=ue;return f.$$p=null,d==null&&(d=ue),et(B,Pe(B,"initialize",f,!1,!0),"initialize",[A,b,b.$config()],null),B.process_method=$(D=d)?D:b.$method("process")},-3)}(K[0],J("Extension")),function(M,_,r){var f=u(M,_,"Group"),A=[f].concat(r);return function(b,d){var B=[b].concat(d),D=t.$r(B);return a(b,"$register",function(X){var ce=this;return X==null&&(X=ue),D("Extensions").$register(X,ce)},-1)}(t.get_singleton_class(f),A),a(f,"$activate",function(d){var B=this;return B.$raise(we("NotImplementedError"))})}(K[0],null,K),function(M,_,r){var f=u(M,_,"Registry"),A=[f].concat(r),b=t.$r(A),d=f.$$prototype;return d.document=d.groups=d.preprocessor_extensions=d.tree_processor_extensions=d.postprocessor_extensions=d.include_processor_extensions=d.docinfo_processor_extensions=d.block_extensions=d.block_macro_extensions=d.inline_macro_extensions=ue,f.$attr_reader("document"),f.$attr_reader("groups"),a(f,"$initialize",function(D){var Q=this;return D==null&&(D=E([],{})),Q.groups=D,Q.$reset(),Q.preprocessor_extensions=Q.tree_processor_extensions=Q.postprocessor_extensions=Q.include_processor_extensions=Q.docinfo_processor_extensions=Q.block_extensions=Q.block_macro_extensions=Q.inline_macro_extensions=ue,Q.document=ue},-1),a(f,"$activate",function(D){var Q=this,X=ue;return $(Q.document)&&Q.$reset(),Q.document=D,$((X=ve(b("Extensions").$groups().$values(),Q.groups.$values()))["$empty?"]())||k(X,"each",[],function ce(Re){var Ye=ce.$$s==null?this:ce.$$s,Qe=ue;if(Re==null&&(Re=ue),Ue(we("Proc"),Qe=Re))switch(Re.$arity()){case 0:case-1:return k(Ye,"instance_exec",[],Re.$to_proc());case 1:return Re.$call(Ye);default:return ue}else return Ue(y,Qe)?Re.$new().$activate(Ye):Re.$activate(Ye)},{$$s:Q}),Q}),a(f,"$preprocessor",function B(D){var Q=B.$$p||ue,X,ce,Re=this;return B.$$p=null,X=N(arguments),ce=X,k(Re,"add_document_processor",["preprocessor",ce],Q.$to_proc())},-1),a(f,"$preprocessors?",function(){var D=this;return D.preprocessor_extensions["$!"]()["$!"]()}),a(f,"$preprocessors",Ze("preprocessor_extensions")),a(f,"$tree_processor",function B(D){var Q=B.$$p||ue,X,ce,Re=this;return B.$$p=null,X=N(arguments),ce=X,k(Re,"add_document_processor",["tree_processor",ce],Q.$to_proc())},-1),a(f,"$tree_processors?",function(){var D=this;return D.tree_processor_extensions["$!"]()["$!"]()}),a(f,"$tree_processors",Ze("tree_processor_extensions")),pe(f,"treeprocessor","tree_processor"),pe(f,"treeprocessors?","tree_processors?"),pe(f,"treeprocessors","tree_processors"),a(f,"$postprocessor",function B(D){var Q=B.$$p||ue,X,ce,Re=this;return B.$$p=null,X=N(arguments),ce=X,k(Re,"add_document_processor",["postprocessor",ce],Q.$to_proc())},-1),a(f,"$postprocessors?",function(){var D=this;return D.postprocessor_extensions["$!"]()["$!"]()}),a(f,"$postprocessors",Ze("postprocessor_extensions")),a(f,"$include_processor",function B(D){var Q=B.$$p||ue,X,ce,Re=this;return B.$$p=null,X=N(arguments),ce=X,k(Re,"add_document_processor",["include_processor",ce],Q.$to_proc())},-1),a(f,"$include_processors?",function(){var D=this;return D.include_processor_extensions["$!"]()["$!"]()}),a(f,"$include_processors",Ze("include_processor_extensions")),a(f,"$docinfo_processor",function B(D){var Q=B.$$p||ue,X,ce,Re=this;return B.$$p=null,X=N(arguments),ce=X,k(Re,"add_document_processor",["docinfo_processor",ce],Q.$to_proc())},-1),a(f,"$docinfo_processors?",function(D){var Q=this;return D==null&&(D=ue),$(Q.docinfo_processor_extensions)?$(D)?k(Q.docinfo_processor_extensions,"any?",[],function(ce){return ce==null&&(ce=ue),ce.$config()["$[]"]("location")["$=="](D)}):!0:!1},-1),a(f,"$docinfo_processors",function(D){var Q=this;return D==null&&(D=ue),$(Q.docinfo_processor_extensions)?$(D)?k(Q.docinfo_processor_extensions,"select",[],function(ce){return ce==null&&(ce=ue),ce.$config()["$[]"]("location")["$=="](D)}):Q.docinfo_processor_extensions:ue},-1),a(f,"$block",function B(D){var Q=B.$$p||ue,X,ce,Re=this;return B.$$p=null,X=N(arguments),ce=X,k(Re,"add_syntax_processor",["block",ce],Q.$to_proc())},-1),a(f,"$blocks?",function(){var D=this;return D.block_extensions["$!"]()["$!"]()}),a(f,"$registered_for_block?",function(D,Q){var X=this,ce=ue;return $(ce=X.block_extensions["$[]"](D.$to_sym()))&&$(ce.$config()["$[]"]("contexts")["$include?"](Q))?ce:!1}),a(f,"$find_block_extension",function(D){var Q=this;return Q.block_extensions["$[]"](D.$to_sym())}),a(f,"$block_macro",function B(D){var Q=B.$$p||ue,X,ce,Re=this;return B.$$p=null,X=N(arguments),ce=X,k(Re,"add_syntax_processor",["block_macro",ce],Q.$to_proc())},-1),a(f,"$block_macros?",function(){var D=this;return D.block_macro_extensions["$!"]()["$!"]()}),a(f,"$registered_for_block_macro?",function(D){var Q=this,X=ue;return $(X=Q.block_macro_extensions["$[]"](D.$to_sym()))?X:!1}),a(f,"$find_block_macro_extension",function(D){var Q=this;return Q.block_macro_extensions["$[]"](D.$to_sym())}),a(f,"$inline_macro",function B(D){var Q=B.$$p||ue,X,ce,Re=this;return B.$$p=null,X=N(arguments),ce=X,k(Re,"add_syntax_processor",["inline_macro",ce],Q.$to_proc())},-1),a(f,"$inline_macros?",function(){var D=this;return D.inline_macro_extensions["$!"]()["$!"]()}),a(f,"$registered_for_inline_macro?",function(D){var Q=this,X=ue;return $(X=Q.inline_macro_extensions["$[]"](D.$to_sym()))?X:!1}),a(f,"$find_inline_macro_extension",function(D){var Q=this;return Q.inline_macro_extensions["$[]"](D.$to_sym())}),a(f,"$inline_macros",function(){var D=this;return D.inline_macro_extensions.$values()}),a(f,"$prefer",function B(D){var Q=B.$$p||ue,X,ce,Re=this,Ye=ue,Qe=ue,ot=ue;return B.$$p=null,X=N(arguments),ce=X,Ye=Ue(b("ProcessorExtension"),Qe=ce.$shift())?Qe:k(Re,"send",[Qe].concat(Ae(ce)),Q.$to_proc()),ot=Re.$instance_variable_get(("@"+Ye.$kind()+"_extensions").$to_sym()),ot.$unshift(ot.$delete(Ye)),Ye},-1),f.$private(),a(f,"$add_document_processor",function B(D,Q){var X=B.$$p||ue,ce,Re,Ye=this,Qe=ue,ot=ue,tt=ue,at=ue,ct=ue,ft=ue,ut=ue,pt=ue,ht=ue,kt=ue,yt=ue;return B.$$p=null,Qe=D.$to_s().$tr("_"," "),ot=k(Qe.$split(),"map",[],function(Ct){return Ct==null&&(Ct=ue),Ct.$capitalize()}).$join().$to_sym(),tt=b("Extensions").$const_get(ot,!1),at=$(we("::","AsciidoctorJ","skip_raise")?"constant":ue)?we(we("AsciidoctorJ"),"Extensions").$const_get(ot,!1):ue,ct=$(ft=Ye.$instance_variable_get(("@"+D+"_extensions").$to_sym()))?ft:Ye.$instance_variable_set(("@"+D+"_extensions").$to_sym(),[]),X!==ue?(ut=Ye.$resolve_args(Q,1),(pt=tt.$new(ut)).$singleton_class().$enable_dsl(),w(X.$arity(),0)?k(pt,"instance_exec",[],X.$to_proc()):t.yield1(X,pt),$(pt["$process_block_given?"]())||Ye.$raise(we("NoMethodError"),"No block specified to process "+Qe+" extension at "+X.$source_location().$join(":")),pt.$freeze(),ht=b("ProcessorExtension").$new(D,pt)):(Re=Ye.$resolve_args(Q,2),ce=Be(Re),pt=ce[0]==null?ue:ce[0],ut=ce[1]==null?ue:ce[1],$(kt=b("Helpers").$resolve_class(pt))?($(rt(kt,tt))||$(at)&&$(rt(kt,at))||Ye.$raise(we("ArgumentError"),"Invalid type for "+Qe+" extension: "+pt),yt=kt.$new(ut),yt.$freeze(),ht=b("ProcessorExtension").$new(D,yt)):Ue(tt,pt)||$(at)&&Ue(at,pt)?(pt.$update_config(ut),pt.$freeze(),ht=b("ProcessorExtension").$new(D,pt)):Ye.$raise(we("ArgumentError"),"Invalid arguments specified for registering "+Qe+" extension: "+Q)),w(ht.$config()["$[]"]("position"),">>")?ct.$unshift(ht):ct["$<<"](ht),ht}),a(f,"$add_syntax_processor",function B(D,Q){var X=B.$$p||ue,ce,Re,Ye=this,Qe=ue,ot=ue,tt=ue,at=ue,ct=ue,ft=ue,ut=ue,pt=ue,ht=ue,kt=ue,yt=ue;return B.$$p=null,Qe=D.$to_s().$tr("_"," "),ot=k(Qe.$split(),"map",[],function(Ct){return Ct==null&&(Ct=ue),Ct.$capitalize()})["$<<"]("Processor").$join().$to_sym(),tt=b("Extensions").$const_get(ot,!1),at=$(we("::","AsciidoctorJ","skip_raise")?"constant":ue)?we(we("AsciidoctorJ"),"Extensions").$const_get(ot,!1):ue,ct=$(ft=Ye.$instance_variable_get(("@"+D+"_extensions").$to_sym()))?ft:Ye.$instance_variable_set(("@"+D+"_extensions").$to_sym(),E([],{})),X!==ue?(Re=Ye.$resolve_args(Q,2),ce=Be(Re),ut=ce[0]==null?ue:ce[0],pt=ce[1]==null?ue:ce[1],(ht=tt.$new(Ye.$as_symbol(ut),pt)).$singleton_class().$enable_dsl(),w(X.$arity(),0)?k(ht,"instance_exec",[],X.$to_proc()):t.yield1(X,ht),$(ut=Ye.$as_symbol(ht.$name()))||Ye.$raise(we("ArgumentError"),"No name specified for "+Qe+" extension at "+X.$source_location().$join(":")),$(ht["$process_block_given?"]())||Ye.$raise(we("NoMethodError"),"No block specified to process "+Qe+" extension at "+X.$source_location().$join(":")),ht.$freeze(),ce=[ut,b("ProcessorExtension").$new(D,ht)],k(ct,"[]=",ce),ce[ce.length-1]):(Re=Ye.$resolve_args(Q,3),ce=Be(Re),ht=ce[0]==null?ue:ce[0],ut=ce[1]==null?ue:ce[1],pt=ce[2]==null?ue:ce[2],$(kt=b("Helpers").$resolve_class(ht))?($(rt(kt,tt))||$(at)&&$(rt(kt,at))||Ye.$raise(we("ArgumentError"),"Class specified for "+Qe+" extension does not inherit from "+tt+": "+ht),yt=kt.$new(Ye.$as_symbol(ut),pt),$(ut=Ye.$as_symbol(yt.$name()))||Ye.$raise(we("ArgumentError"),"No name specified for "+Qe+" extension: "+ht),yt.$freeze(),ce=[ut,b("ProcessorExtension").$new(D,yt)],k(ct,"[]=",ce),ce[ce.length-1]):Ue(tt,ht)||$(at)&&Ue(at,ht)?(ht.$update_config(pt),$(ut=$(ut)?(ce=[Ye.$as_symbol(ut)],k(ht,"name=",ce),ce[ce.length-1]):Ye.$as_symbol(ht.$name()))||Ye.$raise(we("ArgumentError"),"No name specified for "+Qe+" extension: "+ht),ht.$freeze(),ce=[ut,b("ProcessorExtension").$new(D,ht)],k(ct,"[]=",ce),ce[ce.length-1]):Ye.$raise(we("ArgumentError"),"Invalid arguments specified for registering "+Qe+" extension: "+Q))}),a(f,"$reset",function(){var D=this;return D.preprocessor_extensions=D.tree_processor_extensions=D.postprocessor_extensions=D.include_processor_extensions=D.docinfo_processor_extensions=D.block_extensions=D.block_macro_extensions=D.inline_macro_extensions=ue,D.document=ue}),a(f,"$resolve_args",function(D,Q){var X=ue,ce=ue;return X=Ue(we("Hash"),D["$[]"](-1))?D.$pop():E([],{}),w(Q,1)?X:($(Ge(ce=H(H(Q,1),D.$size()),0))?D=ve(D,we("Array").$new(ce)):$(rt(ce,0))&&D.$pop(ce["$-@"]()),D["$<<"](X),D)}),a(f,"$as_symbol",function(D){return $(D)?D.$to_sym():ue})}(K[0],null,K),function(M,_){var r=[M].concat(_),f=t.$r(r);return a(M,"$generate_name",function(){var b=this;return"extgrp"+b.$next_auto_id()}),a(M,"$next_auto_id",function(){var b=this,d=ue;return b.auto_id==null&&(b.auto_id=ue),b.auto_id=$(d=b.auto_id)?d:-1,b.auto_id=ve(b.auto_id,1)}),a(M,"$groups",function(){var b=this,d=ue;return b.groups==null&&(b.groups=ue),b.groups=$(d=b.groups)?d:E([],{})}),a(M,"$create",function A(b){var d=A.$$p||ue,B=this,D=ue;return A.$$p=null,b==null&&(b=ue),d!==ue?f("Registry").$new(T($(D=b)?D:B.$generate_name(),d)):f("Registry").$new()},-1),a(M,"$register",function A(b){var d=A.$$p||ue,B,D,Q,X=this,ce=ue,Re=ue,Ye=ue,Qe=ue,ot=ue;return A.$$p=null,B=N(arguments),D=B,ce=D.$size(),d!==ue?Re=d:$(Ye=D.$pop())?Re=$(Qe=f("Helpers").$resolve_class(Ye))?Qe:Ye:X.$raise(we("ArgumentError"),"Extension group to register not specified"),ot=$(Qe=D.$pop())?Qe:X.$generate_name(),$(D["$empty?"]())||X.$raise(we("ArgumentError"),"Wrong number of arguments ("+ce+" for 1..2)"),Q=[ot.$to_sym(),Re],k(X.$groups(),"[]=",Q),Q[Q.length-1]},-1),a(M,"$unregister_all",function(){var b=this;return b.groups=E([],{}),ue}),a(M,"$unregister",function(b){var d,B,D=this;return d=N(arguments),B=d,k(B,"each_with_object",[D.$groups()],function(X,ce){return X==null&&(X=ue),ce==null&&(ce=ue),ce.$delete(X.$to_sym())}),ue},-1)}(t.get_singleton_class(V),K)}(Y[0],Y)}(De[0],De)},Opal.modules["asciidoctor/js/asciidoctor_ext/stylesheet"]=function(t){var g=t.module,u=t.klass,$=t.truthy,E=t.def,a=[],k=t.nil,pe=t.$$$;return t.add_stubs("rstrip,read,join"),function(N,ve){var w=g(N,"Asciidoctor"),Ge=[w].concat(ve);return function(he,Ue){var Ae=u(he,Ue,"Stylesheets"),Be=Ae.$$prototype;return Be.primary_stylesheet_data=k,E(Ae,"$primary_stylesheet_data",function(){var Me=this,et=k;return Me.primary_stylesheet_data=$(et=Me.primary_stylesheet_data)?et:pe("IO").$read(pe("File").$join("css","asciidoctor.css")).$rstrip()})}(Ge[0],null)}(a[0],a)},Opal.modules["asciidoctor/js/asciidoctor_ext/document"]=function(t){var g=t.module,u=t.klass,$=t.def,E=[];return t.nil,function(a,k){var pe=g(a,"Asciidoctor"),N=[pe].concat(k),ve=t.$r(N);return function(w,Ge){var he=u(w,Ge,"Document");return $(he,"$fill_datetime_attributes",function(Ae,Be){var st=t.truthy,Me=t.falsy,et=t.nil,Pe,Ve,it,C,Xe,y,Ze,rt,H=function(A,b){return b===0?A.getUTCFullYear():A.getFullYear()},T=function(A,b){return b===0?A.getUTCMonth():A.getMonth()},De=function(A,b){return b===0?A.getUTCDate():A.getDate()},ue=function(A,b){return b===0?A.getUTCHours():A.getHours()},we=new Date;if(t.const_get_qualified("::","ENV")["$key?"]("SOURCE_DATE_EPOCH")?(we.setTime(parseInt(t.const_get_qualified("::","ENV")["$[]"]("SOURCE_DATE_EPOCH"))*1e3),Ve=we,Pe=0):Pe=-we.getTimezoneOffset()/60,st(it=Ae["$[]"]("localdate")))Me(C=Ae["$[]"]("localyear"))&&(C=it.indexOf("-")===4?it.substring(0,4):et,Ae["$[]="]("localyear",C));else{var ge=H(we,Pe).toString(),Z=("0"+(T(we,Pe)+1)).slice(-2),$e=("0"+De(we,Pe)).slice(-2);it=ge+"-"+Z+"-"+$e,Ae["$[]="]("localdate",it),C=ge,Ae["$[]="]("localyear",ge)}if(Me(Xe=Ae["$[]"]("localtime"))){var Y=("0"+ue(we,Pe)).slice(-2),z=("0"+we.getMinutes()).slice(-2),R=("0"+we.getSeconds()).slice(-2),V;Pe===0?V="UTC":Pe>0?V=("+0"+Pe*100).slice(-5):V=("-0"+-Pe*100).slice(-5),Xe=Y+":"+z+":"+R+" "+V,Ae["$[]="]("localtime",Xe)}if(Me(y=Ae["$[]"]("localdatetime"))&&(y=it+" "+Xe,Ae["$[]="]("localdatetime",y)),st(Ve)?Be=Ve:st(Be)?Pe=-Be.getTimezoneOffset()/60:Be=we,st(Ze=Ae["$[]"]("docdate")))Ae["$[]="]("docyear",Ze.indexOf("-")===4?Ze.substring(0,4):et);else{var K=H(Be,Pe).toString(),J=("0"+(T(Be,Pe)+1)).slice(-2),M=("0"+De(Be,Pe)).slice(-2);Ze=K+"-"+J+"-"+M,Ae["$[]="]("docdate",Ze),Me(Ae["$[]"]("docyear"))&&Ae["$[]="]("docyear",K)}if(Me(rt=Ae["$[]"]("doctime"))){var _=("0"+ue(Be,Pe)).slice(-2),r=("0"+Be.getMinutes()).slice(-2),f=("0"+Be.getSeconds()).slice(-2),V;Pe===0?V="UTC":Pe>0?V=("+0"+Pe*100).slice(-5):V=("-0"+-Pe*100).slice(-5),rt=_+":"+r+":"+f+" "+V,Ae["$[]="]("doctime",rt)}return Me(Ae["$[]"]("docdatetime"))&&Ae["$[]="]("docdatetime",Ze+" "+rt),et})}(N[0],ve("AbstractBlock"))}(E[0],E)},Opal.modules["asciidoctor/js/asciidoctor_ext/substitutors"]=function(t){var g=t.module,u=t.def,$=[];return t.nil,function(E,a){var k=g(E,"Asciidoctor"),pe=[k].concat(a);return function(N){var ve=g(N,"Substitutors");return u(ve,"$sub_placeholder",function(Ge,he){return Ge.replace("%s",he)})}(pe[0])}($[0],$)},Opal.modules["asciidoctor/js/asciidoctor_ext/parser"]=function(t){var g=t.module,u=t.klass,$=t.truthy,E=t.defs,a=[];return t.nil,function(k,pe){var N=g(k,"Asciidoctor"),ve=[N].concat(pe);return function(w,Ge){var he=u(w,Ge,"Parser");return $(String.prototype.repeat)?E(he,"$uniform?",function(Ae,Be,st){return Be.repeat(st)===Ae}):E(he,"$uniform?",function(Ae,Be,st){return Array.apply(null,{length:st}).map(function(){return Be}).join("")===Ae})}(ve[0],null)}(a[0],a)},Opal.modules["asciidoctor/js/asciidoctor_ext/syntax_highlighter"]=function(t){var g=t.module,u=t.truthy,$=t.def,E=[],a=t.nil;return t.add_stubs("key?,registry,[],include?,include,empty?,debug,logger,join,keys"),function(k,pe){var N=g(k,"Asciidoctor"),ve=[N].concat(pe);return function(w,Ge){var he=g(w,"SyntaxHighlighter"),Ue=[he].concat(Ge);return function(Ae,Be){var st=g(Ae,"Factory"),Me=[st].concat(Be),et=t.$r(Me);return $(st,"$for",function(Ve){var it=this;return u(it.$registry()["$key?"](Ve))?it.$registry()["$[]"](Ve):(u(it["$include?"](et("Logging")))||it.$include(et("Logging")),u(it.$registry()["$empty?"]())?it.$logger().$debug("no syntax highlighter available, functionality disabled."):it.$logger().$debug("syntax highlighter named '"+Ve+"' is not available, must be one of: '"+it.$registry().$keys().$join("', '")+"'."),a)})}(Ue[0],Ue)}(ve[0],ve)}(E[0],E)},Opal.modules["asciidoctor/js/asciidoctor_ext"]=function(t){var g=t.top;t.nil,t.add_stubs("require"),g.$require("asciidoctor/js/asciidoctor_ext/stylesheet"),g.$require("asciidoctor/js/asciidoctor_ext/document"),g.$require("asciidoctor/js/asciidoctor_ext/substitutors"),g.$require("asciidoctor/js/asciidoctor_ext/parser"),g.$require("asciidoctor/js/asciidoctor_ext/syntax_highlighter"),g.$require("asciidoctor/js/asciidoctor_ext/browser")},Opal.modules["asciidoctor/js/opal_ext/logger"]=function(t){var g=t.klass,u=t.def,$=t.truthy,E=t.rb_lt,a=[],k=t.nil;return t.add_stubs("chr,rjust,message_as_string,<,write,call,[]"),function(pe,N,ve){var w=g(pe,N,"Logger"),Ge=[w].concat(ve),he=t.$r(Ge),Ue=w.$$prototype;return Ue.level=Ue.progname=Ue.pipe=Ue.formatter=k,function(Ae,Be){var st=g(Ae,Be,"Formatter");return u(st,"$call",function(et,Pe,Ve,it){var C=this,Xe=k;return Xe=Pe.getFullYear()+"-"+("0"+(Pe.getMonth()+1)).slice(-2)+"-"+("0"+Pe.getDate()).slice(-2)+"T"+("0"+Pe.getHours()).slice(-2)+":"+("0"+Pe.getMinutes()).slice(-2)+":"+("0"+Pe.getSeconds()).slice(-2)+"."+("00"+new Date().getMilliseconds()*1e3).slice(-6),""+et.$chr()+", ["+Xe+"] "+et.$rjust(5)+" -- "+Ve+": "+C.$message_as_string(it)})}(Ge[0],null),u(w,"$add",function Ae(Be,st,Me){var et=Ae.$$p||k,Pe=this,Ve=k;return Ae.$$p=null,st==null&&(st=k),Me==null&&(Me=k),$(E(Be=$(Ve=Be)?Ve:he("UNKNOWN"),Pe.level))||(Me=$(Ve=Me)?Ve:Pe.progname,$(st)||(et!==k?st=t.yieldX(et,[]):(st=Me,Me=Pe.progname)),Pe.pipe.$write(Pe.formatter.$call($(Ve=he("SEVERITY_LABELS")["$[]"](Be))?Ve:"ANY",new Date,Me,st))),!0},-2)}(a[0],null,a)},Opal.modules["asciidoctor/js/postscript"]=function(t){var g=t.top;return t.nil,t.add_stubs("require"),g.$require("asciidoctor/converter/composite"),g.$require("asciidoctor/converter/html5"),g.$require("asciidoctor/extensions"),g.$require("asciidoctor/js/asciidoctor_ext"),g.$require("asciidoctor/js/opal_ext/logger")},Opal.queue(function(t){var g=t.module,u=t.const_set,$=t.send,E=t.to_ary,a=t.defs,k=t.def,pe=t.truthy,N=t.hash2,ve=t.eqeq,w=t.rb_minus,Ge=t.regexp,he=t.top,Ue=[],Ae=t.nil,Be=t.$$$;return t.add_stubs("require,==,to_h,sort,map,constants,const_get,downcase,to_s,<=>,upcase,[],values,new,attr_reader,instance_variable_set,send,singleton_class,<<,define,dirname,absolute_path,join,home,pwd,to_set,tap,each,chr,each_key,[]=,slice,length,-,merge,default=,drop,insert"),he.$require("set"),he.$require("asciidoctor/js"),function(st,Me){var et=g(st,"Asciidoctor"),Pe=[et].concat(Me),Ve=t.$r(Pe),it=Ae;return u(Pe[0],"RUBY_ENGINE_OPAL",u(Pe[0],"RUBY_ENGINE",Be("RUBY_ENGINE"))["$=="]("opal")),function(C,Xe){var y=g(C,"SafeMode"),Ze=[y].concat(Xe);return u(Ze[0],"UNSAFE",0),u(Ze[0],"SAFE",1),u(Ze[0],"SERVER",10),u(Ze[0],"SECURE",20),y.names_by_value=$($(y.$constants(!1),"map",[],function rt(H){var T=rt.$$s==null?this:rt.$$s;return H==null&&(H=Ae),[T.$const_get(H),H.$to_s().$downcase()]},{$$s:y}),"sort",[],function(H,T){var De,ue,we=Ae,ge=Ae;return H==null&&(H=Ae),T==null&&(T=Ae),ue=H,De=E(ue),we=De[0]==null?Ae:De[0],ue=T,De=E(ue),ge=De[0]==null?Ae:De[0],we["$<=>"](ge)},{$$has_top_level_mlhs_arg:!0}).$to_h(),a(y,"$value_for_name",function(H){var T=this;return T.$const_get(H.$upcase(),!1)}),a(y,"$name_for_value",function(H){var T=this;return T.names_by_value==null&&(T.names_by_value=Ae),T.names_by_value["$[]"](H)}),a(y,"$names",function(){var H=this;return H.names_by_value==null&&(H.names_by_value=Ae),H.names_by_value.$values()})}(Pe[0],Pe),function(C,Xe){var y=g(C,"Compliance");return y.keys=Be("Set").$new(),function(Ze,rt){return Ze.$attr_reader("keys"),k(Ze,"$define",function(T,De){var ue=this;return ue.keys==null&&(ue.keys=Ae),ue.$instance_variable_set("@"+T,De),ue.$singleton_class().$send("attr_accessor",T),ue.keys["$<<"](T),Ae})}(t.get_singleton_class(y)),y.$define("block_terminates_paragraph",!0),y.$define("strict_verbatim_paragraphs",!0),y.$define("underline_style_section_titles",!0),y.$define("unwrap_standalone_preamble",!0),y.$define("attribute_missing","skip"),y.$define("attribute_undefined","drop-line"),y.$define("shorthand_property_syntax",!0),y.$define("natural_xrefs",!0),y.$define("unique_id_start_index",2),y.$define("markdown_syntax",!0)}(Pe[0]),pe(Ve("ROOT_DIR","skip_raise")?"constant":Ae)||u(Pe[0],"ROOT_DIR",Be("File").$dirname(Be("File").$absolute_path("."))),u(Pe[0],"LIB_DIR",Be("File").$join(Ve("ROOT_DIR"),"lib")),u(Pe[0],"DATA_DIR",Be("File").$join(Ve("ROOT_DIR"),"data")),u(Pe[0],"USER_HOME",function(){try{return Be("Dir").$home()}catch(C){if(t.rescue(C,[Ve("StandardError")]))try{return pe(it=Be("ENV")["$[]"]("HOME"))?it:Be("Dir").$pwd()}finally{t.pop_exception()}else throw C}}()),u(Pe[0],"LF",`
`),u(Pe[0],"NULL","\0"),u(Pe[0],"TAB","	"),u(Pe[0],"MAX_INT",9007199254740991),u(Pe[0],"UTF_8",Be(Be("Encoding"),"UTF_8")),u(Pe[0],"BOM_BYTES_UTF_8",[239,187,191]),u(Pe[0],"BOM_BYTES_UTF_16LE",[255,254]),u(Pe[0],"BOM_BYTES_UTF_16BE",[254,255]),u(Pe[0],"FILE_READ_MODE",pe(Ve("RUBY_ENGINE_OPAL"))?"r":"rb:utf-8:utf-8"),u(Pe[0],"URI_READ_MODE",Ve("FILE_READ_MODE")),u(Pe[0],"FILE_WRITE_MODE",pe(Ve("RUBY_ENGINE_OPAL"))?"w":"w:utf-8"),u(Pe[0],"DEFAULT_DOCTYPE","article"),u(Pe[0],"DEFAULT_BACKEND","html5"),u(Pe[0],"DEFAULT_STYLESHEET_KEYS",["","DEFAULT"].$to_set()),u(Pe[0],"DEFAULT_STYLESHEET_NAME","asciidoctor.css"),u(Pe[0],"BACKEND_ALIASES",N(["html","docbook"],{html:"html5",docbook:"docbook5"})),u(Pe[0],"DEFAULT_PAGE_WIDTHS",N(["docbook"],{docbook:425})),u(Pe[0],"DEFAULT_EXTENSIONS",N(["html","docbook","pdf","epub","manpage","asciidoc"],{html:".html",docbook:".xml",pdf:".pdf",epub:".epub",manpage:".man",asciidoc:".adoc"})),u(Pe[0],"ASCIIDOC_EXTENSIONS",N([".adoc",".asciidoc",".asc",".ad",".txt"],{".adoc":!0,".asciidoc":!0,".asc":!0,".ad":!0,".txt":!0})),u(Pe[0],"SETEXT_SECTION_LEVELS",N(["=","-","~","^","+"],{"=":0,"-":1,"~":2,"^":3,"+":4})),u(Pe[0],"ADMONITION_STYLES",["NOTE","TIP","IMPORTANT","WARNING","CAUTION"].$to_set()),u(Pe[0],"ADMONITION_STYLE_HEADS",$(Be("Set").$new(),"tap",[],function(Xe){return Xe==null&&(Xe=Ae),$(Ve("ADMONITION_STYLES"),"each",[],function(Ze){return Ze==null&&(Ze=Ae),Xe["$<<"](Ze.$chr())})})),u(Pe[0],"PARAGRAPH_STYLES",["comment","example","literal","listing","normal","open","pass","quote","sidebar","source","verse","abstract","partintro"].$to_set()),u(Pe[0],"VERBATIM_STYLES",["literal","listing","source","verse"].$to_set()),u(Pe[0],"DELIMITED_BLOCKS",N(["--","----","....","====","****","____","++++","|===",",===",":===","!===","////","```"],{"--":["open",["comment","example","literal","listing","pass","quote","sidebar","source","verse","admonition","abstract","partintro"].$to_set()],"----":["listing",["literal","source"].$to_set()],"....":["literal",["listing","source"].$to_set()],"====":["example",["admonition"].$to_set()],"****":["sidebar",Be("Set").$new()],____:["quote",["verse"].$to_set()],"++++":["pass",["stem","latexmath","asciimath"].$to_set()],"|===":["table",Be("Set").$new()],",===":["table",Be("Set").$new()],":===":["table",Be("Set").$new()],"!===":["table",Be("Set").$new()],"////":["comment",Be("Set").$new()],"```":["fenced_code",Be("Set").$new()]})),u(Pe[0],"DELIMITED_BLOCK_HEADS",$(N([],{}),"tap",[],function(Xe){return Xe==null&&(Xe=Ae),$(Ve("DELIMITED_BLOCKS"),"each_key",[],function(Ze){var rt;return Ze==null&&(Ze=Ae),rt=[Ze.$slice(0,2),!0],$(Xe,"[]=",rt),rt[rt.length-1]})})),u(Pe[0],"DELIMITED_BLOCK_TAILS",$(N([],{}),"tap",[],function(Xe){return Xe==null&&(Xe=Ae),$(Ve("DELIMITED_BLOCKS"),"each_key",[],function(Ze){var rt;return Ze==null&&(Ze=Ae),ve(Ze.$length(),4)?(rt=[Ze,Ze["$[]"](w(Ze.$length(),1))],$(Xe,"[]=",rt),rt[rt.length-1]):Ae})})),u(Pe[0],"CAPTION_ATTRIBUTE_NAMES",N(["example","figure","listing","table"],{example:"example-caption",figure:"figure-caption",listing:"listing-caption",table:"table-caption"})),u(Pe[0],"LAYOUT_BREAK_CHARS",N(["'","<"],{"'":"thematic_break","<":"page_break"})),u(Pe[0],"MARKDOWN_THEMATIC_BREAK_CHARS",N(["-","*","_"],{"-":"thematic_break","*":"thematic_break",_:"thematic_break"})),u(Pe[0],"HYBRID_LAYOUT_BREAK_CHARS",Ve("LAYOUT_BREAK_CHARS").$merge(Ve("MARKDOWN_THEMATIC_BREAK_CHARS"))),u(Pe[0],"NESTABLE_LIST_CONTEXTS",["ulist","olist","dlist"]),u(Pe[0],"ORDERED_LIST_STYLES",["arabic","loweralpha","lowerroman","upperalpha","upperroman"]),u(Pe[0],"ORDERED_LIST_KEYWORDS",N(["loweralpha","lowerroman","upperalpha","upperroman"],{loweralpha:"a",lowerroman:"i",upperalpha:"A",upperroman:"I"})),u(Pe[0],"ATTR_REF_HEAD","{"),u(Pe[0],"LIST_CONTINUATION","+"),u(Pe[0],"HARD_LINE_BREAK"," +"),u(Pe[0],"LINE_CONTINUATION"," \\"),u(Pe[0],"LINE_CONTINUATION_LEGACY"," +"),u(Pe[0],"BLOCK_MATH_DELIMITERS",N(["asciimath","latexmath"],{asciimath:["\\$","\\$"],latexmath:["\\[","\\]"]})),u(Pe[0],"INLINE_MATH_DELIMITERS",N(["asciimath","latexmath"],{asciimath:["\\$","\\$"],latexmath:["\\(","\\)"]})),u(Pe[0],"STEM_TYPE_ALIASES",N(["latexmath","latex","tex"],{latexmath:"latexmath",latex:"latexmath",tex:"latexmath"}))["$default="]("asciimath"),u(Pe[0],"FONT_AWESOME_VERSION","4.7.0"),u(Pe[0],"HIGHLIGHT_JS_VERSION","9.18.3"),u(Pe[0],"MATHJAX_VERSION","2.7.9"),u(Pe[0],"DEFAULT_ATTRIBUTES",N(["appendix-caption","appendix-refsig","caution-caption","chapter-refsig","example-caption","figure-caption","important-caption","last-update-label","note-caption","part-refsig","prewrap","sectids","section-refsig","table-caption","tip-caption","toc-placement","toc-title","untitled-label","version-label","warning-caption"],{"appendix-caption":"Appendix","appendix-refsig":"Appendix","caution-caption":"Caution","chapter-refsig":"Chapter","example-caption":"Example","figure-caption":"Figure","important-caption":"Important","last-update-label":"Last updated","note-caption":"Note","part-refsig":"Part",prewrap:"",sectids:"","section-refsig":"Section","table-caption":"Table","tip-caption":"Tip","toc-placement":"auto","toc-title":"Table of Contents","untitled-label":"Untitled","version-label":"Version","warning-caption":"Warning"})),u(Pe[0],"FLEXIBLE_ATTRIBUTES",["sectnums"]),u(Pe[0],"INTRINSIC_ATTRIBUTES",N(["startsb","endsb","vbar","caret","asterisk","tilde","plus","backslash","backtick","blank","empty","sp","two-colons","two-semicolons","nbsp","deg","zwsp","quot","apos","lsquo","rsquo","ldquo","rdquo","wj","brvbar","pp","cpp","amp","lt","gt"],{startsb:"[",endsb:"]",vbar:"|",caret:"^",asterisk:"*",tilde:"~",plus:"&#43;",backslash:"\\",backtick:"`",blank:"",empty:"",sp:" ","two-colons":"::","two-semicolons":";;",nbsp:"&#160;",deg:"&#176;",zwsp:"&#8203;",quot:"&#34;",apos:"&#39;",lsquo:"&#8216;",rsquo:"&#8217;",ldquo:"&#8220;",rdquo:"&#8221;",wj:"&#8288;",brvbar:"&#166;",pp:"&#43;&#43;",cpp:"C&#43;&#43;",amp:"&",lt:"<",gt:">"})),u(Pe[0],"QUOTE_SUBS",$(N([],{}),"tap",[],function(Xe){var y=Ae,Ze=Ae;return Xe==null&&(Xe=Ae),Xe["$[]="](!1,y=[["strong","unconstrained",Ge(["\\\\?(?:\\[([^\\]]+)\\])?\\*\\*(",Ve("CC_ALL"),"+?)\\*\\*"],"m")],["strong","constrained",Ge(["(^|[^",Ve("CC_WORD"),";:}])(?:\\[([^\\]]+)\\])?\\*(\\S|\\S",Ve("CC_ALL"),"*?\\S)\\*(?!",Ve("CG_WORD"),")"],"m")],["double","constrained",Ge(["(^|[^",Ve("CC_WORD"),';:}])(?:\\[([^\\]]+)\\])?"`(\\S|\\S',Ve("CC_ALL"),'*?\\S)`"(?!',Ve("CG_WORD"),")"],"m")],["single","constrained",Ge(["(^|[^",Ve("CC_WORD"),";:`}])(?:\\[([^\\]]+)\\])?'`(\\S|\\S",Ve("CC_ALL"),"*?\\S)`'(?!",Ve("CG_WORD"),")"],"m")],["monospaced","unconstrained",Ge(["\\\\?(?:\\[([^\\]]+)\\])?``(",Ve("CC_ALL"),"+?)``"],"m")],["monospaced","constrained",Ge(["(^|[^",Ve("CC_WORD"),";:\"'`}])(?:\\[([^\\]]+)\\])?`(\\S|\\S",Ve("CC_ALL"),"*?\\S)`(?![",Ve("CC_WORD"),"\"'`])"],"m")],["emphasis","unconstrained",Ge(["\\\\?(?:\\[([^\\]]+)\\])?__(",Ve("CC_ALL"),"+?)__"],"m")],["emphasis","constrained",Ge(["(^|[^",Ve("CC_WORD"),";:}])(?:\\[([^\\]]+)\\])?_(\\S|\\S",Ve("CC_ALL"),"*?\\S)_(?!",Ve("CG_WORD"),")"],"m")],["mark","unconstrained",Ge(["\\\\?(?:\\[([^\\]]+)\\])?##(",Ve("CC_ALL"),"+?)##"],"m")],["mark","constrained",Ge(["(^|[^",Ve("CC_WORD"),"&;:}])(?:\\[([^\\]]+)\\])?#(\\S|\\S",Ve("CC_ALL"),"*?\\S)#(?!",Ve("CG_WORD"),")"],"m")],["superscript","unconstrained",/\\?(?:\[([^\]]+)\])?\^(\S+?)\^/],["subscript","unconstrained",/\\?(?:\[([^\]]+)\])?~(\S+?)~/]]),Xe["$[]="](!0,Ze=y.$drop(0)),Ze["$[]="](2,["double","constrained",Ge(["(^|[^",Ve("CC_WORD"),";:}])(?:\\[([^\\]]+)\\])?``(\\S|\\S",Ve("CC_ALL"),"*?\\S)''(?!",Ve("CG_WORD"),")"],"m")]),Ze["$[]="](3,["single","constrained",Ge(["(^|[^",Ve("CC_WORD"),";:}])(?:\\[([^\\]]+)\\])?`(\\S|\\S",Ve("CC_ALL"),"*?\\S)'(?!",Ve("CG_WORD"),")"],"m")]),Ze["$[]="](4,["monospaced","unconstrained",Ge(["\\\\?(?:\\[([^\\]]+)\\])?\\+\\+(",Ve("CC_ALL"),"+?)\\+\\+"],"m")]),Ze["$[]="](5,["monospaced","constrained",Ge(["(^|[^",Ve("CC_WORD"),";:}])(?:\\[([^\\]]+)\\])?\\+(\\S|\\S",Ve("CC_ALL"),"*?\\S)\\+(?!",Ve("CG_WORD"),")"],"m")]),Ze.$insert(3,["emphasis","constrained",Ge(["(^|[^",Ve("CC_WORD"),";:}])(?:\\[([^\\]]+)\\])?'(\\S|\\S",Ve("CC_ALL"),"*?\\S)'(?!",Ve("CG_WORD"),")"],"m")])})),u(Pe[0],"REPLACEMENTS",[[/\\?\(C\)/,"&#169;","none"],[/\\?\(R\)/,"&#174;","none"],[/\\?\(TM\)/,"&#8482;","none"],[/(?: |\n|^|\\)--(?: |\n|$)/,"&#8201;&#8212;&#8201;","none"],[Ge(["(",Ve("CG_WORD"),")\\\\?--(?=",Ve("CG_WORD"),")"]),"&#8212;&#8203;","leading"],[/\\?\.\.\./,"&#8230;&#8203;","none"],[/\\?`'/,"&#8217;","none"],[Ge(["(",Ve("CG_ALNUM"),")\\\\?'(?=",Ve("CG_ALPHA"),")"]),"&#8217;","leading"],[/\\?-&gt;/,"&#8594;","none"],[/\\?=&gt;/,"&#8658;","none"],[/\\?&lt;-/,"&#8592;","none"],[/\\?&lt;=/,"&#8656;","none"],[/\\?(&)amp;((?:[a-zA-Z][a-zA-Z]+\d{0,2}|#\d\d\d{0,4}|#x[\da-fA-F][\da-fA-F][\da-fA-F]{0,3});)/,"","bounding"]]),Ae}(Ue[0],Ue),he.$require("asciidoctor.rb/../asciidoctor/core_ext"),he.$require("asciidoctor.rb/../asciidoctor/helpers"),he.$require("asciidoctor.rb/../asciidoctor/logging"),he.$require("asciidoctor.rb/../asciidoctor/rx"),he.$require("asciidoctor.rb/../asciidoctor/substitutors"),he.$require("asciidoctor.rb/../asciidoctor/version"),he.$require("asciidoctor.rb/../asciidoctor/abstract_node"),he.$require("asciidoctor.rb/../asciidoctor/abstract_block"),he.$require("asciidoctor.rb/../asciidoctor/attribute_list"),he.$require("asciidoctor.rb/../asciidoctor/block"),he.$require("asciidoctor.rb/../asciidoctor/callouts"),he.$require("asciidoctor.rb/../asciidoctor/converter"),he.$require("asciidoctor.rb/../asciidoctor/document"),he.$require("asciidoctor.rb/../asciidoctor/inline"),he.$require("asciidoctor.rb/../asciidoctor/list"),he.$require("asciidoctor.rb/../asciidoctor/parser"),he.$require("asciidoctor.rb/../asciidoctor/path_resolver"),he.$require("asciidoctor.rb/../asciidoctor/reader"),he.$require("asciidoctor.rb/../asciidoctor/section"),he.$require("asciidoctor.rb/../asciidoctor/stylesheets"),he.$require("asciidoctor.rb/../asciidoctor/table"),he.$require("asciidoctor.rb/../asciidoctor/writer"),he.$require("asciidoctor.rb/../asciidoctor/load"),he.$require("asciidoctor.rb/../asciidoctor/convert"),he.$require("asciidoctor.rb/../asciidoctor/syntax_highlighter"),he.$require("asciidoctor.rb/../asciidoctor/timings"),he.$require("asciidoctor/js/postscript")});const l=function(t){return t&&!t.$$is_hash?Opal.hash2(Object.keys(t),t):t},v=function(t){const g={};if(t){const u=t.$$smap;for(const E in u){const a=u[E];g[E]=a===Opal.nil?void 0:a}const $=t.$$map;if($){const E=[];for(const a in $){const k=$[a],pe=k.value,N=k.key-1;E[N]=pe===Opal.nil?void 0:pe}E.length>0&&(g.$positional=E)}}return g},W=function(t){const g={};if(t){const u=t.$$keys;for(const $ in u){const E=u[$].value;g[$.toString()]=E===Opal.nil?void 0:E}}return g},L=function(t){if(t=l(t),t){const g=t["$[]"]("converter");g&&g!==Opal.nil&&t["$[]="]("converter",ae(g));const u=t["$[]"]("attributes");u&&typeof u=="object"&&u.constructor.name==="Object"&&(t=t.$dup(),t["$[]="]("attributes",l(u)))}return t},ae=function(t){const g=function(ve){return Object.assign({},ve.basebackend?{basebackend:ve.basebackend}:{},ve.outfilesuffix?{outfilesuffix:ve.outfilesuffix}:{},ve.filetype?{filetype:ve.filetype}:{},ve.htmlsyntax?{htmlsyntax:ve.htmlsyntax}:{},ve.supports_templates?{supports_templates:ve.supports_templates}:{})},u=function(ve,w){ve.backend_traits?w.backend_traits=l(ve.backend_traits):ve.backendTraits?w.backend_traits=l(ve.backendTraits):(ve.basebackend||ve.outfilesuffix||ve.filetype||ve.htmlsyntax||ve.supports_templates)&&(w.backend_traits=l(g(ve)))},$=function(ve,w){pe(ve,w,"$handles?","handles",function(){return!0})},E=function(ve,w){pe(ve,w,"$composed","composed")},a=function(ve,w){pe(ve,w,"$==","==",function(Ge){return w===Ge})},k=function(ve,w){pe(ve,w,"$send","send",function(Ge){const[,...he]=Array.from(arguments),Ue=w["$"+Ge];if(Ue)return Ue.apply(w,he);throw new Error(`undefined method \`${Ge}\` for \`${w.toString()}\``)})},pe=function(ve,w,Ge,he,Ue){typeof ve[Ge]>"u"&&(typeof ve[he]=="function"?w[Ge]=ve[he]:Ue&&(w[Ge]=Ue))},N=function(ve){typeof ve["$respond_to?"]!="function"&&(ve["$respond_to?"]=function(w){return typeof this[w]=="function"})};if(typeof t=="function"){const ve=te($t,t.constructor.name,{initialize:function(w,Ge){const he=this,Ue=new t(w,Ge);Object.assign(this,Ue),u(Ue,he);const Ae=Object.getOwnPropertyNames(t.prototype);for(let Be=0;Be<Ae.length;Be++){const st=Ae[Be];st!=="constructor"&&(he[st]=Ue[st])}typeof Ue.$convert>"u"&&typeof Ue.convert=="function"&&(he.$convert=Ue.convert),$(Ue,he),E(Ue,he),N(he),he.super(w,Ge)}});return ve.$extend(lt),ve}if(typeof t=="object"){if(typeof t.$convert>"u"&&typeof t.convert=="function"&&(t.$convert=t.convert),u(t,t),t.backend_traits){const ve=["basebackend","filetype","htmlsyntax","outfilesuffix","supports_templates","supports_templates?","init_backend_traits","backend_traits"];for(const w of ve)t["$"+w]=lt.prototype["$"+w];t.$$meta=lt}return $(t,t),E(t,t),a(t,t),k(t,t),N(t),t}return t};function te(t,g,u,$,E){const a=Opal.klass(Opal.Object,t,g,function(){});let k,pe,N;const ve={};for(const he in u)Object.prototype.hasOwnProperty.call(u,he)&&function(Ue){const Ae=u[Ue];if(Ue==="postConstruct")k=Ae;else if(Ue==="initialize")pe=Ae;else if(Ue==="constructor")N=Ae;else{$&&Object.prototype.hasOwnProperty.call($,Ue)&&(ve[Ue]=!0);let Be;Opal.def(a,"$"+Ue,Be=function(){let st;E&&Object.prototype.hasOwnProperty.call(E,Ue)?st=E[Ue](arguments):st=arguments;const Me=Be.$$p;return Me&&(st[st.length]=function(){return Opal.yield1(Me)},st.length+=1,Be.$$p=null),Ae.apply(this,st)})}}(he);let w;typeof N=="function"?w=function(){const he=Array.from(arguments);for(let Ae=0;Ae<he.length;Ae++)typeof he[Ae]=="object"&&"$$smap"in he[Ae]&&(he[Ae]=v(he[Ae]));he.unshift(null);const Ue=new(Function.prototype.bind.apply(N,he));Object.assign(this,Ue),typeof k=="function"&&k.bind(this)()}:typeof pe=="function"?w=function(){const he=Array.from(arguments);for(let Ue=0;Ue<he.length;Ue++)typeof he[Ue]=="object"&&"$$smap"in he[Ue]&&(he[Ue]=v(he[Ue]));pe.apply(this,he),typeof k=="function"&&k.bind(this)()}:w=function(){Opal.send(this,Opal.find_super_dispatcher(this,"initialize",w)),typeof k=="function"&&k.bind(this)()},Opal.def(a,"$initialize",w);let Ge;Opal.def(a,"super",Ge=function(he){if(typeof he=="function")Opal.send(this,Opal.find_super_dispatcher(this,he.name,he));else{const Ue=Array.from(arguments);for(let Ae=0;Ae<Ue.length;Ae++)typeof Ue[Ae]=="object"&&(Ue[Ae]=l(Ue[Ae]));Opal.send(this,Opal.find_super_dispatcher(this,"initialize",w),Ue)}});for(const he in u)Ge[he]=function(){const Ue=Array.from(arguments);for(let Be=0;Be<Ue.length;Be++)typeof Ue[Be]=="object"&&typeof Ue[Be].constructor=="function"&&Ue[Be].constructor.name==="Object"&&(Ue[Be]=l(Ue[Be]));const Ae=a.$$prototype;return Opal.send(Ae,Opal.find_super_dispatcher(Ae,he,Ae[`$${he}`]),Ue)};if($)for(const he in $)Object.prototype.hasOwnProperty.call($,he)&&!Object.prototype.hasOwnProperty.call(ve,he)&&function(Ue){const Ae=$[Ue];Opal.def(a,"$"+Ue,function(){return Ae.apply(this,arguments)})}(he);return a}const le=Opal.Asciidoctor.$$class;le.prototype.getCoreVersion=function(){return this.$$const.VERSION},le.prototype.getRuntime=function(){return{ioModule:Opal.const_get_qualified("::","JAVASCRIPT_IO_MODULE"),platform:Opal.const_get_qualified("::","JAVASCRIPT_PLATFORM"),engine:Opal.const_get_qualified("::","JAVASCRIPT_ENGINE"),framework:Opal.const_get_qualified("::","JAVASCRIPT_FRAMEWORK")}},le.prototype.convert=function(t,g){typeof t=="object"&&t.constructor.name==="Buffer"&&(t=t.toString("utf8"));const u=g&&g.to_file;typeof u=="object"&&u.constructor.name==="Writable"&&typeof u.write=="function"&&(u["$respond_to?"]=a=>a==="write",u.$object_id=()=>"",u.$write=function(a){this.write(a)});const $=L(g),E=this.$convert(t,$);return typeof u=="object"&&u.constructor.name==="Writable"&&typeof u.end=="function"&&u.end(),E===Opal.nil?"":E},le.prototype.convertFile=function(t,g){return this.$convert_file(t,L(g))},le.prototype.load=function(t,g){return typeof t=="object"&&t.constructor.name==="Buffer"&&(t=t.toString("utf8")),this.$load(t,L(g))},le.prototype.loadFile=function(t,g){return this.$load_file(t,L(g))};const ne=Opal.Asciidoctor.AbstractBlock;ne.prototype.getContentModel=function(){const t=this.content_model;return t===Opal.nil?void 0:t},ne.prototype.setContentModel=function(t){this.content_model=t},ne.prototype.append=function(t){return this.$append(t),this},ne.prototype.getTitle=function(){const t=this.$title();return t===Opal.nil?void 0:t},ne.prototype.setTitle=function(t){return t=typeof t>"u"?Opal.nil:t,this["$title="](t)},ne.prototype.assignCaption=function(t,g){t=typeof t>"u"?Opal.nil:t,g=typeof g>"u"?null:g,this.$assign_caption(t,g)},ne.prototype.getCaptionedTitle=function(){return this.$captioned_title()},ne.prototype.getStyle=function(){const t=this.style;return t===Opal.nil?void 0:t},ne.prototype.setStyle=function(t){this.style=t},ne.prototype.getSourceLocation=function(){const t=this.source_location;if(t!==Opal.nil)return t.getFile=function(){const g=this.file;return g===Opal.nil?void 0:g},t.getDirectory=function(){const g=this.dir;return g===Opal.nil?void 0:g},t.getPath=function(){const g=this.path;return g===Opal.nil?void 0:g},t.getLineNumber=function(){const g=this.lineno;return g===Opal.nil?void 0:g},t},ne.prototype.getCaption=function(){const t=this.$caption();return t===Opal.nil?void 0:t},ne.prototype.setCaption=function(t){this.caption=typeof t>"u"?Opal.nil:t},ne.prototype.getLevel=function(){const t=this.level;return t===Opal.nil?void 0:t},ne.prototype.getSubstitutions=function(){return this.subs},ne.prototype.hasSubstitution=function(t){return this["$sub?"](t)},ne.prototype.removeSubstitution=function(t){this.$remove_sub(t)},ne.prototype.hasBlocks=function(){return this.blocks.length>0},ne.prototype.getBlocks=function(){return this.blocks},ne.prototype.getContent=function(){const t=this.$content();return t===Opal.nil?void 0:t},ne.prototype.convert=function(){return this.$convert()},ne.prototype.findBy=function(t,g){return typeof g>"u"&&typeof t=="function"?Opal.send(this,"find_by",null,t):typeof g=="function"?Opal.send(this,"find_by",[l(t)],g):this.$find_by(l(t))},ne.prototype.getLineNumber=function(){const t=this.$lineno();return t===Opal.nil?void 0:t},ne.prototype.hasSections=function(){return this.next_section_index!==Opal.nil&&this.next_section_index>0},ne.prototype.getSections=function(){return this.$sections()},ne.prototype.getNumeral=function(){const t=this.$numeral();return t===Opal.nil?void 0:t},ne.prototype.setNumeral=function(t){this["$numeral="](t)},ne.prototype.hasTitle=function(){return this["$title?"]()},ne.prototype.getAlt=function(){return this.$alt()};const P=Opal.Asciidoctor.Section;P.create=function(t,g,u,$){return $&&$.attributes&&($.attributes=l($.attributes)),this.$new(t,g,u,l($))},P.prototype.setLevel=function(t){this.level=t},P.prototype.getIndex=function(){return this.index},P.prototype.setIndex=function(t){this.index=t},P.prototype.getSectionName=function(){const t=this.sectname;return t===Opal.nil?void 0:t},P.prototype.setSectionName=function(t){this.sectname=t},P.prototype.getSectionNumeral=function(){return this.$sectnum()},P.prototype.getSectionNumber=P.prototype.getSectionNumeral,P.prototype.isSpecial=function(){return this.special},P.prototype.setSpecial=function(t){this.special=t},P.prototype.isNumbered=function(){return this.numbered},P.prototype.getCaption=function(){const t=this.caption;return t===Opal.nil?void 0:t},P.prototype.getName=function(){return this.getTitle()};const oe=Opal.Asciidoctor.Block;oe.create=function(t,g,u){return u&&u.attributes&&(u.attributes=l(u.attributes)),this.$new(t,g,l(u))},oe.prototype.getSource=function(){return this.$source()},oe.prototype.getSourceLines=function(){return this.lines};const me=Opal.Asciidoctor.AbstractNode;me.prototype.applySubstitutions=function(t,g){return this.$apply_subs(t,g)},me.prototype.resolveSubstitutions=function(t,g,u,$){typeof g>"u"&&(g="block"),typeof u>"u"&&(u=Opal.nil),typeof $>"u"&&($=Opal.nil);const E=this.$resolve_subs(t,g,u,$);return E===Opal.nil?void 0:E},me.prototype.resolveBlockSubstitutions=function(t,g,u){return this.resolveSubstitutions(t,"block",g,u)},me.prototype.resolvePassSubstitutions=function(t){return this.resolveSubstitutions(t,"inline",void 0,"passthrough macro")},me.prototype.getNodeName=function(){return this.node_name},me.prototype.getAttributes=function(){return v(this.attributes)},me.prototype.getAttribute=function(t,g,u){const $=this.$attr(t,g,u);return $===Opal.nil?void 0:$},me.prototype.hasAttribute=function(t){return t in this.attributes.$$smap},me.prototype.isAttribute=function(t,g,u){return this["$attr?"](t,g,u)},me.prototype.setAttribute=function(t,g,u){return typeof u>"u"&&(u=!0),this.$set_attr(t,g,u)},me.prototype.removeAttribute=function(t){const g=this.$remove_attr(t);return g===Opal.nil?void 0:g},me.prototype.getDocument=function(){return this.document},me.prototype.getParent=function(){const t=this.parent;return t===Opal.nil?void 0:t},me.prototype.isInline=function(){return this["$inline?"]()},me.prototype.isBlock=function(){return this["$block?"]()},me.prototype.isRole=function(t){return this["$role?"](t)},me.prototype.getRole=function(){const t=this.$role();return t===Opal.nil?void 0:t},me.prototype.setRole=function(t){return Array.isArray(t)||typeof t=="string"&&arguments.length===1?this["$role="](t):this["$role="](Array.from(arguments))},me.prototype.hasRole=function(t){return this["$has_role?"](t)},me.prototype.getRoles=function(){return this.$roles()},me.prototype.addRole=function(t){return this.$add_role(t)},me.prototype.removeRole=function(t){return this.$remove_role(t)},me.prototype.isReftext=function(){return this["$reftext?"]()},me.prototype.getReftext=function(){const t=this.$reftext();return t===Opal.nil?void 0:t},me.prototype.getContext=function(){const t=this.context;return typeof t=="string"?t:t.toString()},me.prototype.getId=function(){const t=this.id;return t===Opal.nil?void 0:t},me.prototype.setId=function(t){this.id=t},me.prototype.isOption=function(t){return this["$option?"](t)},me.prototype.setOption=function(t){return this.$set_option(t)},me.prototype.getIconUri=function(t){return this.$icon_uri(t)},me.prototype.getMediaUri=function(t,g){return this.$media_uri(t,g)},me.prototype.getImageUri=function(t,g){return this.$image_uri(t,g)},me.prototype.getConverter=function(){return this.$converter()},me.prototype.readContents=function(t,g){return this.$read_contents(t,l(g))},me.prototype.readAsset=function(t,g){const u=this.$read_asset(t,l(g));return u===Opal.nil?void 0:u},me.prototype.normalizeWebPath=function(t,g,u){return this.$normalize_web_path(t,g,u)},me.prototype.normalizeSystemPath=function(t,g,u,$){return this.$normalize_system_path(t,g,u,l($))},me.prototype.normalizeAssetPath=function(t,g,u){return this.$normalize_asset_path(t,g,u)};const Se=Opal.Asciidoctor.Document;Se.prototype.append=function(t){return this["$<<"](t),this},Se.prototype.getSyntaxHighlighter=function(){const t=this.syntax_highlighter,g=t.__proto__;return g&&(typeof g["$highlight?"]=="function"&&(g.handlesHighlighting=function(){const u=g["$highlight?"]();return u===Opal.nil?!1:u}),typeof g["$docinfo?"]=="function"&&(g.hasDocinfo=g["$docinfo?"]),typeof g.$format=="function"&&(g.format=function(u,$,E){return this.$format(u,$,l(E))}),typeof g.$docinfo=="function"&&(g.docinfo=function(u,$,E){return this.$docinfo(u,$,l(E))})),t},Se.prototype.getRefs=function(){return v(this.catalog.$$smap.refs)},Se.prototype.getImages=function(){return this.catalog.$$smap.images},Se.prototype.getLinks=function(){return this.catalog.$$smap.links},Se.prototype.hasFootnotes=function(){return this["$footnotes?"]()},Se.prototype.getFootnotes=function(){return this.$footnotes()},Se.prototype.getHeader=function(){return this.header},Se.prototype.setAttribute=function(t,g){return this.$set_attribute(t,g)},Se.prototype.removeAttribute=function(t){this.attributes.$delete(t),this.attribute_overrides.$delete(t)},Se.prototype.convert=function(t){const g=this.$convert(l(t));return g===Opal.nil?"":g},Se.prototype.write=function(t,g){return this.$write(t,g)},Se.prototype.getAuthor=function(){return this.$author()},Se.prototype.getSource=function(){return this.$source()},Se.prototype.getSourceLines=function(){return this.$source_lines()},Se.prototype.isNested=function(){return this["$nested?"]()},Se.prototype.isEmbedded=function(){return this["$embedded?"]()},Se.prototype.hasExtensions=function(){return this["$extensions?"]()},Se.prototype.getDoctype=function(){return this.doctype},Se.prototype.getBackend=function(){return this.backend},Se.prototype.isBasebackend=function(t){return this["$basebackend?"](t)},Se.prototype.getTitle=function(){const t=this.$title();return t===Opal.nil?void 0:t},Se.prototype.setTitle=function(t){return this["$title="](t)},Se.prototype.getDocumentTitle=function(t){const g=this.$doctitle(l(t));return g===Opal.nil?void 0:g},Se.prototype.getDoctitle=Se.prototype.getDocumentTitle,Se.prototype.getCatalog=function(){return v(this.catalog)},Se.prototype.getReferences=Se.prototype.getCatalog,Se.prototype.getRevisionDate=function(){return this.getAttribute("revdate")},Se.prototype.getRevdate=function(){return this.getRevisionDate()},Se.prototype.getRevisionNumber=function(){return this.getAttribute("revnumber")},Se.prototype.getRevisionRemark=function(){return this.getAttribute("revremark")},Se.prototype.setHeaderAttribute=function(t,g,u){return typeof u>"u"&&(u=!0),typeof g>"u"&&(g=""),this.$set_header_attribute(t,g,u)},Se.prototype.getAuthors=function(){return this.$authors()};const Le=Se.Footnote;Le.prototype.getIndex=function(){const t=this.$$data.index;return t===Opal.nil?void 0:t},Le.prototype.getId=function(){const t=this.$$data.id;return t===Opal.nil?void 0:t},Le.prototype.getText=function(){const t=this.$$data.text;return t===Opal.nil?void 0:t};const je=Se.ImageReference;je.prototype.getTarget=function(){return this.$$data.target},je.prototype.getImagesDirectory=function(){const t=this.$$data.imagesdir;return t===Opal.nil?void 0:t};const xe=Se.Author;xe.prototype.getName=function(){const t=this.$$data.name;return t===Opal.nil?void 0:t},xe.prototype.getFirstName=function(){const t=this.$$data.firstname;return t===Opal.nil?void 0:t},xe.prototype.getMiddleName=function(){const t=this.$$data.middlename;return t===Opal.nil?void 0:t},xe.prototype.getLastName=function(){const t=this.$$data.lastname;return t===Opal.nil?void 0:t},xe.prototype.getInitials=function(){const t=this.$$data.initials;return t===Opal.nil?void 0:t},xe.prototype.getEmail=function(){const t=this.$$data.email;return t===Opal.nil?void 0:t},Se.RevisionInfo=function(t,g,u){this.date=t,this.number=g,this.remark=u};const O=Se.RevisionInfo;O.prototype.getDate=function(){return this.date},O.prototype.getNumber=function(){return this.number},O.prototype.getRemark=function(){return this.remark},O.prototype.isEmpty=function(){return this.date===void 0&&this.number===void 0&&this.remark===void 0};const Ie=Opal.Asciidoctor.SafeMode;Ie.getValueForName=function(t){return this.$value_for_name(t)},Ie.getNameForValue=function(t){const g=this.$name_for_value(t);return g===Opal.nil?void 0:g},Ie.getNames=function(){return this.$names()};const We=Opal.Asciidoctor.Callouts;We.create=function(){return this.$new()},We.prototype.register=function(t){return this.$register(t)},We.prototype.readNextId=function(){return this.$read_next_id()},We.prototype.getCalloutIds=function(t){return this.$callout_ids(t)},We.prototype.getLists=function(){const t=this.lists;if(t&&t.length>0)for(let g=0;g<t.length;g++){const u=t[g];if(u&&u.length>0)for(let $=0;$<u.length;$++)typeof u[$]=="object"&&"$$smap"in u[$]&&(u[$]=v(u[$]))}return t},We.prototype.getListIndex=function(){return this.list_index},We.prototype.getCurrentList=function(){const t=this.$current_list();if(t&&t.length>0)for(let g=0;g<t.length;g++)typeof t[g]=="object"&&"$$smap"in t[g]&&(t[g]=v(t[g]));return t},We.prototype.nextList=function(){return this.$nextList()},We.prototype.rewind=function(){return this.$rewind()},Se.prototype.getRevisionInfo=function(){return new Se.RevisionInfo(this.getRevisionDate(),this.getRevisionNumber(),this.getRevisionRemark())},Se.prototype.hasRevisionInfo=function(){return!this.getRevisionInfo().isEmpty()},Se.prototype.getNotitle=function(){return this.$notitle()},Se.prototype.getNoheader=function(){return this.$noheader()},Se.prototype.getNofooter=function(){return this.$nofooter()},Se.prototype.hasHeader=function(){return this["$header?"]()},Se.prototype.playbackAttributes=function(t){if(t=l(t),t){const g=t["$[]"]("attribute_entries");if(g&&Array.isArray(g)){const u=[];for(let $=0;$<g.length;$++){const E=g[$];E&&typeof E=="object"&&E.constructor.name==="Object"&&(E.$name=function(){return this.name},E.$value=function(){return this.value},E.$negate=function(){return this.negate}),u.push(E)}t["$[]="]("attribute_entries",u)}}this.$playback_attributes(t)},Se.prototype.deleteAttribute=function(t){return this.$delete_attribute(t)},Se.prototype.isAttributeLocked=function(t){return this["$attribute_locked?"](t)},Se.prototype.restoreAttributes=function(){return this.$restore_attributes()},Se.prototype.parse=function(t){return this.$parse(t)},Se.prototype.getDocinfo=function(t,g){return this.$docinfo(t,g)},Se.prototype.hasDocinfoProcessors=function(t){return this["$docinfo_processors?"](t)},Se.prototype.incrementAndStoreCounter=function(t,g){return this.$increment_and_store_counter(t,g)},Se.prototype.counterIncrement=Se.prototype.incrementAndStoreCounter,Se.prototype.counter=function(t,g){return this.$counter(t,g)},Se.prototype.getSafe=function(){return this.safe},Se.prototype.getCompatMode=function(){return this.compat_mode},Se.prototype.getSourcemap=function(){const t=this.sourcemap;return t===Opal.nil?!1:t},Se.prototype.setSourcemap=function(t){this.sourcemap=t},Se.prototype.getCounters=function(){return v(this.counters)},Se.prototype.getCallouts=function(){return this.$callouts()},Se.prototype.getBaseDir=function(){return this.base_dir},Se.prototype.getOptions=function(){return v(this.options)},Se.prototype.getOutfilesuffix=function(){return this.outfilesuffix},Se.prototype.getParentDocument=function(){const t=this.parent_document;return t===Opal.nil?void 0:t},Se.prototype.getReader=function(){return this.reader},Se.prototype.getConverter=function(){return this.converter},Se.prototype.getExtensions=function(){const t=this.extensions;return t===Opal.nil?void 0:t};const Ne=Se.Title;Ne.prototype.getMain=function(){return this.main},Ne.prototype.getCombined=function(){return this.combined},Ne.prototype.getSubtitle=function(){const t=this.subtitle;return t===Opal.nil?void 0:t},Ne.prototype.isSanitized=function(){const t=this["$sanitized?"]();return t===Opal.nil?!1:t},Ne.prototype.hasSubtitle=function(){return this["$subtitle?"]()};const Fe=Opal.Asciidoctor.Inline;Fe.create=function(t,g,u,$){return this.$new(t,g,u,L($))},Fe.prototype.convert=function(){return this.$convert()},Fe.prototype.getText=function(){const t=this.$text();return t===Opal.nil?void 0:t},Fe.prototype.getType=function(){return this.$type()},Fe.prototype.getTarget=function(){const t=this.$target();return t===Opal.nil?void 0:t},Fe.prototype.getAlt=function(){return this.$alt()};const _e=Opal.Asciidoctor.List;_e.prototype.hasItems=function(){return this["$items?"]()},_e.prototype.getItems=function(){return this.blocks};const ye=Opal.Asciidoctor.ListItem;ye.prototype.getText=function(){return this.$text()},ye.prototype.setText=function(t){return this["$text="](t)},ye.prototype.hasText=function(){return this["$text?"]()},ye.prototype.getMarker=function(){return this.marker},ye.prototype.setMarker=function(t){this.marker=t},ye.prototype.getList=function(){return this.$list()},ye.prototype.getParent=ye.prototype.getList;const de=Opal.Asciidoctor.Reader;de.prototype.pushInclude=function(t,g,u,$,E){return this.$push_include(t,g,u,$,l(E))},de.prototype.getCursor=function(){return this.$cursor()},de.prototype.getLines=function(){return this.$lines()},de.prototype.getString=function(){return this.$string()},de.prototype.hasMoreLines=function(){return this["$has_more_lines?"]()},de.prototype.isEmpty=function(){return this["$empty?"]()},de.prototype.peekLine=function(t){t=t||!1;const g=this.$peek_line(t);return g===Opal.nil?void 0:g},de.prototype.readLine=function(){const t=this.$read_line();return t===Opal.nil?void 0:t},de.prototype.readLines=function(){return this.$read_lines()},de.prototype.read=function(){return this.$read()},de.prototype.advance=function(){return this.$advance()};const ze=Opal.Asciidoctor.Reader.Cursor;ze.prototype.getFile=function(){const t=this.file;return t===Opal.nil?void 0:t},ze.prototype.getDirectory=function(){const t=this.dir;return t===Opal.nil?void 0:t},ze.prototype.getPath=function(){const t=this.path;return t===Opal.nil?void 0:t},ze.prototype.getLineNumber=function(){return this.lineno};function fe(t,g){const u=Opal.const_get_qualified(Opal.Logger,"Formatter");return te(u,t,g,{},{call:function($){for(let E=0;E<$.length;E++)typeof $[E]=="object"&&"$$smap"in $[E]&&($[E]=v($[E]));return $}})}function ke(t,g){const u=Opal.const_get_qualified(Opal.Asciidoctor,"Logger");return te(u,t,g,{},{add:function($){if($.length>=2&&typeof $[2]=="object"&&"$$smap"in $[2]){const E=$[2],a=v(E);a.getText=function(){return this.text},a.getSourceLocation=function(){return this.source_location},a.$inspect=function(){const k=this.getSourceLocation();return k?k.getPath()+": line "+k.getLineNumber()+": "+this.getText():this.getText()},$[2]=a}return $.length>=1&&($[1]=$[1]===Opal.nil?void 0:$[1]),$}})}const ie=Opal.const_get_qualified(Opal.Asciidoctor,"LoggerManager",!0);Opal.Asciidoctor.LoggerManager=ie,ie.getLogger=function(){return this.$logger()},ie.setLogger=function(t){this["$logger="](t)},ie.newLogger=function(t,g){return ke(t,g).$new()},ie.newFormatter=function(t,g){return fe(t,g).$new()};const p=Opal.const_get_qualified(Opal.Logger,"Severity",!0);Opal.Asciidoctor.LoggerSeverity=p,p.get=function(t){return p.$constants()[t]};const ee=Opal.const_get_qualified(Opal.Logger,"Formatter",!0);Opal.Asciidoctor.LoggerFormatter=ee,ee.prototype.call=function(t,g,u,$){return this.$call(p.get(t),g,u,$)};const q=Opal.const_get_qualified(Opal.Asciidoctor,"MemoryLogger",!0);Opal.Asciidoctor.MemoryLogger=q,q.create=function(){return this.$new()},q.prototype.getMessages=function(){const t=this.messages,g=[];for(let u=0;u<t.length;u++){const $=t[u],E=v($);typeof E.message=="string"?E.getText=function(){return this.message}:(E.message=v(E.message),E.getText=function(){return this.message.text}),E.getSeverity=function(){return this.severity.toString()},E.getSourceLocation=function(){return this.message.source_location},g.push(E)}return g};const j=Opal.const_get_qualified(Opal.Asciidoctor,"Logging",!0);Opal.Asciidoctor.Logging=j,j.getLogger=function(){return ie.$logger()},j.createLogMessage=function(t,g){return j.prototype.$message_with_context(t,l(g))},de.prototype.getLogger=j.getLogger,de.prototype.createLogMessage=j.createLogMessage,me.prototype.getLogger=j.getLogger,me.prototype.createLogMessage=j.createLogMessage;const F=Opal.const_get_qualified(Opal.Asciidoctor,"Logger",!0);Opal.Asciidoctor.Logger=F,F.prototype.getMaxSeverity=function(){const t=this.max_severity;return t===Opal.nil?void 0:t},F.prototype.getFormatter=function(){return this.formatter},F.prototype.setFormatter=function(t){this.formatter=t},F.prototype.getLevel=function(){return this.level},F.prototype.setLevel=function(t){this.level=t},F.prototype.getProgramName=function(){return this.progname},F.prototype.setProgramName=function(t){this.progname=t};const Ee=Opal.const_get_qualified("::","Logger"),re=function(t,g,u){t["$"+g](u)};Ee.prototype.add=function(t,g,u){const $=typeof t=="string"?p[t.toUpperCase()]:t;this.$add($,g,u)},Ee.prototype.log=Ee.prototype.add,Ee.prototype.debug=function(t){re(this,"debug",t)},Ee.prototype.info=function(t){re(this,"info",t)},Ee.prototype.warn=function(t){re(this,"warn",t)},Ee.prototype.error=function(t){re(this,"error",t)},Ee.prototype.fatal=function(t){re(this,"fatal",t)},Ee.prototype.isDebugEnabled=function(){return this["$debug?"]()},Ee.prototype.isInfoEnabled=function(){return this["$info?"]()},Ee.prototype.isWarnEnabled=function(){return this["$warn?"]()},Ee.prototype.isErrorEnabled=function(){return this["$error?"]()},Ee.prototype.isFatalEnabled=function(){return this["$fatal?"]()};const U=Opal.const_get_qualified(Opal.Asciidoctor,"NullLogger",!0);Opal.Asciidoctor.NullLogger=U,U.create=function(){return this.$new()},U.prototype.getMaxSeverity=function(){return this.max_severity},Opal.Asciidoctor.StopIteration=Opal.StopIteration;const m=Opal.const_get_qualified(Opal.Asciidoctor,"Timings",!0);Opal.Asciidoctor.Timings=m,m.create=function(){return this.$new()},m.prototype.printReport=function(t,g){let u;if(t)if(typeof t.$add=="function")u=function($){t.$add(1,$)};else if(typeof t.log=="function")u=t.log;else if(typeof t.write=="function")u=function($){t.write($,"utf-8")};else throw new Error("The output should be a Stream (with a write function), an object with a log function or a Ruby Logger (with a add function)");else u=function($){Opal.gvars.stdout.$write($)};g&&u("Input file: "+g),u(" Time to read and parse source: "+this.$read_parse().toFixed(2)),u(" Time to convert document: "+this.$convert().toFixed(2)),u(" Total time (read, parse and convert): "+this.$read_parse_convert().toFixed(2))};const s=Opal.const_get_qualified(Opal.Asciidoctor,"SyntaxHighlighter",!0);Opal.Asciidoctor.SyntaxHighlighter=s,s.register=function(t,g){const u=typeof t=="string"?t:t[0];if(typeof g=="function"){const a=g.prototype,k=Object.getOwnPropertyNames(a);g={};for(const pe in k){const N=k[pe];g[N]=a[N]}}const $=te(n,u,g,{},{format:function(E){return E.length>=2&&typeof E[2]=="object"&&"$$smap"in E[2]&&(E[2]=v(E[2])),E.length>=1&&(E[1]=E[1]===Opal.nil?void 0:E[1]),E},highlight:function(E){if(E.length>=3&&typeof E[3]=="object"&&"$$smap"in E[3]){let a=E[3];a=v(a);for(const k in a){const pe=a[k];if(k==="callouts"){const N=W(pe);for(const ve in N){const w=N[ve];for(let Ge=0;Ge<w.length;Ge++){const he=w[Ge];for(let Ue=0;Ue<he.length;Ue++)he[Ue]=he[Ue]===Opal.nil?void 0:he[Ue]}}a[k]=N}else a[k]=pe===Opal.nil?void 0:pe}E[3]=a}return E.length>=2&&(E[2]=E[2]===Opal.nil?void 0:E[2]),E}});for(const E in g)Object.prototype.hasOwnProperty.call(g,E)&&function(a){const k=g[a];a==="handlesHighlighting"?Opal.def($,"$highlight?",function(){return k.call()}):a==="hasDocinfo"&&Opal.def($,"$docinfo?",function(pe){return k.apply(this,[pe])})}(E);return Opal.def($,"$name",function(){return u}),s.$register($,t),$},s.get=function(t){const g=s.$for(t);return g===Opal.nil?void 0:g},s.for=s.get;const n=Opal.const_get_qualified(s,"Base",!0);Opal.Asciidoctor.SyntaxHighlighterBase=n,n.prototype.registerFor=function(t){s.$register(this,t)};const i=Opal.Asciidoctor.Table;i.create=function(t,g){return this.$new(t,l(g))},i.prototype.getCaption=function(){return this.caption},i.prototype.getRows=function(){return this.rows},i.prototype.getColumns=function(){return this.columns},i.prototype.getHeadRows=function(){return this.rows.head},i.prototype.hasHeadRows=function(){return this.rows!==Opal.nil&&this.rows.head.length>0},i.prototype.getBodyRows=function(){return this.rows.body},i.prototype.hasBodyRows=function(){return this.rows!==Opal.nil&&this.rows.body.length>0},i.prototype.getFootRows=function(){return this.rows.foot},i.prototype.hasFootRows=function(){return this.rows!==Opal.nil&&this.rows.foot.length>0},i.prototype.hasHeaderOption=function(){return this.has_header_option},i.prototype.hasFooterOption=function(){return this.isOption("footer")},i.prototype.hasAutowidthOption=function(){return this.isOption("autowidth")},i.prototype.getRowCount=function(){return this.getAttribute("rowcount")},i.prototype.setRowCount=function(t){this.setAttribute("rowcount",t)},i.prototype.getColumnCount=function(){return this.getAttribute("colcount")},i.prototype.setColumnCount=function(t){this.setAttribute("colcount",t)};const o=Opal.Asciidoctor.Table.Rows;o.create=function(t,g,u){return this.$new(t,g,u)},o.prototype.getHead=function(){return this.head},o.prototype.getFoot=function(){return this.foot},o.prototype.getBody=function(){return this.body},o.prototype.bySection=function(){return[["head",this.head],["body",this.body],["foot",this.foot]]};const c=Opal.Asciidoctor.Table.Column;c.create=function(t,g,u){return this.$new(t,g,l(u))},c.prototype.getColumnNumber=function(){return this.getAttribute("colnumber")},c.prototype.getWidth=function(){return this.getAttribute("width")},c.prototype.getHorizontalAlign=function(){return this.getAttribute("halign")},c.prototype.getVerticalAlign=function(){return this.getAttribute("valign")},c.prototype.getStyle=function(){const t=this.style;return t===Opal.nil?void 0:t};const x=Opal.Asciidoctor.Table.Cell;x.create=function(t,g,u,$){return this.$new(t,g,l(u),l($))},x.prototype.getColumnSpan=function(){const t=this.colspan;return t===Opal.nil?void 0:t},x.prototype.setColumnSpan=function(t){return this["$colspan="](t)},x.prototype.getRowSpan=function(){const t=this.rowspan;return t===Opal.nil?void 0:t},x.prototype.setRowSpan=function(t){return this["$rowspan="](t)},x.prototype.getContent=function(){return this.$content()},x.prototype.getText=function(){return this.$text()},x.prototype.getSource=function(){return this.$source()},x.prototype.getLines=function(){return this.$lines()},x.prototype.getLineNumber=function(){const t=this.$lineno();return t===Opal.nil?void 0:t},x.prototype.getFile=function(){const t=this.$file();return t===Opal.nil?void 0:t},x.prototype.getStyle=function(){const t=this.$style();return t===Opal.nil?void 0:t},x.prototype.getColumn=function(){const t=this.$column();return t===Opal.nil?void 0:t},x.prototype.getWidth=function(){return this.getAttribute("width")},x.prototype.getColumnPercentageWidth=function(){return this.getAttribute("colpcwidth")},x.prototype.getInnerDocument=function(){const t=this.inner_document;return t===Opal.nil?void 0:t};const S=Opal.Asciidoctor.Converter.TemplateConverter;if(S){Opal.Asciidoctor.TemplateConverter=S,S.create=function(g,u,$){$&&$.template_cache&&($.template_cache=l($.template_cache)),this.$new(g,u,l($))},S.getCache=function(){const g=v(this.caches);if(g){if(g.scans){g.scans=v(g.scans);for(const u in g.scans)g.scans[u]=v(g.scans[u])}g.templates&&(g.templates=v(g.templates))}return g},S.clearCache=function(){this.$clear_caches()},S.prototype.convert=function(g,u,$){return this.$convert(g,u,l($))},S.prototype.handles=function(g){return this["$handles?"](g)},S.prototype.getContentOnly=function(g){return this.$content_only(g)},S.prototype.skip=function(g){this.$skip(g)},S.prototype.getTemplates=function(){return v(this.$templates())},S.prototype.register=function(g,u){return this.$register(g,u)};const t={};t.registry={},Opal.Asciidoctor.TemplateEngine=t,t.register=function(g,u){if(typeof g=="string")this.registry[g]=u;else for(let $=0;$<g.length;$++){const E=g[$];this.registry[E]=u}}}const G=Opal.Asciidoctor.Converter.CompositeConverter;G&&(Opal.Asciidoctor.CompositeConverter=G,G.prototype.convert=function(t,g,u){return this.$convert(t,g,l(u))},G.prototype.getContentOnly=function(t){return this.$content_only(t)},G.prototype.skip=function(t){this.$skip(t)},G.prototype.getConverters=function(){return this.converters},G.prototype.getConverter=function(t){const g=this.$converter_for(t);return g===Opal.nil?void 0:g},G.prototype.findConverter=function(t){return this.$find_converter(t)});const qe=Opal.const_get_qualified(Opal.Asciidoctor,"Converter");Opal.Asciidoctor.Converter=qe,qe.prototype.convert=function(t,g,u){return this.$convert(t,g,l(u))},qe.create=function(t,g){return this.$create(t,l(g))};const Je=Opal.Asciidoctor.Converter.Factory,$t=Opal.Asciidoctor.Converter.Base;Opal.Asciidoctor.ConverterFactory=Je;const lt=Opal.Asciidoctor.Converter.BackendTraits;Opal.Asciidoctor.ConverterBackendTraits=lt,Je.register=function(t,g){const u=[ae(t)].concat(g);return qe.$register.apply(qe,u)},Je.getDefault=function(t){return this.$default(t)},Je.prototype.create=function(t,g){return this.$create(t,l(g))},Je.getRegistry=function(){return v(qe.$registry())},Je.for=function(t){const g=qe.$for(t);return g===Opal.nil?void 0:g},Je.unregisterAll=function(){const t=qe.DefaultFactory.$$cvars["@@registry"];qe.DefaultFactory.$$cvars["@@registry"]=l({html5:t["$[]"]("html5")})};const gt=Opal.Asciidoctor.Converter.Html5Converter;Opal.Asciidoctor.Html5Converter=gt,gt.create=function(){return this.$new()},gt.prototype.convert=function(t,g,u){return this.$convert(t,g,u)};const _t=function(t){return t.$$arity=t.length,t},vt=function(t,g,u,$){return typeof u=="object"||u.$$is_class?t["$"+g](u,$):Opal.send(t,g,$&&[$],_t(u))},dt=Opal.const_get_qualified(Opal.Asciidoctor,"Extensions");Opal.Asciidoctor.Extensions=dt,dt.create=function(t,g){return typeof t=="function"&&typeof g>"u"?Opal.send(this,"create",null,_t(t)):typeof g=="function"?Opal.send(this,"create",[t],_t(g)):this.$create()},dt.register=function(t,g){return typeof t=="function"&&typeof g>"u"?Opal.send(this,"register",null,_t(t)):Opal.send(this,"register",[t],_t(g))},dt.getGroups=function(){return v(this.$groups())},dt.unregisterAll=function(){this.$unregister_all()},dt.unregister=function(){const t=Array.prototype.concat.apply([],arguments),g=this.$groups(),u={};let $=0;const E=g.$$keys;for(;$<E.length;$++){const a=E[$];u[a.toString()]=a}for(let a=0;a<t.length;a++){const k=t[a];k in u&&Opal.hash_delete(g,u[k])}};const mt=dt.Registry;mt.prototype.getGroups=dt.getGroups,mt.prototype.unregisterAll=function(){this.groups=Opal.hash()},mt.prototype.unregister=dt.unregister,mt.prototype.prefer=function(t,g){return arguments.length===1&&(g=t,t=null),typeof g=="object"||g.$$is_class?this.$prefer(t,g):Opal.send(this,"prefer",t&&[t],_t(g))},mt.prototype.block=function(t,g){return arguments.length===1&&(g=t,t=null),vt(this,"block",g,t)},mt.prototype.inlineMacro=function(t,g){return arguments.length===1&&(g=t,t=null),vt(this,"inline_macro",g,t)},mt.prototype.includeProcessor=function(t,g){return arguments.length===1&&(g=t,t=null),vt(this,"include_processor",g,t)},mt.prototype.blockMacro=function(t,g){return arguments.length===1&&(g=t,t=null),vt(this,"block_macro",g,t)},mt.prototype.treeProcessor=function(t,g){return arguments.length===1&&(g=t,t=null),vt(this,"tree_processor",g,t)},mt.prototype.postprocessor=function(t,g){return arguments.length===1&&(g=t,t=null),vt(this,"postprocessor",g,t)},mt.prototype.preprocessor=function(t,g){return arguments.length===1&&(g=t,t=null),vt(this,"preprocessor",g,t)},mt.prototype.docinfoProcessor=function(t,g){return arguments.length===1&&(g=t,t=null),vt(this,"docinfo_processor",g,t)},mt.prototype.hasPreprocessors=function(){return this["$preprocessors?"]()},mt.prototype.hasTreeProcessors=function(){return this["$tree_processors?"]()},mt.prototype.hasIncludeProcessors=function(){return this["$include_processors?"]()},mt.prototype.hasPostprocessors=function(){return this["$postprocessors?"]()},mt.prototype.hasDocinfoProcessors=function(t){return this["$docinfo_processors?"](t)},mt.prototype.hasBlocks=function(){return this["$blocks?"]()},mt.prototype.hasBlockMacros=function(){return this["$block_macros?"]()},mt.prototype.hasInlineMacros=function(){return this["$inline_macros?"]()},mt.prototype.getPreprocessors=function(){return this.$preprocessors()},mt.prototype.getTreeProcessors=function(){return this.$tree_processors()},mt.prototype.getIncludeProcessors=function(){return this.$include_processors()},mt.prototype.getPostprocessors=function(){return this.$postprocessors()},mt.prototype.getDocinfoProcessors=function(t){return this.$docinfo_processors(t)},mt.prototype.getBlocks=function(){return this.block_extensions.$values()},mt.prototype.getBlockMacros=function(){return this.block_macro_extensions.$values()},mt.prototype.getInlineMacros=function(){return this.$inline_macros()},mt.prototype.getInlineMacroFor=function(t){const g=this["$registered_for_inline_macro?"](t);return g===!1?void 0:g},mt.prototype.getBlockFor=function(t,g){if(typeof g>"u"){const $=this.$find_block_extension(t);return $===Opal.nil?void 0:$}const u=this["$registered_for_block?"](t,g);return u===!1?void 0:u},mt.prototype.getBlockMacroFor=function(t){const g=this["$registered_for_block_macro?"](t);return g===!1?void 0:g};const bt=dt.Processor;bt.prototype.prepend=function(){this.$option("position",">>")},bt.prototype.process=function(t){const g={apply:function($,E,a){for(let k=0;k<a.length;k++)typeof a[k]=="object"&&"$$smap"in a[k]&&(a[k]=v(a[k]));return $.apply(E,a)}},u=new Proxy(t,g);return Opal.send(this,"process",null,_t(u))},bt.prototype.named=function(t){return this.$named(t)},bt.prototype.createBlock=function(t,g,u,$,E){return this.$create_block(t,g,u,l($),l(E))},bt.prototype.createList=function(t,g,u){return this.$create_list(t,g,l(u))},bt.prototype.createListItem=function(t,g){return this.$create_list_item(t,g)},bt.prototype.createImageBlock=function(t,g,u){return this.$create_image_block(t,l(g),l(u))},bt.prototype.createParagraph=function(t,g,u,$){return this.$create_paragraph(t,g,l(u),l($))},bt.prototype.createOpenBlock=function(t,g,u,$){return this.$create_open_block(t,g,l(u),l($))},bt.prototype.createExampleBlock=function(t,g,u,$){return this.$create_example_block(t,g,l(u),l($))},bt.prototype.createPassBlock=function(t,g,u,$){return this.$create_pass_block(t,g,l(u),l($))},bt.prototype.createListingBlock=function(t,g,u,$){return this.$create_listing_block(t,g,l(u),l($))},bt.prototype.createLiteralBlock=function(t,g,u,$){return this.$create_literal_block(t,g,l(u),l($))},bt.prototype.createAnchor=function(t,g,u){return u&&u.attributes&&(u.attributes=l(u.attributes)),this.$create_anchor(t,g,l(u))},bt.prototype.createInlinePass=function(t,g,u){return u&&u.attributes&&(u.attributes=l(u.attributes)),this.$create_inline_pass(t,g,l(u))},bt.prototype.createInline=function(t,g,u,$){return $&&$.attributes&&($.attributes=l($.attributes)),this.$create_inline(t,g,u,l($))},bt.prototype.parseContent=function(t,g,u){return this.$parse_content(t,g,l(u))},bt.prototype.parseAttributes=function(t,g,u){return u&&u.attributes&&(u.attributes=l(u.attributes)),v(this.$parse_attributes(t,g,l(u)))},bt.prototype.positionalAttributes=function(t){return this.$positional_attrs(t)},bt.prototype.resolveAttributes=function(t){return typeof t=="object"&&!Array.isArray(t)?this.$resolves_attributes(l(t)):arguments.length>1?this.$resolves_attributes(Array.prototype.slice.call(arguments)):typeof t>"u"?this.$resolves_attributes(Opal.nil):this.$resolves_attributes(t)},bt.prototype.resolvesAttributes=bt.prototype.resolveAttributes,bt.prototype.getConfig=function(){return v(this.config)},bt.prototype.option=function(t,g){this.$option(t,g)};const Oe=dt.BlockProcessor;Oe.prototype.defaultAttributes=function(t){this.$default_attributes(l(t))},Oe.prototype.onContext=function(t){return this.$on_context(t)},Oe.prototype.onContexts=function(t){return this.$on_contexts(Array.prototype.slice.call(arguments))},Oe.prototype.getName=function(){const t=this.name;return t===Opal.nil?void 0:t},Oe.prototype.parseContentAs=function(t){this.$parse_content_as(t)};const be=dt.BlockMacroProcessor;be.prototype.defaultAttributes=function(t){this.$default_attributes(l(t))},be.prototype.getName=function(){const t=this.name;return t===Opal.nil?void 0:t},be.prototype.parseContentAs=function(t){this.$parse_content_as(t)};const Te=dt.InlineMacroProcessor;Te.prototype.defaultAttributes=function(t){this.$default_attributes(l(t))},Te.prototype.getName=function(){const t=this.name;return t===Opal.nil?void 0:t},Te.prototype.parseContentAs=function(t){this.$parse_content_as(t)},Te.prototype.matchFormat=function(t){this.$match_format(t)},Te.prototype.match=function(t){this.$match(t)};const He=dt.IncludeProcessor;He.prototype.handles=function(t){return Opal.send(this,"handles?",null,_t(t))},He.prototype.prefer=function(){this.$prefer()};const h=dt.TreeProcessor;h.prototype.prefer=function(){this.$prefer()};const I=dt.Postprocessor;I.prototype.prefer=function(){this.$prefer()};const se=dt.Preprocessor;se.prototype.prefer=function(){this.$prefer()};const Ce=dt.DocinfoProcessor;Ce.prototype.prefer=function(){this.$prefer()},Ce.prototype.atLocation=function(t){this.$at_location(t)};function Ke(t,g,u){const $=Opal.const_get_qualified(dt,t);return te($,g,u,{"handles?":function(){return!0}})}dt.createPostprocessor=function(t,g){return arguments.length===1&&(g=t,t=null),Ke("Postprocessor",t,g)},dt.newPostprocessor=function(t,g){return arguments.length===1&&(g=t,t=null),this.createPostprocessor(t,g).$new()},dt.createPreprocessor=function(t,g){return arguments.length===1&&(g=t,t=null),Ke("Preprocessor",t,g)},dt.newPreprocessor=function(t,g){return arguments.length===1&&(g=t,t=null),this.createPreprocessor(t,g).$new()},dt.createTreeProcessor=function(t,g){return arguments.length===1&&(g=t,t=null),Ke("TreeProcessor",t,g)},dt.newTreeProcessor=function(t,g){return arguments.length===1&&(g=t,t=null),this.createTreeProcessor(t,g).$new()},dt.createIncludeProcessor=function(t,g){return arguments.length===1&&(g=t,t=null),Ke("IncludeProcessor",t,g)},dt.newIncludeProcessor=function(t,g){return arguments.length===1&&(g=t,t=null),this.createIncludeProcessor(t,g).$new()},dt.createDocinfoProcessor=function(t,g){return arguments.length===1&&(g=t,t=null),Ke("DocinfoProcessor",t,g)},dt.newDocinfoProcessor=function(t,g){return arguments.length===1&&(g=t,t=null),this.createDocinfoProcessor(t,g).$new()},dt.createBlockProcessor=function(t,g){return arguments.length===1&&(g=t,t=null),Ke("BlockProcessor",t,g)},dt.newBlockProcessor=function(t,g){return arguments.length===1&&(g=t,t=null),this.createBlockProcessor(t,g).$new()},dt.createInlineMacroProcessor=function(t,g){return arguments.length===1&&(g=t,t=null),Ke("InlineMacroProcessor",t,g)},dt.newInlineMacroProcessor=function(t,g){return arguments.length===1&&(g=t,t=null),this.createInlineMacroProcessor(t,g).$new()},dt.createBlockMacroProcessor=function(t,g){return arguments.length===1&&(g=t,t=null),Ke("BlockMacroProcessor",t,g)},dt.newBlockMacroProcessor=function(t,g){return arguments.length===1&&(g=t,t=null),this.createBlockMacroProcessor(t,g).$new()};var nt="3.0.4";return Opal.Asciidoctor.prototype.getVersion=function(){return nt},Opal.Asciidoctor}const es=Object.freeze(Object.defineProperty({__proto__:null,default:Oi},Symbol.toStringTag,{value:"Module"})),ts=Pi(es);var rs=ts;const ns=Mi(rs);function Mn(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function ii(e,...l){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(l.length>0&&!l.includes(e.length))throw new Error(`Expected Uint8Array of length ${l}, not of length=${e.length}`)}function is(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Mn(e.outputLen),Mn(e.blockLen)}function Hr(e,l=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(l&&e.finished)throw new Error("Hash#digest() has already been called")}function ss(e,l){ii(e);const v=l.outputLen;if(e.length<v)throw new Error(`digestInto() expects output buffer of length at least ${v}`)}const sn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const si=e=>e instanceof Uint8Array,on=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),tr=(e,l)=>e<<32-l|e>>>l,os=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!os)throw new Error("Non little-endian hardware is not supported");function $s(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Sn(e){if(typeof e=="string"&&(e=$s(e)),!si(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function as(...e){const l=new Uint8Array(e.reduce((W,L)=>W+L.length,0));let v=0;return e.forEach(W=>{if(!si(W))throw new Error("Uint8Array expected");l.set(W,v),v+=W.length}),l}let oi=class{clone(){return this._cloneInto()}};function ls(e){const l=W=>e().update(Sn(W)).digest(),v=e();return l.outputLen=v.outputLen,l.blockLen=v.blockLen,l.create=()=>e(),l}function $i(e=32){if(sn&&typeof sn.getRandomValues=="function")return sn.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function us(e,l,v,W){if(typeof e.setBigUint64=="function")return e.setBigUint64(l,v,W);const L=BigInt(32),ae=BigInt(4294967295),te=Number(v>>L&ae),le=Number(v&ae),ne=W?4:0,P=W?0:4;e.setUint32(l+ne,te,W),e.setUint32(l+P,le,W)}let cs=class extends oi{constructor(l,v,W,L){super(),this.blockLen=l,this.outputLen=v,this.padOffset=W,this.isLE=L,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(l),this.view=on(this.buffer)}update(l){Hr(this);const{view:v,buffer:W,blockLen:L}=this;l=Sn(l);const ae=l.length;for(let te=0;te<ae;){const le=Math.min(L-this.pos,ae-te);if(le===L){const ne=on(l);for(;L<=ae-te;te+=L)this.process(ne,te);continue}W.set(l.subarray(te,te+le),this.pos),this.pos+=le,te+=le,this.pos===L&&(this.process(v,0),this.pos=0)}return this.length+=l.length,this.roundClean(),this}digestInto(l){Hr(this),ss(l,this),this.finished=!0;const{buffer:v,view:W,blockLen:L,isLE:ae}=this;let{pos:te}=this;v[te++]=128,this.buffer.subarray(te).fill(0),this.padOffset>L-te&&(this.process(W,0),te=0);for(let me=te;me<L;me++)v[me]=0;us(W,L-8,BigInt(this.length*8),ae),this.process(W,0);const le=on(l),ne=this.outputLen;if(ne%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const P=ne/4,oe=this.get();if(P>oe.length)throw new Error("_sha2: outputLen bigger than state");for(let me=0;me<P;me++)le.setUint32(4*me,oe[me],ae)}digest(){const{buffer:l,outputLen:v}=this;this.digestInto(l);const W=l.slice(0,v);return this.destroy(),W}_cloneInto(l){l||(l=new this.constructor),l.set(...this.get());const{blockLen:v,buffer:W,length:L,finished:ae,destroyed:te,pos:le}=this;return l.length=L,l.pos=le,l.finished=ae,l.destroyed=te,L%v&&l.buffer.set(W),l}};const fs=(e,l,v)=>e&l^~e&v,_s=(e,l,v)=>e&l^e&v^l&v,ds=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),_r=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),dr=new Uint32Array(64);let hs=class extends cs{constructor(){super(64,32,8,!1),this.A=_r[0]|0,this.B=_r[1]|0,this.C=_r[2]|0,this.D=_r[3]|0,this.E=_r[4]|0,this.F=_r[5]|0,this.G=_r[6]|0,this.H=_r[7]|0}get(){const{A:l,B:v,C:W,D:L,E:ae,F:te,G:le,H:ne}=this;return[l,v,W,L,ae,te,le,ne]}set(l,v,W,L,ae,te,le,ne){this.A=l|0,this.B=v|0,this.C=W|0,this.D=L|0,this.E=ae|0,this.F=te|0,this.G=le|0,this.H=ne|0}process(l,v){for(let me=0;me<16;me++,v+=4)dr[me]=l.getUint32(v,!1);for(let me=16;me<64;me++){const Se=dr[me-15],Le=dr[me-2],je=tr(Se,7)^tr(Se,18)^Se>>>3,xe=tr(Le,17)^tr(Le,19)^Le>>>10;dr[me]=xe+dr[me-7]+je+dr[me-16]|0}let{A:W,B:L,C:ae,D:te,E:le,F:ne,G:P,H:oe}=this;for(let me=0;me<64;me++){const Se=tr(le,6)^tr(le,11)^tr(le,25),Le=oe+Se+fs(le,ne,P)+ds[me]+dr[me]|0,xe=(tr(W,2)^tr(W,13)^tr(W,22))+_s(W,L,ae)|0;oe=P,P=ne,ne=le,le=te+Le|0,te=ae,ae=L,L=W,W=Le+xe|0}W=W+this.A|0,L=L+this.B|0,ae=ae+this.C|0,te=te+this.D|0,le=le+this.E|0,ne=ne+this.F|0,P=P+this.G|0,oe=oe+this.H|0,this.set(W,L,ae,te,le,ne,P,oe)}roundClean(){dr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const pn=ls(()=>new hs);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ai=BigInt(0),Xr=BigInt(1),ps=BigInt(2),Zr=e=>e instanceof Uint8Array,gs=Array.from({length:256},(e,l)=>l.toString(16).padStart(2,"0"));function Rr(e){if(!Zr(e))throw new Error("Uint8Array expected");let l="";for(let v=0;v<e.length;v++)l+=gs[e[v]];return l}function li(e){const l=e.toString(16);return l.length&1?`0${l}`:l}function Cn(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function qr(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const l=e.length;if(l%2)throw new Error("padded hex string expected, got unpadded hex of length "+l);const v=new Uint8Array(l/2);for(let W=0;W<v.length;W++){const L=W*2,ae=e.slice(L,L+2),te=Number.parseInt(ae,16);if(Number.isNaN(te)||te<0)throw new Error("Invalid byte sequence");v[W]=te}return v}function Vt(e){return Cn(Rr(e))}function In(e){if(!Zr(e))throw new Error("Uint8Array expected");return Cn(Rr(Uint8Array.from(e).reverse()))}function gr(e,l){return qr(e.toString(16).padStart(l*2,"0"))}function Rn(e,l){return gr(e,l).reverse()}function ms(e){return qr(li(e))}function Yt(e,l,v){let W;if(typeof l=="string")try{W=qr(l)}catch(ae){throw new Error(`${e} must be valid hex string, got "${l}". Cause: ${ae}`)}else if(Zr(l))W=Uint8Array.from(l);else throw new Error(`${e} must be hex string or Uint8Array`);const L=W.length;if(typeof v=="number"&&L!==v)throw new Error(`${e} expected ${v} bytes, got ${L}`);return W}function Er(...e){const l=new Uint8Array(e.reduce((W,L)=>W+L.length,0));let v=0;return e.forEach(W=>{if(!Zr(W))throw new Error("Uint8Array expected");l.set(W,v),v+=W.length}),l}function vs(e,l){if(e.length!==l.length)return!1;for(let v=0;v<e.length;v++)if(e[v]!==l[v])return!1;return!0}function bs(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function ys(e){let l;for(l=0;e>ai;e>>=Xr,l+=1);return l}function ws(e,l){return e>>BigInt(l)&Xr}const xs=(e,l,v)=>e|(v?Xr:ai)<<BigInt(l),qn=e=>(ps<<BigInt(e-1))-Xr,$n=e=>new Uint8Array(e),Pn=e=>Uint8Array.from(e);function ui(e,l,v){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof l!="number"||l<2)throw new Error("qByteLen must be a number");if(typeof v!="function")throw new Error("hmacFn must be a function");let W=$n(e),L=$n(e),ae=0;const te=()=>{W.fill(1),L.fill(0),ae=0},le=(...me)=>v(L,W,...me),ne=(me=$n())=>{L=le(Pn([0]),me),W=le(),me.length!==0&&(L=le(Pn([1]),me),W=le())},P=()=>{if(ae++>=1e3)throw new Error("drbg: tried 1000 values");let me=0;const Se=[];for(;me<l;){W=le();const Le=W.slice();Se.push(Le),me+=W.length}return Er(...Se)};return(me,Se)=>{te(),ne(me);let Le;for(;!(Le=Se(P()));)ne();return te(),Le}}const Es={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,l)=>l.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Lr(e,l,v={}){const W=(L,ae,te)=>{const le=Es[ae];if(typeof le!="function")throw new Error(`Invalid validator "${ae}", expected function`);const ne=e[L];if(!(te&&ne===void 0)&&!le(ne,e))throw new Error(`Invalid param ${String(L)}=${ne} (${typeof ne}), expected ${ae}`)};for(const[L,ae]of Object.entries(l))W(L,ae,!1);for(const[L,ae]of Object.entries(v))W(L,ae,!0);return e}const ks=Object.freeze(Object.defineProperty({__proto__:null,bitGet:ws,bitLen:ys,bitMask:qn,bitSet:xs,bytesToHex:Rr,bytesToNumberBE:Vt,bytesToNumberLE:In,concatBytes:Er,createHmacDrbg:ui,ensureBytes:Yt,equalBytes:vs,hexToBytes:qr,hexToNumber:Cn,numberToBytesBE:gr,numberToBytesLE:Rn,numberToHexUnpadded:li,numberToVarBytesBE:ms,utf8ToBytes:bs,validateObject:Lr},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ut=BigInt(0),Nt=BigInt(1),yr=BigInt(2),As=BigInt(3),gn=BigInt(4),Un=BigInt(5),Hn=BigInt(8);BigInt(9);BigInt(16);function Ht(e,l){const v=e%l;return v>=Ut?v:l+v}function Ss(e,l,v){if(v<=Ut||l<Ut)throw new Error("Expected power/modulo > 0");if(v===Nt)return Ut;let W=Nt;for(;l>Ut;)l&Nt&&(W=W*e%v),e=e*e%v,l>>=Nt;return W}function Zt(e,l,v){let W=e;for(;l-- >Ut;)W*=W,W%=v;return W}function mn(e,l){if(e===Ut||l<=Ut)throw new Error(`invert: expected positive integers, got n=${e} mod=${l}`);let v=Ht(e,l),W=l,L=Ut,ae=Nt;for(;v!==Ut;){const le=W/v,ne=W%v,P=L-ae*le;W=v,v=ne,L=ae,ae=P}if(W!==Nt)throw new Error("invert: does not exist");return Ht(L,l)}function Cs(e){const l=(e-Nt)/yr;let v,W,L;for(v=e-Nt,W=0;v%yr===Ut;v/=yr,W++);for(L=yr;L<e&&Ss(L,l,e)!==e-Nt;L++);if(W===1){const te=(e+Nt)/gn;return function(ne,P){const oe=ne.pow(P,te);if(!ne.eql(ne.sqr(oe),P))throw new Error("Cannot find square root");return oe}}const ae=(v+Nt)/yr;return function(le,ne){if(le.pow(ne,l)===le.neg(le.ONE))throw new Error("Cannot find square root");let P=W,oe=le.pow(le.mul(le.ONE,L),v),me=le.pow(ne,ae),Se=le.pow(ne,v);for(;!le.eql(Se,le.ONE);){if(le.eql(Se,le.ZERO))return le.ZERO;let Le=1;for(let xe=le.sqr(Se);Le<P&&!le.eql(xe,le.ONE);Le++)xe=le.sqr(xe);const je=le.pow(oe,Nt<<BigInt(P-Le-1));oe=le.sqr(je),me=le.mul(me,je),Se=le.mul(Se,oe),P=Le}return me}}function Is(e){if(e%gn===As){const l=(e+Nt)/gn;return function(W,L){const ae=W.pow(L,l);if(!W.eql(W.sqr(ae),L))throw new Error("Cannot find square root");return ae}}if(e%Hn===Un){const l=(e-Un)/Hn;return function(W,L){const ae=W.mul(L,yr),te=W.pow(ae,l),le=W.mul(L,te),ne=W.mul(W.mul(le,yr),te),P=W.mul(le,W.sub(ne,W.ONE));if(!W.eql(W.sqr(P),L))throw new Error("Cannot find square root");return P}}return Cs(e)}const Rs=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function qs(e){const l={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},v=Rs.reduce((W,L)=>(W[L]="function",W),l);return Lr(e,v)}function Ts(e,l,v){if(v<Ut)throw new Error("Expected power > 0");if(v===Ut)return e.ONE;if(v===Nt)return l;let W=e.ONE,L=l;for(;v>Ut;)v&Nt&&(W=e.mul(W,L)),L=e.sqr(L),v>>=Nt;return W}function Bs(e,l){const v=new Array(l.length),W=l.reduce((ae,te,le)=>e.is0(te)?ae:(v[le]=ae,e.mul(ae,te)),e.ONE),L=e.inv(W);return l.reduceRight((ae,te,le)=>e.is0(te)?ae:(v[le]=e.mul(ae,v[le]),e.mul(ae,te)),L),v}function ci(e,l){const v=l!==void 0?l:e.toString(2).length,W=Math.ceil(v/8);return{nBitLength:v,nByteLength:W}}function Fs(e,l,v=!1,W={}){if(e<=Ut)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:L,nByteLength:ae}=ci(e,l);if(ae>2048)throw new Error("Field lengths over 2048 bytes are not supported");const te=Is(e),le=Object.freeze({ORDER:e,BITS:L,BYTES:ae,MASK:qn(L),ZERO:Ut,ONE:Nt,create:ne=>Ht(ne,e),isValid:ne=>{if(typeof ne!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof ne}`);return Ut<=ne&&ne<e},is0:ne=>ne===Ut,isOdd:ne=>(ne&Nt)===Nt,neg:ne=>Ht(-ne,e),eql:(ne,P)=>ne===P,sqr:ne=>Ht(ne*ne,e),add:(ne,P)=>Ht(ne+P,e),sub:(ne,P)=>Ht(ne-P,e),mul:(ne,P)=>Ht(ne*P,e),pow:(ne,P)=>Ts(le,ne,P),div:(ne,P)=>Ht(ne*mn(P,e),e),sqrN:ne=>ne*ne,addN:(ne,P)=>ne+P,subN:(ne,P)=>ne-P,mulN:(ne,P)=>ne*P,inv:ne=>mn(ne,e),sqrt:W.sqrt||(ne=>te(le,ne)),invertBatch:ne=>Bs(le,ne),cmov:(ne,P,oe)=>oe?P:ne,toBytes:ne=>v?Rn(ne,ae):gr(ne,ae),fromBytes:ne=>{if(ne.length!==ae)throw new Error(`Fp.fromBytes: expected ${ae}, got ${ne.length}`);return v?In(ne):Vt(ne)}});return Object.freeze(le)}function fi(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const l=e.toString(2).length;return Math.ceil(l/8)}function _i(e){const l=fi(e);return l+Math.ceil(l/2)}function zs(e,l,v=!1){const W=e.length,L=fi(l),ae=_i(l);if(W<16||W<ae||W>1024)throw new Error(`expected ${ae}-1024 bytes of input, got ${W}`);const te=v?Vt(e):In(e),le=Ht(te,l-Nt)+Nt;return v?Rn(le,L):gr(le,L)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ns=BigInt(0),an=BigInt(1);function Ls(e,l){const v=(L,ae)=>{const te=ae.negate();return L?te:ae},W=L=>{const ae=Math.ceil(l/L)+1,te=2**(L-1);return{windows:ae,windowSize:te}};return{constTimeNegate:v,unsafeLadder(L,ae){let te=e.ZERO,le=L;for(;ae>Ns;)ae&an&&(te=te.add(le)),le=le.double(),ae>>=an;return te},precomputeWindow(L,ae){const{windows:te,windowSize:le}=W(ae),ne=[];let P=L,oe=P;for(let me=0;me<te;me++){oe=P,ne.push(oe);for(let Se=1;Se<le;Se++)oe=oe.add(P),ne.push(oe);P=oe.double()}return ne},wNAF(L,ae,te){const{windows:le,windowSize:ne}=W(L);let P=e.ZERO,oe=e.BASE;const me=BigInt(2**L-1),Se=2**L,Le=BigInt(L);for(let je=0;je<le;je++){const xe=je*ne;let O=Number(te&me);te>>=Le,O>ne&&(O-=Se,te+=an);const Ie=xe,We=xe+Math.abs(O)-1,Ne=je%2!==0,Fe=O<0;O===0?oe=oe.add(v(Ne,ae[Ie])):P=P.add(v(Fe,ae[We]))}return{p:P,f:oe}},wNAFCached(L,ae,te,le){const ne=L._WINDOW_SIZE||1;let P=ae.get(L);return P||(P=this.precomputeWindow(L,ne),ne!==1&&ae.set(L,le(P))),this.wNAF(ne,P,te)}}}function di(e){return qs(e.Fp),Lr(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ci(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ds(e){const l=di(e);Lr(l,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:v,Fp:W,a:L}=l;if(v){if(!W.eql(L,W.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof v!="object"||typeof v.beta!="bigint"||typeof v.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...l})}const{bytesToNumberBE:Ms,hexToBytes:Ps}=ks,xr={Err:class extends Error{constructor(l=""){super(l)}},_parseInt(e){const{Err:l}=xr;if(e.length<2||e[0]!==2)throw new l("Invalid signature integer tag");const v=e[1],W=e.subarray(2,v+2);if(!v||W.length!==v)throw new l("Invalid signature integer: wrong length");if(W[0]&128)throw new l("Invalid signature integer: negative");if(W[0]===0&&!(W[1]&128))throw new l("Invalid signature integer: unnecessary leading zero");return{d:Ms(W),l:e.subarray(v+2)}},toSig(e){const{Err:l}=xr,v=typeof e=="string"?Ps(e):e;if(!(v instanceof Uint8Array))throw new Error("ui8a expected");let W=v.length;if(W<2||v[0]!=48)throw new l("Invalid signature tag");if(v[1]!==W-2)throw new l("Invalid signature: incorrect length");const{d:L,l:ae}=xr._parseInt(v.subarray(2)),{d:te,l:le}=xr._parseInt(ae);if(le.length)throw new l("Invalid signature: left bytes after parsing");return{r:L,s:te}},hexFromSig(e){const l=P=>Number.parseInt(P[0],16)&8?"00"+P:P,v=P=>{const oe=P.toString(16);return oe.length&1?`0${oe}`:oe},W=l(v(e.s)),L=l(v(e.r)),ae=W.length/2,te=L.length/2,le=v(ae),ne=v(te);return`30${v(te+ae+4)}02${ne}${L}02${le}${W}`}},$r=BigInt(0),Qt=BigInt(1);BigInt(2);const jn=BigInt(3);BigInt(4);function Us(e){const l=Ds(e),{Fp:v}=l,W=l.toBytes||((je,xe,O)=>{const Ie=xe.toAffine();return Er(Uint8Array.from([4]),v.toBytes(Ie.x),v.toBytes(Ie.y))}),L=l.fromBytes||(je=>{const xe=je.subarray(1),O=v.fromBytes(xe.subarray(0,v.BYTES)),Ie=v.fromBytes(xe.subarray(v.BYTES,2*v.BYTES));return{x:O,y:Ie}});function ae(je){const{a:xe,b:O}=l,Ie=v.sqr(je),We=v.mul(Ie,je);return v.add(v.add(We,v.mul(je,xe)),O)}if(!v.eql(v.sqr(l.Gy),ae(l.Gx)))throw new Error("bad generator point: equation left != right");function te(je){return typeof je=="bigint"&&$r<je&&je<l.n}function le(je){if(!te(je))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function ne(je){const{allowedPrivateKeyLengths:xe,nByteLength:O,wrapPrivateKey:Ie,n:We}=l;if(xe&&typeof je!="bigint"){if(je instanceof Uint8Array&&(je=Rr(je)),typeof je!="string"||!xe.includes(je.length))throw new Error("Invalid key");je=je.padStart(O*2,"0")}let Ne;try{Ne=typeof je=="bigint"?je:Vt(Yt("private key",je,O))}catch{throw new Error(`private key must be ${O} bytes, hex or bigint, not ${typeof je}`)}return Ie&&(Ne=Ht(Ne,We)),le(Ne),Ne}const P=new Map;function oe(je){if(!(je instanceof me))throw new Error("ProjectivePoint expected")}class me{constructor(xe,O,Ie){if(this.px=xe,this.py=O,this.pz=Ie,xe==null||!v.isValid(xe))throw new Error("x required");if(O==null||!v.isValid(O))throw new Error("y required");if(Ie==null||!v.isValid(Ie))throw new Error("z required")}static fromAffine(xe){const{x:O,y:Ie}=xe||{};if(!xe||!v.isValid(O)||!v.isValid(Ie))throw new Error("invalid affine point");if(xe instanceof me)throw new Error("projective point not allowed");const We=Ne=>v.eql(Ne,v.ZERO);return We(O)&&We(Ie)?me.ZERO:new me(O,Ie,v.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(xe){const O=v.invertBatch(xe.map(Ie=>Ie.pz));return xe.map((Ie,We)=>Ie.toAffine(O[We])).map(me.fromAffine)}static fromHex(xe){const O=me.fromAffine(L(Yt("pointHex",xe)));return O.assertValidity(),O}static fromPrivateKey(xe){return me.BASE.multiply(ne(xe))}_setWindowSize(xe){this._WINDOW_SIZE=xe,P.delete(this)}assertValidity(){if(this.is0()){if(l.allowInfinityPoint&&!v.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:xe,y:O}=this.toAffine();if(!v.isValid(xe)||!v.isValid(O))throw new Error("bad point: x or y not FE");const Ie=v.sqr(O),We=ae(xe);if(!v.eql(Ie,We))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:xe}=this.toAffine();if(v.isOdd)return!v.isOdd(xe);throw new Error("Field doesn't support isOdd")}equals(xe){oe(xe);const{px:O,py:Ie,pz:We}=this,{px:Ne,py:Fe,pz:_e}=xe,ye=v.eql(v.mul(O,_e),v.mul(Ne,We)),de=v.eql(v.mul(Ie,_e),v.mul(Fe,We));return ye&&de}negate(){return new me(this.px,v.neg(this.py),this.pz)}double(){const{a:xe,b:O}=l,Ie=v.mul(O,jn),{px:We,py:Ne,pz:Fe}=this;let _e=v.ZERO,ye=v.ZERO,de=v.ZERO,ze=v.mul(We,We),fe=v.mul(Ne,Ne),ke=v.mul(Fe,Fe),ie=v.mul(We,Ne);return ie=v.add(ie,ie),de=v.mul(We,Fe),de=v.add(de,de),_e=v.mul(xe,de),ye=v.mul(Ie,ke),ye=v.add(_e,ye),_e=v.sub(fe,ye),ye=v.add(fe,ye),ye=v.mul(_e,ye),_e=v.mul(ie,_e),de=v.mul(Ie,de),ke=v.mul(xe,ke),ie=v.sub(ze,ke),ie=v.mul(xe,ie),ie=v.add(ie,de),de=v.add(ze,ze),ze=v.add(de,ze),ze=v.add(ze,ke),ze=v.mul(ze,ie),ye=v.add(ye,ze),ke=v.mul(Ne,Fe),ke=v.add(ke,ke),ze=v.mul(ke,ie),_e=v.sub(_e,ze),de=v.mul(ke,fe),de=v.add(de,de),de=v.add(de,de),new me(_e,ye,de)}add(xe){oe(xe);const{px:O,py:Ie,pz:We}=this,{px:Ne,py:Fe,pz:_e}=xe;let ye=v.ZERO,de=v.ZERO,ze=v.ZERO;const fe=l.a,ke=v.mul(l.b,jn);let ie=v.mul(O,Ne),p=v.mul(Ie,Fe),ee=v.mul(We,_e),q=v.add(O,Ie),j=v.add(Ne,Fe);q=v.mul(q,j),j=v.add(ie,p),q=v.sub(q,j),j=v.add(O,We);let F=v.add(Ne,_e);return j=v.mul(j,F),F=v.add(ie,ee),j=v.sub(j,F),F=v.add(Ie,We),ye=v.add(Fe,_e),F=v.mul(F,ye),ye=v.add(p,ee),F=v.sub(F,ye),ze=v.mul(fe,j),ye=v.mul(ke,ee),ze=v.add(ye,ze),ye=v.sub(p,ze),ze=v.add(p,ze),de=v.mul(ye,ze),p=v.add(ie,ie),p=v.add(p,ie),ee=v.mul(fe,ee),j=v.mul(ke,j),p=v.add(p,ee),ee=v.sub(ie,ee),ee=v.mul(fe,ee),j=v.add(j,ee),ie=v.mul(p,j),de=v.add(de,ie),ie=v.mul(F,j),ye=v.mul(q,ye),ye=v.sub(ye,ie),ie=v.mul(q,p),ze=v.mul(F,ze),ze=v.add(ze,ie),new me(ye,de,ze)}subtract(xe){return this.add(xe.negate())}is0(){return this.equals(me.ZERO)}wNAF(xe){return Le.wNAFCached(this,P,xe,O=>{const Ie=v.invertBatch(O.map(We=>We.pz));return O.map((We,Ne)=>We.toAffine(Ie[Ne])).map(me.fromAffine)})}multiplyUnsafe(xe){const O=me.ZERO;if(xe===$r)return O;if(le(xe),xe===Qt)return this;const{endo:Ie}=l;if(!Ie)return Le.unsafeLadder(this,xe);let{k1neg:We,k1:Ne,k2neg:Fe,k2:_e}=Ie.splitScalar(xe),ye=O,de=O,ze=this;for(;Ne>$r||_e>$r;)Ne&Qt&&(ye=ye.add(ze)),_e&Qt&&(de=de.add(ze)),ze=ze.double(),Ne>>=Qt,_e>>=Qt;return We&&(ye=ye.negate()),Fe&&(de=de.negate()),de=new me(v.mul(de.px,Ie.beta),de.py,de.pz),ye.add(de)}multiply(xe){le(xe);let O=xe,Ie,We;const{endo:Ne}=l;if(Ne){const{k1neg:Fe,k1:_e,k2neg:ye,k2:de}=Ne.splitScalar(O);let{p:ze,f:fe}=this.wNAF(_e),{p:ke,f:ie}=this.wNAF(de);ze=Le.constTimeNegate(Fe,ze),ke=Le.constTimeNegate(ye,ke),ke=new me(v.mul(ke.px,Ne.beta),ke.py,ke.pz),Ie=ze.add(ke),We=fe.add(ie)}else{const{p:Fe,f:_e}=this.wNAF(O);Ie=Fe,We=_e}return me.normalizeZ([Ie,We])[0]}multiplyAndAddUnsafe(xe,O,Ie){const We=me.BASE,Ne=(_e,ye)=>ye===$r||ye===Qt||!_e.equals(We)?_e.multiplyUnsafe(ye):_e.multiply(ye),Fe=Ne(this,O).add(Ne(xe,Ie));return Fe.is0()?void 0:Fe}toAffine(xe){const{px:O,py:Ie,pz:We}=this,Ne=this.is0();xe==null&&(xe=Ne?v.ONE:v.inv(We));const Fe=v.mul(O,xe),_e=v.mul(Ie,xe),ye=v.mul(We,xe);if(Ne)return{x:v.ZERO,y:v.ZERO};if(!v.eql(ye,v.ONE))throw new Error("invZ was invalid");return{x:Fe,y:_e}}isTorsionFree(){const{h:xe,isTorsionFree:O}=l;if(xe===Qt)return!0;if(O)return O(me,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:xe,clearCofactor:O}=l;return xe===Qt?this:O?O(me,this):this.multiplyUnsafe(l.h)}toRawBytes(xe=!0){return this.assertValidity(),W(me,this,xe)}toHex(xe=!0){return Rr(this.toRawBytes(xe))}}me.BASE=new me(l.Gx,l.Gy,v.ONE),me.ZERO=new me(v.ZERO,v.ONE,v.ZERO);const Se=l.nBitLength,Le=Ls(me,l.endo?Math.ceil(Se/2):Se);return{CURVE:l,ProjectivePoint:me,normPrivateKeyToScalar:ne,weierstrassEquation:ae,isWithinCurveOrder:te}}function Hs(e){const l=di(e);return Lr(l,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...l})}function js(e){const l=Hs(e),{Fp:v,n:W}=l,L=v.BYTES+1,ae=2*v.BYTES+1;function te(j){return $r<j&&j<v.ORDER}function le(j){return Ht(j,W)}function ne(j){return mn(j,W)}const{ProjectivePoint:P,normPrivateKeyToScalar:oe,weierstrassEquation:me,isWithinCurveOrder:Se}=Us({...l,toBytes(j,F,Ee){const re=F.toAffine(),U=v.toBytes(re.x),m=Er;return Ee?m(Uint8Array.from([F.hasEvenY()?2:3]),U):m(Uint8Array.from([4]),U,v.toBytes(re.y))},fromBytes(j){const F=j.length,Ee=j[0],re=j.subarray(1);if(F===L&&(Ee===2||Ee===3)){const U=Vt(re);if(!te(U))throw new Error("Point is not on curve");const m=me(U);let s=v.sqrt(m);const n=(s&Qt)===Qt;return(Ee&1)===1!==n&&(s=v.neg(s)),{x:U,y:s}}else if(F===ae&&Ee===4){const U=v.fromBytes(re.subarray(0,v.BYTES)),m=v.fromBytes(re.subarray(v.BYTES,2*v.BYTES));return{x:U,y:m}}else throw new Error(`Point of length ${F} was invalid. Expected ${L} compressed bytes or ${ae} uncompressed bytes`)}}),Le=j=>Rr(gr(j,l.nByteLength));function je(j){const F=W>>Qt;return j>F}function xe(j){return je(j)?le(-j):j}const O=(j,F,Ee)=>Vt(j.slice(F,Ee));class Ie{constructor(F,Ee,re){this.r=F,this.s=Ee,this.recovery=re,this.assertValidity()}static fromCompact(F){const Ee=l.nByteLength;return F=Yt("compactSignature",F,Ee*2),new Ie(O(F,0,Ee),O(F,Ee,2*Ee))}static fromDER(F){const{r:Ee,s:re}=xr.toSig(Yt("DER",F));return new Ie(Ee,re)}assertValidity(){if(!Se(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!Se(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(F){return new Ie(this.r,this.s,F)}recoverPublicKey(F){const{r:Ee,s:re,recovery:U}=this,m=de(Yt("msgHash",F));if(U==null||![0,1,2,3].includes(U))throw new Error("recovery id invalid");const s=U===2||U===3?Ee+l.n:Ee;if(s>=v.ORDER)throw new Error("recovery id 2 or 3 invalid");const n=U&1?"03":"02",i=P.fromHex(n+Le(s)),o=ne(s),c=le(-m*o),x=le(re*o),S=P.BASE.multiplyAndAddUnsafe(i,c,x);if(!S)throw new Error("point at infinify");return S.assertValidity(),S}hasHighS(){return je(this.s)}normalizeS(){return this.hasHighS()?new Ie(this.r,le(-this.s),this.recovery):this}toDERRawBytes(){return qr(this.toDERHex())}toDERHex(){return xr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return qr(this.toCompactHex())}toCompactHex(){return Le(this.r)+Le(this.s)}}const We={isValidPrivateKey(j){try{return oe(j),!0}catch{return!1}},normPrivateKeyToScalar:oe,randomPrivateKey:()=>{const j=_i(l.n);return zs(l.randomBytes(j),l.n)},precompute(j=8,F=P.BASE){return F._setWindowSize(j),F.multiply(BigInt(3)),F}};function Ne(j,F=!0){return P.fromPrivateKey(j).toRawBytes(F)}function Fe(j){const F=j instanceof Uint8Array,Ee=typeof j=="string",re=(F||Ee)&&j.length;return F?re===L||re===ae:Ee?re===2*L||re===2*ae:j instanceof P}function _e(j,F,Ee=!0){if(Fe(j))throw new Error("first arg must be private key");if(!Fe(F))throw new Error("second arg must be public key");return P.fromHex(F).multiply(oe(j)).toRawBytes(Ee)}const ye=l.bits2int||function(j){const F=Vt(j),Ee=j.length*8-l.nBitLength;return Ee>0?F>>BigInt(Ee):F},de=l.bits2int_modN||function(j){return le(ye(j))},ze=qn(l.nBitLength);function fe(j){if(typeof j!="bigint")throw new Error("bigint expected");if(!($r<=j&&j<ze))throw new Error(`bigint expected < 2^${l.nBitLength}`);return gr(j,l.nByteLength)}function ke(j,F,Ee=ie){if(["recovered","canonical"].some(qe=>qe in Ee))throw new Error("sign() legacy options not supported");const{hash:re,randomBytes:U}=l;let{lowS:m,prehash:s,extraEntropy:n}=Ee;m==null&&(m=!0),j=Yt("msgHash",j),s&&(j=Yt("prehashed msgHash",re(j)));const i=de(j),o=oe(F),c=[fe(o),fe(i)];if(n!=null){const qe=n===!0?U(v.BYTES):n;c.push(Yt("extraEntropy",qe))}const x=Er(...c),S=i;function G(qe){const Je=ye(qe);if(!Se(Je))return;const $t=ne(Je),lt=P.BASE.multiply(Je).toAffine(),gt=le(lt.x);if(gt===$r)return;const _t=le($t*le(S+gt*o));if(_t===$r)return;let vt=(lt.x===gt?0:2)|Number(lt.y&Qt),dt=_t;return m&&je(_t)&&(dt=xe(_t),vt^=1),new Ie(gt,dt,vt)}return{seed:x,k2sig:G}}const ie={lowS:l.lowS,prehash:!1},p={lowS:l.lowS,prehash:!1};function ee(j,F,Ee=ie){const{seed:re,k2sig:U}=ke(j,F,Ee),m=l;return ui(m.hash.outputLen,m.nByteLength,m.hmac)(re,U)}P.BASE._setWindowSize(8);function q(j,F,Ee,re=p){var lt;const U=j;if(F=Yt("msgHash",F),Ee=Yt("publicKey",Ee),"strict"in re)throw new Error("options.strict was renamed to lowS");const{lowS:m,prehash:s}=re;let n,i;try{if(typeof U=="string"||U instanceof Uint8Array)try{n=Ie.fromDER(U)}catch(gt){if(!(gt instanceof xr.Err))throw gt;n=Ie.fromCompact(U)}else if(typeof U=="object"&&typeof U.r=="bigint"&&typeof U.s=="bigint"){const{r:gt,s:_t}=U;n=new Ie(gt,_t)}else throw new Error("PARSE");i=P.fromHex(Ee)}catch(gt){if(gt.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(m&&n.hasHighS())return!1;s&&(F=l.hash(F));const{r:o,s:c}=n,x=de(F),S=ne(c),G=le(x*S),qe=le(o*S),Je=(lt=P.BASE.multiplyAndAddUnsafe(i,G,qe))==null?void 0:lt.toAffine();return Je?le(Je.x)===o:!1}return{CURVE:l,getPublicKey:Ne,getSharedSecret:_e,sign:ee,verify:q,ProjectivePoint:P,Signature:Ie,utils:We}}class hi extends oi{constructor(l,v){super(),this.finished=!1,this.destroyed=!1,is(l);const W=Sn(v);if(this.iHash=l.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const L=this.blockLen,ae=new Uint8Array(L);ae.set(W.length>L?l.create().update(W).digest():W);for(let te=0;te<ae.length;te++)ae[te]^=54;this.iHash.update(ae),this.oHash=l.create();for(let te=0;te<ae.length;te++)ae[te]^=106;this.oHash.update(ae),ae.fill(0)}update(l){return Hr(this),this.iHash.update(l),this}digestInto(l){Hr(this),ii(l,this.outputLen),this.finished=!0,this.iHash.digestInto(l),this.oHash.update(l),this.oHash.digestInto(l),this.destroy()}digest(){const l=new Uint8Array(this.oHash.outputLen);return this.digestInto(l),l}_cloneInto(l){l||(l=Object.create(Object.getPrototypeOf(this),{}));const{oHash:v,iHash:W,finished:L,destroyed:ae,blockLen:te,outputLen:le}=this;return l=l,l.finished=L,l.destroyed=ae,l.blockLen=te,l.outputLen=le,l.oHash=v._cloneInto(l.oHash),l.iHash=W._cloneInto(l.iHash),l}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const pi=(e,l,v)=>new hi(e,l).update(v).digest();pi.create=(e,l)=>new hi(e,l);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ys(e){return{hash:e,hmac:(l,...v)=>pi(e,l,as(...v)),randomBytes:$i}}function Ks(e,l){const v=W=>js({...e,...Ys(W)});return Object.freeze({...v(l),create:v})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Jr=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),jr=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),gi=BigInt(1),Yr=BigInt(2),Yn=(e,l)=>(e+l/Yr)/l;function mi(e){const l=Jr,v=BigInt(3),W=BigInt(6),L=BigInt(11),ae=BigInt(22),te=BigInt(23),le=BigInt(44),ne=BigInt(88),P=e*e*e%l,oe=P*P*e%l,me=Zt(oe,v,l)*oe%l,Se=Zt(me,v,l)*oe%l,Le=Zt(Se,Yr,l)*P%l,je=Zt(Le,L,l)*Le%l,xe=Zt(je,ae,l)*je%l,O=Zt(xe,le,l)*xe%l,Ie=Zt(O,ne,l)*O%l,We=Zt(Ie,le,l)*xe%l,Ne=Zt(We,v,l)*oe%l,Fe=Zt(Ne,te,l)*je%l,_e=Zt(Fe,W,l)*P%l,ye=Zt(_e,Yr,l);if(!vn.eql(vn.sqr(ye),e))throw new Error("Cannot find square root");return ye}const vn=Fs(Jr,void 0,void 0,{sqrt:mi}),Tn=Ks({a:BigInt(0),b:BigInt(7),Fp:vn,n:jr,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const l=jr,v=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),W=-gi*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),L=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),ae=v,te=BigInt("0x100000000000000000000000000000000"),le=Yn(ae*e,l),ne=Yn(-W*e,l);let P=Ht(e-le*v-ne*L,l),oe=Ht(-le*W-ne*ae,l);const me=P>te,Se=oe>te;if(me&&(P=l-P),Se&&(oe=l-oe),P>te||oe>te)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:me,k1:P,k2neg:Se,k2:oe}}}},pn),Qr=BigInt(0),vi=e=>typeof e=="bigint"&&Qr<e&&e<Jr,Ws=e=>typeof e=="bigint"&&Qr<e&&e<jr,Kn={};function Kr(e,...l){let v=Kn[e];if(v===void 0){const W=pn(Uint8Array.from(e,L=>L.charCodeAt(0)));v=Er(W,W),Kn[e]=v}return pn(Er(v,...l))}const Bn=e=>e.toRawBytes(!0).slice(1),bn=e=>gr(e,32),ln=e=>Ht(e,Jr),Nr=e=>Ht(e,jr),Fn=Tn.ProjectivePoint,Gs=(e,l,v)=>Fn.BASE.multiplyAndAddUnsafe(e,l,v);function yn(e){let l=Tn.utils.normPrivateKeyToScalar(e),v=Fn.fromPrivateKey(l);return{scalar:v.hasEvenY()?l:Nr(-l),bytes:Bn(v)}}function bi(e){if(!vi(e))throw new Error("bad x: need 0 < x < p");const l=ln(e*e),v=ln(l*e+BigInt(7));let W=mi(v);W%Yr!==Qr&&(W=ln(-W));const L=new Fn(e,W,gi);return L.assertValidity(),L}function yi(...e){return Nr(Vt(Kr("BIP0340/challenge",...e)))}function Vs(e){return yn(e).bytes}function Xs(e,l,v=$i(32)){const W=Yt("message",e),{bytes:L,scalar:ae}=yn(l),te=Yt("auxRand",v,32),le=bn(ae^Vt(Kr("BIP0340/aux",te))),ne=Kr("BIP0340/nonce",le,L,W),P=Nr(Vt(ne));if(P===Qr)throw new Error("sign failed: k is zero");const{bytes:oe,scalar:me}=yn(P),Se=yi(oe,L,W),Le=new Uint8Array(64);if(Le.set(oe,0),Le.set(bn(Nr(me+Se*ae)),32),!wi(Le,W,L))throw new Error("sign: Invalid signature produced");return Le}function wi(e,l,v){const W=Yt("signature",e,64),L=Yt("message",l),ae=Yt("publicKey",v,32);try{const te=bi(Vt(ae)),le=Vt(W.subarray(0,32));if(!vi(le))return!1;const ne=Vt(W.subarray(32,64));if(!Ws(ne))return!1;const P=yi(bn(le),Bn(te),L),oe=Gs(te,ne,Nr(-P));return!(!oe||!oe.hasEvenY()||oe.toAffine().x!==le)}catch{return!1}}const Br={getPublicKey:Vs,sign:Xs,verify:wi,utils:{randomPrivateKey:Tn.utils.randomPrivateKey,lift_x:bi,pointToBytes:Bn,numberToBytesBE:gr,bytesToNumberBE:Vt,taggedHash:Kr,mod:Ht}};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xi=e=>e instanceof Uint8Array,un=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),rr=(e,l)=>e<<32-l|e>>>l,Zs=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Zs)throw new Error("Non little-endian hardware is not supported");const Js=Array.from({length:256},(e,l)=>l.toString(16).padStart(2,"0"));function er(e){if(!xi(e))throw new Error("Uint8Array expected");let l="";for(let v=0;v<e.length;v++)l+=Js[e[v]];return l}function Qs(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Ei(e){if(typeof e=="string"&&(e=Qs(e)),!xi(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}class Os{clone(){return this._cloneInto()}}function ki(e){const l=W=>e().update(Ei(W)).digest(),v=e();return l.outputLen=v.outputLen,l.blockLen=v.blockLen,l.create=()=>e(),l}function wn(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function eo(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Ai(e,...l){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(l.length>0&&!l.includes(e.length))throw new Error(`Expected Uint8Array of length ${l}, not of length=${e.length}`)}function to(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");wn(e.outputLen),wn(e.blockLen)}function ro(e,l=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(l&&e.finished)throw new Error("Hash#digest() has already been called")}function no(e,l){Ai(e);const v=l.outputLen;if(e.length<v)throw new Error(`digestInto() expects output buffer of length at least ${v}`)}const cn={number:wn,bool:eo,bytes:Ai,hash:to,exists:ro,output:no};function io(e,l,v,W){if(typeof e.setBigUint64=="function")return e.setBigUint64(l,v,W);const L=BigInt(32),ae=BigInt(4294967295),te=Number(v>>L&ae),le=Number(v&ae),ne=W?4:0,P=W?0:4;e.setUint32(l+ne,te,W),e.setUint32(l+P,le,W)}class so extends Os{constructor(l,v,W,L){super(),this.blockLen=l,this.outputLen=v,this.padOffset=W,this.isLE=L,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(l),this.view=un(this.buffer)}update(l){cn.exists(this);const{view:v,buffer:W,blockLen:L}=this;l=Ei(l);const ae=l.length;for(let te=0;te<ae;){const le=Math.min(L-this.pos,ae-te);if(le===L){const ne=un(l);for(;L<=ae-te;te+=L)this.process(ne,te);continue}W.set(l.subarray(te,te+le),this.pos),this.pos+=le,te+=le,this.pos===L&&(this.process(v,0),this.pos=0)}return this.length+=l.length,this.roundClean(),this}digestInto(l){cn.exists(this),cn.output(l,this),this.finished=!0;const{buffer:v,view:W,blockLen:L,isLE:ae}=this;let{pos:te}=this;v[te++]=128,this.buffer.subarray(te).fill(0),this.padOffset>L-te&&(this.process(W,0),te=0);for(let me=te;me<L;me++)v[me]=0;io(W,L-8,BigInt(this.length*8),ae),this.process(W,0);const le=un(l),ne=this.outputLen;if(ne%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const P=ne/4,oe=this.get();if(P>oe.length)throw new Error("_sha2: outputLen bigger than state");for(let me=0;me<P;me++)le.setUint32(4*me,oe[me],ae)}digest(){const{buffer:l,outputLen:v}=this;this.digestInto(l);const W=l.slice(0,v);return this.destroy(),W}_cloneInto(l){l||(l=new this.constructor),l.set(...this.get());const{blockLen:v,buffer:W,length:L,finished:ae,destroyed:te,pos:le}=this;return l.length=L,l.pos=le,l.finished=ae,l.destroyed=te,L%v&&l.buffer.set(W),l}}const oo=(e,l,v)=>e&l^~e&v,$o=(e,l,v)=>e&l^e&v^l&v,ao=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),hr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),pr=new Uint32Array(64);class Si extends so{constructor(){super(64,32,8,!1),this.A=hr[0]|0,this.B=hr[1]|0,this.C=hr[2]|0,this.D=hr[3]|0,this.E=hr[4]|0,this.F=hr[5]|0,this.G=hr[6]|0,this.H=hr[7]|0}get(){const{A:l,B:v,C:W,D:L,E:ae,F:te,G:le,H:ne}=this;return[l,v,W,L,ae,te,le,ne]}set(l,v,W,L,ae,te,le,ne){this.A=l|0,this.B=v|0,this.C=W|0,this.D=L|0,this.E=ae|0,this.F=te|0,this.G=le|0,this.H=ne|0}process(l,v){for(let me=0;me<16;me++,v+=4)pr[me]=l.getUint32(v,!1);for(let me=16;me<64;me++){const Se=pr[me-15],Le=pr[me-2],je=rr(Se,7)^rr(Se,18)^Se>>>3,xe=rr(Le,17)^rr(Le,19)^Le>>>10;pr[me]=xe+pr[me-7]+je+pr[me-16]|0}let{A:W,B:L,C:ae,D:te,E:le,F:ne,G:P,H:oe}=this;for(let me=0;me<64;me++){const Se=rr(le,6)^rr(le,11)^rr(le,25),Le=oe+Se+oo(le,ne,P)+ao[me]+pr[me]|0,xe=(rr(W,2)^rr(W,13)^rr(W,22))+$o(W,L,ae)|0;oe=P,P=ne,ne=le,le=te+Le|0,te=ae,ae=L,L=W,W=Le+xe|0}W=W+this.A|0,L=L+this.B|0,ae=ae+this.C|0,te=te+this.D|0,le=le+this.E|0,ne=ne+this.F|0,P=P+this.G|0,oe=oe+this.H|0,this.set(W,L,ae,te,le,ne,P,oe)}roundClean(){pr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class lo extends Si{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const uo=ki(()=>new Si);ki(()=>new lo);var br=Symbol("verified"),co=e=>e instanceof Object;function fo(e){if(!co(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let l=0;l<e.tags.length;l++){let v=e.tags[l];if(!Array.isArray(v))return!1;for(let W=0;W<v.length;W++)if(typeof v[W]=="object")return!1}return!0}new TextDecoder("utf-8");var _o=new TextEncoder;function zr(e){e.indexOf("://")===-1&&(e="wss://"+e);let l=new URL(e);return l.pathname=l.pathname.replace(/\/+/g,"/"),l.pathname.endsWith("/")&&(l.pathname=l.pathname.slice(0,-1)),(l.port==="80"&&l.protocol==="ws:"||l.port==="443"&&l.protocol==="wss:")&&(l.port=""),l.searchParams.sort(),l.hash="",l.toString()}var ho=class{constructor(e){St(this,"value");St(this,"next",null);St(this,"prev",null);this.value=e}},po=class{constructor(){St(this,"first");St(this,"last");this.first=null,this.last=null}enqueue(e){const l=new ho(e);return this.last?this.last===this.first?(this.last=l,this.last.prev=this.first,this.first.next=l):(l.prev=this.last,this.last.next=l,this.last=l):(this.first=l,this.last=l),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const l=this.first;return this.first=null,this.last=null,l.value}const e=this.first;return this.first=e.next,e.value}},go=class{generateSecretKey(){return Br.utils.randomPrivateKey()}getPublicKey(e){return er(Br.getPublicKey(e))}finalizeEvent(e,l){const v=e;return v.pubkey=er(Br.getPublicKey(l)),v.id=fn(v),v.sig=er(Br.sign(fn(v),l)),v[br]=!0,v}verifyEvent(e){if(typeof e[br]=="boolean")return e[br];const l=fn(e);if(l!==e.id)return e[br]=!1,!1;try{const v=Br.verify(e.sig,l,e.pubkey);return e[br]=v,v}catch{return e[br]=!1,!1}}};function mo(e){if(!fo(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function fn(e){let l=uo(_o.encode(mo(e)));return er(l)}var Or=new go;Or.generateSecretKey;Or.getPublicKey;Or.finalizeEvent;var vo=Or.verifyEvent,bo=22242;function yo(e,l){if(e.ids&&e.ids.indexOf(l.id)===-1||e.kinds&&e.kinds.indexOf(l.kind)===-1||e.authors&&e.authors.indexOf(l.pubkey)===-1)return!1;for(let v in e)if(v[0]==="#"){let W=v.slice(1),L=e[`#${W}`];if(L&&!l.tags.find(([ae,te])=>ae===v.slice(1)&&L.indexOf(te)!==-1))return!1}return!(e.since&&l.created_at<e.since||e.until&&l.created_at>e.until)}function wo(e,l){for(let v=0;v<e.length;v++)if(yo(e[v],l))return!0;return!1}function xo(e,l){let v=l.length+3,W=e.indexOf(`"${l}":`)+v,L=e.slice(W).indexOf('"')+W+1;return e.slice(L,L+64)}function Eo(e){let l=e.slice(0,22).indexOf('"EVENT"');if(l===-1)return null;let v=e.slice(l+7+1).indexOf('"');if(v===-1)return null;let W=l+7+1+v,L=e.slice(W+1,80).indexOf('"');if(L===-1)return null;let ae=W+1+L;return e.slice(W+1,ae)}function ko(e,l){return{kind:bo,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",l]],content:""}}async function Ao(){return new Promise(e=>{const l=new MessageChannel,v=()=>{l.port1.removeEventListener("message",v),e()};l.port1.addEventListener("message",v),l.port2.postMessage(0),l.port1.start()})}var So=e=>(e[br]=!0,!0),Ci=class{constructor(e,l){St(this,"url");St(this,"_connected",!1);St(this,"onclose",null);St(this,"onnotice",e=>console.debug(`NOTICE from ${this.url}: ${e}`));St(this,"_onauth",null);St(this,"baseEoseTimeout",4400);St(this,"connectionTimeout",4400);St(this,"publishTimeout",4400);St(this,"openSubs",new Map);St(this,"connectionTimeoutHandle");St(this,"connectionPromise");St(this,"openCountRequests",new Map);St(this,"openEventPublishes",new Map);St(this,"ws");St(this,"incomingMessageQueue",new po);St(this,"queueRunning",!1);St(this,"challenge");St(this,"serial",0);St(this,"verifyEvent");St(this,"_WebSocket");this.url=zr(e),this.verifyEvent=l.verifyEvent,this._WebSocket=l.websocketImplementation||WebSocket}static async connect(e,l){const v=new Ci(e,l);return await v.connect(),v}closeAllSubscriptions(e){for(let[l,v]of this.openSubs)v.close(e);this.openSubs.clear();for(let[l,v]of this.openEventPublishes)v.reject(new Error(e));this.openEventPublishes.clear();for(let[l,v]of this.openCountRequests)v.reject(new Error(e));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((e,l)=>{this.connectionTimeoutHandle=setTimeout(()=>{var v;l("connection timed out"),this.connectionPromise=void 0,(v=this.onclose)==null||v.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new this._WebSocket(this.url)}catch(v){l(v);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,e()},this.ws.onerror=v=>{var W;l(v.message||"websocket error"),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(W=this.onclose)==null||W.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var v;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(v=this.onclose)==null||v.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await Ao();this.queueRunning=!1}handleNext(){var v,W,L;const e=this.incomingMessageQueue.dequeue();if(!e)return!1;const l=Eo(e);if(l){const ae=this.openSubs.get(l);if(!ae)return;const te=xo(e,"id"),le=(v=ae.alreadyHaveEvent)==null?void 0:v.call(ae,te);if((W=ae.receivedEvent)==null||W.call(ae,this,te),le)return}try{let ae=JSON.parse(e);switch(ae[0]){case"EVENT":{const te=this.openSubs.get(ae[1]),le=ae[2];this.verifyEvent(le)&&wo(te.filters,le)&&te.onevent(le);return}case"COUNT":{const te=ae[1],le=ae[2],ne=this.openCountRequests.get(te);ne&&(ne.resolve(le.count),this.openCountRequests.delete(te));return}case"EOSE":{const te=this.openSubs.get(ae[1]);if(!te)return;te.receivedEose();return}case"OK":{const te=ae[1],le=ae[2],ne=ae[3],P=this.openEventPublishes.get(te);P&&(le?P.resolve(ne):P.reject(new Error(ne)),this.openEventPublishes.delete(te));return}case"CLOSED":{const te=ae[1],le=this.openSubs.get(te);if(!le)return;le.closed=!0,le.close(ae[2]);return}case"NOTICE":this.onnotice(ae[1]);return;case"AUTH":{this.challenge=ae[1],(L=this._onauth)==null||L.call(this,ae[1]);return}}}catch{return}}async send(e){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var l;(l=this.ws)==null||l.send(e)})}async auth(e){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");const l=await e(ko(this.url,this.challenge)),v=new Promise((W,L)=>{this.openEventPublishes.set(l.id,{resolve:W,reject:L})});return this.send('["AUTH",'+JSON.stringify(l)+"]"),v}async publish(e){const l=new Promise((v,W)=>{this.openEventPublishes.set(e.id,{resolve:v,reject:W})});return this.send('["EVENT",'+JSON.stringify(e)+"]"),setTimeout(()=>{const v=this.openEventPublishes.get(e.id);v&&(v.reject(new Error("publish timed out")),this.openEventPublishes.delete(e.id))},this.publishTimeout),l}async count(e,l){this.serial++;const v=(l==null?void 0:l.id)||"count:"+this.serial,W=new Promise((L,ae)=>{this.openCountRequests.set(v,{resolve:L,reject:ae})});return this.send('["COUNT","'+v+'",'+JSON.stringify(e).substring(1)),W}subscribe(e,l){const v=this.prepareSubscription(e,l);return v.fire(),v}prepareSubscription(e,l){this.serial++;const v=l.id||"sub:"+this.serial,W=new Co(this,v,e,l);return this.openSubs.set(v,W),W}close(){var e;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(e=this.ws)==null||e.close()}_onmessage(e){this.incomingMessageQueue.enqueue(e.data),this.queueRunning||this.runQueue()}},Co=class{constructor(e,l,v,W){St(this,"relay");St(this,"id");St(this,"closed",!1);St(this,"eosed",!1);St(this,"filters");St(this,"alreadyHaveEvent");St(this,"receivedEvent");St(this,"onevent");St(this,"oneose");St(this,"onclose");St(this,"eoseTimeout");St(this,"eoseTimeoutHandle");this.relay=e,this.filters=v,this.id=l,this.alreadyHaveEvent=W.alreadyHaveEvent,this.receivedEvent=W.receivedEvent,this.eoseTimeout=W.eoseTimeout||e.baseEoseTimeout,this.oneose=W.oneose,this.onclose=W.onclose,this.onevent=W.onevent||(L=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,L)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var e;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(e=this.oneose)==null||e.call(this))}close(e="closed by caller"){var l;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(l=this.onclose)==null||l.call(this,e)}},Io=class{constructor(e){St(this,"relays",new Map);St(this,"seenOn",new Map);St(this,"trackRelays",!1);St(this,"verifyEvent");St(this,"trustedRelayURLs",new Set);St(this,"_WebSocket");this.verifyEvent=e.verifyEvent,this._WebSocket=e.websocketImplementation}async ensureRelay(e,l){e=zr(e);let v=this.relays.get(e);return v||(v=new Ci(e,{verifyEvent:this.trustedRelayURLs.has(e)?So:this.verifyEvent,websocketImplementation:this._WebSocket}),l!=null&&l.connectionTimeout&&(v.connectionTimeout=l.connectionTimeout),this.relays.set(e,v)),await v.connect(),v}close(e){e.map(zr).forEach(l=>{var v;(v=this.relays.get(l))==null||v.close()})}subscribeMany(e,l,v){return this.subscribeManyMap(Object.fromEntries(e.map(W=>[W,l])),v)}subscribeManyMap(e,l){this.trackRelays&&(l.receivedEvent=(me,Se)=>{let Le=this.seenOn.get(Se);Le||(Le=new Set,this.seenOn.set(Se,Le)),Le.add(me)});const v=new Set,W=[],L=Object.keys(e).length,ae=[];let te=me=>{var Se;ae[me]=!0,ae.filter(Le=>Le).length===L&&((Se=l.oneose)==null||Se.call(l),te=()=>{})};const le=[];let ne=(me,Se)=>{var Le;te(me),le[me]=Se,le.filter(je=>je).length===L&&((Le=l.onclose)==null||Le.call(l,le),ne=()=>{})};const P=me=>{var Le;if((Le=l.alreadyHaveEvent)!=null&&Le.call(l,me))return!0;const Se=v.has(me);return v.add(me),Se},oe=Promise.all(Object.entries(e).map(async(me,Se,Le)=>{if(Le.indexOf(me)!==Se){ne(Se,"duplicate url");return}let[je,xe]=me;je=zr(je);let O;try{O=await this.ensureRelay(je,{connectionTimeout:l.maxWait?Math.max(l.maxWait*.8,l.maxWait-1e3):void 0})}catch(We){ne(Se,(We==null?void 0:We.message)||String(We));return}let Ie=O.subscribe(xe,{...l,oneose:()=>te(Se),onclose:We=>ne(Se,We),alreadyHaveEvent:P,eoseTimeout:l.maxWait});W.push(Ie)}));return{async close(){await oe,W.forEach(me=>{me.close()})}}}subscribeManyEose(e,l,v){const W=this.subscribeMany(e,l,{...v,oneose(){W.close()}});return W}async querySync(e,l,v){return new Promise(async W=>{const L=[];this.subscribeManyEose(e,[l],{...v,onevent(ae){L.push(ae)},onclose(ae){W(L)}})})}async get(e,l,v){l.limit=1;const W=await this.querySync(e,l,v);return W.sort((L,ae)=>ae.created_at-L.created_at),W[0]||null}publish(e,l){return e.map(zr).map(async(v,W,L)=>{if(L.indexOf(v)!==W)return Promise.reject("duplicate url");let ae=await this.ensureRelay(v);return ae.publish(l).then(te=>{if(this.trackRelays){let le=this.seenOn.get(l.id);le||(le=new Set,this.seenOn.set(l.id,le)),le.add(ae)}return te})})}listConnectionStatus(){const e=new Map;return this.relays.forEach((l,v)=>e.set(v,l.connected)),e}destroy(){this.relays.forEach(e=>e.close()),this.relays=new Map}},Ii;try{Ii=WebSocket}catch{}var Ro=class extends Io{constructor(){super({verifyEvent:vo,websocketImplementation:Ii})}};/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Tr(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function ur(...e){const l=(L,ae)=>te=>L(ae(te)),v=Array.from(e).reverse().reduce((L,ae)=>L?l(L,ae.encode):ae.encode,void 0),W=e.reduce((L,ae)=>L?l(L,ae.decode):ae.decode,void 0);return{encode:v,decode:W}}function cr(e){return{encode:l=>{if(!Array.isArray(l)||l.length&&typeof l[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return l.map(v=>{if(Tr(v),v<0||v>=e.length)throw new Error(`Digit index outside alphabet: ${v} (alphabet: ${e.length})`);return e[v]})},decode:l=>{if(!Array.isArray(l)||l.length&&typeof l[0]!="string")throw new Error("alphabet.decode input should be array of strings");return l.map(v=>{if(typeof v!="string")throw new Error(`alphabet.decode: not string element=${v}`);const W=e.indexOf(v);if(W===-1)throw new Error(`Unknown letter: "${v}". Allowed: ${e}`);return W})}}}function fr(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:l=>{if(!Array.isArray(l)||l.length&&typeof l[0]!="string")throw new Error("join.encode input should be array of strings");for(let v of l)if(typeof v!="string")throw new Error(`join.encode: non-string input=${v}`);return l.join(e)},decode:l=>{if(typeof l!="string")throw new Error("join.decode input should be string");return l.split(e)}}}function en(e,l="="){if(Tr(e),typeof l!="string")throw new Error("padding chr should be string");return{encode(v){if(!Array.isArray(v)||v.length&&typeof v[0]!="string")throw new Error("padding.encode input should be array of strings");for(let W of v)if(typeof W!="string")throw new Error(`padding.encode: non-string input=${W}`);for(;v.length*e%8;)v.push(l);return v},decode(v){if(!Array.isArray(v)||v.length&&typeof v[0]!="string")throw new Error("padding.encode input should be array of strings");for(let L of v)if(typeof L!="string")throw new Error(`padding.decode: non-string input=${L}`);let W=v.length;if(W*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;W>0&&v[W-1]===l;W--)if(!((W-1)*e%8))throw new Error("Invalid padding: string has too much padding");return v.slice(0,W)}}}function Ri(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:l=>l,decode:l=>e(l)}}function Wn(e,l,v){if(l<2)throw new Error(`convertRadix: wrong from=${l}, base cannot be less than 2`);if(v<2)throw new Error(`convertRadix: wrong to=${v}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let W=0;const L=[],ae=Array.from(e);for(ae.forEach(te=>{if(Tr(te),te<0||te>=l)throw new Error(`Wrong integer: ${te}`)});;){let te=0,le=!0;for(let ne=W;ne<ae.length;ne++){const P=ae[ne],oe=l*te+P;if(!Number.isSafeInteger(oe)||l*te/l!==te||oe-P!==l*te)throw new Error("convertRadix: carry overflow");if(te=oe%v,ae[ne]=Math.floor(oe/v),!Number.isSafeInteger(ae[ne])||ae[ne]*v+te!==oe)throw new Error("convertRadix: carry overflow");if(le)ae[ne]?le=!1:W=ne;else continue}if(L.push(te),le)break}for(let te=0;te<e.length-1&&e[te]===0;te++)L.push(0);return L.reverse()}const qi=(e,l)=>l?qi(l,e%l):e,Wr=(e,l)=>e+(l-qi(e,l));function xn(e,l,v,W){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(l<=0||l>32)throw new Error(`convertRadix2: wrong from=${l}`);if(v<=0||v>32)throw new Error(`convertRadix2: wrong to=${v}`);if(Wr(l,v)>32)throw new Error(`convertRadix2: carry overflow from=${l} to=${v} carryBits=${Wr(l,v)}`);let L=0,ae=0;const te=2**v-1,le=[];for(const ne of e){if(Tr(ne),ne>=2**l)throw new Error(`convertRadix2: invalid data word=${ne} from=${l}`);if(L=L<<l|ne,ae+l>32)throw new Error(`convertRadix2: carry overflow pos=${ae} from=${l}`);for(ae+=l;ae>=v;ae-=v)le.push((L>>ae-v&te)>>>0);L&=2**ae-1}if(L=L<<v-ae&te,!W&&ae>=l)throw new Error("Excess padding");if(!W&&L)throw new Error(`Non-zero padding: ${L}`);return W&&ae>0&&le.push(L>>>0),le}function qo(e){return Tr(e),{encode:l=>{if(!(l instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return Wn(Array.from(l),2**8,e)},decode:l=>{if(!Array.isArray(l)||l.length&&typeof l[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(Wn(l,e,2**8))}}}function mr(e,l=!1){if(Tr(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(Wr(8,e)>32||Wr(e,8)>32)throw new Error("radix2: carry overflow");return{encode:v=>{if(!(v instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return xn(Array.from(v),8,e,!l)},decode:v=>{if(!Array.isArray(v)||v.length&&typeof v[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(xn(v,e,8,l))}}}function Gn(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...l){try{return e.apply(null,l)}catch{}}}const To=ur(mr(4),cr("0123456789ABCDEF"),fr("")),Bo=ur(mr(5),cr("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),en(5),fr(""));ur(mr(5),cr("0123456789ABCDEFGHIJKLMNOPQRSTUV"),en(5),fr(""));ur(mr(5),cr("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),fr(""),Ri(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const Fo=ur(mr(6),cr("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),en(6),fr("")),zo=ur(mr(6),cr("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),en(6),fr("")),zn=e=>ur(qo(58),cr(e),fr("")),En=zn("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");zn("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");zn("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const Vn=[0,2,3,5,6,7,9,10,11],No={encode(e){let l="";for(let v=0;v<e.length;v+=8){const W=e.subarray(v,v+8);l+=En.encode(W).padStart(Vn[W.length],"1")}return l},decode(e){let l=[];for(let v=0;v<e.length;v+=11){const W=e.slice(v,v+11),L=Vn.indexOf(W.length),ae=En.decode(W);for(let te=0;te<ae.length-L;te++)if(ae[te]!==0)throw new Error("base58xmr: wrong padding");l=l.concat(Array.from(ae.slice(ae.length-L)))}return Uint8Array.from(l)}},kn=ur(cr("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),fr("")),Xn=[996825010,642813549,513874426,1027748829,705979059];function Fr(e){const l=e>>25;let v=(e&33554431)<<5;for(let W=0;W<Xn.length;W++)(l>>W&1)===1&&(v^=Xn[W]);return v}function Zn(e,l,v=1){const W=e.length;let L=1;for(let ae=0;ae<W;ae++){const te=e.charCodeAt(ae);if(te<33||te>126)throw new Error(`Invalid prefix (${e})`);L=Fr(L)^te>>5}L=Fr(L);for(let ae=0;ae<W;ae++)L=Fr(L)^e.charCodeAt(ae)&31;for(let ae of l)L=Fr(L)^ae;for(let ae=0;ae<6;ae++)L=Fr(L);return L^=v,kn.encode(xn([L%2**30],30,5,!1))}function Ti(e){const l=e==="bech32"?1:734539939,v=mr(5),W=v.decode,L=v.encode,ae=Gn(W);function te(oe,me,Se=90){if(typeof oe!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof oe}`);if(!Array.isArray(me)||me.length&&typeof me[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof me}`);const Le=oe.length+7+me.length;if(Se!==!1&&Le>Se)throw new TypeError(`Length ${Le} exceeds limit ${Se}`);return oe=oe.toLowerCase(),`${oe}1${kn.encode(me)}${Zn(oe,me,l)}`}function le(oe,me=90){if(typeof oe!="string")throw new Error(`bech32.decode input should be string, not ${typeof oe}`);if(oe.length<8||me!==!1&&oe.length>me)throw new TypeError(`Wrong string length: ${oe.length} (${oe}). Expected (8..${me})`);const Se=oe.toLowerCase();if(oe!==Se&&oe!==oe.toUpperCase())throw new Error("String must be lowercase or uppercase");oe=Se;const Le=oe.lastIndexOf("1");if(Le===0||Le===-1)throw new Error('Letter "1" must be present between prefix and data only');const je=oe.slice(0,Le),xe=oe.slice(Le+1);if(xe.length<6)throw new Error("Data must be at least 6 characters long");const O=kn.decode(xe).slice(0,-6),Ie=Zn(je,O,l);if(!xe.endsWith(Ie))throw new Error(`Invalid checksum in ${oe}: expected "${Ie}"`);return{prefix:je,words:O}}const ne=Gn(le);function P(oe){const{prefix:me,words:Se}=le(oe,!1);return{prefix:me,words:Se,bytes:W(Se)}}return{encode:te,decode:le,decodeToBytes:P,decodeUnsafe:ne,fromWords:W,fromWordsUnsafe:ae,toWords:L}}const Jn=Ti("bech32");Ti("bech32m");const Lo={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},Do=ur(mr(4),cr("0123456789abcdef"),fr(""),Ri(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),Mo={utf8:Lo,hex:Do,base16:To,base32:Bo,base64:Fo,base64url:zo,base58:En,base58xmr:No};`${Object.keys(Mo).join(", ")}`;var Mr=new TextDecoder("utf-8");new TextEncoder;var Po=5e3;function Uo(e){var L,ae,te,le,ne,P,oe;let{prefix:l,words:v}=Jn.decode(e,Po),W=new Uint8Array(Jn.fromWords(v));switch(l){case"nprofile":{let me=_n(W);if(!((L=me[0])!=null&&L[0]))throw new Error("missing TLV 0 for nprofile");if(me[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:er(me[0][0]),relays:me[1]?me[1].map(Se=>Mr.decode(Se)):[]}}}case"nevent":{let me=_n(W);if(!((ae=me[0])!=null&&ae[0]))throw new Error("missing TLV 0 for nevent");if(me[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(me[2]&&me[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(me[3]&&me[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:er(me[0][0]),relays:me[1]?me[1].map(Se=>Mr.decode(Se)):[],author:(te=me[2])!=null&&te[0]?er(me[2][0]):void 0,kind:(le=me[3])!=null&&le[0]?parseInt(er(me[3][0]),16):void 0}}}case"naddr":{let me=_n(W);if(!((ne=me[0])!=null&&ne[0]))throw new Error("missing TLV 0 for naddr");if(!((P=me[2])!=null&&P[0]))throw new Error("missing TLV 2 for naddr");if(me[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((oe=me[3])!=null&&oe[0]))throw new Error("missing TLV 3 for naddr");if(me[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:Mr.decode(me[0][0]),pubkey:er(me[2][0]),kind:parseInt(er(me[3][0]),16),relays:me[1]?me[1].map(Se=>Mr.decode(Se)):[]}}}case"nsec":return{type:l,data:W};case"npub":case"note":return{type:l,data:er(W)};default:throw new Error(`unknown prefix ${l}`)}}function _n(e){let l={},v=e;for(;v.length>0;){let W=v[0],L=v[1],ae=v.slice(2,2+L);if(v=v.slice(2+L),ae.length<L)throw new Error(`not enough data to read on TLV ${W}`);l[W]=l[W]||[],l[W].push(ae)}return l}var Bi={};(function(e){/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.bytes=e.stringToBytes=e.str=e.bytesToString=e.hex=e.utf8=e.bech32m=e.bech32=e.base58check=e.createBase58check=e.base58xmr=e.base58xrp=e.base58flickr=e.base58=e.base64urlnopad=e.base64url=e.base64nopad=e.base64=e.base32crockford=e.base32hexnopad=e.base32hex=e.base32nopad=e.base32=e.base16=e.utils=void 0,e.assertNumber=l;function l(p){if(!Number.isSafeInteger(p))throw new Error(`Wrong integer: ${p}`)}function v(p){return p instanceof Uint8Array||p!=null&&typeof p=="object"&&p.constructor.name==="Uint8Array"}function W(...p){const ee=Ee=>Ee,q=(Ee,re)=>U=>Ee(re(U)),j=p.map(Ee=>Ee.encode).reduceRight(q,ee),F=p.map(Ee=>Ee.decode).reduce(q,ee);return{encode:j,decode:F}}function L(p){return{encode:ee=>{if(!Array.isArray(ee)||ee.length&&typeof ee[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return ee.map(q=>{if(q<0||q>=p.length)throw new Error(`Digit index outside alphabet: ${q} (alphabet: ${p.length})`);return p[q]})},decode:ee=>{if(!Array.isArray(ee)||ee.length&&typeof ee[0]!="string")throw new Error("alphabet.decode input should be array of strings");return ee.map(q=>{if(typeof q!="string")throw new Error(`alphabet.decode: not string element=${q}`);const j=p.indexOf(q);if(j===-1)throw new Error(`Unknown letter: "${q}". Allowed: ${p}`);return j})}}}function ae(p=""){if(typeof p!="string")throw new Error("join separator should be string");return{encode:ee=>{if(!Array.isArray(ee)||ee.length&&typeof ee[0]!="string")throw new Error("join.encode input should be array of strings");for(let q of ee)if(typeof q!="string")throw new Error(`join.encode: non-string input=${q}`);return ee.join(p)},decode:ee=>{if(typeof ee!="string")throw new Error("join.decode input should be string");return ee.split(p)}}}function te(p,ee="="){if(typeof ee!="string")throw new Error("padding chr should be string");return{encode(q){if(!Array.isArray(q)||q.length&&typeof q[0]!="string")throw new Error("padding.encode input should be array of strings");for(let j of q)if(typeof j!="string")throw new Error(`padding.encode: non-string input=${j}`);for(;q.length*p%8;)q.push(ee);return q},decode(q){if(!Array.isArray(q)||q.length&&typeof q[0]!="string")throw new Error("padding.encode input should be array of strings");for(let F of q)if(typeof F!="string")throw new Error(`padding.decode: non-string input=${F}`);let j=q.length;if(j*p%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;j>0&&q[j-1]===ee;j--)if(!((j-1)*p%8))throw new Error("Invalid padding: string has too much padding");return q.slice(0,j)}}}function le(p){if(typeof p!="function")throw new Error("normalize fn should be function");return{encode:ee=>ee,decode:ee=>p(ee)}}function ne(p,ee,q){if(ee<2)throw new Error(`convertRadix: wrong from=${ee}, base cannot be less than 2`);if(q<2)throw new Error(`convertRadix: wrong to=${q}, base cannot be less than 2`);if(!Array.isArray(p))throw new Error("convertRadix: data should be array");if(!p.length)return[];let j=0;const F=[],Ee=Array.from(p);for(Ee.forEach(re=>{if(re<0||re>=ee)throw new Error(`Wrong integer: ${re}`)});;){let re=0,U=!0;for(let m=j;m<Ee.length;m++){const s=Ee[m],n=ee*re+s;if(!Number.isSafeInteger(n)||ee*re/ee!==re||n-s!==ee*re)throw new Error("convertRadix: carry overflow");re=n%q;const i=Math.floor(n/q);if(Ee[m]=i,!Number.isSafeInteger(i)||i*q+re!==n)throw new Error("convertRadix: carry overflow");if(U)i?U=!1:j=m;else continue}if(F.push(re),U)break}for(let re=0;re<p.length-1&&p[re]===0;re++)F.push(0);return F.reverse()}const P=(p,ee)=>ee?P(ee,p%ee):p,oe=(p,ee)=>p+(ee-P(p,ee));function me(p,ee,q,j){if(!Array.isArray(p))throw new Error("convertRadix2: data should be array");if(ee<=0||ee>32)throw new Error(`convertRadix2: wrong from=${ee}`);if(q<=0||q>32)throw new Error(`convertRadix2: wrong to=${q}`);if(oe(ee,q)>32)throw new Error(`convertRadix2: carry overflow from=${ee} to=${q} carryBits=${oe(ee,q)}`);let F=0,Ee=0;const re=2**q-1,U=[];for(const m of p){if(m>=2**ee)throw new Error(`convertRadix2: invalid data word=${m} from=${ee}`);if(F=F<<ee|m,Ee+ee>32)throw new Error(`convertRadix2: carry overflow pos=${Ee} from=${ee}`);for(Ee+=ee;Ee>=q;Ee-=q)U.push((F>>Ee-q&re)>>>0);F&=2**Ee-1}if(F=F<<q-Ee&re,!j&&Ee>=ee)throw new Error("Excess padding");if(!j&&F)throw new Error(`Non-zero padding: ${F}`);return j&&Ee>0&&U.push(F>>>0),U}function Se(p){return{encode:ee=>{if(!v(ee))throw new Error("radix.encode input should be Uint8Array");return ne(Array.from(ee),2**8,p)},decode:ee=>{if(!Array.isArray(ee)||ee.length&&typeof ee[0]!="number")throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(ne(ee,p,2**8))}}}function Le(p,ee=!1){if(p<=0||p>32)throw new Error("radix2: bits should be in (0..32]");if(oe(8,p)>32||oe(p,8)>32)throw new Error("radix2: carry overflow");return{encode:q=>{if(!v(q))throw new Error("radix2.encode input should be Uint8Array");return me(Array.from(q),8,p,!ee)},decode:q=>{if(!Array.isArray(q)||q.length&&typeof q[0]!="number")throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(me(q,p,8,ee))}}}function je(p){if(typeof p!="function")throw new Error("unsafeWrapper fn should be function");return function(...ee){try{return p.apply(null,ee)}catch{}}}function xe(p,ee){if(typeof ee!="function")throw new Error("checksum fn should be function");return{encode(q){if(!v(q))throw new Error("checksum.encode: input should be Uint8Array");const j=ee(q).slice(0,p),F=new Uint8Array(q.length+p);return F.set(q),F.set(j,q.length),F},decode(q){if(!v(q))throw new Error("checksum.decode: input should be Uint8Array");const j=q.slice(0,-p),F=ee(j).slice(0,p),Ee=q.slice(-p);for(let re=0;re<p;re++)if(F[re]!==Ee[re])throw new Error("Invalid checksum");return j}}}e.utils={alphabet:L,chain:W,checksum:xe,convertRadix:ne,convertRadix2:me,radix:Se,radix2:Le,join:ae,padding:te},e.base16=W(Le(4),L("0123456789ABCDEF"),ae("")),e.base32=W(Le(5),L("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),te(5),ae("")),e.base32nopad=W(Le(5),L("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),ae("")),e.base32hex=W(Le(5),L("0123456789ABCDEFGHIJKLMNOPQRSTUV"),te(5),ae("")),e.base32hexnopad=W(Le(5),L("0123456789ABCDEFGHIJKLMNOPQRSTUV"),ae("")),e.base32crockford=W(Le(5),L("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),ae(""),le(p=>p.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),e.base64=W(Le(6),L("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),te(6),ae("")),e.base64nopad=W(Le(6),L("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),ae("")),e.base64url=W(Le(6),L("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),te(6),ae("")),e.base64urlnopad=W(Le(6),L("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),ae(""));const O=p=>W(Se(58),L(p),ae(""));e.base58=O("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),e.base58flickr=O("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),e.base58xrp=O("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const Ie=[0,2,3,5,6,7,9,10,11];e.base58xmr={encode(p){let ee="";for(let q=0;q<p.length;q+=8){const j=p.subarray(q,q+8);ee+=e.base58.encode(j).padStart(Ie[j.length],"1")}return ee},decode(p){let ee=[];for(let q=0;q<p.length;q+=11){const j=p.slice(q,q+11),F=Ie.indexOf(j.length),Ee=e.base58.decode(j);for(let re=0;re<Ee.length-F;re++)if(Ee[re]!==0)throw new Error("base58xmr: wrong padding");ee=ee.concat(Array.from(Ee.slice(Ee.length-F)))}return Uint8Array.from(ee)}};const We=p=>W(xe(4,ee=>p(p(ee))),e.base58);e.createBase58check=We,e.base58check=e.createBase58check;const Ne=W(L("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),ae("")),Fe=[996825010,642813549,513874426,1027748829,705979059];function _e(p){const ee=p>>25;let q=(p&33554431)<<5;for(let j=0;j<Fe.length;j++)(ee>>j&1)===1&&(q^=Fe[j]);return q}function ye(p,ee,q=1){const j=p.length;let F=1;for(let Ee=0;Ee<j;Ee++){const re=p.charCodeAt(Ee);if(re<33||re>126)throw new Error(`Invalid prefix (${p})`);F=_e(F)^re>>5}F=_e(F);for(let Ee=0;Ee<j;Ee++)F=_e(F)^p.charCodeAt(Ee)&31;for(let Ee of ee)F=_e(F)^Ee;for(let Ee=0;Ee<6;Ee++)F=_e(F);return F^=q,Ne.encode(me([F%2**30],30,5,!1))}function de(p){const ee=p==="bech32"?1:734539939,q=Le(5),j=q.decode,F=q.encode,Ee=je(j);function re(i,o,c=90){if(typeof i!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof i}`);if(o instanceof Uint8Array&&(o=Array.from(o)),!Array.isArray(o)||o.length&&typeof o[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof o}`);if(i.length===0)throw new TypeError(`Invalid prefix length ${i.length}`);const x=i.length+7+o.length;if(c!==!1&&x>c)throw new TypeError(`Length ${x} exceeds limit ${c}`);const S=i.toLowerCase(),G=ye(S,o,ee);return`${S}1${Ne.encode(o)}${G}`}function U(i,o=90){if(typeof i!="string")throw new Error(`bech32.decode input should be string, not ${typeof i}`);if(i.length<8||o!==!1&&i.length>o)throw new TypeError(`Wrong string length: ${i.length} (${i}). Expected (8..${o})`);const c=i.toLowerCase();if(i!==c&&i!==i.toUpperCase())throw new Error("String must be lowercase or uppercase");const x=c.lastIndexOf("1");if(x===0||x===-1)throw new Error('Letter "1" must be present between prefix and data only');const S=c.slice(0,x),G=c.slice(x+1);if(G.length<6)throw new Error("Data must be at least 6 characters long");const qe=Ne.decode(G).slice(0,-6),Je=ye(S,qe,ee);if(!G.endsWith(Je))throw new Error(`Invalid checksum in ${i}: expected "${Je}"`);return{prefix:S,words:qe}}const m=je(U);function s(i){const{prefix:o,words:c}=U(i,!1);return{prefix:o,words:c,bytes:j(c)}}function n(i,o){return re(i,F(o))}return{encode:re,decode:U,encodeFromBytes:n,decodeToBytes:s,decodeUnsafe:m,fromWords:j,fromWordsUnsafe:Ee,toWords:F}}e.bech32=de("bech32"),e.bech32m=de("bech32m"),e.utf8={encode:p=>new TextDecoder().decode(p),decode:p=>new TextEncoder().encode(p)},e.hex=W(Le(4),L("0123456789abcdef"),ae(""),le(p=>{if(typeof p!="string"||p.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof p} with length ${p.length}`);return p.toLowerCase()}));const ze={utf8:e.utf8,hex:e.hex,base16:e.base16,base32:e.base32,base64:e.base64,base64url:e.base64url,base58:e.base58,base58xmr:e.base58xmr},fe="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr",ke=(p,ee)=>{if(typeof p!="string"||!ze.hasOwnProperty(p))throw new TypeError(fe);if(!v(ee))throw new TypeError("bytesToString() expects Uint8Array");return ze[p].encode(ee)};e.bytesToString=ke,e.str=e.bytesToString;const ie=(p,ee)=>{if(!ze.hasOwnProperty(p))throw new TypeError(fe);if(typeof ee!="string")throw new TypeError("stringToBytes() expects string");return ze[p].decode(ee)};e.stringToBytes=ie,e.bytes=e.stringToBytes})(Bi);const Fi=(e,l={})=>{const v=e[0],W=e[1],L=e.slice(2,2+W),ae=l[v]??[],te={...l,[v]:[...ae,L]},le=e.slice(2+W);return le.length>0?Fi(le,te):te},Ho=e=>new Uint8Array(Object.entries(e).map(([l,v])=>v.map(W=>{const L=W.length,ae=new Uint8Array(2+L);return ae.set([parseInt(l)],0),ae.set([L],1),ae.set(W,2),ae})).flat().reduce((l,v)=>[...l,...v],[]));var jo={decodeTlv:Fi,encodeTlv:Ho};const{bech32:Gr}=Bi,{decodeTlv:Yo,encodeTlv:Ko}=jo,Wo=e=>{var L;const l=Gr.decode(e,1e3).words,v=new Uint8Array(Gr.fromWords(l)),W=Yo(v);return{kinds:(L=W[3])==null?void 0:L.map(ae=>parseInt(Ur.from(ae.reverse()).toString("hex"),16)),...W[5]?W[5].reduce((ae,te)=>{const le=new TextDecoder().decode(te),ne=`#${le[0]}`,P=le.slice(1),oe=ae[ne]??[];return{...ae,[ne]:[...oe,P]}},{}):{}}},Go=e=>{const l={3:e.kinds?e.kinds.map(L=>new Uint8Array([L&255,L>>8&255,L>>16&255,L>>24&255])):[],5:Object.keys(e).filter(L=>L.startsWith("#")).map(L=>e[L].map(ae=>new TextEncoder().encode(L[1]+ae))).flat()},v=Ko(l),W=Gr.toWords(v);return Gr.encode("nreq",W,1e3)};var zi={decode:Wo,encode:Go};const Vo=["wss://nos.lol","wss://nostr.bitcoiner.social","wss://nostr.mom","wss://relay.damus.io","wss://relay.nostr.bg"],Xo=({type:e,data:l})=>e==="nevent"?{ids:[l.id]}:{kinds:[l.kind],authors:[l.pubkey],"#d":[l.identifier]},Nn=(e,l)=>{var v;return((v=document.querySelector(`meta[name='${e}']`))==null?void 0:v.getAttribute("content"))||l},Zo=e=>e.trim().toLowerCase().replace(/\W/g,"-"),Ni=async()=>{const e=new Ro,l=location.hash.substring(1),v=l.startsWith("nreq")?zi.decode(l):Xo(Uo(l)),W=await e.get(Oo,v),L=ns(),ae=Qo(W.content);document.body.innerHTML=L.convert(ae)},Jo=()=>{document.body.style.marginLeft="auto",document.body.style.marginRight="auto",document.body.style.maxWidth="800px"},Qo=e=>e.replace(/\[\[(.*?)\]\]/g,(l,v)=>{const[W,L]=v.split("|"),ae=L||W,te=Zo(W),le=zi.encode({kinds:[30818],"#d":[te]});return`link:${t$}${le}[${ae}]`}),Oo=Nn("relays",Vo),e$=Nn("usage")!=="false",t$=Nn("wikilink-prefix","#");window.addEventListener("hashchange",Ni);!location.hash&&e$?document.body.innerHTML=`<p>
     usage:
     <code
       >https://asaitoshiya.github.io/nostr-toybox/wiki-article/dist/#&lt;nip-19-code&gt;</code
     >
   </p>`:Jo()||Ni();</script>
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
